<!--<!DOCTYPE html>
<html>
<head>
  <title>Ø§Ø³Ú©Ù† QR Ø¨Ø§ CDN</title>
  <script src="./html5-qrcode.min.js"></script>
</head>
<body>

<h3>Ø§Ø³Ú©Ù† QR Code Ø¨Ø§ Ø¯ÙˆØ±Ø¨ÛŒÙ†</h3>

<input type="file" id="file-input" accept="image/*" />
<div id="reader"></div>
<script>
  const qr = new Html5Qrcode("reader");
  document.getElementById("file-input").addEventListener("change", e => {
    if (e.target.files.length === 0) return;
    qr.scanFile(e.target.files[0], true)
            .then(decodedText => {
              console.log("Ù…Ø­ØªÙˆØ§ÛŒ QR:", decodedText);
            })
            .catch(err => {
              console.error("Ø®Ø·Ø§ Ø¯Ø± Ø§Ø³Ú©Ù† ÙØ§ÛŒÙ„:", err);
            });
  });
</script>






<script>


  const scanner = new Html5QrcodeScanner("reader", { fps: 10, qrbox: 250 });
  scanner.render(
          decodedText => {
            document.getElementById("result").innerText = "Ù…Ø­ØªÙˆØ§ÛŒ QR: " + decodedText;
            scanner.clear();
          },
          error => {
            // Ø®Ø·Ø§Ù‡Ø§ÛŒ Ø§Ø³Ú©Ù† Ø±Ø§ Ø³Ø±Ú©ÙˆØ¨ Ú©Ù†
          }
  );

</script>

</body>
</html>-->
<!DOCTYPE html>
<html lang="fa">
<head>
  <meta charset="UTF-8">
  <title>Ø¢Ù¾Ù„ÙˆØ¯ Ùˆ Ø®ÙˆØ§Ù†Ø¯Ù† QR Code</title>
  <style>
    #drop-area {
      border: 2px dashed #ccc;
      padding: 30px;
      text-align: center;
      color: #666;
      margin-bottom: 20px;
      border-radius: 10px;
      cursor: pointer;
    }
    #drop-area.hover {
      border-color: #333;
      background: #f0f0f0;
    }
    #file-input {
      display: none;
    }
    #result {
      font-family: monospace;
      color: green;
      margin-top: 10px;
    }
  </style>
 <!-- <script src="./html5-qrcode.min.js"></script>-->
</head>
<body>

<h2>Ø¢Ù¾Ù„ÙˆØ¯ ÛŒØ§ Ø¯Ø±Ú¯ Ú©Ù† QR Code</h2>

<div id="drop-area"
     ondragover="event.preventDefault()"
     ondragenter="event.preventDefault(); this.classList.add('hover')"
     ondragleave="this.classList.remove('hover')"
     ondrop="drag(event)">
  ÙØ§ÛŒÙ„ Ø±Ùˆ Ø¨Ú©Ø´ Ø§ÛŒÙ†Ø¬Ø§
</div>

<!--<div id="drop-area" ondrag="drag()">ÙØ§ÛŒÙ„ QR Ø±Ø§ Ø¨Ú©Ø´ Ùˆ Ø±Ù‡Ø§ Ú©Ù† ÛŒØ§ Ú©Ù„ÛŒÚ© Ú©Ù† Ø¨Ø±Ø§ÛŒ Ø§Ù†ØªØ®Ø§Ø¨</div>-->
<input type="file" id="file-input" accept="image/*">

<div id="result">Ù†ØªÛŒØ¬Ù‡: <span id="qr-result">â€”</span></div>

<script>
  const dropArea = document.getElementById("drop-area");
  const fileInput = document.getElementById("file-input");
  const qrResult = document.getElementById("qr-result");
  //const html5Qr = new Html5Qrcode();

  // ğŸ›¡ Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ø¨Ø§Ø² Ø´Ø¯Ù† ÙØ§ÛŒÙ„ Ø¯Ø± ØªØ¨ Ø¬Ø¯ÛŒØ¯ (Ø¨Ø³ÛŒØ§Ø± Ù…Ù‡Ù…)
  document.addEventListener("dragover", e => e.preventDefault());
  document.addEventListener("drop", e => e.preventDefault());

  // Ø±ÙˆÛŒØ¯Ø§Ø¯Ù‡Ø§ÛŒ Ù…Ø±Ø¨ÙˆØ· Ø¨Ù‡ Ù†Ø§Ø­ÛŒÙ‡ drop
  dropArea.addEventListener("dragenter", e => {
    e.preventDefault();
    dropArea.classList.add("hover");
  });

  dropArea.addEventListener("dragover", e => {
    e.preventDefault();
    dropArea.classList.add("hover");
  });

  dropArea.addEventListener("dragleave", e => {
    e.preventDefault();
    dropArea.classList.remove("hover");
  });

 /* dropArea.addEventListener("drop", e => {
    e.preventDefault();
    dropArea.classList.remove("hover");

    const files = e.dataTransfer.files;

    if (files.length > 0) {
      handleFile(files[0]);
    }
  });*/

  function drag(e){
    console.log(e)
    e.preventDefault();
    dropArea.classList.remove("hover");

    const files = e.dataTransfer.files;

    if (files.length > 0) {
      handleFile(files[0]);
    }
  }


  // Ú©Ù„ÛŒÚ© Ø¨Ø±Ø§ÛŒ Ø§Ù†ØªØ®Ø§Ø¨ ÙØ§ÛŒÙ„
  dropArea.addEventListener("click", () => fileInput.click());

  fileInput.addEventListener("change", () => {
    if (fileInput.files.length > 0) {
      handleFile(fileInput.files[0]);
    }
  });

  function handleFile(file) {
    /*html5Qr.scanFile(file, true)
            .then(decodedText => {
              qrResult.innerText = decodedText;
            })
            .catch(err => {
              qrResult.innerText = "Ø®Ø·Ø§: " + err;
            });*/
  }
</script>

</body>
</html>

