// Name:      Components
// Developer: Mehdi Maarefian
// Version:   0.8
// Date:      12/1/2025
//----------------------------------------------------




if (typeof listComponent === 'undefined') {
    var listComponent = {


        //===============================================================================================================
        // [01 - 10] basic
        //===============================================================================================================
        // [01] text
        ComponentMessages:                   "component-messages" ,                       //01-01
        ComponentIsEmpty:                    "component-is-empty" ,                       //01-02
        ComponentNotify:                     "component-notify" ,                         //01-03
        ComponentHeader:                     "component-header" ,                         //01-04
        ComponentLabel:                      "component-label" ,                          //01-05
        ComponentDescription:                "component-description" ,                    //01-06
        ComponentLink:                       "component-link" ,                           //01-07
        ComponentInfo:                       "component-info" ,                           //01-08
        ComponentCard:                       "component-card" ,                           //01-09
        ComponentCardInfo:                   "component-card-info" ,                      //01-010
        ComponentListSelectedScroller:       "component-list-selected-scroller" ,         //01-011

        // [02] Fetch
        ComponentLoading:                    "component-loading" ,                        //02-01
        Component404:                        "component-404" ,                            //02-02
        ComponentForm:                       "component-form" ,                           //02-03
        ComponentWidget:                     "component-widget" ,                         //02-04
        ComponentIframe:                     "component-iframe" ,                         //02-05

        // [03] progress
        ComponentProgressStepper:            "component-progress-stepper" ,               //03-01



        //===============================================================================================================
        // [10 - 19] button / inputs / tools
        //===============================================================================================================

        // [010] Button and Inputs
        ComponentButton:                     "component-button" ,                         //010-01
        ComponentInput:                      "component-input" ,                          //010-02
        ComponentInputPrice:                 "component-input-price" ,                    //010-03
        ComponentInputEmail:                 "component-input-email" ,                    //010-04
        ComponentInputPassword:              "component-input-password" ,                 //010-05
        ComponentInputFile:                  "component-input-file" ,                     //010-06
        ComponentInputColor:                 "component-input-color" ,                    //010-07
        ComponentInputSize:                  "component-input-size" ,                     //010-08
        ComponentInputAcl:                   "component-input-acl" ,                      //010-09
        ComponentDate:                       "component-date" ,                           //010-010
        ComponentOtp:                        "component-otp" ,                            //010-011
        ComponentSelectOption:               "component-select-option" ,                  //010-012
        ComponentSelectIcon:                 "component-select-icon" ,                    //010-013
        ComponentCheckBox:                   "component-check-box" ,                      //010-014

        // [011] QR CODE
        ComponentQrCode:                     "component-qr-code" ,                        //011-01
        ComponentCameraQrCodeReader:         "component-camera-qr-code-reader" ,          //011-02
        ComponentUploadQrCodeReader:         "component-upload-qr-code-reader" ,          //011-03
        ComponentQrCodeReader:               "component-qr-code-reader" ,                 //011-04

        // [012] Inputs Tools
        ComponentAcceptTerms:                "component-accept-terms" ,                   //012-01
        ComponentSelectColumns:              "component-select-columns" ,                 //012-02
        ComponentValidate:                   "component-validate" ,                       //012-03
        ComponentTooltipDescription:         "component-tooltip-description" ,            //012-04

        // [013] Inputs timer
        ComponentTimerDown:                  "component-timer-down" ,                     //013-04


        //===============================================================================================================
        // [20 - 29] tables and tab view
        //===============================================================================================================
        // [020] Tables
        ComponentTable:                      "component-table" ,                          //020-01
        ComponentTableResponsible:           "component-table-responsible" ,              //020-02

        // [021] page number
        ComponentPageNumber:                "component-page-number" ,                     //021-01
        ComponentPageData:                  "component-page-data" ,                       //021-02

        // [022] Tabs
        ComponentTabs:                       "component-tabs" ,                           //022-01
        ComponentTree:                       "component-tree" ,                           //022-02

        // [023] Charts
        ComponentChart:                      "component-chart" ,                          //023-01
        ComponentChartTreeY:                 "component-chart-tree-y" ,                   //023-02

        // [024] Steppers
        ComponentStepper:                    "component-stepper" ,                        //024-01




        //===============================================================================================================
        // [30 - 39] collapse and windows
        //===============================================================================================================
        // [030] Collapse
        ComponentCollapse:                   "component-collapse" ,                       //030-01

        // [031] Window
        ComponentWindow:                     "component-window" ,                         //031-01
        ComponentWindowConfirm:              "component-window-confirm" ,                 //031-02

        // [032] Slider Shows
        ComponentSliderShowOverlapping:      "component-slider-show-overlapping" ,        //032-01

        // [033] Breadcrumb
        ComponentBreadcrumb :                "component-breadcrumb" ,                     //033-01
        ComponentBreadcrumbWithArrow :       "component-breadcrumb-with-arrow" ,          //033-02







        //===============================================================================================================
        // [80 - 89] views tools
        //===============================================================================================================
        // [080] elements page
        ComponentChangePage:                 "component-change-page" ,                    //080-01
        ComponentPageHeader:                 "component-page-header" ,                    //080-02
        ComponentPageCardInfo:               "component-page-card-info" ,                 //080-03

        // [081] elements spicals
        ComponentDraggableOrders:           "component-draggable-orders" ,               //081-01
        ComponentRecyclerView:              "component-recycler-view" ,                  //081-02

        // [082] elements tools
        ComponentToolsTableConfig:          "component-tools-table-config" ,             //082-01
        ComponentToolsTableToExcel:         "component-tools-table-to-excel" ,           //082-02
        ComponentToolsTableToPrint:         "component-tools-table-to-print" ,           //082-03





        //===============================================================================================================
        // [99] Others
        //===============================================================================================================
        ComponentIcon:                       "component-icon" ,                           //99-01
        ComponentPositionElement:            "component-position-element" ,               //99-02
        ComponentBorder:                     "component-border" ,                         //99-03
        ComponentImage:                      "component-image" ,                          //99-04
        ComponentLayout:                     "component-layout" ,                         //99-05
        ComponentMouseScroller:              "component-mouse-scroller" ,                 //99-06




        //===============================================================================================================
        // [---] Porfisinal
        //===============================================================================================================
        ComponentReport:                     "component-report" ,                         //p-02
        ComponentRender:                     "component-render" ,                         //p-01


    }
}
if (typeof components === 'undefined') {
    // var components = new WeakMap();
    var components = {};
}





/* -------------------------------------
     Component Base:
------------------------------------- */
class ComponentBase{

    _COMPONENT_PATTERN = {};


    _COMPONENT_RANDOM_ID = 0;
    _COMPONENT_ID = null;
    _COMPONENT_NAME = null;
    _COMPONENT_SELECTOR = null;
    _COMPONENT_ELEMENT = null;
    _COMPONENT_CONTENT = "";
    _COMPONENT_SLOTS = [];

    _COMPONENT_PROPS = null;
    _COMPONENT_PROPS_LAST = null;
    _COMPONENT_CONFIG = null;
    _COMPONENT_SCHEMA = null;

    constructor(componentName , elId) {
        this._COMPONENT_RANDOM_ID = this.setComponentRandomId();
        this._COMPONENT_NAME = componentName;
        this._COMPONENT_ID = elId;
        this._COMPONENT_SELECTOR = this._COMPONENT_NAME+"#"+this._COMPONENT_ID;
    }


    renderComponent(config){
        this.onCreate(
            config ,
            this._COMPONENT_PROPS ,
            this._COMPONENT_SCHEMA
        )
        this.onTemplateComplete();
        this.onRegister();
    }



    onCreate( config , props, schema){
        if (props != null && props.hasOwnProperty("part_structure")){
            if (!props.part_structure.hasOwnProperty("prop_show")){
                props["part_structure"].push( {prop: "prop_show"           , default: true});
            }
            if (!props.part_structure.hasOwnProperty("prop_structureClass")){
                props["part_structure"].push( {prop: "prop_structureClass" , default: []});
            }
            if (!props.part_structure.hasOwnProperty("prop_structureStyles")){
                props["part_structure"].push( {prop: "prop_structureStyles", default: {}});
            }
            if (!props.part_structure.hasOwnProperty("prop_structureHoverStyles")){
                props["part_structure"].push( {prop: "prop_structureHoverStyles", default: {}});
            }
        }
        if (props != null && props.hasOwnProperty("part_label")){
            if (!props.part_label.hasOwnProperty("prop_title")){
                props["part_label"].push( {prop: "prop_title"                       , default: null});
            }
            if (!props.part_label.hasOwnProperty("prop_labelShow")){
                props["part_label"].push( {prop: "prop_labelShow"                   , default: true});
            }
            if (!props.part_label.hasOwnProperty("prop_labelTooltipDescription")){
                props["part_label"].push( {prop: "prop_labelTooltipDescription"     , default: null});
            }
            if (!props.part_label.hasOwnProperty("prop_labelClass")){
                props["part_label"].push( {prop: "prop_labelClass"                  , default:  ["shadow-sm" , "px-2" , "d-block" , "rounded"]});
            }
            if (!props.part_label.hasOwnProperty("prop_labelStyles")){
                props["part_label"].push( {prop: "prop_labelStyles"                 , default:  { "font-size" : "10pt"}});
            }
            if (!props.part_label.hasOwnProperty("prop_labelHoverStyles")){
                props["part_label"].push( {prop: "prop_labelHoverStyles"             , default: null});
            }
            if (!props.part_label.hasOwnProperty("prop_labelSize")){
                props["part_label"].push( {prop: "prop_labelSize"                    , default: tools_css.standardSizes.m.name});
            }
        }

        this.readyConfigBasic(config , props);

        this.readyPropAndSchemaBasic(props , schema);

        this.getAllComponentSluts();

        this._COMPONENT_ELEMENT = document.createElement("template");
        this._COMPONENT_CONTENT = this.setContent();
    }


    onTemplateComplete(){
        this._COMPONENT_ELEMENT = this.getComponentElement();

        if (this._COMPONENT_ELEMENT != null){
            this._COMPONENT_ELEMENT.innerHTML  =  this._COMPONENT_CONTENT;
            this.setComponentData();
        }
    }


    onRegister(){
        components[this._COMPONENT_RANDOM_ID] = this;
        if (typeof this.componentFn !== "undefined"){
            this.componentFn();
        }


    }


    onRegisterFinish() {
        const selector = `#component-${this._COMPONENT_NAME}-structure-${this._COMPONENT_RANDOM_ID}`

        return new Promise((resolve) => {
            const el = document.querySelector(selector);
            if (el) {
                resolve(el);
                return;
            }

            const observer = new MutationObserver((mutations, obs) => {
                const el = document.querySelector(selector);
                if (el) {
                    resolve(el);
                    obs.disconnect();
                }
            });

            observer.observe(document.body, { childList: true, subtree: true });
        });
    }



    //--------------------------------------------------
    // ready properties
    //--------------------------------------------------

    setComponentRandomId(){
        let randomSelected = Math.floor(Math.random() * 10000);
        if (typeof components[randomSelected] != "undefined"){
            randomSelected = this.setComponentRandomId()
        }
        return randomSelected;
    }



    readyConfigBasic(config , props){
        /// config default
        this._COMPONENT_CONFIG = config;

        /// config public component
        const mainProps = this.getComponentProps();
        Object.keys(mainProps).forEach(key => {
            this._COMPONENT_CONFIG[key] = mainProps[key];
        })

        /// config other exist
        if (props != null){
            Object.keys(props).forEach(keyPart => {
                const itemPart = props[keyPart];

                if (itemPart != null && Array.isArray(itemPart)){
                    for (const indexProp in itemPart) {
                        const itemProp = itemPart[indexProp];

                        if (itemProp.hasOwnProperty("prop")){
                            const propKey = itemProp.prop;
                            const propValue = itemProp.hasOwnProperty("default") ? itemProp.default : null;
                            let propExist = false;

                            Object.keys(this._COMPONENT_CONFIG).forEach(configKey => {
                                if (propKey == configKey){
                                    propExist = true;
                                }
                            });

                            if (!propExist){
                                this._COMPONENT_CONFIG[propKey] = propValue
                            }
                        }
                    }
                }
            });
        }
    }



    readyPropAndSchemaBasic(props , schema){
        this._COMPONENT_PROPS = props;
        this._COMPONENT_SCHEMA = schema;
        this._COMPONENT_PROPS_LAST = this.setConfigToPart(this._COMPONENT_CONFIG);

    }


    getElementData(el){
        return {
            html:  el.innerHTML ,
            attrs: Object.fromEntries([...el.attributes].map(a => [a.name, a.value]))
        }
    }

    getAllComponentSluts(){
        const component = this.getComponentElement();

        if (component != null){
            /*for (const itemChild of component.children) {
                const slotName = itemChild.getAttribute("name");
                const slotContent = itemChild.innerHTML;

                this._COMPONENT_SLOTS[slotName ?? "body"] = slotContent;
            }*/


            const componentSlotNames= Object.values(
                [...component.children]
                    .filter(el => el.tagName.toLowerCase().startsWith('component-'))
                    .reduce((acc, el) => {
                        const tag = el.tagName.toLowerCase();
                        if (!acc[tag]) acc[tag] = { el, list: [] };
                        acc[tag].list.push(el);
                        return acc;
                    }, {})
            );


            if (Array.isArray(componentSlotNames)) {
                for (const componentTag of componentSlotNames) {

                    if(componentTag.hasOwnProperty("list") && componentTag.hasOwnProperty("el")){
                        const list = componentTag.list;

                        if(list != null && Array.isArray(list)){
                            /*if (list.length > 1){

                            }
                            else if (list.length == 1){
                                this._COMPONENT_SLOTS[list[0].tagName.toLowerCase().replace(/^component-/, '')] = this.getElementData(list[0]);
                            }*/

                            const listExp = [];
                            for (const itemComponent of list) {
                                const name = itemComponent.getAttribute("name")
                                listExp.push( this.getElementData(itemComponent))
                            }
                            this._COMPONENT_SLOTS[componentTag.el.tagName.toLowerCase().replace(/^component-/, '')] = listExp
                        }
                    }
                }
            }
        }
    }




    //--------------------------------------------------
    // Set Prop
    //--------------------------------------------------
    setConfigToPart(config){
        let resultExp = {};
        if (config != null){
            Object.keys(this._COMPONENT_PROPS).forEach((part)=>{

                const partProps = this._COMPONENT_PROPS[part];
                resultExp[part] = {};

                for (const indexProppp in partProps) {
                    const itemProp = partProps[indexProppp];
                    if (itemProp.hasOwnProperty("prop")){
                        const propName = itemProp.prop;
                        let propValue = itemProp.hasOwnProperty("default") ? itemProp.default : null;

                        Object.keys(config).forEach((configKey) => {
                            if (propName == configKey){
                                propValue = config[configKey];
                            }
                        });

                        resultExp[part][propName] = propValue;
                    }
                }

            })
        }
        else {
            resultExp = this._COMPONENT_PROPS;
        }

        return resultExp;
    }

    findDifferences(oldData, newData) {
        const changedKeys = [];

        for (const key in newData) {
            if (!oldData.hasOwnProperty(key)) {
                changedKeys.push(key); // کلید جدید
            } else {
                const oldVal = JSON.stringify(oldData[key]);
                const newVal = JSON.stringify(newData[key]);
                if (oldVal !== newVal) {
                    changedKeys.push(key); // مقدار تغییر کرده
                }
            }
        }

        for (const key in oldData) {
            if (!newData.hasOwnProperty(key)) {
                changedKeys.push(key); // کلید حذف‌شده
            }
        }

        return changedKeys;
    }






    //--------------------------------------------------
    // content for templates
    //--------------------------------------------------
    setContent(partName = null){
        let html;
        this._COMPONENT_ELEMENT = this.getComponentElement();

        let el = this._COMPONENT_ELEMENT;
        let isMain = true;
        if (partName != null){
            el = this._COMPONENT_ELEMENT?.querySelector(`[data-part-name="${partName}"]`);
            isMain = false;
        }

        if (typeof this.templateFn !== "undefined"){
            html = this.templateFn(partName );

            if (el != null && html != null){
                if (isMain){
                    el.innerHTML = html;
                }
                else{
                    el.outerHTML = html;
                }
            }
        }

        return html;
    }

    setComponentData(){
        this._COMPONENT_ELEMENT = this.getComponentElement();

        const mainProps = this.getComponentProps();

        if (this._COMPONENT_ELEMENT != null)this._COMPONENT_ELEMENT.style.display = ""

        const directionRtl = mainProps.directionRtl;
        this._COMPONENT_ELEMENT?.style.setProperty('direction', directionRtl ? 'rtl' : 'ltr' , 'important');
        this._COMPONENT_ELEMENT?.style.setProperty('text-align', directionRtl ? 'right' : 'left' , 'important');

        if (this._COMPONENT_ELEMENT != null)this._COMPONENT_ELEMENT.classList = tools_public.renderListClass(mainProps.classList);

        Object.entries(mainProps.styles).forEach(([key, value]) => {
            this._COMPONENT_ELEMENT.style[key] = value;
        });


        if (this._COMPONENT_ELEMENT != null)this._COMPONENT_ELEMENT.setAttribute("data-component-id" , this._COMPONENT_RANDOM_ID);

        /*if (mainProps.prop_show){

        }
        else{
            this._COMPONENT_ELEMENT.style.display = "none"
        }*/
    }





    //--------------------------------------------------
    // content for templates
    //--------------------------------------------------
    getComponentProps() {
        const data = this._COMPONENT_CONFIG || {};

        const directionRtl = data.hasOwnProperty("directionRtl") ? data.directionRtl : (component_props != null && component_props.hasOwnProperty("directionRtl") ? component_props.directionRtl : false)
        //const prop_show    = data.hasOwnProperty("prop_show")    ? data.prop_show    : true
        const classList    = data.hasOwnProperty("classList")    ? data.classList    : []
        const styles       = data.hasOwnProperty("styles")       ? data.styles       : {}

        return {
            directionRtl , classList , styles,
            //prop_show
        }
    }




    //--------------------------------------------------
    // SETTER AND GETTER
    //--------------------------------------------------

    getComponentElement(){
        return document.querySelector(this._COMPONENT_SELECTOR);
    }

    getPartProps(partName){
        let resultExp = null
        if (this._COMPONENT_PROPS_LAST != null){
            Object.keys(this._COMPONENT_PROPS_LAST).forEach(key => {
                if (key == partName){
                    resultExp = this._COMPONENT_PROPS_LAST[key];
                }
            })
        }
        return resultExp;
    }

    get(key , defaultValue=null){
        let lastConfig =  this._COMPONENT_CONFIG;
        if (lastConfig != null && lastConfig.hasOwnProperty(key)){
            return lastConfig[key];
        }
        return defaultValue;
    }

    set(key , value){
        let lastConfig =  this._COMPONENT_CONFIG;
        if (lastConfig != null && lastConfig.hasOwnProperty(key)){
            lastConfig[key] = value;

            const props = this.setConfigToPart(lastConfig);
            const changes = this.findDifferences(this._COMPONENT_PROPS_LAST, props);
            this._COMPONENT_PROPS_LAST = props;

            for (const partIndex in changes) {
                this.setContent(changes[partIndex])
            }

            this.setComponentData();
        }
    }

    getFn(methodName , ...methodArgs ){
        // return `components.get(document.querySelector('${this._COMPONENT_SELECTOR}')).${methodName}(${methodArgs})`;
        return `components[${this._COMPONENT_RANDOM_ID}].${methodName}(${methodArgs})`;
    }

    runFn(methodName , ...methodArgs ){
        const fn = this.getFn(methodName , ... methodArgs);
        if (typeof fn != "undefined"){
            return eval(fn)
        }
        return null;
    }






    //--------------------------------------------------
    // Template Reader
    //--------------------------------------------------
    templateBasic_render(moreClass="mb-1") {
        return `
<section class="component-element-structure  ${tools_public.renderListClass(moreClass)}">
   ${this.templateFn("part_structure") ?? ""}
</section>
        `;
    }

    templateBasic_render_structure(content , moreClass="") {
        const partName = "part_structure";
        const data = this.getPartProps(partName);

        if (data != null){
            const prop_show                  =   data.hasOwnProperty("prop_show")                     ?  data.prop_show                    : true;
            const prop_structureClass        =   data.hasOwnProperty("prop_structureClass")           ?  data.prop_structureClass          : [];
            const prop_structureStyles       =   data.hasOwnProperty("prop_structureStyles")          ? data.prop_structureStyles          : {};
            const prop_structureHoverStyles  =   data.hasOwnProperty("prop_structureHoverStyles")     ? data.prop_structureHoverStyles     : {};

            if (prop_show){
                return `
<section  data-part-name="${partName}" 
          id="component-${this._COMPONENT_NAME}-structure-${this._COMPONENT_RANDOM_ID}"
          class=" ${tools_public.renderListClass(prop_structureClass)} ${tools_public.renderListClass(moreClass)}">

    <style>
        #${this._COMPONENT_ID} #component-${this._COMPONENT_NAME}-structure-${this._COMPONENT_RANDOM_ID}{
           ${tools_public.renderListStyle(prop_structureStyles)}
        }
        #${this._COMPONENT_ID}:hover #component-${this._COMPONENT_NAME}-structure-${this._COMPONENT_RANDOM_ID}{
           ${tools_public.renderListStyle(prop_structureHoverStyles)}
        }
    </style>
    
    ${content}
   
</section>
        `;
            }
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    componentFneBasic_render_structure(elementId , props = {}) {
        const partName = "part_label";
        const data = this.getPartProps(partName)

        if (data != null){

            Object.keys(props).forEach(key=> {
                data[key] = props[key]
            })

            new window.ComponentLabel(elementId , data);

        }
    }

}





//===============================================================================================================
// [01 - 10] basic ->  [01] text
//===============================================================================================================

/*-------------------------------------
 01-01) Component Messages
-------------------------------------*/
class ComponentMessagesBase extends ComponentBase{

    /* ---------------------------------------------
      PROPERTYs Pattern
      --------------------------------------------- */
    _COMPONENT_PATTERN = {
        prop_size: {
            prop: "prop_size",
            default: tools_css.standardSizes.m.name
        },
        prop_type : {
            prop: "prop_type" ,
            default: "success"
        } ,
        prop_colorIcon: {
            prop: "prop_colorIcon",
            default: null
        },
        prop_colorBorder: {
            prop: "prop_colorBorder",
            default: null
        },
        prop_msgBackgroundColor: {
            prop: "prop_msgBackgroundColor" ,
            default: null
        },
        prop_msgColor: {
            prop: "prop_msgColor" ,
            default: null
        } ,
        prop_messages: {
            prop: "prop_messages" ,
            default: null
        } ,
    }



    /* ---------------------------------------------
      PROPERTYs Props
      --------------------------------------------- */
    _COMPONENT_PROPS = {
        part_structure: [

        ] ,
        part_message: [
            this._COMPONENT_PATTERN.prop_type ,
            this._COMPONENT_PATTERN.prop_msgBackgroundColor ,
            this._COMPONENT_PATTERN.prop_msgColor ,
            this._COMPONENT_PATTERN.prop_messages ,
            this._COMPONENT_PATTERN.prop_size ,
            this._COMPONENT_PATTERN.prop_colorBorder ,
        ] ,
        part_icon: [
            this._COMPONENT_PATTERN.prop_messages ,
            this._COMPONENT_PATTERN.prop_size ,
            this._COMPONENT_PATTERN.prop_colorIcon ,
            this._COMPONENT_PATTERN.prop_type ,
        ]
    }



    /* ---------------------------------------------
         PROPERTYs Schema
     --------------------------------------------- */
    _COMPONENT_SCHEMA = {
        part_structure: {
            part_message: {} ,
            part_icon: {}
        }
    }

}
window.ComponentMessages = class ComponentMessages extends ComponentMessagesBase{

    /* ---------------------------------------------
       SETUP
   --------------------------------------------- */
    constructor(elId , config) {
        super(
            listComponent[ComponentMessages.name] ,
            elId
        );
        this.renderComponent(config);
    }




    /* ---------------------------------------------
       TEMPLATEs
    --------------------------------------------- */
    componentFn(){
        this.templateFn(  "part_icon" );
    }

    templateFn(partName = null){
        switch (partName){
            case "part_structure":
                return this.template_render_structure(partName);
            case "part_message":
                return this.template_render_message(partName);
            case "part_icon":
                return this.componentFn_render_icon(partName);
            default:
                return this.templateBasic_render();
        }
    }



    template_render_structure(partName) {
        const content = `
                    ${this.templateFn("part_message") ?? ""}
                `;
        return this.templateBasic_render_structure(content);
    }

    template_render_message(partName) {
        const data = this.getPartProps(partName)

        if (data != null){

            let html = "";
            if (data.hasOwnProperty("prop_messages")  ){
                const prop_messages  =   data.prop_messages;

                const prop_type                =   data.hasOwnProperty("prop_type")                 ?  data.prop_type               :  null;
                const prop_size                =   data.hasOwnProperty("prop_size")                 ?  data.prop_size               :  null;
                let msgBackgroundColor =  null;
                let msgColor =            null;
                let msgBorderColor =            null;

                const elfontSize = tools_css.getFontSize(prop_size);

                switch (prop_type){
                    case "success" :
                        msgBackgroundColor       =  tools_const.hasOwnProperty("styles") && tools_const.styles.hasOwnProperty("message") &&  tools_const.styles.message.hasOwnProperty("success") &&  tools_const.styles.message.success.hasOwnProperty("backgroundColor") ? tools_const.styles.message.success.backgroundColor : "" ;
                        msgColor                 =  tools_const.hasOwnProperty("styles") && tools_const.styles.hasOwnProperty("message") &&  tools_const.styles.message.hasOwnProperty("success") &&  tools_const.styles.message.success.hasOwnProperty("color")           ? tools_const.styles.message.success.color : "" ;
                        msgBorderColor           =  tools_const?.styles?.message?.success?.border ??  "" ;
                        break;
                    case "error" :
                        msgBackgroundColor       =  tools_const.hasOwnProperty("styles") && tools_const.styles.hasOwnProperty("message") &&  tools_const.styles.message.hasOwnProperty("error") &&  tools_const.styles.message.error.hasOwnProperty("backgroundColor")     ? tools_const.styles.message.error.backgroundColor : "" ;
                        msgColor                 =  tools_const.hasOwnProperty("styles") && tools_const.styles.hasOwnProperty("message") &&  tools_const.styles.message.hasOwnProperty("error") &&  tools_const.styles.message.error.hasOwnProperty("color")               ? tools_const.styles.message.error.color : "" ;
                        msgBorderColor           =  tools_const?.styles?.message?.error?.border ??  "" ;
                        break;
                    case "warning" :
                        msgBackgroundColor       =  tools_const.hasOwnProperty("styles") && tools_const.styles.hasOwnProperty("message") &&  tools_const.styles.message.hasOwnProperty("warning") &&  tools_const.styles.message.warning.hasOwnProperty("backgroundColor") ? tools_const.styles.message.warning.backgroundColor : "" ;
                        msgColor                 =  tools_const.hasOwnProperty("styles") && tools_const.styles.hasOwnProperty("message") &&  tools_const.styles.message.hasOwnProperty("warning") &&  tools_const.styles.message.warning.hasOwnProperty("color")           ? tools_const.styles.message.warning.color : "" ;
                        msgBorderColor           =  tools_const?.styles?.message?.warning?.border ??  "" ;
                        break;
                    default:
                        msgBackgroundColor       =  data.hasOwnProperty("prop_msgBackgroundColor") ?  data.prop_msgBackgroundColor  : "";
                        msgColor                 =  data.hasOwnProperty("prop_msgColor")           ?  data.prop_msgColor            : "" ;
                        msgBorderColor           =  data.hasOwnProperty("prop_colorBorder")        ?  data.prop_colorBorder         : "" ;
                        break;
                }

                for (const indexMessage in prop_messages) {
                    const itemMessage = prop_messages[indexMessage];

                    html += `
<section id="component-messages-item-${this._COMPONENT_RANDOM_ID}-${indexMessage}">
    <style>
         #${this._COMPONENT_ID} #text-message-${this._COMPONENT_RANDOM_ID}{
             background-color: ${msgBackgroundColor};
             border: 1px solid ${msgBorderColor};
             color: ${msgColor};
             font-size: ${elfontSize}px;
         }
    </style>
    
    <div  class="component-element-structure mb-2  mt-2 rounded shadow-sm" role="alert">
         <div id="text-message-${this._COMPONENT_RANDOM_ID}" class=" alert shadow-sm">
              ${itemMessage}
              <component-icon id="component-messages-icon-close-${this._COMPONENT_RANDOM_ID}-${indexMessage}"></component-icon>
         </div>
    </div>
</section>
                     `;

                }

                return html;
            }
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    componentFn_render_icon (partName) {
        const data = this.getPartProps(partName)
        if (data != null){
            const prop_type                =   data.hasOwnProperty("prop_type")                 ?  data.prop_type               :  null;

            let prop_colorIcon = "";
            switch (prop_type){
                case "success" :
                    prop_colorIcon       =  tools_const?.styles?.message?.success?.icon ??  "" ;
                    break;
                case "error" :
                    prop_colorIcon       =  tools_const?.styles?.message?.error?.icon ??  "" ;
                    break;
                case "warning" :
                    prop_colorIcon       =  tools_const?.styles?.message?.warning?.icon ??  "" ;
                    break;
                default:
                    prop_colorIcon       =  data.hasOwnProperty("prop_msgColor")           ?  data.prop_msgColor            : "" ;
                    break;
            }

            const directionRtl             =   this._COMPONENT_CONFIG.hasOwnProperty("directionRtl") ? this._COMPONENT_CONFIG.directionRtl : false
            const prop_size                =   data.hasOwnProperty("prop_size")                      ?  data.prop_size                     :  null;

            const elheight = tools_css.getHeightSize(prop_size);

            if (data.hasOwnProperty("prop_messages")  ) {

                let styles = {
                    "top" : `${elheight/2}px`
                }
                if (directionRtl){
                    styles["left"] = "20px"
                }
                else{
                    styles["right"] = "20px"
                }

                for (const indexMessage in data.prop_messages) {
                    new window.ComponentIcon(
                        `component-messages-icon-close-${this._COMPONENT_RANDOM_ID}-${indexMessage}`  ,
                        {
                            classList:     [ "position-absolute"] ,
                            styles :       styles,

                            prop_icon:    tools_icons.icon_close({size : prop_size})  ,

                            prop_iconClass : ["mx-2" ] ,
                            prop_iconStyles : {
                                "cursor" : "pointer"
                            } ,

                            fn_callback: () =>{
                                this.runFn('fn_onCLickIconClose' , "event" , indexMessage);
                            }
                        }
                    )
                }


            }

        }
    }


    /* ---------------------------------------------
       FUNCTIONs
    --------------------------------------------- */
    fn_onCLickIconClose(event  , indexMessage){
        this.getComponentElement().querySelector(`#component-messages-item-${this._COMPONENT_RANDOM_ID}-${indexMessage}`).remove()
    }
}


/*-------------------------------------
 01-02) Component Is Empty
-------------------------------------*/
class ComponentIsEmptyBase extends ComponentBase{

    /* ---------------------------------------------
       PROPERTYs Pattern
     --------------------------------------------- */
    _COMPONENT_PATTERN = {
        prop_size: {
            prop: "prop_size",
            default: tools_css.standardSizes.m.name
        },
        prop_borderClass : {
            prop: "prop_borderClass" ,
            default: [ "rounded" , "shadow-sm"]
        } ,
        prop_borderStyles: {
            prop: "prop_borderStyles" ,
            default: {}
        },
        prop_icon: {
            prop: "prop_icon" ,
            default: tools_icons.icon_warning
        } ,
        prop_iconSize: {
            prop: "prop_iconSize" ,
            default: 80
        } ,
        prop_iconColor: {
            prop: "prop_iconColor" ,
            default: tools_const?.styles?.isEmpty?.color_icon ?? ""
        } ,
        prop_borderColor: {
            prop: "prop_borderColor" ,
            default: tools_const?.styles?.isEmpty?.borderColor_border ?? ""
        } ,
        prop_iconClass: {
            prop: "prop_iconClass" ,
            default: ["font-30pt" , "text-danger"]
        } ,
        prop_iconStyles: {
            prop: "prop_iconStyles" ,
            default: { "font-size" : "30px" , "display" : "block" ,  "text-align" : "center" , }
        } ,
        prop_title: {
            prop: "prop_title" ,
            default: null
        } ,
        prop_btnAddStatus: {
            prop: "prop_btnAddStatus" ,
            default: false
        } ,
        prop_btnAddClass: {
            prop: "prop_btnAddClass" ,
            default:  [ "mx-auto"]
        } ,
        prop_btnAddStyles: {
            prop: "prop_btnAddStyles" ,
            default:  {"cursor" : "pointer" , "width" : "100%" , "height" : "32px" , "text-align" : "center!important" ,}
        } ,
        prop_btnAddIcon: {
            prop: "prop_btnAddIcon" ,
            default:  tools_icons?.icon_reload
        } ,
        prop_btnAddIconColor: {
            prop: "prop_btnAddIconColor" ,
            default: tools_const?.styles?.isEmpty?.btnColor_icon ?? ""
        } ,
        prop_btnAddTitle: {
            prop: "prop_btnAddTitle" ,
            default: "add item"
        } ,
    }


    /* ---------------------------------------------
      PROPERTYs Props
      --------------------------------------------- */
    _COMPONENT_PROPS = {
        part_structure: [

        ] ,
        part_border: [
            this._COMPONENT_PATTERN.prop_borderClass ,
            this._COMPONENT_PATTERN.prop_borderStyles ,
            this._COMPONENT_PATTERN.prop_borderColor ,
        ] ,
        part_icon: [
            this._COMPONENT_PATTERN.prop_icon ,
            this._COMPONENT_PATTERN.prop_iconSize ,
            this._COMPONENT_PATTERN.prop_iconColor ,
            this._COMPONENT_PATTERN.prop_iconClass ,
            this._COMPONENT_PATTERN.prop_iconStyles ,
        ] ,
        part_title: [
            this._COMPONENT_PATTERN.prop_title ,
            this._COMPONENT_PATTERN.prop_size ,
        ] ,
        part_btn_retry: [
            this._COMPONENT_PATTERN.prop_btnAddStatus ,
            this._COMPONENT_PATTERN.prop_btnAddClass ,
            this._COMPONENT_PATTERN.prop_btnAddStyles ,
            this._COMPONENT_PATTERN.prop_btnAddIcon ,
            this._COMPONENT_PATTERN.prop_btnAddIconColor ,
            this._COMPONENT_PATTERN.prop_size ,
            this._COMPONENT_PATTERN.prop_btnAddTitle ,
        ] ,
    }


    /* ---------------------------------------------
         PROPERTYs Schema
     --------------------------------------------- */
    _COMPONENT_SCHEMA = {
        part_structure: {
            part_border: {
                part_icon: {} ,
                part_title: {} ,
                part_btn_retry: {} ,
            }
        }
    }

}
window.ComponentIsEmpty = class ComponentIsEmpty extends ComponentIsEmptyBase{

    /* ---------------------------------------------
       SETUP
   --------------------------------------------- */
    constructor(elId , config) {
        super(
            listComponent[ComponentIsEmpty.name] ,
            elId
        );
        this.renderComponent(config);
    }



    /* ---------------------------------------------
      TEMPLATEs
     --------------------------------------------- */
    componentFn(){
        this.templateFn(  "part_border");
        this.templateFn(  "part_icon");
        this.templateFn(  "part_btn_retry");
    }

    templateFn(partName = null){
        switch (partName){
            case "part_structure":
                return this.template_render_structure(partName);
            case "part_border":
                return this.componentFn_render_border(partName);
            case "part_title":
                return this.template_render_title(partName);
            case "part_icon":
                return this.componentFn_render_icon(partName);
            case "part_btn_retry":
                return this.componentFn_render_button(partName);
            default:
                return this.templateBasic_render();
        }
    }

    template_render_structure(partName) {
        const content = `
           <component-border id="component-is-empty-border-${this._COMPONENT_RANDOM_ID}">
               <component-body>
               
                    <component-icon id="component-is-empty-icon-${this._COMPONENT_RANDOM_ID}"></component-icon>
         
                    ${this.templateFn("part_title") ?? ""}
         
                    <div class="d-block mx-auto">
                        <component-button id="component-is-empty-button-${this._COMPONENT_RANDOM_ID}"></component-button>
                    </div>
                    
               </component-body>
          </component-border> 
                `;
        return this.templateBasic_render_structure(content);
    }

    template_render_title(partName) {
        const data = this.getPartProps(partName)

        if (data != null){

            const prop_title =     data.hasOwnProperty("prop_title")    ?  data.prop_title     : (componentSlots != null && componentSlots.hasOwnProperty("body") ? componentSlots.body : '');
            const prop_size  =      data.hasOwnProperty("prop_size")    ?  data.prop_size      :  null

            const elHeight = tools_css.getFontSize(prop_size);

            return `
<section data-part-name="${partName}" 
         id="component-is-empty-title-${this._COMPONENT_RANDOM_ID}" 
         class="">
    <style>
        #${this._COMPONENT_ID} #component-is-empty-title-${this._COMPONENT_RANDOM_ID}{
             text-align: center!important;
             font-size: ${elHeight}px;
       }
    </style>
    <p>
         <b>
            ${prop_title} 
         </b>
    </p>
</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    componentFn_render_border(partName) {
        const data = this.getPartProps(partName)

        if (data != null){

            const prop_borderClass =      data.hasOwnProperty("prop_borderClass")     ? data.prop_borderClass    : null;
            const prop_borderStyles =     data.hasOwnProperty("prop_borderStyles")    ? data.prop_borderStyles   : null;
            const prop_borderColor =      data.hasOwnProperty("prop_borderColor")     ? data.prop_borderColor    : null;

            new window.ComponentBorder(
                `component-is-empty-border-${this._COMPONENT_RANDOM_ID}` ,
                {
                    prop_btnMore_show: false ,

                    prop_borderColor : null,
                    prop_structureClass: prop_borderClass ,
                    prop_structureStyles: {
                        ...prop_borderStyles ,
                        "border" : `2px solid ${prop_borderColor}`
                    } ,
                }
            )
        }
    }

    componentFn_render_icon(partName) {
        const data = this.getPartProps(partName)

        if (data != null){
            const prop_icon        =  data.hasOwnProperty("prop_icon")            ?  data.prop_icon         : null;
            const prop_iconSize    =  data.hasOwnProperty("prop_iconSize")        ?  data.prop_iconSize     : 80;
            const prop_iconColor   =  data.hasOwnProperty("prop_iconColor")       ?  data.prop_iconColor    : "#000";
            const prop_iconClass   =  data.hasOwnProperty("prop_iconClass")       ?  data.prop_iconClass    : [  "mx-3"];
            const prop_iconStyles  =  data.hasOwnProperty("prop_iconStyles")      ?  data.prop_iconStyles   : {
                "font-size" : "30px" ,
                "width" : "100%" ,
                "display" : "block" ,
                "text-align" : "center" ,
            };

            this._COMPONENT_PATTERN.prop_iconSize ,
                this._COMPONENT_PATTERN.prop_iconColor ,


                new window.ComponentIcon(
                    `component-is-empty-icon-${this._COMPONENT_RANDOM_ID}` ,
                    {
                        prop_iconClass: prop_iconClass ,
                        prop_iconStyles: prop_iconStyles ,
                        prop_icon: typeof prop_icon == "function" ? prop_icon({size: prop_iconSize /*, colors:{ primary: prop_iconColor}*/}) : prop_icon,
                    }
                )
        }
    }

    componentFn_render_button(partName) {
        const data = this.getPartProps(partName)

        if (data != null && data.hasOwnProperty("prop_btnAddStatus") && data.prop_btnAddStatus){

            const prop_btnAddClass        =      data.hasOwnProperty("prop_btnAddClass")             ?  data.prop_btnAddClass            :  [];
            const prop_btnAddStyles       =      data.hasOwnProperty("prop_btnAddStyles")            ?  data.prop_btnAddStyles           :  {
                "cursor" : "pointer" ,
                "height" : "32px" ,
                "text-align" : "center!important" ,
            };
            const prop_btnAddIcon         =      data.hasOwnProperty("prop_btnAddIcon")              ?  data.prop_btnAddIcon             :  "&#10082;";
            const prop_btnAddIconColor    =      data.hasOwnProperty("prop_btnAddIconColor")         ?  data.prop_btnAddIconColor        :  "#000"
            const prop_size               =      data.hasOwnProperty("prop_size")                    ?  data.prop_size                   :  null
            const prop_btnAddTitle        =      data.hasOwnProperty("prop_btnAddTitle")             ?  data.prop_btnAddTitle            :  "add item";

            new window.ComponentButton(
                `component-is-empty-button-${this._COMPONENT_RANDOM_ID}` ,
                {
                    classList: ["d-block" , "m-auto" , "mb-1"] ,
                    styles: {
                        "width" : "200px"
                    },

                    prop_size: prop_size ,
                    prop_btnClass: prop_btnAddClass ,
                    prop_btnStyles: prop_btnAddStyles ,
                    prop_title: `
<span class="mx-1">
      ${typeof prop_btnAddIcon == "function" ? prop_btnAddIcon(prop_size , prop_btnAddIconColor) : prop_btnAddIcon}
</span>
<span class="d-none d-md-inline">
      ${prop_btnAddTitle}
</span>
                    ` ,

                    fn_callback: (event)=>{
                        this.fn_onCLickRetry(event)
                    }

                }
            )
        }
    }





    /* ---------------------------------------------
       FUNCTIONs
    --------------------------------------------- */
    fn_onCLickRetry(event){
        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("fn_callback") && typeof data.fn_callback != null){
            data.fn_callback(event);
        }
    }


}



/*-------------------------------------
 01-03) Component Nofite
-------------------------------------*/
class ComponentNotifyBase extends ComponentBase{


    /* ---------------------------------------------
       PROPERTYs Pattern
     --------------------------------------------- */
    _COMPONENT_PATTERN = {
        prop_size: {
            prop: "prop_size",
            default: tools_css.standardSizes.m.name
        },
        prop_borderClass : {
            prop: "prop_borderClass" ,
            default: [ "rounded" , "shadow-sm"]
        } ,
        prop_borderStyles: {
            prop: "prop_borderStyles" ,
            default: {}
        },
        prop_borderColor: {
            prop: "prop_borderColor" ,
            default: tools_const?.styles?.notify?.borderColor_border ?? ""
        } ,
        prop_borderBackground: {
            prop: "prop_borderBackground" ,
            default: tools_const?.styles?.notify?.background_border ?? ""
        },
        prop_borderArrowType: {
            prop: "prop_borderArrowType" ,
            default: null
        },

        prop_icon: {
            prop: "prop_icon" ,
            default: tools_icons.icon_warning
        } ,
        prop_iconSize: {
            prop: "prop_iconSize" ,
            default: 40
        } ,
        prop_iconColor: {
            prop: "prop_iconColor" ,
            default: tools_const?.styles?.notify?.color_icon ?? ""
        } ,
        prop_iconClass: {
            prop: "prop_iconClass" ,
            default: ["font-30pt" , "text-danger"]
        } ,
        prop_iconStyles: {
            prop: "prop_iconStyles" ,
            default: { "font-size" : "30px" , "display" : "block" ,  "text-align" : "center" , }
        } ,

        prop_title: {
            prop: "prop_title" ,
            default: null
        } ,
        prop_titleColor: {
            prop: "prop_titleColor" ,
            default: tools_const?.styles?.notify?.color_title ?? ""
        } ,
    }


    /* ---------------------------------------------
      PROPERTYs Props
      --------------------------------------------- */
    _COMPONENT_PROPS = {
        part_structure: [

        ] ,
        part_border: [
            this._COMPONENT_PATTERN.prop_borderClass ,
            this._COMPONENT_PATTERN.prop_borderStyles ,
            this._COMPONENT_PATTERN.prop_borderColor ,
            this._COMPONENT_PATTERN.prop_borderBackground ,
            this._COMPONENT_PATTERN.prop_borderArrowType ,
        ] ,
        part_icon: [
            this._COMPONENT_PATTERN.prop_icon ,
            this._COMPONENT_PATTERN.prop_iconSize ,
            this._COMPONENT_PATTERN.prop_iconColor ,
            this._COMPONENT_PATTERN.prop_iconClass ,
            this._COMPONENT_PATTERN.prop_iconStyles ,
        ] ,
        part_title: [
            this._COMPONENT_PATTERN.prop_title ,
            this._COMPONENT_PATTERN.prop_size ,
            this._COMPONENT_PATTERN.prop_titleColor ,
        ] ,

    }


    /* ---------------------------------------------
         PROPERTYs Schema
     --------------------------------------------- */
    _COMPONENT_SCHEMA = {
        part_structure: {
            part_border: {
                part_icon: {} ,
                part_title: {}
            }
        }
    }

}
window.ComponentNotify = class ComponentNotify extends ComponentNotifyBase{

    /* ---------------------------------------------
       SETUP
   --------------------------------------------- */
    constructor(elId , config) {
        super(
            listComponent[ComponentNotify.name] ,
            elId
        );
        this.renderComponent(config);
    }



    /* ---------------------------------------------
      TEMPLATEs
     --------------------------------------------- */
    componentFn(){
        this.templateFn(  "part_border");
        this.templateFn(  "part_icon");
        this.templateFn(  "part_btn_retry");
    }

    templateFn(partName = null){
        switch (partName){
            case "part_structure":
                return this.template_render_structure(partName);
            case "part_border":
                return this.componentFn_render_border(partName);
            case "part_title":
                return this.template_render_title(partName);
            case "part_icon":
                return this.componentFn_render_icon(partName);
            default:
                return this.templateBasic_render();
        }
    }

    template_render_structure(partName) {
        const content = `
           <component-border id="component-notify-border-${this._COMPONENT_RANDOM_ID}">
               <component-body>
                    <section class="row p-0 m-0">
                           <component-icon id="component-notify-icon-${this._COMPONENT_RANDOM_ID}"></component-icon>
         
                           ${this.templateFn("part_title") ?? ""}
                           
                    </section>
               </component-body>
          </component-border> 
                `;
        return this.templateBasic_render_structure(content);
    }

    template_render_title(partName) {
        const data = this.getPartProps(partName)

        if (data != null){

            const prop_title =            data.hasOwnProperty("prop_title")         ?  data.prop_title           : (componentSlots != null && componentSlots.hasOwnProperty("title") ? componentSlots.title : '');
            const prop_size  =            data.hasOwnProperty("prop_size")          ?  data.prop_size            :  null
            const prop_titleColor  =      data.hasOwnProperty("prop_titleColor")    ?  data.prop_titleColor      :  null

            const elHeight = tools_css.getHeightSize(prop_size);
            const elFontSize = tools_css.getFontSize(prop_size);

            return `
<section data-part-name="${partName}" 
         id="component-notify-title-${this._COMPONENT_RANDOM_ID}" 
         class="col-md-8 col-12 position-relative">
    <style>
        #${this._COMPONENT_ID} #component-notify-title-${this._COMPONENT_RANDOM_ID}{
             
       }
        #${this._COMPONENT_ID} #component-notify-title-${this._COMPONENT_RANDOM_ID}-b{
             left:          50%;
             top:           50%;
             transform:     translate(-50% , -50%);
             text-align:    center!important;
             line-height:   ${elHeight}px;
             font-size:     ${elFontSize}px;
             color:         ${prop_titleColor};
       }
    </style>
    <b id="component-notify-title-${this._COMPONENT_RANDOM_ID}-b" class="position-absolute">
         ${prop_title} 
    </b>
</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }


    componentFn_render_border(partName) {
        const data = this.getPartProps(partName)

        if (data != null){

            const prop_borderClass =           data.hasOwnProperty("prop_borderClass")          ? data.prop_borderClass         : null;
            const prop_borderStyles =          data.hasOwnProperty("prop_borderStyles")         ? data.prop_borderStyles        : null;
            const prop_borderColor =           data.hasOwnProperty("prop_borderColor")          ? data.prop_borderColor         : null;
            const prop_borderBackground =      data.hasOwnProperty("prop_borderBackground")     ? data.prop_borderBackground    : null;
            const prop_borderArrowType =       data.hasOwnProperty("prop_borderArrowType")      ? data.prop_borderArrowType     : null;

            new window.ComponentBorder(
                `component-notify-border-${this._COMPONENT_RANDOM_ID}` ,
                {
                    prop_btnMore_show: false ,

                    prop_borderArrowType ,
                    prop_borderColor ,

                    prop_borderClass: [
                        ... prop_borderClass ,
                        "py-2"
                    ] ,
                    prop_borderStyles: {
                        ... prop_borderStyles ,
                        "background-color" : `${prop_borderBackground}` ,
                    } ,
                }
            )
        }
    }

    componentFn_render_icon(partName) {
        const data = this.getPartProps(partName)

        if (data != null){
            const prop_icon        =  data.hasOwnProperty("prop_icon")            ?  data.prop_icon         : null;
            const prop_iconSize    =  data.hasOwnProperty("prop_iconSize")        ?  data.prop_iconSize     : 80;
            const prop_iconColor   =  data.hasOwnProperty("prop_iconColor")       ?  data.prop_iconColor    : "#000";
            const prop_iconClass   =  data.hasOwnProperty("prop_iconClass")       ?  data.prop_iconClass    : [  "mx-3"];
            const prop_iconStyles  =  data.hasOwnProperty("prop_iconStyles")      ?  data.prop_iconStyles   : {
                "font-size" : "30px" ,
                "width" : "100%" ,
                "display" : "block" ,
                "text-align" : "center" ,
            };

            this._COMPONENT_PATTERN.prop_iconSize ,
                this._COMPONENT_PATTERN.prop_iconColor ,



            new window.ComponentIcon(
                    `component-notify-icon-${this._COMPONENT_RANDOM_ID}` ,
                    {
                        classList: "col-md-4 col-12"  ,

                        prop_iconClass: prop_iconClass ,
                        prop_iconStyles: prop_iconStyles ,
                        prop_icon: typeof prop_icon == "function" ? prop_icon({size: prop_iconSize /*, colors:{ primary: prop_iconColor}*/}) : prop_icon,
                    }
                )
        }
    }
}


/*-------------------------------------
 01-03) Component Header
-------------------------------------*/
class ComponentHeaderBase extends ComponentBase{


    /* ---------------------------------------------
      PROPERTYs Pattern
    --------------------------------------------- */
    _COMPONENT_PATTERN = {
        prop_borderClass : {
            prop: "prop_borderClass" ,
            default: ["pb-0","px-2","mb-1","border-bottom" , "border-2"]
        } ,
        prop_borderStyles : {
            prop: "prop_borderStyles" ,
            default: {}
        } ,
        prop_size : {
            prop: "prop_size" ,
            default: 5
        } ,
        prop_title : {
            prop: "prop_title" ,
            default: ""
        } ,
        prop_icon : {
            prop: "prop_icon" ,
            default: null
        } ,
    }


    /* ---------------------------------------------
      PROPERTYs Props
      --------------------------------------------- */
    _COMPONENT_PROPS = {
        part_structure: [

        ] ,
        part_border: [
            this._COMPONENT_PATTERN.prop_borderClass ,
            this._COMPONENT_PATTERN.prop_borderStyles ,
        ] ,
        part_header: [
            this._COMPONENT_PATTERN.prop_size ,
            this._COMPONENT_PATTERN.prop_title ,
        ] ,
        part_icon: [
            this._COMPONENT_PATTERN.prop_icon ,
        ]
    }


    /* ---------------------------------------------
         PROPERTYs Schema
     --------------------------------------------- */
    _COMPONENT_SCHEMA = {
        part_structure: {
            part_border: {
                part_header: {} ,
                part_icon: {} ,
            }
        }
    }

}
window.ComponentHeader = class ComponentHeader extends ComponentHeaderBase{

    /* ---------------------------------------------
       SETUP
   --------------------------------------------- */
    constructor(elId , config) {
        super(
            listComponent[ComponentHeader.name] ,
            elId
        );
        this.renderComponent(config);
    }




    /* ---------------------------------------------
       TEMPLATEs
    --------------------------------------------- */
    componentFn(){
        this.templateFn(  "part_border");
        this.templateFn(  "part_icon");
    }

    templateFn(partName = null){
        switch (partName){
            case "part_structure":
                return this.template_render_structure(partName);
            case "part_border":
                return this.componentFn_render_border(partName);
            case "part_icon":
                return this.componentFn_render_icon(partName);
            case "part_header":
                return this.template_render_header(partName);
            default:
                return this.templateBasic_render();
        }
    }


    template_render_structure(partName) {

        const content = `
           <component-border id="component-header-border-${this._COMPONENT_RANDOM_ID}">
               <component-body>
               
                     <component-icon id="component-header-icon-${this._COMPONENT_RANDOM_ID}"></component-icon>
                     
                     ${this.templateFn("part_header") ?? ""}
                    
               </component-body>
          </component-border> 
                `;
        return this.templateBasic_render_structure(content);

    }

    template_render_header(partName) {

        const data = this.getPartProps(partName)

        if (data != null){
            const prop_size =      data.hasOwnProperty("prop_size")        ?  data.prop_size       : 5;
            const prop_title =     data.hasOwnProperty("prop_title")       ?  data.prop_title      :  this._COMPONENT_SLOTS?.body?.[0]?.html ?? "";

            return `
<section data-part-name="${partName}" 
         id="component-header-text-${this._COMPONENT_RANDOM_ID}">
   <h${prop_size}> <b>${prop_title ?? ''}</b> </h${prop_size}>
</section>
            `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    componentFn_render_border(partName) {
        const data = this.getPartProps(partName)

        if (data != null){

            const prop_borderClass =      data.hasOwnProperty("prop_borderClass")     ? data.prop_borderClass    : null;
            const prop_borderStyles =     data.hasOwnProperty("prop_borderStyles")    ? data.prop_borderStyles   : null;

            new window.ComponentBorder(
                `component-header-border-${this._COMPONENT_RANDOM_ID}` ,
                {
                    prop_btnMore_show: false ,

                    prop_structureClass: prop_borderClass ,
                    prop_structureStyles: prop_borderStyles ,

                    prop_borderColor : null,
                }
            )
        }
    }

    componentFn_render_icon (partName) {
        const data = this.getPartProps(partName)

        if (data != null){
            const prop_icon   =  data.hasOwnProperty("prop_icon")       ?  data.prop_icon      : null;

            new window.ComponentIcon(
                `component-header-icon-${this._COMPONENT_RANDOM_ID}` ,
                {
                    classList:[
                        (this._COMPONENT_CONFIG.hasOwnProperty("directionRtl") && this._COMPONENT_CONFIG.directionRtl) ? "float-end" : "float-start" ,
                        (this._COMPONENT_CONFIG.hasOwnProperty("directionRtl") && this._COMPONENT_CONFIG.directionRtl) ? "ps-2" : "pe-2" ,
                    ] ,

                    prop_icon: prop_icon ,
                }
            )
        }
    }

}


/*-------------------------------------
 01-04) Component label
-------------------------------------*/
class ComponentLabelBase extends ComponentBase{

    /* ---------------------------------------------
     PROPERTYs Pattern
   --------------------------------------------- */
    _COMPONENT_PATTERN = {
        prop_labelClass : {
            prop: "prop_labelClass" ,
            default: ["shadow-sm" , "px-2" , "py-0" , "rounded"]
        } ,
        prop_labelStyles : {
            prop: "prop_labelStyles" ,
            default: {}
        } ,
        prop_labelShow : {
            prop: "prop_labelShow" ,
            default: true
        } ,
        prop_labelTooltipDescription : {
            prop: "prop_labelTooltipDescription" ,
            default: null
        } ,
        prop_labelSize : {
            prop: "prop_labelSize" ,
            default: tools_css.standardSizes.m.name
        } ,
        prop_labelBackgroundColor : {
            prop: "prop_labelBackgroundColor" ,
            default: tools_const?.styles?.label?.backgroundColor_label ?? ""
        } ,
        prop_title : {
            prop: "prop_title" ,
            default: null
        } ,
        prop_for : {
            prop: "prop_for" ,
            default: null
        } ,
        prop_labelColor : {
            prop: "prop_labelColor" ,
            default:  tools_const?.styles?.label?.color_label ?? ""
        } ,
        prop_tooltipIcon : {
            prop: "prop_tooltipIcon" ,
            default: tools_icons.icon_exclamation_square
        } ,
        prop_TooltipIconColor : {
            prop: "prop_TooltipIconColor" ,
            default:  tools_const?.styles?.label?.color_icon ?? ""
        } ,
    }


    /* ---------------------------------------------
      PROPERTYs Props
      --------------------------------------------- */
    _COMPONENT_PROPS = {
        part_structure: [

        ] ,
        part_border: [
            this._COMPONENT_PATTERN.prop_labelClass ,
            this._COMPONENT_PATTERN.prop_labelStyles ,
            this._COMPONENT_PATTERN.prop_labelBackgroundColor ,
            this._COMPONENT_PATTERN.prop_labelSize ,
            this._COMPONENT_PATTERN.prop_labelShow ,
        ] ,
        part_label: [
            this._COMPONENT_PATTERN.prop_title ,
            this._COMPONENT_PATTERN.prop_for ,
            this._COMPONENT_PATTERN.prop_labelColor ,
            this._COMPONENT_PATTERN.prop_labelSize ,
        ] ,
        part_tooltip_desctiopn: [
            this._COMPONENT_PATTERN.prop_tooltipIcon ,
            this._COMPONENT_PATTERN.prop_labelTooltipDescription ,
            this._COMPONENT_PATTERN.prop_labelSize ,
            this._COMPONENT_PATTERN.prop_TooltipIconColor ,
        ]
    }


    /* ---------------------------------------------
         PROPERTYs Schema
     --------------------------------------------- */
    _COMPONENT_SCHEMA = {
        part_structure: {
            part_border: {
                part_label: {} ,
                part_tooltipDesctiopn: {} ,
            } ,
        } ,
    }

}
window.ComponentLabel  = class ComponentLabel extends ComponentLabelBase{

    /* ---------------------------------------------
       SETUP
   --------------------------------------------- */
    constructor(elId , config) {
        super(
            listComponent[ComponentLabel.name] ,
            elId
        );
        this.renderComponent(config);
    }



    /* ---------------------------------------------
      TEMPLATEs
    --------------------------------------------- */
    componentFn(){
        this.templateFn("part_border");
        this.templateFn("part_tooltip_desctiopn");
    }
    templateFn(partName = null){
        switch (partName){
            case "part_structure":
                return this.template_render_structure( partName );
            case "part_border":
                return this.componentFn_render_border( partName );
            case "part_label":
                return this.template_render_label(partName);
            case "part_tooltip_desctiopn":
                return this.componentFn_render_tooltipDesctiopn(partName);
            default:
                return this.templateBasic_render();
        }
    }

    template_render_structure(partName) {
        const content = `
        <component-border id="component-label-border-${this._COMPONENT_RANDOM_ID}">
            <component-body>
                ${this.templateFn("part_label") ?? ""}
                
                <component-tooltip-description id="component-label-tooltip-description-${this._COMPONENT_RANDOM_ID}"></component-tooltip-description>
                
            </component-body>
        </component-border>
                `;
        return this.templateBasic_render_structure(content , ["position-relative"]);
    }

    template_render_label(partName) {

        const data = this.getPartProps(partName)

        if (data != null){

            const prop_for          =   data.hasOwnProperty("prop_for")                                   ?  data.prop_for          : "";
            const prop_title        =   data.hasOwnProperty("prop_title") && data.prop_title !=null       ?  data.prop_title        :  this._COMPONENT_SLOTS?.body?.[0]?.html ?? "";
            const prop_labelColor   =   data.hasOwnProperty("prop_labelColor")                            ?  data.prop_labelColor   :  tools_const.hasOwnProperty("styles") && tools_const.styles.hasOwnProperty("label") && tools_const.styles.label.hasOwnProperty("color")   ? tools_const.styles.label.color : "";
            const prop_labelSize    =   data.hasOwnProperty("prop_labelSize")                             ?  data.prop_labelSize    :  null;
            const prop_labelShow    =   data.hasOwnProperty("prop_labelShow")                             ?  data.prop_labelShow    :  true;

            const elHeight = tools_css.getHeightSize(prop_labelSize);
            const elfontsize = tools_css.getFontSize(prop_labelSize);

            if (prop_labelShow && (prop_title != null && prop_title != "")){
                return `
<label data-part-name="${partName}"   
         id="component-label-label-${this._COMPONENT_RANDOM_ID}" 
         class=" d-block" 
         for="${prop_for}" 
         onclick="${this.getFn('fn_onCLickLabel' , 'event' , `'${prop_for}'`)}">
         
     <style>
         #${this._COMPONENT_ID} #component-label-label-${this._COMPONENT_RANDOM_ID}{
              cursor: pointer;
              color: ${prop_labelColor};
              font-size: ${elfontsize}px;
              line-height: ${elHeight}px;
         }
     </style>
       
     <b>
        ${prop_title}
     </b>
       
</label>
            `;
            }
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    componentFn_render_border(partName) {

        const data = this.getPartProps(partName);

        if (data != null){
            const prop_labelClass              =   data.hasOwnProperty("prop_labelClass")    && data.prop_labelClass != null    ?  data.prop_labelClass              : [];
            const prop_labelStyles             =   data.hasOwnProperty("prop_labelStyles")   && data.prop_labelStyles != null   ?  data.prop_labelStyles             : {};
            const prop_labelBackgroundColor    =   data.hasOwnProperty("prop_labelBackgroundColor")                             ?  data.prop_labelBackgroundColor    : null;
            //---------------
            if (prop_labelBackgroundColor != null){
                prop_labelStyles["background-color"] = prop_labelBackgroundColor;
            }

            new window.ComponentBorder(
                `component-label-border-${this._COMPONENT_RANDOM_ID}` ,
                {
                    prop_structureClass: prop_labelClass ,
                    prop_structureStyles: prop_labelStyles ,
                    prop_borderColor : null,
                }
            )
        }

    }

    componentFn_render_tooltipDesctiopn(partName) {

        const data = this.getPartProps(partName);

        if (data != null){

            const prop_labelTooltipDescription   =   data.hasOwnProperty("prop_labelTooltipDescription") && data.prop_labelTooltipDescription !=null       ?  data.prop_labelTooltipDescription     : this._COMPONENT_SLOTS?.description?.[0]?.html ?? "";
            const prop_tooltipIcon               =   data.hasOwnProperty("prop_tooltipIcon")                                                               ?  data.prop_tooltipIcon                 : "";
            const prop_labelSize                 =   data.hasOwnProperty("prop_labelSize")                                                                 ?  data.prop_labelSize                   : null;
            const prop_TooltipIconColor          =   data.hasOwnProperty("prop_TooltipIconColor")                                                          ?  data.prop_TooltipIconColor            : null;

            if (prop_labelTooltipDescription != null && prop_labelTooltipDescription != ""){

                const directionRtl              =  this._COMPONENT_CONFIG.hasOwnProperty("directionRtl")  ? this._COMPONENT_CONFIG.directionRtl      : false;

                const styles = {
                    "top" :        "50%" ,
                    "transform" :  "translate(0 , -50%)" ,
                    "z-index":     `${ tools_css.getZIndex(tools_css.standardZIndex.tools_position.name , 10) }` ,
                };
                styles[directionRtl ? "left" : "right"] = "10px"


                new window.ComponentTooltipDescription(
                    `component-label-tooltip-description-${this._COMPONENT_RANDOM_ID}` ,
                    {
                        prop_structureClass: ["position-absolute"] ,
                        prop_structureStyles: styles,

                        prop_icon: prop_tooltipIcon != null ? (typeof prop_tooltipIcon == "function" ? prop_tooltipIcon(prop_labelSize , prop_TooltipIconColor) : prop_tooltipIcon) : ""  ,
                        prop_description: prop_labelTooltipDescription ,
                    }
                )

            }

        }

    }




    /* ---------------------------------------------
       FUNCTIONs
    --------------------------------------------- */
    fn_onCLickLabel(event , prop_for){
        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("fn_callback") && typeof data.fn_callback != null){
            data.fn_callback(event , prop_for);
        }
    }

}


/*-------------------------------------
 01-05) Component Description
-------------------------------------*/
class ComponentDescriptionBase extends ComponentBase{

    /* ---------------------------------------------
       PROPERTYs Pattern
       --------------------------------------------- */
    _COMPONENT_PATTERN = {
        prop_borderClass: {
            prop: "prop_borderClass",
            default: []
        },
        prop_borderStyles: {
            prop: "prop_borderStyles",
            default: {}
        },
        prop_height: {
            prop: "prop_height",
            default: 250
        },
        var_showContent: {
            prop: "var_showContent",
            default: false
        },
        prop_icon: {
            prop: "prop_icon",
            default: null
        },
        prop_title: {
            prop: "prop_title",
            default: ""
        },
        prop_description: {
            prop: "prop_description",
            default: null
        },
        prop_descriptionClass: {
            prop: "prop_descriptionClass",
            default: []
        },
        prop_descriptionStyles: {
            prop: "prop_descriptionStyles",
            default: {}
        },
        prop_buttonTitleMore: {
            prop: "prop_buttonTitleMore",
            default: "more ..."
        },
        prop_buttonTitleLess: {
            prop: "prop_buttonTitleLess",
            default: "less ..."
        },
    };


    /* ---------------------------------------------
           PROPERTYs Props
    --------------------------------------------- */
    _COMPONENT_PROPS = {
        part_structure: [],

        part_border: [
            this._COMPONENT_PATTERN.prop_borderClass,
            this._COMPONENT_PATTERN.prop_borderStyles,
        ],

        part_border_content: [
            this._COMPONENT_PATTERN.prop_height,
            this._COMPONENT_PATTERN.var_showContent,
        ],

        part_header: [
            this._COMPONENT_PATTERN.prop_icon,
            this._COMPONENT_PATTERN.prop_title,
            this._COMPONENT_PATTERN.var_showContent,
        ],

        part_description: [
            this._COMPONENT_PATTERN.prop_description,
            this._COMPONENT_PATTERN.prop_descriptionClass,
            this._COMPONENT_PATTERN.prop_descriptionStyles,
            this._COMPONENT_PATTERN.prop_height,
            this._COMPONENT_PATTERN.var_showContent,
        ],

        part_btnMore: [
            this._COMPONENT_PATTERN.var_showContent,
            this._COMPONENT_PATTERN.prop_buttonTitleMore,
            this._COMPONENT_PATTERN.prop_buttonTitleLess,
        ],
    };


    /* ---------------------------------------------
     PROPERTYs Schema
     --------------------------------------------- */
    _COMPONENT_SCHEMA = {
        part_structure: {
            part_border: {
                part_border_content: {
                    part_header: {} ,
                    part_description: {} ,
                    part_btnMore: {} ,
                }
            }
        } ,
    }

}
window.ComponentDescription = class ComponentDescription extends ComponentDescriptionBase{

    /* ---------------------------------------------
       SETUP
    --------------------------------------------- */
    constructor(elId , config) {
        super(
            listComponent[ComponentDescription.name] ,
            elId
        );
        this.renderComponent(config);
    }



    /* ---------------------------------------------
     TEMPLATEs
    --------------------------------------------- */
    componentFn(){
        this.templateFn("part_border");
        this.templateFn("part_header");
        this.templateFn("part_btnMore");
    }
    templateFn(partName = null){
        switch (partName){
            case "part_structure":
                return this.template_render_structure(partName);
            case "part_border":
                return this.componentFn_render_border(partName);
            case "part_border_content":
                return this.template_render_borderContnet(partName);
            case "part_header":
                return this.componentFn_render_header(partName);
            case "part_description":
                return this.template_render_description(partName);
            case "part_btnMore":
                return this.componentFn_render_btnMore(partName);
            default:
                return this.templateBasic_render();
        }
    }

    template_render_structure(partName) {
        const content = `
   <component-border id="component-description-border-${this._COMPONENT_RANDOM_ID}" class="row px-2 py-1 m-0">
       <component-body>
            
              ${this.templateFn("part_border_content") ?? ""}
              
       </component-body>
   </component-border>
                `;
        return this.templateBasic_render_structure(content );
    }

    template_render_borderContnet(partName) {
        const data = this.getPartProps(partName)

        if (data != null){

            const prop_height              =  data.hasOwnProperty("prop_height")                          ?  data.prop_height                  :  250;
            const var_showContent          =  data.hasOwnProperty("var_showContent")                      ?  data.var_showContent              :  false;

            let styles = {};
            if (!var_showContent){
                styles["overflow"]= "hidden";
                styles["height"]= prop_height + "px";
            }
            else{
                styles["overflow"]= "auto";
                styles["height"]= "auto";
            }


            return `
<section data-part-name="${partName}" 
         id="component-description-border-content-${this._COMPONENT_RANDOM_ID}"
         class="px-2 pt-2 position-relative">
         
     <style>
         #${this._COMPONENT_ID} #component-description-border-content-${this._COMPONENT_RANDOM_ID}{
             ${tools_public.renderListStyle(styles)}
         }
         
         
         #${this._COMPONENT_ID} #component-description-button-${this._COMPONENT_RANDOM_ID}{
             opacity: 0.6;
         }
         
         #${this._COMPONENT_ID} #component-description-border-content-${this._COMPONENT_RANDOM_ID}:hover #component-description-button-${this._COMPONENT_RANDOM_ID}{
             opacity: 1;
         }
     </style>
     
     <component-header id="component-description-header-${this._COMPONENT_RANDOM_ID}"></component-header>
                
     ${this.templateFn("part_description") ?? ""}
                
     <component-button id="component-description-button-${this._COMPONENT_RANDOM_ID}"></component-button>
                
</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    template_render_description(partName) {
        const data = this.getPartProps(partName)

        if (data != null){
            const prop_description         =   data.hasOwnProperty("prop_description") && data.prop_description !=null       ?  data.prop_description             : this._COMPONENT_SLOTS?.body?.[0]?.html ?? "";
            const prop_descriptionClass    =  data.hasOwnProperty("prop_descriptionClass")                                   ?  data.prop_descriptionClass        : [];
            const prop_descriptionStyles   =  data.hasOwnProperty("prop_descriptionStyles")                                  ?  data.prop_descriptionStyles       : {};

            prop_descriptionStyles["text-align"] = "justify";
            prop_descriptionStyles["display"] = "-webkit-box";
            prop_descriptionStyles["-webkit-box-orient"] = "vertical";
            prop_descriptionStyles["padding-bottom"] = "40px";

            return `
<section data-part-name="${partName}" 
         id="component-description-description-${this._COMPONENT_RANDOM_ID}"
         class="${tools_public.renderListClass(prop_descriptionClass)}">
         
     <style>
         #${this._COMPONENT_ID} #component-description-description-${this._COMPONENT_RANDOM_ID}{
             ${tools_public.renderListStyle(prop_descriptionStyles)}
         }
     </style>
     
     ${prop_description}
     
</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    componentFn_render_border(partName) {
        const data = this.getPartProps(partName);

        if (data != null){
            const prop_borderClass    =  data.hasOwnProperty("prop_borderClass")                ?  data.prop_borderClass        : [];
            const prop_borderStyles   =  data.hasOwnProperty("prop_borderStyles")               ?  data.prop_borderStyles       : {};


            new window.ComponentBorder(
                `component-description-border-${this._COMPONENT_RANDOM_ID}` ,
                {
                    prop_borderClass ,
                    prop_borderStyles
                }
            )
        }
    }

    componentFn_render_header(partName) {
        const data = this.getPartProps(partName);

        if (data != null){

            const prop_title            =  data.hasOwnProperty("prop_title")               ?  data.prop_title            : "";
            const prop_icon             =  data.hasOwnProperty("prop_icon")                ?  data.prop_icon             : null;

            new window.ComponentHeader(
                `component-description-header-${this._COMPONENT_RANDOM_ID}` ,
                {
                    prop_icon: prop_icon,
                    prop_size: 5,
                    prop_title: prop_title,
                }
            )
        }

    }

    componentFn_render_btnMore(partName) {
        const data = this.getPartProps(partName);

        if (data != null){

            const prop_buttonTitleMore        =  data.hasOwnProperty("prop_buttonTitleMore")           ?  data.prop_buttonTitleMore        : "";
            const prop_buttonTitleLess        =  data.hasOwnProperty("prop_buttonTitleLess")           ?  data.prop_buttonTitleLess        : "";
            const var_showContent             =  data.hasOwnProperty("var_showContent")                ?  data.var_showContent             : false;

            new window.ComponentButton(
                `component-description-button-${this._COMPONENT_RANDOM_ID}` ,
                {
                    prop_show: !var_showContent ? this.fn_checkShowDescription() : true ,

                    prop_structureClass:  ["position-absolute"] ,
                    prop_structureStyles: {
                        "bottom" : "5px" ,
                        "left" : "5px" ,
                        "right" : "5px" ,
                    } ,

                    prop_title: `<b>${var_showContent ? prop_buttonTitleLess :  prop_buttonTitleMore}</b>` ,
                    fn_callback: (event) => {
                        this.fn_callbackBtnMore(event);
                    }
                }
            )
        }

    }



    /* ---------------------------------------------
      FUNCTIONs
   --------------------------------------------- */
    fn_callbackBtnMore(event){
        let var_showContent = this.get("var_showContent" , false);
        this.set("var_showContent" , !var_showContent)
    }

    fn_checkShowDescription(){
        const borderElement = document.querySelector(`#component-description-border-${this._COMPONENT_RANDOM_ID}`).querySelector("[data-part-name=part_structure]");
        const descritionElement = document.querySelector(`#component-description-description-${this._COMPONENT_RANDOM_ID}`);

        if (borderElement != null && descritionElement != null){
            const borderHeight = borderElement.getBoundingClientRect().height;
            const descritionHeight = descritionElement.getBoundingClientRect().height;

            return  descritionHeight > borderHeight;
        }

        return true


    }
}


/*-------------------------------------
 01-06) Component link
-------------------------------------*/
class ComponentLinkBase extends ComponentBase{



    /* ---------------------------------------------
     PROPERTYs Pattern
   --------------------------------------------- */
    _COMPONENT_PATTERN = {
        prop_borderClass: {
            prop : "prop_borderClass",
            default: ["row"  , "px-2" , "py-1" , "m-0" , "border" , "shadow-sm" , "rounded" , "rounded"]
        } ,
        prop_borderStyles: {
            prop : "prop_borderStyles",
            default: {
                "cursor" : "pointer" ,
                "background-color" :  tools_const.hasOwnProperty("styles") && tools_const.styles.hasOwnProperty("elementLink") && tools_const.styles.elementLink.hasOwnProperty("normal") && tools_const.styles.elementLink.normal.hasOwnProperty("backgroundColor")  ? tools_const.styles.elementLink.normal.backgroundColor : ""
            }
        } ,
        prop_borderHoverStyles: {
            prop : "prop_borderHoverStyles",
            default: {
                "transition" : "background-color ease 300ms" ,
                "background-color" :  tools_const.hasOwnProperty("styles") && tools_const.styles.hasOwnProperty("elementLink") && tools_const.styles.elementLink.hasOwnProperty("hover") && tools_const.styles.elementLink.hover.hasOwnProperty("backgroundColor") ? tools_const.styles.elementLink.hover.backgroundColor : ""
            }
        } ,
        prop_linkHref: {
            prop : "prop_linkHref",
            default: null
        } ,
        prop_imageSource: {
            prop : "prop_imageSource",
            default: null
        } ,
        prop_imageTitle: {
            prop : "prop_imageTitle",
            default: null
        } ,
        prop_imageAlt: {
            prop : "prop_imageAlt",
            default: null
        } ,
        prop_imageClass: {
            prop : "prop_imageClass",
            default: ["text-center"]
        } ,
        prop_imageStyles:  {
            prop : "prop_imageStyles",
            default: null
        } ,

        prop_iconSource: {
            prop : "prop_iconSource",
            default: null
        } ,
        prop_iconIsItalik: {
            prop : "prop_iconIsItalik",
            default: false
        } ,
        prop_iconClass: {
            prop : "prop_iconClass",
            default: ["text-center"]
        } ,
        prop_iconStyles: {
            prop : "prop_iconStyles",
            default: null
        } ,

        prop_title: {
            prop : "prop_title",
            default: ""
        } ,
        prop_titleClass: {
            prop : "prop_titleClass",
            default: []
        } ,
        prop_titleStyles: {
            prop : "prop_titleStyles",
            default: {
                "height": "100%",
                "line-height": "500%",
                "text-align": "center"
            }
        } ,
    }



    /* ---------------------------------------------
      PROPERTYs Props
      --------------------------------------------- */
    _COMPONENT_PROPS = {
        part_structure: [

        ] ,
        part_border: [
            this._COMPONENT_PATTERN.prop_borderClass ,
            this._COMPONENT_PATTERN.prop_borderStyles ,
            this._COMPONENT_PATTERN.prop_borderHoverStyles ,
            this._COMPONENT_PATTERN.prop_linkHref ,
        ] ,
        part_image: [
            this._COMPONENT_PATTERN.prop_imageSource ,
            this._COMPONENT_PATTERN.prop_imageTitle ,
            this._COMPONENT_PATTERN.prop_imageAlt ,
            this._COMPONENT_PATTERN.prop_imageClass ,
            this._COMPONENT_PATTERN.prop_imageStyles ,
        ] ,
        part_icon: [
            this._COMPONENT_PATTERN.prop_iconSource ,
            this._COMPONENT_PATTERN.prop_iconIsItalik ,
            this._COMPONENT_PATTERN.prop_iconClass ,
            this._COMPONENT_PATTERN.prop_iconStyles ,
        ] ,
        part_title: [
            this._COMPONENT_PATTERN.prop_title ,
            this._COMPONENT_PATTERN.prop_titleClass ,
            this._COMPONENT_PATTERN.prop_titleStyles ,
        ] ,
    }


    /* ---------------------------------------------
     PROPERTYs Schema
     --------------------------------------------- */
    _COMPONENT_SCHEMA = {
        part_structure: {
            part_border: {
                part_image: {} ,
                part_icon: {} ,
                part_title: {} ,
            }
        } ,
    }

}
window.ComponentLink = class ComponentLink extends ComponentLinkBase{

    /* ---------------------------------------------
       SETUP
    --------------------------------------------- */
    constructor(elId , config) {
        super(
            listComponent[ComponentLink.name] ,
            elId
        );
        this.renderComponent(config);
    }



    /* ---------------------------------------------
     TEMPLATEs
    --------------------------------------------- */
    componentFn(){
        this.templateFn("part_border");
        this.templateFn("part_image");
        this.templateFn("part_icon");
    }
    templateFn(partName = null){
        switch (partName){
            case "part_structure":
                return this.template_render_structure(partName);
            case "part_border":
                return this.componentFn_render_border(partName);
            case "part_image":
                return this.componentFn_render_image(partName);
            case "part_icon":
                return this.componentFn_render_icon(partName);
            case "part_title":
                return this.template_render_title(partName);
            default:
                return this.templateBasic_render();
        }
    }

    template_render_structure(partName) {
        const content = `
   <component-border id="component-link-border-${this._COMPONENT_RANDOM_ID}" class="row px-2 py-1 m-0">
       <component-body>
         
          <component-icon id="component-link-icon-${this._COMPONENT_RANDOM_ID}"></component-icon>
         
          <component-image id="component-link-image-${this._COMPONENT_RANDOM_ID}"></component-image>
 
          ${this.templateFn("part_title") ?? ""}
         
       </component-body>
   </component-border>
                `;
        return this.templateBasic_render_structure(content );
    }

    template_render_title(partName) {
        const data = this.getPartProps(partName)

        if (data != null){

            const prop_title            =  data.hasOwnProperty("prop_title")               ?  data.prop_title            : [];
            const prop_titleClass       =  data.hasOwnProperty("prop_titleClass")          ?  data.prop_titleClass       : {};
            const prop_titleStyles      =  data.hasOwnProperty("prop_titleStyles")         ?  data.prop_titleStyles      : {};
            /*col-8*/
            return `
<b data-part-name="${partName}" 
         id="component-link-title-${this._COMPONENT_RANDOM_ID}"
         class="${tools_public.renderListClass(prop_titleClass)} ">
         
     <style>
         #${this._COMPONENT_ID} #component-link-title-${this._COMPONENT_RANDOM_ID}{
             ${tools_public.renderListStyle(prop_titleStyles)}
         }
     </style>
     
     ${prop_title}
     
</b>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    componentFn_render_border(partName) {

        const data = this.getPartProps(partName);

        const prop_borderClass            =  data.hasOwnProperty("prop_borderClass")               ?  data.prop_borderClass            : [];
        const prop_borderStyles           =  data.hasOwnProperty("prop_borderStyles")              ?  data.prop_borderStyles           : {};
        const prop_borderHoverStyles      =  data.hasOwnProperty("prop_borderHoverStyles")         ?  data.prop_borderHoverStyles      : {};
        const prop_linkHref               =  data.hasOwnProperty("prop_linkHref")                  ?  data.prop_linkHref               : null;

        if (data != null){

            new window.ComponentBorder(
                `component-link-border-${this._COMPONENT_RANDOM_ID}` ,
                {
                    prop_structureClass:  prop_borderClass ,
                    prop_structureStyles: prop_borderStyles ,
                    prop_structureHoverStyles: prop_borderHoverStyles ,

                    prop_borderClass: [/*"row"*/],

                    fn_callback  :  (event) => {
                        this.fn_callbackLink(event,  prop_linkHref)
                    } ,
                }
            )
        }

    }

    componentFn_render_image(partName) {

        const data = this.getPartProps(partName);

        if (data != null){

            const prop_imageSource            =  data.hasOwnProperty("prop_imageSource")               ?  data.prop_imageSource            : null;
            const prop_imageTitle             =  data.hasOwnProperty("prop_imageTitle")                ?  data.prop_imageTitle             : null;
            const prop_imageAlt               =  data.hasOwnProperty("prop_imageAlt")                  ?  data.prop_imageAlt               : null;
            const prop_imageClass             =  data.hasOwnProperty("prop_imageClass")                ?  data.prop_imageClass             : null;
            const prop_imageStyles            =  data.hasOwnProperty("prop_imageStyles")               ?  data.prop_imageStyles            : null;

            if (prop_imageSource != null){
                new window.ComponentImage(
                    `component-link-image-${this._COMPONENT_RANDOM_ID}` ,
                    {
                        classList:  [/*"col-4"*/ ] ,

                        prop_structureClass:  [] ,
                        prop_structureStyles: {} ,

                        prop_imageTitle : prop_imageTitle ,
                        prop_imageAlt : prop_imageAlt ,

                        prop_imageSource  :  prop_imageSource,
                        prop_imageClass   :  prop_imageClass,
                        prop_imageStyles  :  prop_imageStyles,
                    }
                )
            }
            else {
                const el = document.querySelector(`#component-link-image-${this._COMPONENT_RANDOM_ID}`);
                if (el != null){
                    el.remove();
                }
            }

        }

    }

    componentFn_render_icon(partName) {

        const data = this.getPartProps(partName);

        if (data != null){

            const prop_iconSource            =  data.hasOwnProperty("prop_iconSource")             ?  data.prop_iconSource           : null;
            const prop_iconIsItalik          =  data.hasOwnProperty("prop_iconIsItalik")           ?  data.prop_iconIsItalik         : false;
            const prop_iconClass             =  data.hasOwnProperty("prop_iconClass")              ?  data.prop_iconClass            : null;
            const prop_iconStyles            =  data.hasOwnProperty("prop_iconStyles")             ?  data.prop_iconStyles           : null;

            if (prop_iconSource != null){
                new window.ComponentIcon(
                    `component-link-icon-${this._COMPONENT_RANDOM_ID}` ,
                    {
                        classList:  [/*"col-4" */] ,

                        prop_structureClass:  [] ,
                        prop_structureStyles: {} ,

                        prop_icon : prop_iconSource ,
                        prop_isItalik : prop_iconIsItalik ,

                        prop_iconClass : prop_iconClass ,
                        prop_iconStyles : prop_iconStyles
                    }
                )
            }
            else {
                const el = document.querySelector(`#component-link-icon-${this._COMPONENT_RANDOM_ID}`);
                if (el != null){
                    el.remove();
                }
            }

        }

    }





    /* ---------------------------------------------
       FUNCTIONs
    --------------------------------------------- */
    fn_callbackLink(event , prop_linkHref){
        if (prop_linkHref != null){
            window.open(prop_linkHref, '_blank');
        }
    }

}


/*-------------------------------------
 01-07) Component Info
-------------------------------------*/
class ComponentInfoBase extends ComponentBase{

    /* ---------------------------------------------
       PROPERTYs Pattern
       --------------------------------------------- */
    _COMPONENT_PATTERN = {
        prop_icon: {
            prop: "prop_icon",
            default: null
        },
        prop_iconClass: {
            prop: "prop_iconClass",
            default: []
        },
        prop_iconStyles: {
            prop: "prop_iconStyles",
            default: {
                "margin": "0 5px",
                "width": "30px",
                "line-height": "20px",
                "font-size": "20pt",
                "top": "0"
            }
        },
        prop_info: {
            prop: "prop_info",
            default: ""
        },
        prop_infoClass: {
            prop: "prop_infoClass",
            default: []
        },
        prop_infoStyles: {
            prop: "prop_infoStyles",
            default: {}
        }
    };



    /* ---------------------------------------------
           PROPERTYs Props
    --------------------------------------------- */
    _COMPONENT_PROPS = {
        part_structure: [],

        part_icon: [
            this._COMPONENT_PATTERN.prop_icon,
            this._COMPONENT_PATTERN.prop_iconClass,
            this._COMPONENT_PATTERN.prop_iconStyles
        ],

        part_content: [
            this._COMPONENT_PATTERN.prop_info,
            this._COMPONENT_PATTERN.prop_infoClass,
            this._COMPONENT_PATTERN.prop_infoStyles
        ]
    };



    /* ---------------------------------------------
     PROPERTYs Schema
     --------------------------------------------- */
    _COMPONENT_SCHEMA = {
        part_structure: {
            part_icon: {} ,
            part_content: {} ,
        } ,
    }

}
window.ComponentInfo = class ComponentInfo extends ComponentInfoBase{


    /* ---------------------------------------------
       SETUP
    --------------------------------------------- */
    constructor(elId , config) {
        super(
            listComponent[ComponentInfo.name] ,
            elId
        );
        super.renderComponent(config);
    }


    /* ---------------------------------------------
    TEMPLATEs
    --------------------------------------------- */
    componentFn(){
        this.templateFn("part_icon");
    }
    templateFn(partName = null){
        switch (partName){
            case "part_structure":
                return this.template_render_structure(partName);
            case "part_icon":
                return this.componentFn_render_icon(partName);
            case "part_content":
                return this.template_render_contnet(partName);
            default:
                return this.templateBasic_render();
        }
    }

    template_render_structure(partName) {
        const content = `
<div class="float-start">
    <component-icon id="component-info-icon-${this._COMPONENT_RANDOM_ID}"></component-icon>
</div>

<div class="">
   ${this.templateFn("part_content") ?? ""}
</div>
                `;
        return this.templateBasic_render_structure(content );
    }

    template_render_contnet(partName) {
        const data = this.getPartProps(partName)

        if (data != null){

            const prop_info              =  data.hasOwnProperty("prop_info")                          ?  data.prop_info                  :  "";
            const prop_infoClass         =  data.hasOwnProperty("prop_infoClass")                     ?  data.prop_infoClass             :  [];
            const prop_infoStyles        =  data.hasOwnProperty("prop_infoStyles")                    ?  data.prop_infoStyles            : {};


            return `
<section data-part-name="${partName}" 
         id="component-info-content-${this._COMPONENT_RANDOM_ID}"
         class="${tools_public.renderListClass(prop_infoClass)}">
         
     <style>
         #${this._COMPONENT_ID} #component-info-content-${this._COMPONENT_RANDOM_ID}{
             ${tools_public.renderListStyle(prop_infoStyles)}
         }
     </style>
     
     ${prop_info}
                
</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    componentFn_render_icon(partName) {

        const data = this.getPartProps(partName)

        if (data != null){
            const prop_icon          =   data.hasOwnProperty("prop_icon")                     ?  data.prop_icon                          :  null;
            const prop_iconClass     =   data.hasOwnProperty("prop_iconClass")                ?  data.prop_iconClass                     :  [];
            const prop_iconStyles    =   data.hasOwnProperty("prop_iconStyles")               ?  data.prop_iconStyles                    :  {"margin" : "0 5px", "width" : "30px", "line-height" :   "35px", "font-size" : "20pt;", "top" : "0" ,};


            if (prop_icon != null){

                new window.ComponentIcon(
                    `component-info-icon-${this._COMPONENT_RANDOM_ID}` ,
                    {
                        prop_icon: prop_icon ,

                        prop_iconClass : prop_iconClass ,
                        prop_iconStyles : prop_iconStyles ,
                    }
                )

            }

        }
    }


}


/*-------------------------------------
 01-08) Component Card
-------------------------------------*/
class ComponentCardBase extends ComponentBase{

    /* ---------------------------------------------
        PROPERTYs Pattern
     --------------------------------------------- */
    _COMPONENT_PATTERN = {
        prop_cardClass: {
            prop: "prop_cardClass",
            default: []
        },
        prop_cardStyles: {
            prop: "prop_cardStyles",
            default: {}
        },
        prop_header: {
            prop: "prop_header",
            default: null
        },
        prop_cardHeaderClassBackground: {
            prop: "prop_cardHeaderClassBackground",
            default: "bg-secondary"
        },
        prop_cardHeaderClassColor: {
            prop: "prop_cardHeaderClassColor",
            default: "text-white"
        },
        prop_body: {
            prop: "prop_body",
            default: null
        },
        prop_cardBodyClassBackground: {
            prop: "prop_cardBodyClassBackground",
            default: "bg-white"
        },
        prop_cardBodyClassColor: {
            prop: "prop_cardBodyClassColor",
            default: "text-dark"
        },
    };

    /* ---------------------------------------------
           PROPERTYs Props
    --------------------------------------------- */
    _COMPONENT_PROPS = {
        part_structure: [],

        part_card: [
            this._COMPONENT_PATTERN.prop_cardClass,
            this._COMPONENT_PATTERN.prop_cardStyles,
        ],

        part_card_header: [
            this._COMPONENT_PATTERN.prop_header,
            this._COMPONENT_PATTERN.prop_cardHeaderClassBackground,
            this._COMPONENT_PATTERN.prop_cardHeaderClassColor,
        ],

        part_card_body: [
            this._COMPONENT_PATTERN.prop_body,
            this._COMPONENT_PATTERN.prop_cardBodyClassBackground,
            this._COMPONENT_PATTERN.prop_cardBodyClassColor,
        ],
    };

    /* ---------------------------------------------
     PROPERTYs Schema
     --------------------------------------------- */
    _COMPONENT_SCHEMA = {
        part_structure: {
            part_card_header : {} ,
            part_card_body : {} ,
        },
    }

}
window.ComponentCard = class ComponentCard extends ComponentCardBase {

    /* ---------------------------------------------
       SETUP
    --------------------------------------------- */
    constructor(elId, config) {
        super(
            listComponent[ComponentCard.name] ,
            elId
        );
        super.renderComponent(config);
    }


    /* ---------------------------------------------
    TEMPLATEs
    --------------------------------------------- */
    componentFn() {

    }

    templateFn(partName = null) {
        switch (partName) {
            case "part_structure":
                return this.template_render_structure(partName);
            case "part_card":
                return this.template_render_card(partName);
            case "part_card_header":
                return this.template_render_cardHeader(partName);
            case "part_card_body":
                return this.template_render_cardBody(partName);

            default:
                return this.templateBasic_render();
        }
    }

    template_render_structure(partName) {
        const content = `
  ${this.templateFn("part_card") ?? ""}
                `;
        return this.templateBasic_render_structure(content);
    }

    template_render_card(partName) {
        const data = this.getPartProps(partName)

        if (data != null) {

            const prop_cardClass    = data.hasOwnProperty("prop_cardClass") ? data.prop_cardClass : [];
            const prop_cardStyles   = data.hasOwnProperty("prop_cardStyles") ? data.prop_cardStyles : {};

            return `
<section data-part-name="${partName}" 
         id="component-card-card-${this._COMPONENT_RANDOM_ID}"
         class="card mb-1 mx-2 overflow-hidden  ${tools_public.renderListClass(prop_cardClass)}">
         
     <style>
         #${this._COMPONENT_ID} #component-card-card-${this._COMPONENT_RANDOM_ID}{
             ${tools_public.renderListStyle(prop_cardStyles)}
         }
     </style>
     
       ${this.templateFn("part_card_header") ?? ""}
       
       ${this.templateFn("part_card_body") ?? ""}
                
</section>
        `;
        }
    }

    template_render_cardHeader(partName) {
        const data = this.getPartProps(partName)

        if (data != null) {
            const prop_header                    =   data.hasOwnProperty("prop_header") && data.prop_header !=null       ?  data.prop_header                     :  this._COMPONENT_SLOTS?.header?.[0]?.html ?? "";
            const prop_cardHeaderClassBackground = data.hasOwnProperty("prop_cardHeaderClassBackground")                 ? data.prop_cardHeaderClassBackground   : "";
            const prop_cardHeaderClassColor      = data.hasOwnProperty("prop_cardHeaderClassColor")                      ? data.prop_cardHeaderClassColor        : "";

            return `
<section data-part-name="${partName}" 
         id="component-card-header-${this._COMPONENT_RANDOM_ID}"
         class="card-header ${prop_cardHeaderClassBackground} ${prop_cardHeaderClassColor}">
         
     <style>
         #${this._COMPONENT_ID} #component-card-header-${this._COMPONENT_RANDOM_ID}{
         
         }
     </style>
     
  ${prop_header}
                
</section>
        `;
        }
    }

    template_render_cardBody(partName) {
        const data = this.getPartProps(partName)

        if (data != null) {

            const prop_body                    =   data.hasOwnProperty("prop_body") && data.prop_body !=null       ?  data.prop_body                     : this._COMPONENT_SLOTS?.body?.[0]?.html ?? "";
            const prop_cardBodyClassBackground = data.hasOwnProperty("prop_cardBodyClassBackground")               ? data.prop_cardBodyClassBackground   : "";
            const prop_cardBodyClassColor      = data.hasOwnProperty("prop_cardBodyClassColor")                    ? data.prop_cardBodyClassColor        : "";

            return `
<section data-part-name="${partName}" 
         id="component-card-body-${this._COMPONENT_RANDOM_ID}"
         class="card-header ${prop_cardBodyClassBackground} ${prop_cardBodyClassColor}">
         
     <style>
         #${this._COMPONENT_ID} #component-card-body-${this._COMPONENT_RANDOM_ID}{
         
         }
     </style>
     
  ${prop_body}
                
</section>
        `;
        }
    }
}


/*-------------------------------------
 01-08) Component Card
-------------------------------------*/
class ComponentCardInfoBase extends ComponentBase{

    /* ---------------------------------------------
        PROPERTYs Pattern
     --------------------------------------------- */
    _COMPONENT_PATTERN = {
        prop_size: {
            prop: "prop_size",
            default: tools_css.standardSizes.m.name
        },
        prop_borderClass: {
            prop: "prop_borderClass",
            default: ["border" , "rounded" , "shadow-sm" ]
        },
        prop_borderStyles: {
            prop: "prop_borderStyles",
            default: {}
        },
        prop_body: {
            prop: "prop_body",
            default: null
        },
        prop_options: {
            prop: "prop_options",
            default: null
        },
        prop_optionsOpacity: {
            prop: "prop_optionsOpacity",
            default: 45
        },


        prop_backgroundOptions: {
            prop: "prop_backgroundOptions",
            default: tools_const?.styles?.cardInfo?.backgroundColor_options ?? ""
        },
        prop_backgroundOptionItem: {
            prop: "prop_backgroundOptionItem",
            default: tools_const?.styles?.cardInfo?.backgroundColor_optionItem ?? ""
        },
        prop_colorItem: {
            prop: "prop_colorItem",
            default: tools_const?.styles?.cardInfo?.color_optionItem ?? ""
        },


        prop_colorHover: {
            prop: "prop_colorHover",
            default: tools_const?.styles?.cardInfo?.color_optionHover ?? ""
        },
        prop_backgroundOptionHover: {
            prop: "prop_backgroundOptionHover",
            default: tools_const?.styles?.cardInfo?.backgroundColor_optionHover ?? ""
        },
    };

    /* ---------------------------------------------
           PROPERTYs Props
    --------------------------------------------- */
    _COMPONENT_PROPS = {
        part_structure: [],

        part_border: [
            this._COMPONENT_PATTERN.prop_borderClass,
            this._COMPONENT_PATTERN.prop_borderStyles,
            this._COMPONENT_PATTERN.prop_size,
        ],

        part_border_body: [
            this._COMPONENT_PATTERN.prop_body,
            this._COMPONENT_PATTERN.prop_size,
        ],


        part_border_body_options: [
            this._COMPONENT_PATTERN.prop_backgroundOptions,
            this._COMPONENT_PATTERN.prop_options,
            this._COMPONENT_PATTERN.prop_backgroundOptionItem,
            this._COMPONENT_PATTERN.prop_backgroundOptionHover,
            this._COMPONENT_PATTERN.prop_colorItem,
            this._COMPONENT_PATTERN.prop_colorHover,
            this._COMPONENT_PATTERN.prop_optionsOpacity,
        ],

    };

    /* ---------------------------------------------
     PROPERTYs Schema
     --------------------------------------------- */
    _COMPONENT_SCHEMA = {
        part_structure: {
            part_border : {
                part_border_body: {
                    part_border_body_options: {} ,
                } ,
            } ,
        },
    }

}
window.ComponentCardInfo = class ComponentCardInfo extends ComponentCardInfoBase {

    /* ---------------------------------------------
       SETUP
    --------------------------------------------- */
    constructor(elId, config) {
        super(
            listComponent[ComponentCardInfo.name] ,
            elId
        );
        super.renderComponent(config);
    }


    /* ---------------------------------------------
    TEMPLATEs
    --------------------------------------------- */
    componentFn() {
        this.templateFn("part_border");
    }

    templateFn(partName = null) {
        switch (partName) {
            case "part_structure":
                return this.template_render_structure(partName);
            case "part_border":
                return this.componentFn_render_border(partName);
            case "part_border_body":
                return this.componentFn_render_border_body(partName);
            case "part_border_body_options":
                return this.componentFn_render_border_body_options(partName);

            default:
                return this.templateBasic_render([]);
        }
    }

    template_render_structure(partName) {
        const content = `
        
        <component-border id="component-card-info-border-${this._COMPONENT_RANDOM_ID}">
           <component-body>
               ${this.templateFn("part_border_body")}
           </component-body>
       </component-border>
        
                `;
        return this.templateBasic_render_structure(content , ["mb-3"]);
    }

    componentFn_render_border_body(partName) {
        const data = this.getPartProps(partName);

        if (data != null){
            const prop_body =     data.hasOwnProperty("prop_body") && data.prop_body != null      ? data.prop_body           : this._COMPONENT_SLOTS?.body?.[0]?.html ?? "";
            const prop_size      = data.hasOwnProperty("prop_size")                               ? data.prop_size           : null;

            const elHeight = tools_css.getHeightSize();

            return `
<section data-part-name="${partName}"
         id="component-card-info-border-body-${this._COMPONENT_RANDOM_ID}"
         class="position-relative ">

   <style>
      #${this._COMPONENT_ID} #component-card-info-border-body-${this._COMPONENT_RANDOM_ID}{
           display:  flow-root;
           overflow: hidden;
           padding-top: ${elHeight+10}px;
      }

   </style>

    ${prop_body}
    ${this.templateFn("part_border_body_options")}
</section>
            `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }


    componentFn_render_border_body_options(partName) {
        const data = this.getPartProps(partName);

        if (data != null){
            const prop_backgroundOptions     =  data.hasOwnProperty("prop_backgroundOptions")                       ? data.prop_backgroundOptions              : "";
            const prop_backgroundOptionItem  =  data.hasOwnProperty("prop_backgroundOptionItem")                    ? data.prop_backgroundOptionItem           : "";
            const prop_backgroundOptionHover =  data.hasOwnProperty("prop_backgroundOptionHover")                   ? data.prop_backgroundOptionHover          : "";
            const prop_colorItem             =  data.hasOwnProperty("prop_colorItem")                               ? data.prop_colorItem                      : "";
            const prop_colorHover            =  data.hasOwnProperty("prop_colorHover")                              ? data.prop_colorHover                     : "";
            const prop_options               =  data.hasOwnProperty("prop_options") && data.prop_options != null    ? data.prop_options                        : this._COMPONENT_SLOTS?.options ?? null;
            const directionRtl               =  this._COMPONENT_CONFIG.hasOwnProperty("directionRtl")               ? this._COMPONENT_CONFIG.directionRtl      : false;
            const prop_optionsOpacity        =     data.hasOwnProperty("prop_optionsOpacity")             ? data.prop_optionsOpacity            : 20;

            if (prop_options != null){
                let optionHtml = this.fn_getHtmlOptions(prop_options);

                return `
<section data-part-name="${partName}"
         id="component-card-info-border-body-options-${this._COMPONENT_RANDOM_ID}"
         class="position-absolute rounded shadow-sm px-3 py-1 ">

   <style>
      #${this._COMPONENT_ID} #component-card-info-border-body-options-${this._COMPONENT_RANDOM_ID}{
           top: 10px;
           ${directionRtl ? "left" : "right"} :  10px;
           background-color: ${prop_backgroundOptions};
           opacity: ${prop_optionsOpacity/100};
      }
      #${this._COMPONENT_ID}  #component-card-info-border-body-${this._COMPONENT_RANDOM_ID}:hover #component-card-info-border-body-options-${this._COMPONENT_RANDOM_ID} {
           opacity: 1;
      }
      #${this._COMPONENT_ID} #component-card-info-border-body-options-${this._COMPONENT_RANDOM_ID} .component-card-info-border-body-options-${this._COMPONENT_RANDOM_ID}-item {
           width: 20px;
           background-color: ${prop_backgroundOptionItem};
           color: ${prop_colorItem};
           cursor: pointer;
           width: 40px;
      }
      #${this._COMPONENT_ID} #component-card-info-border-body-options-${this._COMPONENT_RANDOM_ID}:hover .component-card-info-border-body-options-${this._COMPONENT_RANDOM_ID}-item {
           background-color: ${prop_backgroundOptionHover};
           color: ${prop_colorHover};
      }
   </style>

    ${optionHtml}
    
</section>
            `;
            }

        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }


    componentFn_render_border(partName) {
        const data = this.getPartProps(partName)

        if (data != null){

            const prop_borderClass  =     data.hasOwnProperty("prop_borderClass")             ? data.prop_borderClass              : null;
            const prop_borderStyles =     data.hasOwnProperty("prop_borderStyles")            ? data.prop_borderStyles             : null;

            new window.ComponentBorder(
                `component-card-info-border-${this._COMPONENT_RANDOM_ID}` ,
                {
                    prop_btnMore_show: false ,

                    prop_structureClass: prop_borderClass ,
                    prop_structureStyles: prop_borderStyles ,
                }
            )
        }
    }


    /* ---------------------------------------------
      FUNCTIONs
    --------------------------------------------- */
    fn_getHtmlOptions(prop_options){
        const data = this._COMPONENT_CONFIG;
        const prop_size             = data.hasOwnProperty("prop_size")              ? data.prop_size              : null;
        const prop_colorItem        =  data.hasOwnProperty("prop_colorItem")        ? data.prop_colorItem         : "";

        let html= "";
        if (prop_options != null && Array.isArray(prop_options)){
            for (let i = 0; i < prop_options.length; i++) {
                const itemOption = prop_options[i];
                html += `
               <div class="component-card-info-border-body-options-${this._COMPONENT_RANDOM_ID}-item float-start rounded mx-1 text-center " 
                    title="${itemOption?.attrs?.title ?? ""}" 
                    onclick="${this.getFn("fn_onclickOtiponCard" , "event" , `'${itemOption?.attrs?.name ?? ""}'` , `'${itemOption?.attrs?.id ?? ''}'` )}">
                   ${typeof itemOption?.html == "function" ? itemOption?.html(prop_size , prop_colorItem ) : itemOption?.html ?? ""}
               </div>
            `
            }
        }
        return html;
    }

    fn_onclickOtiponCard(event , optionName , optionId){

        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("fn_callback") && typeof data.fn_callback != null){
            data.fn_callback(event , optionName , optionId != null && optionId != "" ? parseInt(optionId) : null );
        }
    }


}


/*-------------------------------------
 01-010) Component list selected
-------------------------------------*/
class ComponentListSelectedScrollerBase extends ComponentBase{

    /* ---------------------------------------------
        PROPERTYs Pattern
     --------------------------------------------- */
    _COMPONENT_PATTERN = {
        prop_size: {
            prop: "prop_size",
            default: tools_css.standardSizes.xl.name
        },
        prop_formClass: {
            prop: "prop_formClass",
            default: ["shadow-sm" , "rounded" , "border"]
        },
        prop_formStyles: {
            prop: "prop_formStyles",
            default: {}
        },
        prop_formBackgroundColor: {
            prop: "prop_formBackgroundColor",
            default: tools_const?.styles?.listSelectedScroller?.borderdColor_form ?? ""
        },
        prop_formSelectorItemBorderColor: {
            prop: "prop_formSelectorItemBorderColor",
            default: tools_const?.styles?.listSelectedScroller?.borderdColor_formSelector_item ?? ""
        },
        prop_formSelectorItemBackgroundColor: {
            prop: "prop_formSelectorItemBackgroundColor",
            default: tools_const?.styles?.listSelectedScroller?.backgroundColor_formSelector_item ?? ""
        },
        prop_formSelectorItemColor: {
            prop: "prop_formSelectorItemColor",
            default: tools_const?.styles?.listSelectedScroller?.color_formSelector_item ?? ""
        },
        prop_formSelectorItemColorIcon: {
            prop: "prop_formSelectorItemColorIcon",
            default: tools_const?.styles?.listSelectedScroller?.colorIcon_formSelector_item ?? ""
        },

        prop_listSelected: {
            prop: "prop_listSelected",
            default: []
        },

    };

    /* ---------------------------------------------
           PROPERTYs Props
    --------------------------------------------- */
    _COMPONENT_PROPS = {
        part_structure: [],

        part_form: [
            this._COMPONENT_PATTERN.prop_size,
            this._COMPONENT_PATTERN.prop_formClass,
            this._COMPONENT_PATTERN.prop_formStyles,
            this._COMPONENT_PATTERN.prop_formBackgroundColor,
        ],


        part_form_seletor: [
            this._COMPONENT_PATTERN.prop_size,
            this._COMPONENT_PATTERN.prop_listSelected,
            this._COMPONENT_PATTERN.prop_formSelectorItemBorderColor,
            this._COMPONENT_PATTERN.prop_formSelectorItemBackgroundColor,
            this._COMPONENT_PATTERN.prop_formSelectorItemColor,
            this._COMPONENT_PATTERN.prop_formSelectorItemColorIcon,
        ],

    };

    /* ---------------------------------------------
     PROPERTYs Schema
     --------------------------------------------- */
    _COMPONENT_SCHEMA = {
        part_structure: {
            part_form: {
                part_form_seletor: {},
            },
        },
    }

}
window.ComponentListSelectedScroller = class ComponentListSelectedScroller extends ComponentListSelectedScrollerBase {

    _LIST_SELECTED = [];

    /* ---------------------------------------------
       SETUP
    --------------------------------------------- */
    constructor(elId, config) {
        super(
            listComponent[ComponentListSelectedScroller.name] ,
            elId
        );
        super.renderComponent(config);
    }


    /* ---------------------------------------------
    TEMPLATEs
    --------------------------------------------- */
    componentFn() {
        this.onRegisterFinish().then(el => {
            this.fn_renderListItemsSelected();
            this.fn_addScrollerWithMouse();
        })

    }

    templateFn(partName = null) {
        switch (partName) {
            case "part_structure":
                return this.template_render_structure(partName);
            case "part_form":
                return this.template_render_form(partName);
            case "part_form_seletor":
                return this.template_render_formSelector(partName);

            default:
                return this.templateBasic_render([]);
        }
    }

    template_render_structure(partName) {
        const content = `
        
        ${this.templateFn("part_form")}
        
                `;
        return this.templateBasic_render_structure(content);
    }

    template_render_form(partName) {
        const data = this.getPartProps(partName);

        if (data != null){

            const prop_size                    =   data.hasOwnProperty("prop_size")                  ?  data.prop_size                    : null;
            const prop_formClass               =   data.hasOwnProperty("prop_formClass")             ?  data.prop_formClass               : [];
            const prop_formStyles              =   data.hasOwnProperty("prop_formStyles")            ?  data.prop_formStyles              : {};
            const prop_formBackgroundColor     =   data.hasOwnProperty("prop_formBackgroundColor")   ?  data.prop_formBackgroundColor     : {};

            const elHeight = tools_css.getHeightSize(prop_size);

            return `
<section data-part-name="${partName}" 
         id="component-list-selected-form-${this._COMPONENT_RANDOM_ID}"
         class="${tools_public.renderListClass(prop_formClass)} position-relative ">
    <style>
        #${this._COMPONENT_ID} #component-list-selected-form-${this._COMPONENT_RANDOM_ID}{
            height:               ${elHeight+10}px;
            cursor:                pointer;
            background-color:      ${prop_formBackgroundColor};
            ${tools_public.renderListStyle(prop_formStyles)};
        }
    </style>
    
    
    ${this.templateFn("part_form_seletor")}
       
</section>
            `;

        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    template_render_formSelector(partName) {
        const data = this.getPartProps(partName);

        if (data != null){

            const prop_size                                  =   data.hasOwnProperty("prop_size")                                 ?  data.prop_size                             : null;
            const prop_formIcon                              =   data.hasOwnProperty("prop_formIcon")                             ?  data.prop_formIcon                         : [];
            const prop_formSelectorItemBorderColor           =   data.hasOwnProperty("prop_formSelectorItemBorderColor")          ?  data.prop_formSelectorItemBorderColor      : "";
            const prop_formSelectorItemBackgroundColor       =   data.hasOwnProperty("prop_formSelectorItemBackgroundColor")      ?  data.prop_formSelectorItemBackgroundColor  : "";
            const prop_formSelectorItemColor                 =   data.hasOwnProperty("prop_formSelectorItemColor")                ?  data.prop_formSelectorItemColor            : "";
            const directionRtl                               = this._COMPONENT_CONFIG.hasOwnProperty("directionRtl")              ? this._COMPONENT_CONFIG.directionRtl         : false;

            const elHeight = tools_css.getHeightSize(prop_size);
            const elFontSize = tools_css.getFontSize(prop_size);
            const elIconSize = tools_css.getIconSize(prop_size);

            return `
<section data-part-name="${partName}" 
         id="component-list-selected-form-selector-${this._COMPONENT_RANDOM_ID}"
         class=" h-100">
    <style>
        #${this._COMPONENT_ID} #component-list-selected-form-selector-${this._COMPONENT_RANDOM_ID}{
           
        }
        
        #${this._COMPONENT_ID} #component-list-selected-form-selector-list-${this._COMPONENT_RANDOM_ID}{
            display:                                             flex;
            overflow-x:                                          auto;    
            gap:                                                 8px;            
            scroll-behavior:                                     smooth; 
            overflow:                                            auto;            
            scrollbar-width:                                     none;     
            -ms-overflow-style:                                  none;   
        }
        #${this._COMPONENT_ID} #component-list-selected-form-selector-list-${this._COMPONENT_RANDOM_ID}::-webkit-scrollbar{
            display:                                             none;
        }
        
        #${this._COMPONENT_ID} .component-list-selected-form-selector-list-item-${this._COMPONENT_RANDOM_ID}{
            flex:                                                 0 0 auto; 
            float:                                                ${directionRtl ? "right" : "left"};
            background-color:                                     ${prop_formSelectorItemBackgroundColor};
            color:                                                ${prop_formSelectorItemColor};
            border:                                               1px solid ${prop_formSelectorItemBorderColor};
            height:                                               ${elHeight}px;
            line-height:                                          ${elHeight}px;
            font-size:                                            ${elFontSize}px;
            margin-top:                                           5px;
            margin-bottom:                                        5px;
            ${directionRtl ? "padding-right" : "padding-left"} :  5px;
            ${directionRtl ? "padding-left" : "padding-right"} :  ${15 + elIconSize}px;
            user-select:                                          none;
        }
    </style>
    
    <section id="component-list-selected-form-selector-list-${this._COMPONENT_RANDOM_ID}" 
             class="w-100 h-100">
        
    </section>

</section>
            `;

        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }



    /* ---------------------------------------------
      FUNCTIONs
    --------------------------------------------- */
    fn_getFormListSelected(){
        return document.querySelector(`#component-list-selected-form-selector-list-${this._COMPONENT_RANDOM_ID}`)
    }
    fn_getListItemSelected(){
        return document.querySelectorAll(`.component-list-selected-form-selector-list-item-${this._COMPONENT_RANDOM_ID}`)
    }

    fn_renderListItemsSelected(){
        const data = this._COMPONENT_CONFIG;
        this._LIST_SELECTED                             =   data.hasOwnProperty("prop_listSelected")                         ?  data.prop_listSelected                     : [];
        const prop_size                                  =   data.hasOwnProperty("prop_size")                                 ?        data.prop_size                       : 0;
        const prop_formSelectorItemColorIcon             =   data.hasOwnProperty("prop_formSelectorItemColorIcon")            ?  data.prop_formSelectorItemColorIcon        : "";
        const directionRtl                               = this._COMPONENT_CONFIG.hasOwnProperty("directionRtl")              ? this._COMPONENT_CONFIG.directionRtl         : false;

        const elForm = this.fn_getFormListSelected();

        if (this._LIST_SELECTED  != null && Array.isArray(this._LIST_SELECTED )){
            for (let i = 0; i < this._LIST_SELECTED.length; i++) {
                const itemSelected = this._LIST_SELECTED[i];
                if(itemSelected != null && itemSelected.hasOwnProperty("name") && itemSelected.hasOwnProperty("title")){

                    elForm.innerHTML = elForm.innerHTML + `
                        <div class="component-list-selected-form-selector-list-item-${this._COMPONENT_RANDOM_ID} mx-2 rounded shadow-sm position-relative"
                             data-item-id="${itemSelected.name}">
                            <b>${itemSelected.title}</b>
                            <component-icon id="component-list-selected-form-selector-list-item-${this._COMPONENT_RANDOM_ID}-icon-${i}"></component-icon>
                        </div>
                    `;

                    let styles = {
                        "top": "50%",
                    }
                    if (directionRtl) {
                        styles["left"] = "5px";
                        styles["transform"] = "translate(0 , -50%)";
                    }
                    else {
                        styles["right"] = "5px";
                        styles["transform"] = "translate(0 , -50%)";
                    }

                    new window.ComponentIcon(
                        `component-list-selected-form-selector-list-item-${this._COMPONENT_RANDOM_ID}-icon-${i}`,
                        {
                            prop_icon: tools_icons.icon_close({size : prop_size /*, colors: {primary:prop_formSelectorItemColorIcon }*/} ),

                            prop_iconClass: ["position-absolute"],
                            prop_iconStyles: styles,

                            fn_callback: (event) => {
                                this.fn_removeItemSelected(event , itemSelected.name);
                            }
                        }
                    )

                }
            }
        }
    }

    fn_addScrollerWithMouse(){
        const container = this.fn_getFormListSelected();

        let isDown = false;
        let startX;
        let scrollLeft;

        container.addEventListener('mousedown', (e) => {
            isDown = true;
            container.classList.add('active');
            startX = e.pageX - container.offsetLeft;
            scrollLeft = container.scrollLeft;
        });

        container.addEventListener('mouseleave', () => {
            isDown = false;
            container.classList.remove('active');
        });

        container.addEventListener('mouseup', () => {
            isDown = false;
            container.classList.remove('active');
        });

        container.addEventListener('mousemove', (e) => {
            if (!isDown) return;
            e.preventDefault();
            const x = e.pageX - container.offsetLeft;
            const walk = (x - startX) * 1; // سرعت حرکت
            container.scrollLeft = scrollLeft - walk;
        });
    }

    fn_removeItemSelected(event , itemName){
        const data = this._COMPONENT_CONFIG;
        const elItems = this.fn_getListItemSelected();

        if (elItems != null){
            for (let i = 0; i < elItems.length; i++) {
                const itemSelected = elItems[i];
                const itemSelectedId = itemSelected.getAttribute("data-item-id");
                if (itemSelectedId != null && itemSelectedId == itemName.toString()){
                    itemSelected.remove();
                    this.fn_onCallbackDeletedItem(event , itemName);
                    break;
                }
            }
        }
    }

    fn_onCallbackDeletedItem(event , itemName){
        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("fn_onCallbackDeletedItem") && typeof data.fn_onCallbackDeletedItem != null){
            this._LIST_SELECTED = this._LIST_SELECTED.filter(item => item.name !== itemName);
            data.fn_onCallbackDeletedItem(event , this._LIST_SELECTED);
        }
    }

}




//===============================================================================================================
// [01 - 10] basic ->  [02] Fetch
//===============================================================================================================

/*-------------------------------------
 02-01) Component Loading
-------------------------------------*/
class ComponentLoadingBase extends ComponentBase{

    /* ---------------------------------------------
       PROPERTYs Pattern
    --------------------------------------------- */
    _COMPONENT_PATTERN = {
        prop_type: {
            prop: "prop_type",
            default: "circle" // یا null اگر خواستی
        },
        prop_background_loading: {
            prop: "prop_background_loading",
            default:    tools_const?.styles?.loading?.backgroundColor_loading ?? ""
        },
        prop_background_shadow: {
            prop: "prop_background_shadow",
            default:    tools_const?.styles?.loading?.backgroundColor_shadow ?? ""
        },
        prop_loadingWidth: {
            prop: "prop_loadingWidth",
            default: 80
        },
        prop_loadingHeight: {
            prop: "prop_loadingHeight",
            default: 80
        },
    };


    /* ---------------------------------------------
           PROPERTYs Props
    --------------------------------------------- */
    _COMPONENT_PROPS = {
        part_structure: [],

        part_loading: [
            this._COMPONENT_PATTERN.prop_type,
            this._COMPONENT_PATTERN.prop_background_loading,
            this._COMPONENT_PATTERN.prop_background_shadow,
            this._COMPONENT_PATTERN.prop_loadingWidth,
            this._COMPONENT_PATTERN.prop_loadingHeight,
        ]
    };


    /* ---------------------------------------------
      PROPERTYs Schema
      --------------------------------------------- */
    _COMPONENT_SCHEMA = {
        part_structure: {
            part_loading: {} ,
        },
    }

}
window.ComponentLoading = class ComponentLoading extends ComponentLoadingBase{

    /* ---------------------------------------------
       SETUP
   --------------------------------------------- */
    constructor(elId , config) {
        super(
            listComponent[ComponentLoading.name] ,
            elId
        );
        super.renderComponent(config);
    }



    /* ---------------------------------------------
       TEMPLATEs
    --------------------------------------------- */
    componentFn(){

    }
    templateFn(partName = null){
        switch (partName){
            case "part_structure":
                return this.template_render_structure(partName)
            case "part_loading":
                return this.template_render_loading(partName);
            default:
                return this.templateBasic_render();
        }
    }

    template_render_structure(partName) {
        const content = `
                    ${this.templateFn("part_loading") ?? ""}
                `;
        return this.templateBasic_render_structure(content);
    }

    template_render_loading(partName) {
        const data = this.getPartProps(partName);

        if (data != null){

            const prop_type                    =   data.hasOwnProperty("prop_type")                              ?  data.prop_type                 : "circle";
            const prop_loadingWidth            =   data.hasOwnProperty("prop_loadingWidth")                      ?  data.prop_loadingWidth         : 80;
            const prop_loadingHeight           =   data.hasOwnProperty("prop_loadingHeight")                     ?  data.prop_loadingHeight        : 80;
            const prop_background_loading      =   data.hasOwnProperty("prop_background_loading")                ?  data.prop_background_loading   : "";
            const prop_background_shadow       =   data.hasOwnProperty("prop_background_shadow")                 ?  data.prop_background_shadow    : "";


            if (prop_type == "circle"){
                return `
<section data-part-name="${partName}">

   <style>
      #${this._COMPONENT_ID} .form-loading-${this._COMPONENT_RANDOM_ID}{
           left:             0;
           top:              0;
           z-index:          ${ tools_css.getZIndex(tools_css.standardZIndex.popup.name , 5000) };
           background-color: ${prop_background_shadow};
      }

      #${this._COMPONENT_ID} .lds-ring-${this._COMPONENT_RANDOM_ID} {
          z-index:           ${ tools_css.getZIndex(tools_css.standardZIndex.blur_popup.name , 10) };
          color:             ${prop_background_loading};
          left:              50%;
          top:               50%;
          transform:         translate(-50%, -50%)
      }
      
      #${this._COMPONENT_ID} .lds-ring-${this._COMPONENT_RANDOM_ID},
      #${this._COMPONENT_ID} .lds-ring-${this._COMPONENT_RANDOM_ID} div {
          box-sizing:        border-box;
      }
      
      #${this._COMPONENT_ID} .lds-ring-${this._COMPONENT_RANDOM_ID} {
          display:           inline-block;
          position:          relative;
          width:             ${prop_loadingWidth}px;
          height:            ${prop_loadingHeight}px;
      }

      #${this._COMPONENT_ID} .lds-ring-${this._COMPONENT_RANDOM_ID} div {
          box-sizing:        border-box;
          display:           block;
          position:          absolute;
          width:             ${prop_loadingWidth - 16}px;
          height:            ${prop_loadingHeight - 16}px;
          margin:            8px;
          border:            8px solid currentColor;
          border-radius:     50%;
          animation:         lds-ring-${this._COMPONENT_RANDOM_ID} 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite;
          border-color:      currentColor transparent transparent transparent;
      }
      
      #${this._COMPONENT_ID} .lds-ring-${this._COMPONENT_RANDOM_ID} div:nth-child(1) {
          animation-delay:  -0.45s;
      }
      
      #${this._COMPONENT_ID} .lds-ring-${this._COMPONENT_RANDOM_ID} div:nth-child(2) {
         animation-delay:   -0.3s;
      }
      
      #${this._COMPONENT_ID} .lds-ring-${this._COMPONENT_RANDOM_ID} div:nth-child(3) {
         animation-delay:   -0.15s;
      }
      
      @keyframes lds-ring-${this._COMPONENT_RANDOM_ID} {
         0% {
            transform:      rotate(0deg);
         }
         100% {
            transform:      rotate(360deg);
         }
      }
   </style>

   <section class="component-element-structure form-loading-${this._COMPONENT_RANDOM_ID} position-absolute  w-100 h-100" >
       <div class="lds-ring-${this._COMPONENT_RANDOM_ID} position-absolute"><div></div><div></div><div></div><div></div></div>
   </section>

</section>
            `
            }

        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

}


/*-------------------------------------
 02-02) Component 404
-------------------------------------*/
class Component404Base extends ComponentBase{

    /* ---------------------------------------------
        PROPERTYs Pattern
     --------------------------------------------- */
    _COMPONENT_PATTERN = {
        prop_type: {
            prop: "prop_type",
            default: "simple_animation" // یا مقدار پیش‌فرض دلخواه
        },
        prop_width: {
            prop: "prop_width",
            default: 250
        },
        prop_height: {
            prop: "prop_height",
            default: 100
        },
        prop_btnRetry: {
            prop: "prop_btnRetry",
            default: {
                prop_type: "submit",
                prop_title: "Retry",
                prop_btnClass: ["w-100"]
            }
        },
    };


    /* ---------------------------------------------
           PROPERTYs Props
    --------------------------------------------- */
    _COMPONENT_PROPS = {
        part_structure: [],

        part_404: [
            this._COMPONENT_PATTERN.prop_type,
            this._COMPONENT_PATTERN.prop_width,
            this._COMPONENT_PATTERN.prop_height,
        ],

        part_button_retry: [
            this._COMPONENT_PATTERN.prop_btnRetry
        ]
    };


    /* ---------------------------------------------
      PROPERTYs Schema
      --------------------------------------------- */
    _COMPONENT_SCHEMA = {
        part_structure: {
            part_404: {} ,
            part_button_retry: {} ,
        }
    }

}
window.Component404 = class Component404 extends Component404Base{


    /* ---------------------------------------------
       SETUP
   --------------------------------------------- */
    constructor(elId , config) {
        super(
            listComponent[Component404.name] ,
            elId
        );
        super.renderComponent(config);
    }



    /* ---------------------------------------------
       TEMPLATEs
    --------------------------------------------- */
    componentFn(){
        this.templateFn("part_button_retry");
    }

    templateFn(partName = null){
        switch (partName){
            case "part_structure":
                return this.template_render_structure(partName);
            case "part_404":
                return this.template_render_404(partName);
            case "part_button_retry":
                return this.componentFn_render_btnRetry(partName);
            default:
                return this.templateBasic_render();
        }
    }

    template_render_structure(partName) {
        const content = `
        ${this.templateFn("part_404") ?? ""}
   
        <section class="d-block mx-5 h-100 position-relative">
            <component-button id="component-btn-retry-in-component-404-${this._COMPONENT_RANDOM_ID}" ></component-button>
        </section>
                `;
        return this.templateBasic_render_structure(content);
    }

    template_render_404(partName) {
        const data = this.getPartProps(partName);

        if (data != null){

            const prop_type   =   data.hasOwnProperty("prop_type")      ?  data.prop_type     : "simple_animation";
            const prop_width  =   data.hasOwnProperty("prop_width")     ? data.prop_width     : 250;
            const prop_height =   data.hasOwnProperty("prop_height")    ? data.prop_height    : 100;

            if (prop_type == "simple_animation"){

                return `
<section data-part-name="${partName}">

   <style>
        #${this._COMPONENT_ID} #component-form-404-${this._COMPONENT_RANDOM_ID}{
           top: 0;
           left: 0;
           position: absolute;
           background-color: ${tools_const.hasOwnProperty("styles") && tools_const.styles.hasOwnProperty("state404") &&  tools_const.styles.state404.hasOwnProperty("backgroundColor_shadow") ? tools_const.styles.state404.backgroundColor_shadow : ""};
       }

       #${this._COMPONENT_ID} #svgWrap_1,
       #${this._COMPONENT_ID} #svgWrap_2{
          position: absolute;
          height: auto;
          width: ${prop_width}px;
          max-width: 100%;
          top: 50%;
          left: 50%;
          transform: translate(-50%, -75%);
       }

       #${this._COMPONENT_ID} #svgWrap_0{
          height: ${prop_height}px;
       }

       #${this._COMPONENT_ID} #svgWrap_1,
       #${this._COMPONENT_ID} #svgWrap_2,
       #${this._COMPONENT_ID} #id1_1,
       #${this._COMPONENT_ID} #id2_1,
       #${this._COMPONENT_ID} #id3_1{
          stroke: #11539c;
          stroke-width: 3px;
          fill: transparent;
          filter: url(#glow);
       }

       #${this._COMPONENT_ID} #id1_2,
       #${this._COMPONENT_ID} #id2_2,
       #${this._COMPONENT_ID} #id3_2{
           stroke-width: 3px;
           fill: transparent;
           filter: url(#glow);
       }

       #${this._COMPONENT_ID} #id3_1{
           stroke-dasharray: 940px;
           stroke-dashoffset: -940px;
           animation: drawLine3 2.5s ease-in-out 0s forwards, flicker3 4s linear 4s infinite;
       }

       #${this._COMPONENT_ID} #id2_1{
           stroke-dasharray: 735px;
           stroke-dashoffset: -735px;
           animation: drawLine2 2.5s ease-in-out 0.5s forwards, flicker2 4s linear 4.5s infinite;
       }

       #${this._COMPONENT_ID} #id1_1{
           stroke-dasharray: 940px;
           stroke-dashoffset: -940px;
           animation: drawLine1 2.5s ease-in-out 1s forwards, flicker1 4s linear 5s infinite;
       }

       @keyframes drawLine1 {
           0%  {stroke-dashoffset: -940px;}
          100%{stroke-dashoffset: 0px;}
       }

       @keyframes drawLine2 {
           0%  {stroke-dashoffset: -735px;}
          100%{stroke-dashoffset: 0px;}
       }

       @keyframes drawLine3 {
           0%  {stroke-dashoffset: -940px;}
           100%{stroke-dashoffset: 0px;}
       }

       @keyframes flicker1{
           0%  {stroke: #0c407a;}
           1%  {stroke: transparent;}
           3%  {stroke: transparent;}
           4%  {stroke: #0c407a;}
           6%  {stroke: #0c407a;}
           7%  {stroke: transparent;}
           13% {stroke: transparent;}
           14% {stroke: #0c407a;}
           100%{stroke: #0c407a;}
}

       @keyframes flicker2{
           0%  {stroke: #0c407a;}
           50% {stroke: #0c407a;}
           51% {stroke: transparent;}
           61% {stroke: transparent;}
           62% {stroke: #0c407a;}
           100%{stroke: #0c407a;}
       }

       @keyframes flicker3{
           0%  {stroke: #0c407a;}
           1%  {stroke: transparent;}
           10% {stroke: transparent;}
           11% {stroke: #0c407a;}
           40% {stroke: #0c407a;}
           41% {stroke: transparent;}
           45% {stroke: transparent;}
           46% {stroke: #0c407a;}
           100%{stroke: #0c407a;}
       }

       @keyframes flicker4{
           0%  {color: #0c407a;text-shadow:0px 0px 4px #0c407a;}
           30% {color: #0c407a;text-shadow:0px 0px 4px #0c407a;}
           31% {color: #12000a;text-shadow:0px 0px 4px #12000a;}
           32% {color: #0c407a;text-shadow:0px 0px 4px #0c407a;}
           36% {color: #0c407a;text-shadow:0px 0px 4px #0c407a;}
           37% {color: #12000a;text-shadow:0px 0px 4px #12000a;}
           41% {color: #12000a;text-shadow:0px 0px 4px #12000a;}
           42% {color: #0c407a;text-shadow:0px 0px 4px #0c407a;}
           85% {color: #0c407a;text-shadow:0px 0px 4px #0c407a;}
           86% {color: #12000a;text-shadow:0px 0px 4px #12000a;}
           95% {color: #12000a;text-shadow:0px 0px 4px #12000a;}
           96% {color: #0c407a;text-shadow:0px 0px 4px #0c407a;}
           100%{color: #0c407a;text-shadow:0px 0px 4px #0c407a;}
       }

       @keyframes fadeInText{
           1%  {color: #12000a;text-shadow:0px 0px 4px #12000a;}
           70% {color: #0c407a;text-shadow:0px 0px 14px #0c407a;}
           100%{color: #0c407a;text-shadow:0px 0px 4px #0c407a;}
       }

       @keyframes hueRotate{
           0%  {
               filter: hue-rotate(0deg);
           }
           50%  {
               filter: hue-rotate(-120deg);
           }
           100%  {
               filter: hue-rotate(0deg);
           }
       }
   </style>

   <section id="component-form-404-${this._COMPONENT_RANDOM_ID}" class="mb-2 w-100 h-100  ">

        <svg id="svgWrap_2" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 700 250">
            <g>
                <path id="id3_2" d="M195.7 232.67h-37.1V149.7H27.76c-2.64 0-5.1-.5-7.36-1.49-2.27-.99-4.23-2.31-5.88-3.96-1.65-1.65-2.95-3.61-3.89-5.88s-1.42-4.67-1.42-7.22V29.62h36.82v82.98H158.6V29.62h37.1v203.05z"/>
                <path id="id2_2" d="M470.69 147.71c0 8.31-1.06 16.17-3.19 23.58-2.12 7.41-5.12 14.28-8.99 20.6-3.87 6.33-8.45 11.99-13.74 16.99-5.29 5-11.07 9.28-17.35 12.81a85.146 85.146 0 0 1-20.04 8.14 83.637 83.637 0 0 1-21.67 2.83H319.3c-7.46 0-14.73-.94-21.81-2.83-7.08-1.89-13.76-4.6-20.04-8.14a88.292 88.292 0 0 1-17.35-12.81c-5.29-5-9.84-10.67-13.66-16.99-3.82-6.32-6.8-13.19-8.92-20.6-2.12-7.41-3.19-15.27-3.19-23.58v-33.13c0-12.46 2.34-23.88 7.01-34.27 4.67-10.38 10.92-19.33 18.76-26.83 7.83-7.5 16.87-13.36 27.12-17.56 10.24-4.2 20.93-6.3 32.07-6.3h66.41c7.36 0 14.58.94 21.67 2.83 7.08 1.89 13.76 4.6 20.04 8.14a88.292 88.292 0 0 1 17.35 12.81c5.29 5 9.86 10.67 13.74 16.99 3.87 6.33 6.87 13.19 8.99 20.6 2.13 7.41 3.19 15.27 3.19 23.58v33.14zm-37.1-33.13c0-7.27-1.32-13.88-3.96-19.82-2.64-5.95-6.16-11.04-10.55-15.29-4.39-4.25-9.46-7.5-15.22-9.77-5.76-2.27-11.8-3.35-18.13-3.26h-66.41c-6.14-.09-12.11.97-17.91 3.19-5.81 2.22-10.95 5.43-15.44 9.63-4.48 4.2-8.07 9.3-10.76 15.29-2.69 6-4.04 12.67-4.04 20.04v33.13c0 7.36 1.32 14.02 3.96 19.97 2.64 5.95 6.18 11.02 10.62 15.22 4.44 4.2 9.56 7.43 15.36 9.7 5.8 2.27 11.87 3.35 18.2 3.26h66.41c7.27 0 13.85-1.2 19.75-3.61s10.93-5.73 15.08-9.98 7.36-9.32 9.63-15.22c2.27-5.9 3.4-12.34 3.4-19.33v-33.15zm-16-26.91a17.89 17.89 0 0 1 2.83 6.73c.47 2.41.47 4.77 0 7.08-.47 2.31-1.39 4.48-2.76 6.51-1.37 2.03-3.14 3.75-5.31 5.17l-99.4 66.41c-1.61 1.23-3.26 2.08-4.96 2.55-1.7.47-3.45.71-5.24.71-3.02 0-5.9-.71-8.64-2.12-2.74-1.42-4.96-3.44-6.66-6.09a17.89 17.89 0 0 1-2.83-6.73c-.47-2.41-.5-4.77-.07-7.08.43-2.31 1.3-4.48 2.62-6.51 1.32-2.03 3.07-3.75 5.24-5.17l99.69-66.41a17.89 17.89 0 0 1 6.73-2.83c2.41-.47 4.77-.47 7.08 0 2.31.47 4.48 1.37 6.51 2.69 2.03 1.32 3.75 3.02 5.17 5.09z"/>
                <path id="id1_2" d="M688.33 232.67h-37.1V149.7H520.39c-2.64 0-5.1-.5-7.36-1.49-2.27-.99-4.23-2.31-5.88-3.96-1.65-1.65-2.95-3.61-3.89-5.88s-1.42-4.67-1.42-7.22V29.62h36.82v82.98h112.57V29.62h37.1v203.05z"/>
            </g>
        </svg>
        <svg id="svgWrap_1" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 700 250">
            <g>
                <path id="id3_1" d="M195.7 232.67h-37.1V149.7H27.76c-2.64 0-5.1-.5-7.36-1.49-2.27-.99-4.23-2.31-5.88-3.96-1.65-1.65-2.95-3.61-3.89-5.88s-1.42-4.67-1.42-7.22V29.62h36.82v82.98H158.6V29.62h37.1v203.05z"/>
                <path id="id2_1" d="M470.69 147.71c0 8.31-1.06 16.17-3.19 23.58-2.12 7.41-5.12 14.28-8.99 20.6-3.87 6.33-8.45 11.99-13.74 16.99-5.29 5-11.07 9.28-17.35 12.81a85.146 85.146 0 0 1-20.04 8.14 83.637 83.637 0 0 1-21.67 2.83H319.3c-7.46 0-14.73-.94-21.81-2.83-7.08-1.89-13.76-4.6-20.04-8.14a88.292 88.292 0 0 1-17.35-12.81c-5.29-5-9.84-10.67-13.66-16.99-3.82-6.32-6.8-13.19-8.92-20.6-2.12-7.41-3.19-15.27-3.19-23.58v-33.13c0-12.46 2.34-23.88 7.01-34.27 4.67-10.38 10.92-19.33 18.76-26.83 7.83-7.5 16.87-13.36 27.12-17.56 10.24-4.2 20.93-6.3 32.07-6.3h66.41c7.36 0 14.58.94 21.67 2.83 7.08 1.89 13.76 4.6 20.04 8.14a88.292 88.292 0 0 1 17.35 12.81c5.29 5 9.86 10.67 13.74 16.99 3.87 6.33 6.87 13.19 8.99 20.6 2.13 7.41 3.19 15.27 3.19 23.58v33.14zm-37.1-33.13c0-7.27-1.32-13.88-3.96-19.82-2.64-5.95-6.16-11.04-10.55-15.29-4.39-4.25-9.46-7.5-15.22-9.77-5.76-2.27-11.8-3.35-18.13-3.26h-66.41c-6.14-.09-12.11.97-17.91 3.19-5.81 2.22-10.95 5.43-15.44 9.63-4.48 4.2-8.07 9.3-10.76 15.29-2.69 6-4.04 12.67-4.04 20.04v33.13c0 7.36 1.32 14.02 3.96 19.97 2.64 5.95 6.18 11.02 10.62 15.22 4.44 4.2 9.56 7.43 15.36 9.7 5.8 2.27 11.87 3.35 18.2 3.26h66.41c7.27 0 13.85-1.2 19.75-3.61s10.93-5.73 15.08-9.98 7.36-9.32 9.63-15.22c2.27-5.9 3.4-12.34 3.4-19.33v-33.15zm-16-26.91a17.89 17.89 0 0 1 2.83 6.73c.47 2.41.47 4.77 0 7.08-.47 2.31-1.39 4.48-2.76 6.51-1.37 2.03-3.14 3.75-5.31 5.17l-99.4 66.41c-1.61 1.23-3.26 2.08-4.96 2.55-1.7.47-3.45.71-5.24.71-3.02 0-5.9-.71-8.64-2.12-2.74-1.42-4.96-3.44-6.66-6.09a17.89 17.89 0 0 1-2.83-6.73c-.47-2.41-.5-4.77-.07-7.08.43-2.31 1.3-4.48 2.62-6.51 1.32-2.03 3.07-3.75 5.24-5.17l99.69-66.41a17.89 17.89 0 0 1 6.73-2.83c2.41-.47 4.77-.47 7.08 0 2.31.47 4.48 1.37 6.51 2.69 2.03 1.32 3.75 3.02 5.17 5.09z"/>
                <path id="id1_1" d="M688.33 232.67h-37.1V149.7H520.39c-2.64 0-5.1-.5-7.36-1.49-2.27-.99-4.23-2.31-5.88-3.96-1.65-1.65-2.95-3.61-3.89-5.88s-1.42-4.67-1.42-7.22V29.62h36.82v82.98h112.57V29.62h37.1v203.05z"/>
            </g>
        </svg>
        <svg id="svgWrap_0">
            <defs>
                <filter id="glow">
                    <fegaussianblur class="blur" result="coloredBlur" stddeviation="4"></fegaussianblur>
                    <femerge>
                        <femergenode in="coloredBlur"></femergenode>
                        <femergenode in="SourceGraphic"></femergenode>
                    </femerge>
                </filter>
            </defs>
        </svg>
        
   </section>


</section>
                `
            }

        }
        return `
<section data-part-name="${partName}"></section>
        `;
    }


    componentFn_render_btnRetry (partName) {
        const data = this.getPartProps(partName)

        if (data != null){
            const prop_btnRetry   =  data.hasOwnProperty("prop_btnRetry")       ?  data.prop_btnRetry      : {};

            const prop_type       =  prop_btnRetry.hasOwnProperty("prop_type")          ?  prop_btnRetry.prop_type         : "submit";
            const prop_title      =  prop_btnRetry.hasOwnProperty("prop_title")         ?  prop_btnRetry.prop_title        : "Retry";
            const prop_btnClass   =  prop_btnRetry.hasOwnProperty("prop_btnClass")      ?  prop_btnRetry.prop_btnClass     : [];

            new window.ComponentButton(
                `component-btn-retry-in-component-404-${this._COMPONENT_RANDOM_ID}` ,
                {
                    classList: ["position-absolute" , "w-100"] ,
                    styles:{
                        "bottom" : "10%"
                    },

                    prop_type ,
                    prop_title ,
                    prop_btnClass ,


                    fn_callback: (event) => {
                        this.fn_onCLickBtnRetry(event);
                    }
                }

            )
        }
    }





    /* ---------------------------------------------
       FUNCTIONs
    --------------------------------------------- */
    fn_onCLickBtnRetry(event){
        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("fn_callback") && typeof data.fn_callback != null){
            data.fn_callback(event);
        }
    }

}


/*-------------------------------------
 02-03) Component Form
-------------------------------------*/
class ComponentFormBase extends ComponentBase{

    /* ---------------------------------------------
        PROPERTYs Pattern
     --------------------------------------------- */
    _COMPONENT_PATTERN = {
        prop_size: {
            prop: "prop_size",
            default: tools_css.standardSizes.m.name
        },

        prop_borderClass: {
            prop: "prop_borderClass",
            default: ["d-block","bg-white","px-3","py-3" , "m-2"]
        },
        prop_borderStyles: {
            prop: "prop_borderStyles",
            default: {}
        },

        prop_formClass: {
            prop: "prop_formClass",
            default: ["m-2" , "d-block" , "p-0"]
        },
        prop_formStyles: {
            prop: "prop_formStyles",
            default: {}
        },
        prop_btnformClass: {
            prop: "prop_btnformClass",
            default: []
        },
        prop_btnformStyles: {
            prop: "prop_btnformStyles",
            default: {
                "display" : "flow-root"
            }
        },
        prop_title: {
            prop: "prop_title",
            default: null
        },


        prop_formBackgroundColor: {
            prop: "prop_formBackgroundColor",
            default: tools_const?.styles?.form?.backgroundColor_form ?? ""
        },
        prop_titleBackgroundColor: {
            prop: "prop_titleBackgroundColor",
            default: tools_const?.styles?.form?.backgroundColor_title ?? ""
        },
        prop_btnSubmitBackground: {
            prop: "prop_btnSubmitBackground",
            default: tools_const?.styles?.form?.backgroundColor_btnSubmit ?? ""
        },
        prop_btnSubmitBackgroundHover: {
            prop: "prop_btnSubmitBackgroundHover",
            default: tools_const?.styles?.form?.backgroundColor_btnSubmit_hover ?? ""
        },
        prop_btnSubmitColor: {
            prop: "prop_btnSubmitColor",
            default: tools_const?.styles?.form?.color_btnSubmit ?? ""
        },

        prop_forms: {
            prop: "prop_forms",
            default: null
        },
        prop_formsMinHeight: {
            prop: "prop_formsMinHeight",
            default: null
        },
        prop_url: {
            prop: "prop_url",
            default: ""
        },
        prop_data: {
            prop: "prop_data",
            default: []
        },
        prop_showErrorStepper: {
            prop: "prop_showErrorStepper",
            default: true
        },
        prop_btnSubmit: {
            prop: "prop_btnSubmit",
            default: {
                prop_title: "Submit",
                prop_btnClass: ["w-100"]
            }
        } ,
        prop_runFetch: {
            prop: "prop_runFetch",
            default: true
        }
    };


    /* ---------------------------------------------
           PROPERTYs Props
    --------------------------------------------- */
    _COMPONENT_PROPS = {
        part_structure: [
            this._COMPONENT_PATTERN.prop_btnformClass,
            this._COMPONENT_PATTERN.prop_btnformStyles,
        ],

        part_border: [
            this._COMPONENT_PATTERN.prop_formBackgroundColor,
            this._COMPONENT_PATTERN.prop_borderClass,
            this._COMPONENT_PATTERN.prop_borderStyles,
            this._COMPONENT_PATTERN.prop_size,
            this._COMPONENT_PATTERN.prop_title,
        ],

        part_loading: [],

        part_form: [
            this._COMPONENT_PATTERN.prop_formClass,
            this._COMPONENT_PATTERN.prop_formStyles,
            this._COMPONENT_PATTERN.prop_forms,
            this._COMPONENT_PATTERN.prop_url,
            this._COMPONENT_PATTERN.prop_data,
            this._COMPONENT_PATTERN.prop_showErrorStepper ,
            this._COMPONENT_PATTERN.prop_formsMinHeight ,
            this._COMPONENT_PATTERN.prop_runFetch ,
        ],

        part_404: [],

        part_button_submit: [
            this._COMPONENT_PATTERN.prop_btnSubmit,
            this._COMPONENT_PATTERN.prop_size,
            this._COMPONENT_PATTERN.prop_btnSubmitBackground,
            this._COMPONENT_PATTERN.prop_btnSubmitBackgroundHover,
            this._COMPONENT_PATTERN.prop_btnSubmitColor,
        ]
    };


    /* ---------------------------------------------
       PROPERTYs Schema
       --------------------------------------------- */
    _COMPONENT_SCHEMA = {
        part_structure: {
            part_border: {
                part_loading: {} ,
                part_form: {} ,
                part_404: {} ,
                part_button_submit: {} ,
            }
        }
    }

}
window.ComponentForm = class ComponentForm extends ComponentFormBase{

    /* ---------------------------------------------
       SETUP
   --------------------------------------------- */
    constructor(elId , config) {
        super(
            listComponent[ComponentForm.name] ,
            elId
        );
        super.renderComponent(config);
    }



    /* ---------------------------------------------
       TEMPLATEs
    --------------------------------------------- */
    componentFn(){
        this.templateFn(  "part_border");
        this.templateFn(  "part_button_submit");
    }

    templateFn(partName = null){
        switch (partName){
            case "part_structure":
                return this.template_render_structure(partName);
            case "part_border":
                return this.componentFn_render_border(partName);
            case "part_form":
                return this.template_render_form( partName);
            case "part_button_submit":
                return this.componentFn_render_buttonSubmit( partName);
            default:
                return this.templateBasic_render();
        }
    }

    template_render_structure(partName) {
        const data = this.getPartProps(partName)
        const prop_btnformClass        =  data.hasOwnProperty("prop_btnformClass")       ?  data.prop_btnformClass         : [];
        const prop_btnformStyles       =  data.hasOwnProperty("prop_btnformStyles")      ?  data.prop_btnformStyles        : {}        ;

        const content = `
           <component-border id="component-form-border-${this._COMPONENT_RANDOM_ID}">
               <component-body>
         
                    ${this.templateFn("part_form") ?? ""}

                    <component-messages id="component-form-messages-${this._COMPONENT_RANDOM_ID}"></component-messages>
         
                    <div class="${tools_public.renderListClass(prop_btnformClass)}" style="${tools_public.renderListStyle(prop_btnformStyles)}">
                           <component-button id="component-form-button-submit-${this._COMPONENT_RANDOM_ID}"></component-button>
                    </div>

                    <component-404 id="component-form-404-${this._COMPONENT_RANDOM_ID}"></component-404>
         
                    <component-loading id="component-form-loading-${this._COMPONENT_RANDOM_ID}"></component-loading>
                    
               </component-body>
          </component-border> 
                `;
        return this.templateBasic_render_structure(content , ["position-relative" , "mt-2"]);
    }

    template_render_form(partName) {
        const data = this.getPartProps(partName)

        if (data != null){

            const prop_forms               =     data.hasOwnProperty("prop_forms") && data.prop_forms != null      ? data.prop_forms           : this._COMPONENT_SLOTS?.body?.[0]?.html ?? "";
            const prop_formsMinHeight      =     data.hasOwnProperty("prop_formsMinHeight")                        ? data.prop_formsMinHeight  : "";
            const prop_formClass           =     data.hasOwnProperty("prop_formClass")                             ? data.prop_formClass       : null;
            const prop_formStyles          =     data.hasOwnProperty("prop_formStyles")                            ? data.prop_formStyles      : null;
            return `
<section data-part-name="${partName}">
    <style>
        #${this._COMPONENT_ID} #component-form-forms-outside-${this._COMPONENT_RANDOM_ID}{
             ${tools_public.renderListStyle(prop_formStyles)};
        }
        #${this._COMPONENT_ID} #component-form-forms-${this._COMPONENT_RANDOM_ID}{
             min-height: ${prop_formsMinHeight};
        }
    </style>
    <div id="component-form-forms-outside-${this._COMPONENT_RANDOM_ID}" class="${tools_public.renderListClass(prop_formClass)}" >
       <form id="component-form-forms-${this._COMPONENT_RANDOM_ID}" class="row" >
         
         ${prop_forms}

       </form>  
    </div>
    
</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    componentFn_render_border(partName) {
        const data = this.getPartProps(partName)

        if (data != null){

            const prop_borderClass         =     data.hasOwnProperty("prop_borderClass")            ? data.prop_borderClass            : null;
            const prop_borderStyles        =     data.hasOwnProperty("prop_borderStyles")           ? data.prop_borderStyles           : null;
            const prop_size                =     data.hasOwnProperty("prop_size")                   ? data.prop_size                   : null;

            new window.ComponentBorder(
                `component-form-border-${this._COMPONENT_RANDOM_ID}` ,
                {

                    prop_borderColor :    null,
                    prop_btnMore_show:    false ,

                    prop_structureClass:  prop_borderClass ,
                    prop_structureStyles: {} ,

                    prop_borderStyles:    prop_borderStyles
                }
            )
        }
    }

    componentFn_render_buttonSubmit(partName) {
        const data = this.getPartProps(partName)

        if (data != null){
            const prop_btnSubmit                  =  data.hasOwnProperty("prop_btnSubmit")                    ?  data.prop_btnSubmit                   : {};
            const prop_size                       =  data.hasOwnProperty("prop_size")                         ?  data.prop_size                        : null;
            const prop_btnSubmitBackground        =  data.hasOwnProperty("prop_btnSubmitBackground")          ?  data.prop_btnSubmitBackground         : null;
            const prop_btnSubmitBackgroundHover   =  data.hasOwnProperty("prop_btnSubmitBackgroundHover")     ?  data.prop_btnSubmitBackgroundHover    : null;
            const prop_btnSubmitColor             =  data.hasOwnProperty("prop_btnSubmitColor")               ?  data.prop_btnSubmitColor              : null;

            const prop_title      =  prop_btnSubmit.hasOwnProperty("prop_title")        ?  prop_btnSubmit.prop_title        : "submit";
            const prop_btnClass   =  prop_btnSubmit.hasOwnProperty("prop_btnClass")     ?  prop_btnSubmit.prop_btnClass     : [  "float-start"  ];
            const prop_btnStyles  =  prop_btnSubmit.hasOwnProperty("prop_btnStyles")    ?  prop_btnSubmit.prop_btnStyles    : {
                "width" : "200px!important"
            } ;

            new window.ComponentButton(
                `component-form-button-submit-${this._COMPONENT_RANDOM_ID}` ,
                {
                    classList: [ "d-block" , "mx-2" ] ,
                    styles:{

                    },
                    prop_btnBackgroundColor :           prop_btnSubmitBackground ,
                    prop_btnBackgroundColor_hover :     prop_btnSubmitBackgroundHover ,
                    prop_btnColor :                     prop_btnSubmitColor ,
                    prop_type:                          null ,
                    prop_size ,
                    prop_title ,
                    prop_btnClass ,
                    prop_btnStyles ,

                    fn_callback: (event) => {
                        this.call_onCLickBtnSubmit(event)
                    }
                }

            )
        }
    }


    /* ---------------------------------------------
           FUNCTIONs
        --------------------------------------------- */

    fn_getFormElement(){
        return document.querySelector(`#component-form-forms-${this._COMPONENT_RANDOM_ID}`);
    }

    fn_getListValidators(){
        const data = this._COMPONENT_CONFIG;
        const prop_showErrorStepper     =  data.hasOwnProperty("prop_showErrorStepper")           ?  data.prop_showErrorStepper              : false;


        const elForms = this.fn_getFormElement();
        const listValidatores = elForms.querySelectorAll(".component-validate");

        let isValidateComplate = true;
        let listValidateErrors = [];
        if (listValidatores != null && listValidatores.length > 0){
            for (let i = 0; i < listValidatores.length; i++) {
                const itemValidate = listValidatores[i];
                const validateText = itemValidate.innerHTML;

                const validator = tools_public.parseJson(validateText);
                if (validator != null){
                    const validator = JSON.parse(validateText);
                    let messageError = `<b class="border-bottom border-dark">${validator.title}</b>`;
                    let hasError = false;

                    if (validator != null && validator.hasOwnProperty("title") && validator.hasOwnProperty("validates") && validator.validates != null){
                        for (let j = 0; j < validator.validates.length; j++) {
                            const itemError = validator.validates[j];
                            messageError += `<p class="mb-1"> - ${itemError}</p>`;
                            hasError = true;
                        }

                        isValidateComplate = !hasError;
                    }

                    if (hasError){
                        listValidateErrors.push(messageError);
                        if (prop_showErrorStepper){
                            break;
                        }
                    }
                }
            }
        }
        return [isValidateComplate , listValidateErrors]
    }

    call_onCLickBtnSubmit(event){
        const data = this._COMPONENT_CONFIG;

        if (data.hasOwnProperty("prop_url")){
            const directionRtl              =  this._COMPONENT_CONFIG.hasOwnProperty("directionRtl")  ? this._COMPONENT_CONFIG.directionRtl      : false;
            const prop_size                 =  data.hasOwnProperty("prop_size")                       ?  data.prop_size                          : null;
            const prop_runFetch             =  data.hasOwnProperty("prop_runFetch")                   ?  data.prop_runFetch                      : true;

            const formData =  this.fn_getFormElement();

            const [isValidateComplate = true , listValidateErrors = []] = this.fn_getListValidators();

            if (isValidateComplate){
                tools_component.control("ComponentMessages" , {
                    elId: `component-form-messages-${this._COMPONENT_RANDOM_ID}` ,
                    prop_messages: []
                });

                if (prop_runFetch){

                    let fetchResponse = tools_submit.fetcth(
                        data.prop_url,
                        {
                            //prop_size ,
                            data: {
                                formData: formData,
                                data: data.hasOwnProperty("prop_data") ? data.prop_data : []
                            },
                            componentMessagesData: {elId: `component-form-messages-${this._COMPONENT_RANDOM_ID}`},
                            componentLoadingData:  {elId: `component-form-loading-${this._COMPONENT_RANDOM_ID}`},
                            component404Data: {
                                elId: `component-form-404-${this._COMPONENT_RANDOM_ID}`,
                                fn_callback: (event) => {
                                    this.call_onCLickBtnSubmit(event);
                                }
                            },
                            callback: (resultExp , data) =>{
                                this.fn_onClickResponse(resultExp , data);
                            }
                        });

                    if (data.hasOwnProperty("fn_onGetResponse") && typeof data.fn_onGetResponse != null){
                        data.fn_onGetResponse(event , fetchResponse);
                    }

                }
                else{
                    this.fn_onClickSubmit(event , data.prop_url , formData , data.hasOwnProperty("prop_data") ? data.prop_data : []);
                }
            }
            else{
                tools_component.control("ComponentMessages" , {
                    elId: `component-form-messages-${this._COMPONENT_RANDOM_ID}` ,
                    prop_type: "error" ,
                    prop_messages: listValidateErrors
                });
            }
        }
    }

    fn_onClickSubmit(event , prop_url , formData , prop_data){
        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("fn_onClickSubmit") && typeof data.fn_onClickSubmit != null){
            data.fn_onClickSubmit(event , prop_url, formData , prop_data);
        }
    }

    fn_onClickResponse(resultExp , response){
        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("fn_onClickResponse") && typeof data.fn_onClickResponse != null){
            data.fn_onClickResponse(resultExp , response);
        }
    }


}


/*-------------------------------------
 02-04) Component Widget
-------------------------------------*/
class ComponentWidgetBase extends ComponentBase{

    /* ---------------------------------------------
          PROPERTYs Pattern
   --------------------------------------------- */
    _COMPONENT_PATTERN = {
        prop_widgetClass: {
            prop: "prop_widgetClass",
            default: []
        },
        prop_widgetStyles: {
            prop: "prop_widgetStyles",
            default: { "min-height": "80px" }
        },
        prop_widgetMinHeight: {
            prop: "prop_widgetMinHeight",
            default: null
        },
        prop_btnMore_icon: {
            prop: "prop_btnMore_icon",
            default: ""
        },
        prop_btnMore_show: {
            prop: "prop_btnMore_show",
            default: false
        },
        prop_btnMore_link: {
            prop: "prop_btnMore_link",
            default: null
        },
        prop_fetch: {
            prop: "prop_fetch",
            default: {
                url: "" ,
                data: "" ,
            }
        },
        prop_layoutContent: {
            prop: "prop_layoutContent",
            default: null
        }
    };

    /* ---------------------------------------------
           PROPERTYs Props
    --------------------------------------------- */
    _COMPONENT_PROPS = {
        part_structure: [
            this._COMPONENT_PATTERN.prop_layoutContent,
        ],

        part_border: [
            this._COMPONENT_PATTERN.prop_widgetClass,
            this._COMPONENT_PATTERN.prop_widgetStyles,
            this._COMPONENT_PATTERN.prop_widgetMinHeight,
            this._COMPONENT_PATTERN.prop_btnMore_icon,
            this._COMPONENT_PATTERN.prop_btnMore_show,
            this._COMPONENT_PATTERN.prop_btnMore_link
        ]
    };



    /* ---------------------------------------------
   PROPERTYs Schema
   --------------------------------------------- */
    _COMPONENT_SCHEMA = {
        part_structure: {
            part_border:{}
        } ,
    }

}
window.ComponentWidget = class ComponentWidget extends ComponentWidgetBase{

    _COMPONENT_LAYOUT = null;

    /* ---------------------------------------------
       SETUP
   --------------------------------------------- */
    constructor(elId , config) {
        super(
            listComponent[ComponentWidget.name] ,
            elId
        );
        super.renderComponent(config);
    }



    /* ---------------------------------------------
    TEMPLATEs
   --------------------------------------------- */
    componentFn(){
        this.templateFn("part_border")
        this.call_fetchWidget()
    }
    templateFn(partName = null){
        switch (partName){
            case "part_structure":
                return this.template_render_structure(partName);
            case "part_border":
                return this.componentFn_render_border(partName);
            default:
                return this.templateBasic_render();
        }
    }


    template_render_structure(partName) {
        const data = this.getPartProps(partName)
        const prop_layoutContent    =   data.hasOwnProperty("prop_layoutContent")  && data.prop_layoutContent != null    ?  data.prop_layoutContent     :  this._COMPONENT_SLOTS?.body?.[0]?.html ?? "";

        const content = `
   <component-border id="border-widget-component-${this._COMPONENT_RANDOM_ID}">
       <component-body>
             <component-messages id="widget-component-messages-${this._COMPONENT_RANDOM_ID}"></component-messages>
             
             <component-layout id="response-widget-component-${this._COMPONENT_RANDOM_ID}">
                  <component-body>
                     ${prop_layoutContent}
                  </component-body>
             </component-layout>
   
             <component-404 id="widget-component-404-${this._COMPONENT_RANDOM_ID}"></component-404>

             <component-loading id="widget-component-loading-${this._COMPONENT_RANDOM_ID}"></component-loading>
       </component-body>
   </component-border>
                `;
        return this.templateBasic_render_structure(content , ["position-relative"]);
    }


    componentFn_render_border(partName) {

        const data = this.getPartProps(partName)

        if (data != null){
            const prop_widgetClass     = data.hasOwnProperty("prop_widgetClass")      ? data.prop_widgetClass                   : ["border" , "shadow-sm" , "rounded" , "p-1"];
            const prop_widgetStyles    = data.hasOwnProperty("prop_widgetStyles")     ? data.prop_widgetStyles                  : {"min-height" : "120px"};
            const prop_widgetMinHeight = data.hasOwnProperty("prop_widgetMinHeight")  ? data.prop_widgetMinHeight               : null;

            const prop_btnMore_icon    = data.hasOwnProperty("prop_btnMore_icon")     ? data.prop_btnMore_icon                  : "";
            const prop_btnMore_show    = data.hasOwnProperty("prop_btnMore_show")     ? data.prop_btnMore_show                  : false;
            const prop_btnMore_link    = data.hasOwnProperty("prop_btnMore_link")     ? data.prop_btnMore_link                  : null;

            //---------------
            if (prop_widgetMinHeight != null){
                prop_widgetStyles["min-height"] = prop_widgetMinHeight;
            }

            new window.ComponentBorder(
                `border-widget-component-${this._COMPONENT_RANDOM_ID}` ,
                {
                    prop_borderColor :    null,

                    prop_structureClass:  prop_widgetClass ,
                    prop_structureStyles: prop_widgetStyles ,

                    prop_borderStyles: {
                        "min-height": "100px !important"
                    } ,

                    prop_btnMore_icon:     prop_btnMore_icon ,
                    prop_btnMore_show:     prop_btnMore_show ,
                    prop_btnMore_link:     prop_btnMore_link ,
                }
            )
        }

    }



    /* ---------------------------------------------
      FUNCTIONs
     --------------------------------------------- */
    fn_retry404(){
        this.call_fetchWidget();

        tools_component.control(
            "Component404" ,
            {
                elId : `widget-component-404-${this._COMPONENT_RANDOM_ID}`
            },
            false
        )
    }
    fn_readyResponse = (response , request = {}) => {
        // const el = document.querySelector(`section#response-widget-component-${this._COMPONENT_RANDOM_ID}`);

        const params = response.hasOwnProperty("params") ? response.params : {};

        let requestData={};
        if (request && request.hasOwnProperty("data")){
            for (let i = 0; i < request.data.length; i++) {
                const itemRequest = request.data[i];
                if (itemRequest.hasOwnProperty("name") && itemRequest.hasOwnProperty("value")){
                    requestData[itemRequest.name] = itemRequest.value;
                }
            }
        }


        if (response != null){
            if (response.hasOwnProperty("html")){

                this._COMPONENT_LAYOUT = new window.ComponentLayout(
                    `response-widget-component-${this._COMPONENT_RANDOM_ID}` ,
                    {
                        prop_layoutContent: response.html
                    }
                )
            }
            if (response.hasOwnProperty("script_src")){

                fetch(response.script_src)
                    .then((res) => res.text())
                    .then((code) => {
                        const fullCode = `
      (function() {
        const __params = ${JSON.stringify(params)};
        const __request = ${JSON.stringify(requestData)};
        ${code}
      })();
    `;
                        eval(fullCode);
                    })
                    .catch(console.error);
            }
            if (response.hasOwnProperty("script")){

                try {

                    const fullCode = `
      (function() {
        const __params = ${JSON.stringify(params)};
        const __request = ${JSON.stringify(requestData)};
    ${response.script}
      })();
    `;
                    eval(fullCode);
                } catch (e) {
                    console.error("❌ خطا در اجرای کد:", e);
                }
            }
        }

        this.fn_onGetResponse(response , requestData)
    }

    call_fetchWidget(){
        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("fn_onGetNewToken") && typeof data.fn_onGetNewToken != null){
            data.fn_onGetNewToken();
        }

        const prop_minHeight = data.hasOwnProperty("prop_minHeight")   ? Math.max(data.prop_minHeight , 120)   : 120;
        const prop_error404  = data.hasOwnProperty("prop_error404")    ? data.prop_error404                    : {};
        const prop_fetch     = data.hasOwnProperty("prop_fetch")       ? data.prop_fetch                       : {};

        if (prop_fetch != null && prop_fetch.hasOwnProperty("url")){

            tools_submit.fetcth(
                prop_fetch != null && prop_fetch.hasOwnProperty("url") ? prop_fetch.url : "" ,
                {
                    data: prop_fetch != null && prop_fetch.hasOwnProperty("data") ? prop_fetch.data : [] ,
                    callback: this.fn_readyResponse ,
                    componentMessagesData: {
                        elId : `widget-component-messages-${this._COMPONENT_RANDOM_ID}`
                    },
                    componentLoadingData: {
                        elId : `widget-component-loading-${this._COMPONENT_RANDOM_ID}`
                    },
                    component404Data: {
                        elId : `widget-component-404-${this._COMPONENT_RANDOM_ID}` ,
                        prop_type : prop_error404 != null && prop_error404.hasOwnProperty("type") ? prop_error404.type : "simple_animation" ,
                        prop_width : prop_error404 != null && prop_error404.hasOwnProperty("width") ? prop_error404.width : prop_minHeight*1.3 ,
                        prop_height : prop_error404 != null && prop_error404.hasOwnProperty("height") ? prop_error404.height :  prop_minHeight*0.62 ,
                        fn_callback: () =>{
                            this.fn_retry404();
                        }
                    },
                }
            )
        }
        else {
            this.fn_readyResponse("<!--empty-component-->")
        }

    }

    call_getComponentLayout(){
        return this._COMPONENT_LAYOUT;
    }

    fn_onGetResponse(response , request ){
        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("fn_onGetResponse") && typeof data.fn_onGetResponse != null){
            data.fn_onGetResponse(response , request );
        }
    }

}


/*-------------------------------------
 02-04) Component Iframe
-------------------------------------*/
class ComponentIframeBase extends ComponentBase{



    /* ---------------------------------------------
       PROPERTYs Pattern
    --------------------------------------------- */
    _COMPONENT_PATTERN = {
        prop_url: {
            prop: "prop_url",
            default: ""
        },
        prop_width: {
            prop: "prop_width",
            default: "100%"
        },
        prop_height: {
            prop: "prop_height",
            default: "1000"
        },
        prop_heightAuto: {
            prop: "prop_heightAuto",
            default: true
        },
        prop_iframeClass: {
            prop: "prop_iframeClass",
            default: []
        },
        prop_iframeStyles: {
            prop: "prop_iframeStyles",
            default: {}
        }
    };

    /* ---------------------------------------------
           PROPERTYs Props
    --------------------------------------------- */
    _COMPONENT_PROPS = {
        part_structure: [],

        part_iframe: [
            this._COMPONENT_PATTERN.prop_url,
            this._COMPONENT_PATTERN.prop_width,
            this._COMPONENT_PATTERN.prop_height,
            this._COMPONENT_PATTERN.prop_iframeClass,
            this._COMPONENT_PATTERN.prop_iframeStyles,
            this._COMPONENT_PATTERN.prop_heightAuto
        ]
    };



    /* ---------------------------------------------
   PROPERTYs Schema
   --------------------------------------------- */
    _COMPONENT_SCHEMA = {
        part_structure: {
            part_iframe:{}
        } ,
    }

}
window.ComponentIframe = class ComponentIframe extends ComponentIframeBase{


    /* ---------------------------------------------
       SETUP
   --------------------------------------------- */
    constructor(elId , config) {
        super(
            listComponent[ComponentIframe.name] ,
            elId
        );
        super.renderComponent(config);
    }



    /* ---------------------------------------------
    TEMPLATEs
   --------------------------------------------- */
    componentFn(){
        this.onRegisterFinish().then(el => {
            this.fn_renderIframe();
        })
    }
    templateFn(partName = null){
        switch (partName){
            case "part_structure":
                return this.template_render_structure(partName);
            case "part_iframe":
                return this.componentFn_render_iframe(partName);
            default:
                return this.templateBasic_render();
        }
    }


    template_render_structure(partName) {
        const content = `
        
           ${this.templateFn("part_iframe") ?? ""}
                `;
        return this.templateBasic_render_structure(content , ["position-relative"]);
    }


    componentFn_render_iframe(partName) {

        const data = this.getPartProps(partName)

        if (data != null){
            const prop_url           = data.hasOwnProperty("prop_url")            ? data.prop_url                         : "";
            const prop_width         = data.hasOwnProperty("prop_width")          ? data.prop_width                       : "";
            const prop_height        = data.hasOwnProperty("prop_height")         ? data.prop_height                      : "";
            const prop_iframeClass   = data.hasOwnProperty("prop_iframeClass")    ? data.prop_iframeClass                 : [];
            const prop_iframeStyles  = data.hasOwnProperty("prop_iframeStyles")   ? data.prop_iframeStyles                : {};

            return `
<section 
     id="component-iframe-iframe-${this._COMPONENT_RANDOM_ID}"
     data-part-name="${partName}"
     class=" ${tools_public.renderListClass(prop_iframeClass)}">
     
    <style>
        #${this._COMPONENT_ID} #component-iframe-iframe-${this._COMPONENT_RANDOM_ID}{
             ${tools_public.renderListStyle(prop_iframeStyles)}
        }
    </style>
    
    <iframe src="${prop_url}" width="${prop_width}" height="${prop_height}"></iframe>
    
</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;

    }



    /* ---------------------------------------------
      FUNCTIONs
     --------------------------------------------- */
    fn_renderIframe(){
        window.addEventListener('resize', this.fn_changeSizeIframe.bind(this));
        this.fn_changeSizeIframe();
    }
    fn_changeSizeIframe(){
        const data = this._COMPONENT_CONFIG;
        const prop_height        = data.hasOwnProperty("prop_height")         ? data.prop_height                      : "";
        const prop_heightAuto    = data.hasOwnProperty("prop_heightAuto")     ? data.prop_heightAuto                  : false;

        const iframElement = this.call_getIframe();

        let h = 0
        if(prop_heightAuto){
            const iframElementRect = iframElement.getBoundingClientRect();
            const iframElementRectTop = iframElementRect.top ;

            const windowHeight = window.innerHeight;

            if (iframElementRectTop > 0){
                h = Math.abs(windowHeight - iframElementRectTop)
            }
            else{
                h = windowHeight
            }
        }
        else {
            h = prop_height
        }

        iframElement.setAttribute("height" , h)
    }



    call_getIframe(){
        return document.querySelector(`#component-iframe-iframe-${this._COMPONENT_RANDOM_ID} iframe`);
    }
}










//===============================================================================================================
// [10 - 19] button / inputs / tools -> [010] Button and Inputs
//===============================================================================================================

/*-------------------------------------
 010-01) Component Button
-------------------------------------*/
class ComponentProgressStepperBase extends ComponentBase{


    _STEP_STATE_INIT =      0 ;
    _STEP_STATE_PROGRESS =  1 ;
    _STEP_STATE_FAIELD =    2 ;
    _STEP_STATE_SUCCESS =   3;


    /* ---------------------------------------------
         PROPERTYs Pattern
    --------------------------------------------- */
    _COMPONENT_PATTERN = {
        prop_size: {
            prop: "prop_size",
            default: tools_css.standardSizes.m.name
        },


        prop_steps: {
            prop: "prop_steps",
            default: []
        },
        prop_params: {
            prop: "prop_params",
            default: []
        },

        prop_colorStataeInit: {
            prop: "prop_colorStataeInit",
            default:  tools_const.styles?.progressStepper?.color_init ?? "black" ,
        },
        prop_colorStataeProgress: {
            prop: "prop_colorStataeProgress",
            default:  tools_const.styles?.progressStepper?.color_progress ?? "black"
        },
        prop_colorStataeFailed: {
            prop: "prop_colorStataeFailed",
            default:  tools_const.styles?.progressStepper?.color_faield ?? "red"
        },
        prop_colorStataeSuccess: {
            prop: "prop_colorStataeSuccess",
            default:  tools_const.styles?.progressStepper?.color_success ?? "green"
        },
    };

    /* ---------------------------------------------
           PROPERTYs Props
    --------------------------------------------- */
    _COMPONENT_PROPS = {
        part_structure: [],

        part_form: [
            this._COMPONENT_PATTERN.prop_size,
            this._COMPONENT_PATTERN.prop_steps,

            this._COMPONENT_PATTERN.prop_params,

            this._COMPONENT_PATTERN.prop_colorStataeInit,
            this._COMPONENT_PATTERN.prop_colorStataeProgress,
            this._COMPONENT_PATTERN.prop_colorStataeFailed,
            this._COMPONENT_PATTERN.prop_colorStataeSuccess,
        ],

    };

    /* ---------------------------------------------
   PROPERTYs Schema
   --------------------------------------------- */
    _COMPONENT_SCHEMA = {
        part_structure: {
            part_form: {}
        }
    }

}
window.ComponentProgressStepper = class ComponentProgressStepper extends ComponentProgressStepperBase{

    _STEPS = [];
    _STEP_PARAMS = {};


    /* ---------------------------------------------
        SETUP
    --------------------------------------------- */
    constructor(elId , config) {
        super(
            listComponent[ComponentProgressStepper.name] ,
            elId
        );
        super.renderComponent(config);
    }



    /* ---------------------------------------------
       TEMPLATEs
    --------------------------------------------- */

    componentFn(){
        this.onRegisterFinish().then(el => {
            this.fn_renderComponents();
            this.fn_startFetchs();
        })
    }

    templateFn(partName = null){
        switch (partName){
            case "part_structure":
                return this.template_render_structure(partName);
            case "part_form":
                return this.template_render_form(partName);
            default:
                return this.templateBasic_render();
        }
    }

    template_render_structure(partName) {
        const content = `
            ${this.templateFn("part_form") ?? ""}
                `;
        return this.templateBasic_render_structure(content);
    }

    template_render_form(partName) {
        const data = this.getPartProps(partName)

        if (data != null){
            const directionRtl         =  this._COMPONENT_CONFIG.hasOwnProperty("directionRtl") ? this._COMPONENT_CONFIG.directionRtl      : false;
            this._STEP_PARAMS          =   data.hasOwnProperty("prop_params")                   ?  data.prop_params                        : [];
            const prop_size            =   data.hasOwnProperty("prop_size")                     ?  data.prop_size                          : 0;
            this._STEPS                =   data.hasOwnProperty("prop_steps")                    ?  data.prop_steps                         : [];

            if(this._STEPS != null && Array.isArray(this._STEPS )){
                for (let i = 0; i < this._STEPS.length; i++) {
                    this._STEPS[i].started = true;
                }
            }

            const elHeight = tools_css.getHeightSize(prop_size);
            const elFontSize = tools_css.getFontSize(prop_size);

            const stepsHtml = this.fn_readyProgressSteps();

            return `
<section id="component-progress-steppper-form-${this._COMPONENT_RANDOM_ID}"
         data-part-name="${partName}" class="position-relative">

   <style>
      #${this._COMPONENT_ID} #component-progress-steppper-form-${this._COMPONENT_RANDOM_ID}{
          
     }
     
      #${this._COMPONENT_ID} .component-progress-steppper-form-step-${this._COMPONENT_RANDOM_ID}{
          width:                                                  100%;
          display:                                                flow-root;
          margin-bottom:                                          5px;
     }
     
     
      #${this._COMPONENT_ID} .component-progress-steppper-form-step-state-${this._COMPONENT_RANDOM_ID}{
          float:                                                 ${directionRtl ? "right" : "left"};
          width:                                                 ${elHeight+30}px;
          height:                                                ${elHeight}px;
       
     }
      #${this._COMPONENT_ID} .component-progress-steppper-form-step-state-inside-${this._COMPONENT_RANDOM_ID}{
             position:                                            absolute;
             width:                                              ${elHeight}px;
             height:                                             ${elHeight}px;
             line-height:                                        ${elHeight}px;
             ${directionRtl ? "right" : "left"}:                 50%;
             transform:                                          translate(${directionRtl ? "" : "-"}50% , 0);
             text-align:                                         center;
             padding:                                            5px;
             border-radius:                                      100%;
             padding:                                            unset;
     }
     
     
      #${this._COMPONENT_ID} .component-progress-steppper-form-step-title-${this._COMPONENT_RANDOM_ID}{
          float:                                                 ${directionRtl ? "right" : "left"};
           height:                                                ${elHeight}px;
      }
      #${this._COMPONENT_ID} .component-progress-steppper-form-step-title-${this._COMPONENT_RANDOM_ID} .title{
          float:                                                 ${directionRtl ? "right" : "left"};
          height:                                                ${elHeight}px;
          ${directionRtl ? "margin-right" : "margin-left"} :     10px;  
          ${directionRtl ? "padding-left" : "padding-right"} :   40px;  
      }
      #${this._COMPONENT_ID} .component-progress-steppper-form-step-title-${this._COMPONENT_RANDOM_ID} .description{
          float:                                                 ${directionRtl ? "right" : "left"};
          width:                                                 30px;

          height:                                                ${elHeight}px;
      }
     
     
      #${this._COMPONENT_ID} .component-progress-steppper-form-step-line-${this._COMPONENT_RANDOM_ID}{
          display:                                               flow-root;
          height:                                                ${elHeight}px;
          ${directionRtl ? "margin-left" : "margin-right"} :     30px; 
     }
      #${this._COMPONENT_ID} .component-progress-steppper-form-step-line-inside-${this._COMPONENT_RANDOM_ID}{
          position:                                              absolute;
          width:                                                 100%;
          height:                                                1px;
          left:                                                  0;
          top:                                                   50%;
          transform:                                             translate(0 , -50%);
          opacity:                                               0.5; 
     }
     
     
     
      #${this._COMPONENT_ID}:hover #component-progress-steppper-form-line-horizontal-${this._COMPONENT_RANDOM_ID}{
          opacity:                                               1; 
     }
     
      #${this._COMPONENT_ID} #component-progress-steppper-form-line-horizontal-${this._COMPONENT_RANDOM_ID}{
          position:                                              absolute;
          width:                                                 5px;
          height:                                                100%;
          ${directionRtl ? "right" : "left"}:                    5px;
          top:                                                   0;
          transform:                                             translate(0 , 0);
          opacity:                                               0.5; 
          background-color:                                      red;
     }
     
     
   </style>

   <div id="component-progress-steppper-form-line-horizontal-${this._COMPONENT_RANDOM_ID}" class="rounded shadow-sm"></div>

   ${stepsHtml}
</section>
            `
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }






    /* ---------------------------------------------
       private FUNCTIONs
    --------------------------------------------- */
    #fn_getStateId(itemStep){

        const repeat =        itemStep?.repeat ?? 1;
        const fetched =       itemStep?.fetched ?? false;
        const comnpleted =    itemStep?.comnpleted ?? false;
        const condition =     itemStep?.condition(this._STEP_PARAMS) ?? false;


        if (fetched ){
            if (comnpleted){
                if (condition){
                    return this._STEP_STATE_SUCCESS;
                }
                else if(repeat == 0){
                    return this._STEP_STATE_FAIELD;
                }
            }
            else {
                return this._STEP_STATE_PROGRESS;
            }
        }
        else {
            return this._STEP_STATE_INIT;
        }
        return null;
    }

    #fn_isFetchBreak(itemStep){
        const stepState = this.#fn_getStateId(itemStep);
        const repeat =   itemStep?.repeat ?? 0;
        const fetched =      itemStep?.fetched ?? false;
        if (stepState == this._STEP_STATE_FAIELD && (repeat==0 && fetched)){
            return true;
        }
        return false;
    }

    #fn_setStepParam(stepName , paramName , paramValue){
        for (let i = 0; i < this._STEPS.length; i++) {
            const itemStep = this._STEPS[i];
            if (itemStep != null && itemStep.hasOwnProperty("name") && stepName == itemStep.name) {
                this._STEPS[i][paramName] = paramValue;
                break;
            }
        }
    }
    #fn_decreaseFromRepeat(stepName){
        let repeat = 0;
        for (let i = 0; i < this._STEPS.length; i++) {
            const itemStep = this._STEPS[i];
            if (itemStep != null && itemStep.hasOwnProperty("name") && itemStep.hasOwnProperty("repeat") && stepName == itemStep.name) {
                repeat = itemStep.repeat-1;
                this.#fn_setStepParam(stepName , "repeat" , repeat);
                break;
            }
        }
        return repeat;
    }
    #fn_startStepNotFirst(stepName){
        this.#fn_setStepParam(stepName , "started" , false);
    }

    #fn_setFectchParams(response){
        if (this._STEP_PARAMS != null && response != null){
            Object.keys(this._STEP_PARAMS).forEach(paramKeyReference=> {

                Object.keys(response).forEach(responseKey=> {
                    const responseValue = response[responseKey];
                    if (responseValue != null && paramKeyReference == responseKey){
                        this._STEP_PARAMS[paramKeyReference] = responseValue;
                    }
                })

            })
        }
    }

    #fn_getFectchParams(){
        let fetchParams = [];
        if (this._STEP_PARAMS != null){
            Object.keys(this._STEP_PARAMS).forEach(paramKey=> {
                const paramValue = this._STEP_PARAMS[paramKey];
                if (paramValue != null){
                    fetchParams.push({
                        name : paramKey ,
                        value : paramValue ,
                    })
                }
            })
        }
        return fetchParams;
    }

    #fn_getResultFinish(){
        let status = true;
        let stepsUnCompleted = [];
        for (let i = 0; i < this._STEPS.length; i++) {
            const itemStep = this._STEPS[i];
            if (itemStep != null && itemStep.hasOwnProperty("name")) {
                const stepState = this.#fn_getStateId(itemStep);
                if (stepState == this._STEP_STATE_FAIELD){
                    status = false;
                    stepsUnCompleted.push(itemStep.name)
                }
            }
        }
        return [status , stepsUnCompleted]
    }


    /* ---------------------------------------------
       FUNCTIONs
    --------------------------------------------- */

    fn_getElLineProgress(){
        return document.querySelector(`#${this._COMPONENT_ID} #component-progress-steppper-form-line-horizontal-${this._COMPONENT_RANDOM_ID}`)
    }


    fn_setElementStepStatus(itemIndex){
        return `component-progress-steppper-form-step-state-${this._COMPONENT_RANDOM_ID}-${itemIndex}`
    }
    fn_getElementStepStatus(itemIndex){
        return document.querySelector("#"+this.fn_setElementStepStatus(itemIndex))
    }


    fn_setElementStepTitle(itemIndex){
        return `component-progress-steppper-form-step-title-inside-${this._COMPONENT_RANDOM_ID}-${itemIndex}`
    }
    fn_getElementStepTitle(itemIndex){
        return document.querySelector("#"+this.fn_setElementStepTitle(itemIndex))
    }


    fn_setElementStepLine(itemIndex){
        return `component-progress-steppper-form-step-line-inside-${this._COMPONENT_RANDOM_ID}-${itemIndex}`
    }
    fn_getElementStepLine(itemIndex){
        return document.querySelector("#"+this.fn_setElementStepLine(itemIndex))
    }


    fn_readyProgressSteps(){
        let stepsHtml = "";
        if (this._STEPS  != null && Array.isArray(this._STEPS )){
            for (let i = 0; i < this._STEPS .length; i++) {
                const itemStep = this._STEPS [i];
                if (itemStep != null && itemStep.hasOwnProperty("name")){
                    const stepName =        itemStep.name;
                    const stepTitle =       itemStep?.title ?? ""
                    const stepDescription = itemStep?.description ?? ""

                    const stepState =        itemStep?.state ?? 0;
                    const stepColor = this.fn_getColorStepWithState(stepState);

                    stepsHtml += `
<section class="component-progress-steppper-form-step-${this._COMPONENT_RANDOM_ID} position-relative p-0" name="${stepName}">
    <div id="${this.fn_setElementStepStatus(i)}" class="component-progress-steppper-form-step-state-${this._COMPONENT_RANDOM_ID} position-relative">
    </div>
    <div  class="component-progress-steppper-form-step-title-${this._COMPONENT_RANDOM_ID}">
        <b id="${this.fn_setElementStepTitle(i)}" class="title" style="color: ${stepColor}">
           ${stepTitle}
        </b>
    </div>
    <div  class="component-progress-steppper-form-step-line-${this._COMPONENT_RANDOM_ID} position-relative ">
          <div id="${this.fn_setElementStepLine(i)}" class="component-progress-steppper-form-step-line-inside-${this._COMPONENT_RANDOM_ID} position-relative " style="border-bottom:  1px dashed ${stepColor};"></div>
    </div>
    <component-tooltip-description id="component-progress-steppper-form-step-description-${this._COMPONENT_RANDOM_ID}-${i}"></component-tooltip-description>
</section>
                    `

                }

            }
        }
        return stepsHtml;
    }

    fn_renderComponents(stepNameSelected){
        const data = this._COMPONENT_CONFIG;
        const directionRtl    =  this._COMPONENT_CONFIG.hasOwnProperty("directionRtl") ? this._COMPONENT_CONFIG.directionRtl   : false;

        let descriptionStyles = {
            "position" : "absolute" ,
            "top" : 0
        }
        if (directionRtl){
            descriptionStyles ["left"] = 0
        }
        else{
            descriptionStyles ["right"] = 0
        }


        if (this._STEPS  != null && Array.isArray(this._STEPS )){
            for (let i = 0; i < this._STEPS.length; i++) {
                const itemStep = this._STEPS[i];
                if (itemStep != null){

                    const stepState = this.#fn_getStateId(itemStep);
                    const stepColor = this.fn_getColorStepWithState(stepState);
                    this.fn_setViewElementStateStep( i , stepState , stepColor);

                    const elTitle = this.fn_getElementStepTitle(i);
                    elTitle.style.color = stepColor;

                    const elLine = this.fn_getElementStepLine(i);
                    elLine.style.borderBottom = `1px dashed ${stepColor}`;

                    if (stepNameSelected != null && stepNameSelected == itemStep?.name){
                        const elLineProgress = this.fn_getElLineProgress();
                        elLineProgress.style.backgroundColor = stepColor;
                    }

                    if (itemStep.hasOwnProperty("description")){
                        new window.ComponentTooltipDescription(
                            `component-progress-steppper-form-step-description-${this._COMPONENT_RANDOM_ID}-${i}` ,
                            {
                                styles: descriptionStyles  ,

                                prop_description: itemStep.description,
                                prop_iconColor : stepColor
                            }
                        )
                    }

                }

            }
        }
    }


    fn_startFetchs(){
        const data = this._COMPONENT_CONFIG;

        const stateContinue = this.fn_checkForFetch();

        if (stateContinue){

            const stepData = this.fn_getFirstStepInit()
            if (stepData != null) {
                const name =       stepData?.name ?? null;
                const url =        stepData?.url ?? "";
                const delay =      stepData?.delay  ?? 1000;
                const started =    stepData?.started ?? false;

                if (name != null){
                    setTimeout(event => {
                        this.#fn_setStepParam(name , "fetched" , true);
                        const fetchParams = this.#fn_getFectchParams();
                        this.fn_renderComponents(name);

                        tools_submit.fetcth(
                            url,
                            {
                                data: {
                                    contentType: tools_const.contentTypes.json ,
                                    data: fetchParams
                                },
                                callback:(response , request)=>{
                                    this.#fn_startStepNotFirst(name);
                                    const conditionResponse =     stepData?.condition(response) ?? false;
                                    if (conditionResponse){
                                        this.#fn_setFectchParams(response);
                                        this.#fn_setStepParam(name , "comnpleted" , true);
                                        this.fn_renderComponents(name);
                                        this.fn_startFetchs();
                                    }
                                    else{
                                        const repeat = this.#fn_decreaseFromRepeat(name);
                                        if (repeat == 0){
                                            this.#fn_setStepParam(name , "comnpleted" , true);
                                        }
                                        this.fn_renderComponents(name);
                                        this.fn_startFetchs();
                                    }
                                },
                                errorBack:(error)=>{
                                    const repeat = this.#fn_decreaseFromRepeat(name);
                                    this.#fn_startStepNotFirst(name);
                                    if (repeat == 0){
                                        this.#fn_setStepParam(name , "comnpleted" , true);
                                    }
                                    this.fn_renderComponents(name);
                                    this.fn_startFetchs();
                                }
                            });

                    } , started ? 0 : delay)
                }
            }
            else{
                this.fn_onComplete();
            }

        }
        else{
            this.fn_onComplete();
        }

    }

    fn_checkForFetch(){
        const data = this._COMPONENT_CONFIG;

        for (let i = 0; i < this._STEPS.length; i++) {
            const itemStep = this._STEPS[i];
            if (itemStep != null) {
                const stepIsBreak = this.#fn_isFetchBreak(itemStep)
                if (stepIsBreak){
                    return false
                }
            }
        }

        return true;
    }

    fn_getFirstStepInit(){
        const data = this._COMPONENT_CONFIG;

        for (let i = 0; i < this._STEPS.length; i++) {
            const itemStep = this._STEPS[i];
            if (itemStep != null && itemStep.hasOwnProperty("name")) {
                const stepState = this.#fn_getStateId(itemStep);
                if (stepState == this._STEP_STATE_INIT || stepState == this._STEP_STATE_PROGRESS){
                    return itemStep;
                }
            }
        }

        return null;
    }


    fn_setViewElementStateStep(itemIndex , stepState , stepColor){
        const elStatus = this.fn_getElementStepStatus(itemIndex);

        switch (stepState){
            case this._STEP_STATE_INIT:
                this.fn_setViewElementStateStep_init(elStatus , stepColor , itemIndex)
                break;
            case this._STEP_STATE_PROGRESS:
                this.fn_setViewElementStateStep_progress(elStatus , stepColor , itemIndex)
                break;
            case this._STEP_STATE_FAIELD:
                this.fn_setViewElementStateStep_error(elStatus , stepColor , itemIndex)
                break;
            case this._STEP_STATE_SUCCESS:
                this.fn_setViewElementStateStep_success(elStatus , stepColor , itemIndex)
                break;
        }
    }

    fn_setViewElementStateStep_init(elStatus , stepColor , itemIndex){
        elStatus.innerHTML = `
<b class="component-progress-steppper-form-step-state-inside-${this._COMPONENT_RANDOM_ID} text-white" style="background-color: ${stepColor}">
   ${itemIndex+1}     
</b>
        `
    }

    fn_setViewElementStateStep_progress(elStatus , stepColor , itemIndex){
        const data = this._COMPONENT_CONFIG;
        const prop_size                  =   data.hasOwnProperty("prop_size")                     ?  data.prop_size                          : 0;

        const elHeight = tools_css.getHeightSize(prop_size);

        elStatus.innerHTML = `
<div class="component-progress-steppper-form-step-state-inside-${this._COMPONENT_RANDOM_ID} ">
  <component-loading id="component-progress-steppper-form-step-state-inside-${this._COMPONENT_RANDOM_ID}-${itemIndex}"></component-loading>   
</div>
        `

        new window.ComponentLoading(
            `component-progress-steppper-form-step-state-inside-${this._COMPONENT_RANDOM_ID}-${itemIndex}`  ,
            {
                classList:     [ "position-absolute"] ,
                styles : {
                    "top" : "50%" ,
                    "left" : "50%" ,
                    "transform" : "translate(-50% , -50%)" ,
                },
                prop_background_loading : stepColor ,
                prop_background_shadow : "#fff" ,
                prop_loadingWidth: elHeight+16 ,
                prop_loadingHeight: elHeight+16 ,
            }
        )

    }

    fn_setViewElementStateStep_error(elStatus , stepColor , itemIndex){
        const data = this._COMPONENT_CONFIG;
        const prop_size                  =   data.hasOwnProperty("prop_size")                     ?  data.prop_size                          : 0;

        elStatus.innerHTML = `
<div class="component-progress-steppper-form-step-state-inside-${this._COMPONENT_RANDOM_ID} position-relative"  style="background-color: ${stepColor}">
   <component-icon id="component-progress-steppper-form-step-state-inside-${this._COMPONENT_RANDOM_ID}-${itemIndex}"></component-icon>   
</div>
        `
        new window.ComponentIcon(
            `component-progress-steppper-form-step-state-inside-${this._COMPONENT_RANDOM_ID}-${itemIndex}`  ,
            {
                classList:     [ "position-absolute"] ,
                styles : {
                    "top" : "50%" ,
                    "left" : "50%" ,
                    "transform" : "translate(-50% , -50%)" ,
                },
                prop_icon:    tools_icons.icon_is_false({size : prop_size , colors: {primary:"#fff" }})  ,
            }
        )

    }

    fn_setViewElementStateStep_success(elStatus , stepColor , itemIndex){
        const data = this._COMPONENT_CONFIG;
        const prop_size                  =   data.hasOwnProperty("prop_size")                     ?  data.prop_size                          : 0;

        elStatus.innerHTML = `
<div class="component-progress-steppper-form-step-state-inside-${this._COMPONENT_RANDOM_ID} position-relative"  style="background-color: ${stepColor}">
  <component-icon id="component-progress-steppper-form-step-state-inside-${this._COMPONENT_RANDOM_ID}-${itemIndex}" ></component-icon>    
</div>
        `
        new window.ComponentIcon(
            `component-progress-steppper-form-step-state-inside-${this._COMPONENT_RANDOM_ID}-${itemIndex}`  ,
            {
                classList:     [ "position-absolute"] ,
                styles : {
                    "top" : "50%" ,
                    "left" : "50%" ,
                    "transform" : "translate(-50% , -50%)" ,
                },
                prop_icon:    tools_icons.icon_is_true({size : prop_size , colors: {primary:"#fff" }})  ,
            }
        )


    }


    fn_getColorStepWithState(stepState = 0){
        const data = this._COMPONENT_CONFIG;
        const prop_colorStataeInit       =   data.hasOwnProperty("prop_colorStataeInit")          ?  data.prop_colorStataeInit               : false;
        const prop_colorStataeProgress   =   data.hasOwnProperty("prop_colorStataeProgress")      ?  data.prop_colorStataeProgress           : false;
        const prop_colorStataeFailed     =   data.hasOwnProperty("prop_colorStataeFailed")        ?  data.prop_colorStataeFailed             : false;
        const prop_colorStataeSuccess    =   data.hasOwnProperty("prop_colorStataeSuccess")       ?  data.prop_colorStataeSuccess            : false;

        switch (stepState){
            case this._STEP_STATE_INIT:
                return prop_colorStataeInit;
            case this._STEP_STATE_PROGRESS:
                return prop_colorStataeProgress;
            case this._STEP_STATE_FAIELD:
                return prop_colorStataeFailed;
            case this._STEP_STATE_SUCCESS:
                return prop_colorStataeSuccess;
        }

        return "";
    }





    fn_onComplete(){
        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("fn_onComplete") && typeof data.fn_onComplete != null){
            const [status , stepUnCompleted] = this.#fn_getResultFinish();
            data.fn_onComplete(status , stepUnCompleted , this._STEP_PARAMS);
        }
    }




}








//===============================================================================================================
// [10 - 19] button / inputs / tools -> [010] Button and Inputs
//===============================================================================================================

/*-------------------------------------
 03-01) Component Button
-------------------------------------*/
class ComponentButtonBase extends ComponentBase{

    /* ---------------------------------------------
         PROPERTYs Pattern
    --------------------------------------------- */
    _COMPONENT_PATTERN = {
        prop_type: {
            prop: "prop_type",
            default: "submit"
        },
        prop_btnType: {
            prop: "prop_btnType",
            default: null
        },
        prop_title: {
            prop: "prop_title",
            default: "BTN"
        },
        prop_btnClass: {
            prop: "prop_btnClass",
            default: ["w-100"]
        },
        prop_size: {
            prop: "prop_size",
            default: tools_css.standardSizes.m.name
        },
        prop_btnStyles: {
            prop: "prop_btnStyles",
            default: {}
        },
        prop_btnHoverStyles: {
            prop: "prop_btnHoverStyles",
            default: {}
        },
        prop_btnBackgroundColor: {
            prop: "prop_btnBackgroundColor",
            default: null
        },
        prop_btnBackgroundColor_hover: {
            prop: "prop_btnBackgroundColor_hover",
            default: null
        },
        prop_btnColor: {
            prop: "prop_btnColor",
            default: null
        },
        fn_callback: {
            prop: "fn_callback",
            default: null
        }
    };

    /* ---------------------------------------------
           PROPERTYs Props
    --------------------------------------------- */
    _COMPONENT_PROPS = {
        part_structure: [],

        part_button: [
            this._COMPONENT_PATTERN.prop_type,
            this._COMPONENT_PATTERN.prop_btnType,
            this._COMPONENT_PATTERN.prop_title,
            this._COMPONENT_PATTERN.prop_btnClass,
            this._COMPONENT_PATTERN.prop_btnStyles,
            this._COMPONENT_PATTERN.prop_btnHoverStyles,
            this._COMPONENT_PATTERN.prop_btnBackgroundColor,
            this._COMPONENT_PATTERN.prop_btnBackgroundColor_hover,
            this._COMPONENT_PATTERN.prop_btnColor,
            this._COMPONENT_PATTERN.prop_size,
            this._COMPONENT_PATTERN.fn_callback
        ]
    };


    /* ---------------------------------------------
   PROPERTYs Schema
   --------------------------------------------- */
    _COMPONENT_SCHEMA = {
        part_structure: {
            part_button: {} ,
        }
    }

}
window.ComponentButton = class ComponentButton extends ComponentButtonBase{

    /* ---------------------------------------------
        SETUP
    --------------------------------------------- */
    constructor(elId , config) {
        super(
            listComponent[ComponentButton.name] ,
            elId
        );
        super.renderComponent(config);
    }


    /* ---------------------------------------------
       TEMPLATEs
    --------------------------------------------- */
    templateFn(partName = null){
        switch (partName){
            case "part_structure":
                return this.template_render_structure(partName);
            case "part_button":
                return this.template_render_button( partName);
            default:
                return this.templateBasic_render();
        }
    }

    template_render_structure(partName) {
        const content = `
            ${this.templateFn("part_button") ?? ""}
                `;
        return this.templateBasic_render_structure(content);
    }

    template_render_button(partName) {
        const data = this.getPartProps(partName)

        if (data != null){

            const prop_type             =   data.hasOwnProperty("prop_type")                 ?  data.prop_type               :  null;
            const prop_btnType          =   data.hasOwnProperty("prop_btnType")              ?  data.prop_btnType               :  null;
            const prop_title            =   data.hasOwnProperty("prop_title")                ?  data.prop_title              :  this._COMPONENT_SLOTS?.body?.html ?? "";

            const prop_btnClass         =   data.hasOwnProperty("prop_btnClass")             ?  data.prop_btnClass           : "w-100"
            const prop_size             =   data.hasOwnProperty("prop_size")                 ?  data.prop_size               : 0;
            const prop_btnStyles        =   data.hasOwnProperty("prop_btnStyles")            ?  data.prop_btnStyles          : null;
            const prop_btnHoverStyles   =   data.hasOwnProperty("prop_btnHoverStyles")       ?  data.prop_btnHoverStyles     : null;

            let btnBackgroundColor =  null;
            let btnBackgroundColor_hover =  null;
            let btnColor =            null;

            switch (prop_type){
                case "submit" :
                    btnBackgroundColor       = tools_const.hasOwnProperty("styles") && tools_const.styles.hasOwnProperty("button") && tools_const.styles.button.hasOwnProperty("submit") && tools_const.styles.button.submit.hasOwnProperty("backgroundColor")        ? tools_const.styles.button.submit.backgroundColor : "" ;
                    btnBackgroundColor_hover = tools_const.hasOwnProperty("styles") && tools_const.styles.hasOwnProperty("button") && tools_const.styles.button.hasOwnProperty("submit") && tools_const.styles.button.submit.hasOwnProperty("backgroundColorHover")   ? tools_const.styles.button.submit.backgroundColorHover : "" ;
                    btnColor                 = tools_const.hasOwnProperty("styles") && tools_const.styles.hasOwnProperty("button") && tools_const.styles.button.hasOwnProperty("submit") && tools_const.styles.button.submit.hasOwnProperty("color")                  ? tools_const.styles.button.submit.color : ""  ;
                    break;
                case "cancel" :
                    btnBackgroundColor       = tools_const.hasOwnProperty("styles") && tools_const.styles.hasOwnProperty("button") && tools_const.styles.button.hasOwnProperty("cancel") && tools_const.styles.button.cancel.hasOwnProperty("backgroundColor")        ? tools_const.styles.button.cancel.backgroundColor : "" ;
                    btnBackgroundColor_hover = tools_const.hasOwnProperty("styles") && tools_const.styles.hasOwnProperty("button") && tools_const.styles.button.hasOwnProperty("cancel") && tools_const.styles.button.cancel.hasOwnProperty("backgroundColorHover")   ? tools_const.styles.button.cancel.backgroundColorHover : "" ;
                    btnColor                 = tools_const.hasOwnProperty("styles") && tools_const.styles.hasOwnProperty("button") && tools_const.styles.button.hasOwnProperty("cancel") && tools_const.styles.button.cancel.hasOwnProperty("color")                  ? tools_const.styles.button.cancel.color : ""  ;
                    break;
                case "back" :
                    btnBackgroundColor       = tools_const.hasOwnProperty("styles") && tools_const.styles.hasOwnProperty("button") && tools_const.styles.button.hasOwnProperty("back") && tools_const.styles.button.back.hasOwnProperty("backgroundColor")        ? tools_const.styles.button.back.backgroundColor : "" ;
                    btnBackgroundColor_hover = tools_const.hasOwnProperty("styles") && tools_const.styles.hasOwnProperty("button") && tools_const.styles.button.hasOwnProperty("back") && tools_const.styles.button.back.hasOwnProperty("backgroundColorHover")   ? tools_const.styles.button.back.backgroundColorHover : "" ;
                    btnColor                 = tools_const.hasOwnProperty("styles") && tools_const.styles.hasOwnProperty("button") && tools_const.styles.button.hasOwnProperty("back") && tools_const.styles.button.back.hasOwnProperty("color")                  ? tools_const.styles.button.back.color : ""  ;
                    break;
                default:
                    btnBackgroundColor       = data.hasOwnProperty("prop_btnBackgroundColor")         ?  data.prop_btnBackgroundColor          : "";
                    btnBackgroundColor_hover = data.hasOwnProperty("prop_btnBackgroundColor_hover")   ?  data.prop_btnBackgroundColor_hover    : "" ;
                    btnColor                 = data.hasOwnProperty("prop_btnColor")                   ?  data.prop_btnColor                    : "" ;
                    break;
            }

            const btnHeight = tools_css.getHeightSize(prop_size);
            const btnfontSize = tools_css.getFontSize(prop_size);


            return `
<section data-part-name="${partName}">

   <style>
      #${this._COMPONENT_ID} #component-button-${this._COMPONENT_RANDOM_ID}{
          background-color: ${btnBackgroundColor};
          color:            ${btnColor};
          height:           ${btnHeight}px;
          line-height:      ${btnHeight}px;
          font-size:        ${btnfontSize}px;
          ${tools_public.renderListStyle(prop_btnStyles)}
     }
      #${this._COMPONENT_ID} #component-button-${this._COMPONENT_RANDOM_ID}:hover{
          transition: background-color 200ms ease;
          background-color: ${btnBackgroundColor_hover};
          ${tools_public.renderListStyle(prop_btnHoverStyles)}
     }
   </style>

   <button id="component-button-${this._COMPONENT_RANDOM_ID}"  
           ${prop_btnType !=null ? `type=${prop_btnType}` : ""}
           class="shadow-sm border-0 rounded ${tools_public.renderListClass(prop_btnClass)}  "
            onclick="${this.getFn('fn_onCLickBtn' , "event")}">
      ${prop_title}
   </button>

</section>
            `
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }



    /* ---------------------------------------------
       FUNCTIONs
    --------------------------------------------- */
    fn_onCLickBtn(event){
        event.stopPropagation()
        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("fn_callback") && typeof data.fn_callback != null){
            data.fn_callback(event);
        }
    }

}



/*-------------------------------------
 010-02) Component Input
-------------------------------------*/
class ComponentInputBase extends ComponentBase{

    /* ---------------------------------------------
        PROPERTYs Pattern
     --------------------------------------------- */
    _COMPONENT_PATTERN = {
        prop_title: {
            prop: "prop_title",
            default: null
        },
        prop_backgroundColorForm: {
            prop: "prop_backgroundColorForm",
            default: tools_const?.styles?.input?.backgroundColor_form ?? ""
        },
        prop_colorIcon: {
            prop: "prop_colorIcon",
            default: tools_const?.styles?.input?.color_icon ?? ""
        },
        prop_size : {
            prop: "prop_size" ,
            default: tools_css.standardSizes.m.name
        } ,
        prop_inputClass: {
            prop: "prop_inputClass",
            default: ["form-control"]
        },
        prop_inputStyles: {
            prop: "prop_inputStyles",
            default: {}
        },
        prop_type: {
            prop: "prop_type",
            default: "string"
        },
        prop_name: {
            prop: "prop_name",
            default: null
        },
        prop_value: {
            prop: "prop_value",
            default: null
        },
        prop_placeholder: {
            prop: "prop_placeholder",
            default: null
        },
        prop_icon: {
            prop: "prop_icon",
            default: null
        },
        prop_btnAddStatus: {
            prop: "prop_btnAddStatus",
            default: false
        },
        prop_isDisable: {
            prop: "prop_isDisable",
            default: false
        },
        prop_btnAddIcon: {
            prop: "prop_btnAddIcon",
            default: "&plus;"
        },
        prop_btnAddTitle: {
            prop: "prop_btnAddTitle",
            default: "add item"
        },
        prop_btnAddClass: {
            prop: "prop_btnAddClass",
            default: []
        }
    };

    /* ---------------------------------------------
           PROPERTYs Props
    --------------------------------------------- */
    _COMPONENT_PROPS = {
        part_structure: [],

        part_label: [

        ],

        part_form: [
            this._COMPONENT_PATTERN.prop_size ,
            this._COMPONENT_PATTERN.prop_backgroundColorForm ,
        ],
        part_input: [
            this._COMPONENT_PATTERN.prop_inputClass,
            this._COMPONENT_PATTERN.prop_inputStyles,
            this._COMPONENT_PATTERN.prop_type,
            this._COMPONENT_PATTERN.prop_name,
            this._COMPONENT_PATTERN.prop_value,
            this._COMPONENT_PATTERN.prop_placeholder,
            this._COMPONENT_PATTERN.prop_icon,
            this._COMPONENT_PATTERN.prop_btnAddStatus,
            this._COMPONENT_PATTERN.prop_isDisable,
            this._COMPONENT_PATTERN.prop_size
        ],

        part_icon_clear: [
            this._COMPONENT_PATTERN.prop_isDisable,
            this._COMPONENT_PATTERN.prop_btnAddStatus,
            this._COMPONENT_PATTERN.prop_size
        ],

        part_icon: [
            this._COMPONENT_PATTERN.prop_icon,
            this._COMPONENT_PATTERN.prop_size,
            this._COMPONENT_PATTERN.prop_colorIcon
        ],

        part_button: [
            this._COMPONENT_PATTERN.prop_btnAddStatus,
            this._COMPONENT_PATTERN.prop_btnAddIcon,
            this._COMPONENT_PATTERN.prop_btnAddTitle,
            this._COMPONENT_PATTERN.prop_btnAddClass,
            this._COMPONENT_PATTERN.prop_size
        ]
    };



    /* ---------------------------------------------
   PROPERTYs Schema
   --------------------------------------------- */
    _COMPONENT_SCHEMA = {
        part_structure: {
            part_label: {} ,
            part_form: {
                part_input: {} ,
                part_icon_clear: {} ,
                part_icon: {} ,
                part_button: {} ,
            } ,
        } ,
    }

}
window.ComponentInput = class ComponentInput extends ComponentInputBase{

    /* ---------------------------------------------
       SETUP
   --------------------------------------------- */
    constructor(elId , config) {
        super(
            listComponent[ComponentInput.name] ,
            elId
        );
        super.renderComponent(config);
    }


    /* ---------------------------------------------
      TEMPLATEs
    --------------------------------------------- */
    componentFn(){
        this.templateFn("part_label");
        this.templateFn("part_icon_clear");
        this.templateFn("part_icon");
        this.templateFn("part_button");
    }

    templateFn(partName = null){
        switch (partName){
            case "part_structure":
                return this.template_render_structure(partName);
            case "part_label":
                return this.componentFn_render_label(partName)
            case "part_form":
                return this.template_render_form(partName);
            case "part_input":
                return this.template_render_input(partName);
            case "part_icon_clear":
                return this.componentFn_render_iconClear(partName);
            case "part_icon":
                return this.componentFn_render_icon(partName);
            case "part_button":
                return this.componentFn_render_button(partName);
            default:
                return this.templateBasic_render(partName);
        }
    }

    template_render_structure() {
        const content = `
         <style>
            @media (max-width: 768px) {
               #${this._COMPONENT_ID} #component-input-button-text-${ this._COMPONENT_RANDOM_ID}{
                    display: none;
               }
               #${this._COMPONENT_ID} #component-input-button-icon-${ this._COMPONENT_RANDOM_ID}{
                 
               }
           }
        </style>

         <component-label id="component-input-label-${this._COMPONENT_RANDOM_ID}"></component-label>

         ${this.templateFn("part_form") ?? ""}
         
                `;
        return this.templateBasic_render_structure(content);
    }

    template_render_form(partName ) {

        const data = this.getPartProps(partName)

        if (data != null){
            const prop_size                    =  data.hasOwnProperty("prop_size")                      ?  data.prop_size                          :  null;
            const prop_backgroundColorForm     =  data.hasOwnProperty("prop_backgroundColorForm")       ?  data.prop_backgroundColorForm           :  null;

            const elHeight = tools_css.getHeightSize(prop_size);

            return `
<section data-part-name="${partName}" 
         id="component-input-form-${ this._COMPONENT_RANDOM_ID}" 
         class=" position-relative p-0" >
     <style>
         #${this._COMPONENT_ID} #component-input-form-${ this._COMPONENT_RANDOM_ID}{
               height: ${elHeight}px;
               background-color: ${prop_backgroundColorForm};
         }
         
         @media (max-width: 768px) {
               #${this._COMPONENT_ID} #component-input-form-button-text-${ this._COMPONENT_RANDOM_ID}{
                    display: none;
               }
               #${this._COMPONENT_ID} #component-input-form-button-icon-${ this._COMPONENT_RANDOM_ID}{
                 
               }
         }
     </style>
     
          ${this.templateFn("part_input") ?? ""}
     
           <component-icon id="component-input-icon-clear-${this._COMPONENT_RANDOM_ID}" ></component-icon>
     
           <component-icon id="component-input-icon-${this._COMPONENT_RANDOM_ID}" ></component-icon>
           
           <component-button id="component-input-button-${this._COMPONENT_RANDOM_ID}" ></component-button>
           
</section>
            `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    template_render_input(partName) {
        const data = this.getPartProps(partName)

        if (data != null){
            const screanWidthType = tools_css.getScreenWidth();

            const prop_inputClass    =   data.hasOwnProperty("prop_inputClass")               ?  data.prop_inputClass                    :  [];
            const prop_inputStyles   =   data.hasOwnProperty("prop_inputStyles")              ?  data.prop_inputStyles                   :  {};
            const prop_type          =   data.hasOwnProperty("prop_type")                     ?  data.prop_type                          :  "string";
            const prop_name          =   data.hasOwnProperty("prop_name")                     ?  data.prop_name                          :  null;
            const prop_value         =   data.hasOwnProperty("prop_value")                    ?  data.prop_value                         :  null;
            const prop_placeholder   =   data.hasOwnProperty("prop_placeholder")              ?  data.prop_placeholder                   :  null;
            const prop_icon          =   data.hasOwnProperty("prop_icon")                     ?  data.prop_icon                          :  "";
            const prop_btnAddStatus  =  data.hasOwnProperty("prop_btnAddStatus")              ?  data.prop_btnAddStatus                  : false;
            const prop_isDisable     =  data.hasOwnProperty("prop_isDisable")                 ?  data.prop_isDisable                     : false;

            const directionRtl       =  this._COMPONENT_CONFIG.hasOwnProperty("directionRtl") ? this._COMPONENT_CONFIG.directionRtl      : false;
            const prop_size          =  data.hasOwnProperty("prop_size")                      ?  data.prop_size                          :  0;

            const elfontSize = tools_css.getFontSize(prop_size);
            const elHeight = tools_css.getHeightSize(prop_size);

            let padding = "180px"
            if (screanWidthType == tools_css?.standardScreanWidth?.xs?.name){
                padding = "35px";
            }

            return `
<section  data-part-name="${partName}"
          id="component-input-input-element-${this._COMPONENT_RANDOM_ID}"  
        class="  " >
          
     <style>
         #${this._COMPONENT_ID} #component-input-input-element-${this._COMPONENT_RANDOM_ID}{
          
         }
         #${this._COMPONENT_ID} #component-input-input-${this._COMPONENT_RANDOM_ID}{
            ${directionRtl ? "margin-right" : "margin-left"} : ${prop_icon != null ? "30px" : "0"} ;
            ${directionRtl ? "padding-left" : "padding-right"} : 25px ;
            ${directionRtl ? `right : 0` :`left : 0` };
            width: calc(100% - ${prop_btnAddStatus ? (screanWidthType == tools_css?.standardScreanWidth?.xs?.name ? "30px" : "160px") : "0px"} - ${prop_icon != null ? "30px" : "0px"});
            
            ${prop_icon != null ? (directionRtl ? "border-top-right-radius: 0 !important" : "border-top-left-radius: 0 !important") : ""};
            ${prop_icon != null ? (directionRtl ? "border-bottom-right-radius: 0 !important" : "border-bottom-left-radius: 0 !important") : ""};
           
            ${prop_btnAddStatus  ? (directionRtl ? "border-top-left-radius: 0 !important" : "border-top-right-radius: 0 !important") : ""};
            ${prop_btnAddStatus  ? (directionRtl ? "border-bottom-left-radius: 0 !important" : "border-bottom-right-radius: 0 !important") : ""};
            
            direction: ${directionRtl ? "rtl" : "ltr"} ;
            height: ${elHeight}px;
            line-height: ${elHeight}px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            font-size: ${elfontSize}px;
            position: absolute;
            top: 0;
            ${tools_public.renderListStyle(prop_inputStyles)};
         }
     </style>
     
     <input id="component-input-input-${this._COMPONENT_RANDOM_ID}"   
            class=" ${tools_public.renderListClass(prop_inputClass)} d-block ${prop_icon != null ? "border": ""} ${prop_btnAddStatus ? "" : "rounded-0"}"
            name="${prop_name || "" }"  
            type="${prop_type || "" }"  
            value="${prop_value || ""}"
            placeholder="${prop_placeholder || ""}"
            ${prop_isDisable ? 'disabled' : ''}
            onInput="${this.getFn("fn_onInputCallBack" , "event")}"
            onblur="${this.getFn("fn_onBlurCallBack" , "event")}"
            onfocus="${this.getFn("fn_onFocusCallBack" , "event")}"
            />
       
</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    componentFn_render_label(partName) {

        this.componentFneBasic_render_structure(
            `component-input-label-${ this._COMPONENT_RANDOM_ID}` ,
            {
                prop_for:  `component-input-input-${this._COMPONENT_RANDOM_ID}` ,
            }
        );
    }

    componentFn_render_iconClear(partName) {

        const data = this.getPartProps(partName)

        if (data != null){

            const prop_isDisable     =  data.hasOwnProperty("prop_isDisable")                 ?  data.prop_isDisable                     : false;
            if (!prop_isDisable){
                const screanWidthType = tools_css.getScreenWidth();

                const directionRtl              =  this._COMPONENT_CONFIG.hasOwnProperty("directionRtl")  ? this._COMPONENT_CONFIG.directionRtl      : false;
                const prop_btnAddStatus         =  data.hasOwnProperty("prop_btnAddStatus")               ?  data.prop_btnAddStatus                  : false;
                const prop_size                 =  data.hasOwnProperty("prop_size")                      ?  data.prop_size                          :  0;

                let styles = {
                    "font-size" : "20pt",
                    "margin" : "0 10px",
                    "top" : "50%",
                }
                if (directionRtl){
                    if (screanWidthType == tools_css?.standardScreanWidth?.xs?.name){
                        styles["left"]= "0px";
                        styles["transform"]= prop_btnAddStatus ? "translate(30px , -50%)" : "translate(0 , -50%)";
                    }
                    else{
                        styles["left"]=  "0px";
                        styles["transform"]= prop_btnAddStatus ? "translate(160px , -50%)" : "translate(0 , -50%)";
                    }
                }
                else {
                    if (screanWidthType == tools_css?.standardScreanWidth?.xs?.name){
                        styles["right"]=  "0px";
                        styles["transform"]= prop_btnAddStatus ? "translate(-30px , -50%)" : "translate(0 , -50%)";
                    }
                    else{
                        styles["right"]=  "0px";
                        styles["transform"]= prop_btnAddStatus ? "translate(-160px , -50%)" : "translate(0 , -50%)";
                    }
                }


                new window.ComponentIcon(
                    `component-input-icon-clear-${this._COMPONENT_RANDOM_ID}` ,
                    {
                        prop_icon : tools_icons.icon_clear({size : prop_size }),

                        prop_iconClass : ["position-absolute"] ,
                        prop_iconStyles : styles ,

                        fn_callback: (event)=>{
                            this.fn_onClearInput(event);
                        }
                    }
                )


            }

        }
    }

    componentFn_render_icon(partName) {

        const data = this.getPartProps(partName)

        if (data != null){
            const directionRtl       =  this._COMPONENT_CONFIG.hasOwnProperty("directionRtl") ? this._COMPONENT_CONFIG.directionRtl      : false;
            const prop_icon          =   data.hasOwnProperty("prop_icon")                     ?  data.prop_icon                          :  null;
            const prop_size          =  data.hasOwnProperty("prop_size")                      ?  data.prop_size                          :  null;
            const prop_colorIcon     =  data.hasOwnProperty("prop_colorIcon")                 ?  data.prop_colorIcon                     :  null;

            const elIconHeight = tools_css.getIconSize(prop_size);

            let styles = {
                "z-index": `${ tools_css.getZIndex(tools_css.standardZIndex.tools_btn.name , 10) }`,
                "margin" : "auto",
                "cursor" : "pointer",
                "top" : "50%" ,
                "color" : prop_colorIcon ,
            }
            if (directionRtl){
                styles["right"]= "0";
                styles["transform"]= "translate(-5px , -50%)" ;
            }
            else {
                styles["left"]= "0";
                styles["transform"]= "translate(5px , -50%)" ;
            }


            new window.ComponentIcon(
                `component-input-icon-${this._COMPONENT_RANDOM_ID}` ,
                {
                    prop_icon: prop_icon != null ? (typeof prop_icon == "function" ? pprop_icon(elIconHeight , prop_colorIcon) : prop_icon) : "" ,

                    prop_iconClass : ["position-absolute"] ,
                    prop_iconStyles : styles ,

                    fn_callback: ()=>{
                        this.runFn("fn_onFocusInput" , "event")
                    }
                }
            )

        }
    }

    componentFn_render_button(partName) {

        const data = this.getPartProps(partName)

        if (data != null){
            const screanWidthType = tools_css.getScreenWidth();

            const prop_btnAddStatus         =  data.hasOwnProperty("prop_btnAddStatus")               ?  data.prop_btnAddStatus                  : false;

            if (prop_btnAddStatus){
                const directionRtl              =  this._COMPONENT_CONFIG.hasOwnProperty("directionRtl")  ? this._COMPONENT_CONFIG.directionRtl      : false;
                const prop_btnAddIcon           =  data.hasOwnProperty("prop_btnAddIcon")                 ?  data.prop_btnAddIcon                    : "&plus;";
                const prop_btnAddTitle          =  data.hasOwnProperty("prop_btnAddTitle")                ?  data.prop_btnAddTitle                   : "add item";
                const prop_btnAddClass          =  data.hasOwnProperty("prop_btnAddClass")                ?  data.prop_btnAddClass                   : [];
                const prop_size                 =  data.hasOwnProperty("prop_size")                       ?  data.prop_size                          : null;

                let styles =  {
                    "z-index": `${ tools_css.getZIndex(tools_css.standardZIndex.tools_btn.name , 10) }`,
                    "top" : "0" ,
                    "cursor" : "pointer" ,
                };


                if (directionRtl){
                    styles["left"] = "0";

                    styles["border-bottom-right-radius"] = "0 !important";
                    styles["border-top-right-radius"] = "0 !important";
                }
                else {
                    styles["right"] = "0";

                    styles["border-bottom-left-radius"] = "0 !important";
                    styles["border-top-left-radius"] = "0 !important";
                }

                if (screanWidthType == tools_css?.standardScreanWidth?.xs?.name){
                    styles["width"] = "30px";
                }
                else{
                    styles["width"] = "160px";
                }



                new window.ComponentButton(
                    `component-input-button-${this._COMPONENT_RANDOM_ID}` ,
                    {
                        prop_btnClass: "border shadow-sm position-absolute px-3   " + prop_btnAddClass.join(" ") ,
                        prop_btnStyles: styles ,
                        prop_size: prop_size ,
                        prop_title: `
<span id="component-input-button-icon-${ this._COMPONENT_RANDOM_ID}" class="">
    ${prop_btnAddIcon}
</span>
<span  id="component-input-button-text-${ this._COMPONENT_RANDOM_ID}" class=" d-md-inline">
    ${prop_btnAddTitle}
</span>
                    `,

                        fn_callback: (event)=>{
                            this.runFn("fn_clickBtnTools" , "event")
                        }
                    }
                )
            }

        }
    }




    /* ---------------------------------------------
      FUNCTIONs
     --------------------------------------------- */
    fn_getValueInput(){
        return  document.querySelector(`input#component-input-input-${this._COMPONENT_RANDOM_ID}`).value;
    }

    fn_onClearInput(event){
        document.querySelector(`input#component-input-input-${this._COMPONENT_RANDOM_ID}`).value = ""
        this.runFn("fn_onInputCallBack" , "event");
        this.runFn("fn_onFocusInput" , "event");
    }

    fn_onFocusInput(event){
        document.querySelector(`input#component-input-input-${this._COMPONENT_RANDOM_ID}`).focus();
        this.runFn("fn_onFocusCallBack" , "event");
    }

    fn_onInputCallBack(event){
        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("fn_oninput") && typeof data.fn_oninput != null){
            data.fn_oninput(event , this.fn_getValueInput());
        }
    }
    fn_onFocusCallBack(event){
        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("fn_onfocus") && typeof data.fn_onfocus != null){
            data.fn_onfocus(event , this.fn_getValueInput());
        }
    }
    fn_onBlurCallBack(event){
        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("fn_onblur") && typeof data.fn_onblur != null){
            data.fn_onblur(event , this.fn_getValueInput());
        }
    }

    fn_clickBtnTools(event){
        event.stopPropagation();
        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("fn_clickBtnTools") && typeof data.fn_clickBtnTools != null){
            data.fn_clickBtnTools(event , this.fn_getValueInput());
        }
    }

}


/*-------------------------------------
 010-03) Component Input Price
-------------------------------------*/
class ComponentInputPriceBase extends ComponentBase{

    /* ---------------------------------------------
           PROPERTYs Pattern
    --------------------------------------------- */
    _COMPONENT_PATTERN = {
        prop_size : {
            prop: "prop_size" ,
            default: tools_css.standardSizes.m.name
        } ,

        prop_backgroundColorForm: {
            prop: "prop_backgroundColorForm",
            default: tools_const?.styles?.inputPrice?.backgroundColor_form ?? ""
        },
        prop_colorIcon: {
            prop: "prop_colorIcon",
            default: tools_const?.styles?.inputPrice?.color_icon ?? ""
        },
        prop_title: {
            prop: "prop_title",
            default: null
        },
        prop_inputClass: {
            prop: "prop_inputClass",
            default: ["form-control"]
        },
        prop_inputStyles: {
            prop: "prop_inputStyles",
            default: {}
        },
        prop_type: {
            prop: "prop_type",
            default: "string"
        },
        prop_name: {
            prop: "prop_name",
            default: null
        },
        prop_value: {
            prop: "prop_value",
            default: null
        },
        prop_calculatorColor: {
            prop: "prop_calculatorColor",
            default: tools_const?.styles?.inputPrice?.color_calculator ?? ""
        },
        prop_calculator: {
            prop: "prop_calculator",
            default: null
        },
        prop_placeholder: {
            prop: "prop_placeholder",
            default: null
        },
        prop_icon: {
            prop: "prop_icon",
            default: null
        },
        prop_btnAddStatus: {
            prop: "prop_btnAddStatus",
            default: false
        },
        prop_isDisable: {
            prop: "prop_isDisable",
            default: false
        },
        prop_btnAddIcon: {
            prop: "prop_btnAddIcon",
            default: "&plus;"
        },
        prop_btnAddTitle: {
            prop: "prop_btnAddTitle",
            default: "add item"
        },
        prop_btnAddClass: {
            prop: "prop_btnAddClass",
            default: []
        },
        prop_information: {
            prop: "prop_information",
            default: null
        }
    };

    /* ---------------------------------------------
           PROPERTYs Props
    --------------------------------------------- */
    _COMPONENT_PROPS = {
        part_structure: [],

        part_label: [

        ],

        part_form: [
            this._COMPONENT_PATTERN.prop_backgroundColorForm ,
            this._COMPONENT_PATTERN.prop_size ,
        ],

        part_input: [
            this._COMPONENT_PATTERN.prop_inputClass,
            this._COMPONENT_PATTERN.prop_inputStyles,
            this._COMPONENT_PATTERN.prop_type,
            this._COMPONENT_PATTERN.prop_name,
            this._COMPONENT_PATTERN.prop_value,
            this._COMPONENT_PATTERN.prop_placeholder,
            this._COMPONENT_PATTERN.prop_icon,
            this._COMPONENT_PATTERN.prop_btnAddStatus,
            this._COMPONENT_PATTERN.prop_isDisable,
            this._COMPONENT_PATTERN.prop_size ,
        ],

        part_icon_clear: [
            this._COMPONENT_PATTERN.prop_btnAddStatus,
            this._COMPONENT_PATTERN.prop_isDisable,
            this._COMPONENT_PATTERN.prop_size
        ],

        part_icon: [
            this._COMPONENT_PATTERN.prop_icon,
            this._COMPONENT_PATTERN.prop_size,
            this._COMPONENT_PATTERN.prop_colorIcon
        ],

        part_button: [
            this._COMPONENT_PATTERN.prop_btnAddStatus,
            this._COMPONENT_PATTERN.prop_btnAddIcon,
            this._COMPONENT_PATTERN.prop_btnAddTitle,
            this._COMPONENT_PATTERN.prop_btnAddClass,
            this._COMPONENT_PATTERN.prop_size
        ],

        part_information: [
            this._COMPONENT_PATTERN.prop_information,
            this._COMPONENT_PATTERN.prop_size,
        ],

        part_calculator: [
            this._COMPONENT_PATTERN.prop_size,
            this._COMPONENT_PATTERN.prop_calculator,
            this._COMPONENT_PATTERN.prop_calculatorColor,
            this._COMPONENT_PATTERN.prop_value,
        ]
    };


    /* ---------------------------------------------
   PROPERTYs Schema
   --------------------------------------------- */
    _COMPONENT_SCHEMA = {
        part_structure: {
            part_label: {} ,
            part_form: {
                part_input: {} ,
                part_icon_clear: {} ,
                part_icon: {} ,
                part_button: {} ,
                part_information: {} ,
            } ,
            part_calculator: {} ,
        } ,
    }

}
window.ComponentInputPrice = class ComponentInputPrice extends ComponentInputPriceBase{

    /* ---------------------------------------------
       SETUP
   --------------------------------------------- */
    constructor(elId , config) {
        super(
            listComponent[ComponentInputPrice.name] ,
            elId
        );
        super.renderComponent(config);
    }


    /* ---------------------------------------------
      TEMPLATEs
    --------------------------------------------- */
    componentFn(){
        this.templateFn("part_label");
        this.templateFn("part_icon_clear");
        this.templateFn("part_icon");
        this.templateFn("part_button");
        this.templateFn("part_information");

        this.fn_onInputCallBack();
    }
    templateFn(partName = null){
        switch (partName){
            case "part_structure":
                return this.template_render_structure(partName);
            case "part_label":
                return this.componentFn_render_label(partName)
            case "part_form":
                return this.template_render_form(partName);
            case "part_input":
                return this.template_render_input(partName);
            case "part_calculator":
                return this.template_render_calculator(partName);
            case "part_icon_clear":
                return this.componentFn_render_iconClear(partName);
            case "part_icon":
                return this.componentFn_render_icon(partName);
            case "part_button":
                return this.componentFn_render_button(partName);
            case "part_information":
                return this.componentFn_render_partition(partName);
            default:
                return this.templateBasic_render();
        }
    }

    template_render_structure(partName) {
        const content = `

     <style>
            @media (max-width: 768px) {
               #${this._COMPONENT_ID} #component-input-price-button-text-${ this._COMPONENT_RANDOM_ID}{
                    display: none;
               }
               #${this._COMPONENT_ID} #component-input-price-button-icon-${ this._COMPONENT_RANDOM_ID}{
                 
               }
           }
     </style>

     <component-label id="component-input-label-${this._COMPONENT_RANDOM_ID}" ></component-label>
     
     ${this.templateFn("part_form") ?? ""}
     
     ${this.templateFn("part_calculator") ?? ""}
     
                `;
        return this.templateBasic_render_structure(content);
    }

    template_render_form(partName) {

        const data = this.getPartProps(partName)

        if (data != null){
            const prop_size                    =  data.hasOwnProperty("prop_size")                      ?  data.prop_size                          :  null;
            const prop_backgroundColorForm     =  data.hasOwnProperty("prop_backgroundColorForm")       ?  data.prop_backgroundColorForm           :  null;

            const elHeight = tools_css.getHeightSize(prop_size);

            return `
<section data-part-name="${partName}" 
         id="component-input-price-form-${ this._COMPONENT_RANDOM_ID}" 
         class=" position-relative p-0" >
     <style>
         #${this._COMPONENT_ID} #component-input-price-form-${ this._COMPONENT_RANDOM_ID}{
               height: ${elHeight}px;
               background-color: ${prop_backgroundColorForm};
         }
         
         @media (max-width: 768px) {
               #${this._COMPONENT_ID} #component-input-price-form-button-text-${ this._COMPONENT_RANDOM_ID}{
                    display: none;
               }
               #${this._COMPONENT_ID} #component-input-price-form-button-icon-${ this._COMPONENT_RANDOM_ID}{
                 
               }
         }
     </style>
     
     ${this.templateFn("part_input") ?? ""}
     
     <component-icon id="component-input-price-icon-clear-${this._COMPONENT_RANDOM_ID}" ></component-icon>
     
     <component-icon id="component-input-price-icon-${this._COMPONENT_RANDOM_ID}" ></component-icon>
           
     <component-button id="component-input-price-button-${this._COMPONENT_RANDOM_ID}" ></component-button>
           
     <component-position-element id="component-input-position-element-${this._COMPONENT_RANDOM_ID}" ></component-position-element>
           
</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    template_render_input(partName) {

        const data = this.getPartProps(partName)

        if (data != null){
            const screanWidthType = tools_css.getScreenWidth();

            const prop_inputClass    =   data.hasOwnProperty("prop_inputClass")               ?  data.prop_inputClass                                   :  [];
            const prop_inputStyles   =   data.hasOwnProperty("prop_inputStyles")              ?  data.prop_inputStyles                                  :  {};
            const prop_type          =   data.hasOwnProperty("prop_type")                     ?  data.prop_type                                         :  "string";
            const prop_value         =   data.hasOwnProperty("prop_value")                    ?  tools_converter.convertPriceToString(data.prop_value)  :  null;
            const prop_placeholder   =   data.hasOwnProperty("prop_placeholder")              ?  data.prop_placeholder                                  :  null;
            const prop_icon          =   data.hasOwnProperty("prop_icon")                     ?  data.prop_icon                                         :  null;
            const prop_btnAddStatus  =  data.hasOwnProperty("prop_btnAddStatus")              ?  data.prop_btnAddStatus                                 : false;
            const prop_isDisable     =  data.hasOwnProperty("prop_isDisable")                 ?  data.prop_isDisable                                    : false;
            const prop_size          =  data.hasOwnProperty("prop_size")                      ?  data.prop_size                                         :  null;
            const prop_name          =   data.hasOwnProperty("prop_name")                     ?  data.prop_name                                         :  null;

            const directionRtl       =  this._COMPONENT_CONFIG.hasOwnProperty("directionRtl") ? this._COMPONENT_CONFIG.directionRtl                     : false;

            const elHeight = tools_css.getHeightSize(prop_size);
            const elfontSize = tools_css.getFontSize(prop_size);

            let padding = "180px"
            if (screanWidthType == tools_css?.standardScreanWidth?.xs?.name){
                padding = "35px";
            }

            return `
<section  data-part-name="${partName}"
          id="component-input-input-element-${this._COMPONENT_RANDOM_ID}"  
          class="" >
          
     <style>
         #${this._COMPONENT_ID} #component-input-price-element-${this._COMPONENT_RANDOM_ID}{
         
         }
         #${this._COMPONENT_ID} #component-input-price-${this._COMPONENT_RANDOM_ID}{
            ${directionRtl ? "margin-right" : "margin-left"} : ${prop_icon != null ? "30px" : "0"} ;
            ${directionRtl ? "padding-left" : "padding-right"} : 25px ;
            ${directionRtl ? `right : 0` :`left : 0` };
            width: calc(100% - ${prop_btnAddStatus ? (screanWidthType == tools_css?.standardScreanWidth?.xs?.name ? "30px" : "160px") : "0px"} - ${prop_icon != null ? "30px" : "0px"});
            ${directionRtl ? "border-top-right-radius: 0 !important" : "border-top-left-radius: 0 !important" } ;
            ${directionRtl ? "border-bottom-right-radius: 0 !important" : "border-bottom-left-radius: 0 !important" } ;
            height: ${elHeight}px;
            line-height: ${elHeight}px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            font-size: ${elfontSize}px;
            position: absolute;
            top: 0;
         }
     </style>

     <input id="component-input-price-${this._COMPONENT_RANDOM_ID}"   
            class=" ${tools_public.renderListClass(prop_inputClass)} rounded-0 border-1"
            name="${prop_name || "" }"  
            type="${prop_type || "" }"  
            value="${prop_value || ""}"
            placeholder="${prop_placeholder || ""}"
            ${prop_isDisable ? 'disabled' : ''}
            onInput="${this.getFn("fn_onHandleInput" , "event")};   ${this.getFn("fn_onInputCallBack" , "event")}"
            onblur=" ${this.getFn("fn_onFormatValue" , "event")};   ${this.getFn("fn_onBlurCallBack" , "event")}"
            onfocus="${this.getFn("fn_onUnFormatValue" , "event")}; ${this.getFn("fn_onFocusCallBack" , "event")}"
            />
       
</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    template_render_calculator(partName){
        const data = this.getPartProps(partName)

        if (data != null){
            const prop_size                    =   data.hasOwnProperty("prop_size")                    ?  data.prop_size                  :  null;
            const prop_value                   =   data.hasOwnProperty("prop_value")                   ?  data.prop_value                 :  null;
            const prop_calculator              =   data.hasOwnProperty("prop_calculator")              ?  data.prop_calculator            :  null;
            const prop_calculatorColor         =   data.hasOwnProperty("prop_calculatorColor")         ?  data.prop_calculatorColor       :  null;

            if (prop_calculator != null){

                const elHeight = tools_css.getHeightSize(prop_size);
                const elfontSize = tools_css.getFontSize(prop_size);

                let htmlCalc = "";
                for (let i = 0; i < prop_calculator.length ; i++) {
                    const itemCalc = prop_calculator[i];
                    htmlCalc += `
<div>
   ${itemCalc?.title ?? ''}:
   <b class="component-input-price-coefficient-text-${this._COMPONENT_RANDOM_ID}-${itemCalc?.name ?? ""} mx-2" >
        ${tools_converter.convertPriceToString((itemCalc?.coefficient ?? 1) *prop_value) }
   </b>
    <b class="" >
        ${itemCalc?.extension ?? ''}
    </b>
</div>
                    `
                }

                return `
<section  data-part-name="${partName}"
          id="component-input-price-coefficient-${this._COMPONENT_RANDOM_ID}"  
          class="" >
          
     <style>
         #${this._COMPONENT_ID} #component-input-price-coefficient-${this._COMPONENT_RANDOM_ID}{
            line-height: ${elHeight}px;
            font-size: ${elfontSize}px;
         }
         #${this._COMPONENT_ID} .component-input-price-coefficient-text-${this._COMPONENT_RANDOM_ID} b{
            color: ${prop_calculatorColor};
         }
     </style> 
     
     ${htmlCalc}
       
</section>
        `;

            }
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    componentFn_render_label(partName) {
        this.componentFneBasic_render_structure(
            `component-input-label-${ this._COMPONENT_RANDOM_ID}` ,
            {
                prop_for:  `component-input-price-${ this._COMPONENT_RANDOM_ID}` ,
            }
        );
    }

    componentFn_render_iconClear(partName) {

        const data = this.getPartProps(partName)

        if (data != null){
            const screanWidthType = tools_css.getScreenWidth();

            const directionRtl              =  this._COMPONENT_CONFIG.hasOwnProperty("directionRtl")  ? this._COMPONENT_CONFIG.directionRtl      : false;
            const prop_btnAddStatus         =  data.hasOwnProperty("prop_btnAddStatus")               ?  data.prop_btnAddStatus                  : false;
            const prop_size                 =  data.hasOwnProperty("prop_size")                       ?  data.prop_size                          : null;
            const prop_isDisable            =  data.hasOwnProperty("prop_isDisable")                  ?  data.prop_isDisable                     : false;

            if (!prop_isDisable){
                let styles = {
                    "font-size" : "20pt",
                    "margin" : "0 10px",
                    "top" : "50%",
                }
                if (directionRtl){
                    if (screanWidthType == tools_css?.standardScreanWidth?.xs?.name){
                        styles["left"]=  "0px";
                        styles["transform"]= prop_btnAddStatus ? "translate(30px , -50%)" : "translate(0 , -50%)";
                    }
                    else{
                        styles["left"]=  "0px";
                        styles["transform"]= prop_btnAddStatus ? "translate(160px , -50%)" : "translate(0 , -50%)";
                    }
                }
                else {
                    if (screanWidthType == tools_css?.standardScreanWidth?.xs?.name){
                        styles["right"]=  "0px";
                        styles["transform"]= prop_btnAddStatus ? "translate(-30px , -50%)" :  "translate(0 , -50%)";
                    }
                    else{
                        styles["right"]= "0px";
                        styles["transform"]= prop_btnAddStatus ? "translate(-160px , -50%)" : "translate(0 , -50%)";
                    }
                }

                new window.ComponentIcon(
                    `component-input-price-icon-clear-${this._COMPONENT_RANDOM_ID}` ,
                    {
                        prop_icon : tools_icons.icon_clear({size : prop_size} ),

                        prop_iconClass : ["position-absolute"] ,
                        prop_iconStyles : styles ,

                        fn_callback: (event)=>{
                            this.fn_onClearInput(event);
                        }
                    }
                );

            }

        }


    }

    componentFn_render_icon(partName) {

        const data = this.getPartProps(partName)

        if (data != null){
            const directionRtl       =  this._COMPONENT_CONFIG.hasOwnProperty("directionRtl") ? this._COMPONENT_CONFIG.directionRtl      : false;
            const prop_icon          =   data.hasOwnProperty("prop_icon")                     ?  data.prop_icon                          :  null;
            const prop_size          =  data.hasOwnProperty("prop_size")                      ?  data.prop_size                          :  null;
            const prop_colorIcon     =  data.hasOwnProperty("prop_colorIcon")                 ?  data.prop_colorIcon                     :  null;

            const elIconHeight = tools_css.getIconSize(prop_size);

            let styles = {
                "z-index": `${ tools_css.getZIndex(tools_css.standardZIndex.tools_btn.name , 10) }` ,
                "margin" : "auto",
                "cursor" : "pointer",
                "top" : "50%" ,
                "color" : prop_colorIcon ,
            }
            if (directionRtl){
                styles["right"]= "0";
                styles["transform"]= "translate(-5px , -50%)" ;
            }
            else {
                styles["left"]= "0";
                styles["transform"]= "translate(5px , -50%)" ;
            }


            new window.ComponentIcon(
                `component-input-price-icon-${this._COMPONENT_RANDOM_ID}` ,
                {
                    prop_icon: prop_icon != null ? (typeof prop_icon == "function" ? pprop_icon(elIconHeight , prop_colorIcon) : prop_icon) : "" ,

                    prop_iconClass : ["position-absolute"] ,
                    prop_iconStyles : styles ,

                    fn_callback: ()=>{
                        this.runFn("fn_onFocusInput" , "event")
                    }
                }
            )

        }

    }

    componentFn_render_button(partName) {

        const data = this.getPartProps(partName)

        if (data != null){
            const screanWidthType = tools_css.getScreenWidth();

            const prop_btnAddStatus         =  data.hasOwnProperty("prop_btnAddStatus")               ?  data.prop_btnAddStatus                  : false;

            if (prop_btnAddStatus){
                const directionRtl              =  this._COMPONENT_CONFIG.hasOwnProperty("directionRtl")  ? this._COMPONENT_CONFIG.directionRtl      : false;
                const prop_btnAddIcon           =  data.hasOwnProperty("prop_btnAddIcon")                 ?  data.prop_btnAddIcon                    : "&plus;";
                const prop_btnAddTitle          =  data.hasOwnProperty("prop_btnAddTitle")                ?  data.prop_btnAddTitle                   : "add item";
                const prop_btnAddClass          =  data.hasOwnProperty("prop_btnAddClass")                ?  data.prop_btnAddClass                   : [];
                const prop_size                 =  data.hasOwnProperty("prop_size")                       ?  data.prop_size                          :  0;

                let styles =  {
                    "z-index": `${ tools_css.getZIndex(tools_css.standardZIndex.tools_btn.name , 10) }`,
                    "top" : "0" ,
                    "cursor" : "pointer" ,
                };
                styles["border-bottom-right-radius"] = "0 !important";
                styles["border-top-right-radius"] = "0 !important";
                styles["border-bottom-left-radius"] = "0 !important";
                styles["border-top-left-radius"] = "0 !important";
                if (directionRtl){
                    styles["left"] = "0";
                }
                else {
                    styles["right"] = "0";
                }

                if (screanWidthType == tools_css?.standardScreanWidth?.xs?.name){
                    styles["width"] = "30px";
                }
                else{
                    styles["width"] = "160px";
                }

                new window.ComponentButton(
                    `component-input-price-button-${this._COMPONENT_RANDOM_ID}` ,
                    {
                        prop_btnClass: ["border" , "shadow-sm","position-absolute", "p-0" , "m-0" , "border-withe" , directionRtl? "border-end" : "border-start"] ,
                        prop_btnStyles: styles ,
                        prop_size: prop_size ,

                        prop_title: `
<span id="component-input-price-button-icon-${ this._COMPONENT_RANDOM_ID}" class="">
    ${prop_btnAddIcon}
</span>
<span id="component-input-price-button-text-${ this._COMPONENT_RANDOM_ID}" class=" d-md-inline">
    ${prop_btnAddTitle}
</span>
                    `,


                        fn_callback: (event)=>{
                            this.fn_clickBtnTools(event);
                        }
                    }
                )
            }

        }

    }

    componentFn_render_partition(partName) {

        const data = this.getPartProps(partName)

        if (data != null){
            const prop_information             =   data.hasOwnProperty("prop_information")               ?  data.prop_information                   :  null;
            const directionRtl                 =  this._COMPONENT_CONFIG.hasOwnProperty("directionRtl")  ? this._COMPONENT_CONFIG.directionRtl      : false;
            const prop_size                    =  data.hasOwnProperty("prop_size")                       ?  data.prop_size                          :  null;

            const elHeight = tools_css.getHeightSize(prop_size);
            const elFontSize = tools_css.getFontSize(prop_size);

            if (prop_information != null && Array.isArray(prop_information)) {
                let infoHtml = "";
                for (const indexInfo in prop_information) {
                    const itemInfo = prop_information[indexInfo];
                    if (itemInfo.hasOwnProperty("title")) {
                        infoHtml += `
<div class=" d-md-block mb-1" style="background-color: ${itemInfo.hasOwnProperty("value_backgroundColor") ? itemInfo.value_backgroundColor : null}; ">
     <p class="  text-center p-0 m-0" style="height: ${elHeight}px; font-size ${elFontSize}px ;background-color: ${itemInfo.hasOwnProperty("title_backgroundColor") ? itemInfo.title_backgroundColor : null}; color: ${itemInfo.hasOwnProperty("title_color") ? itemInfo.title_color : null}; ">
            ${itemInfo.title}
     </p>
     <p class=" p-0 m-0 text-center" style="height: ${elHeight}px; font-size ${elFontSize}px ;color: ${itemInfo.hasOwnProperty("value_color") ? itemInfo.value_color : null}; ">
            ${itemInfo.hasOwnProperty("value") ? itemInfo.value : "---"}
     </p>
</div>
                    `
                    }
                }

                let props = {
                    classList: ["d-none"]  ,
                    prop_width: "250px",
                    prop_height: null,
                    prop_content: infoHtml ,
                    prop_elementClass: [" border" , "shadow-sm" , "bg-white" , "px-2" , "py-1"] ,
                    prop_elementStyles: {
                        "z-index": `${ tools_css.getZIndex(tools_css.standardZIndex.tools.name , 11) }`,
                    } ,
                    prop_positionTop: `${elHeight+2}px`
                }

                if (directionRtl){
                    props["prop_positionLeft"] = 0;

                }
                else {
                    props["prop_positionRight"] = 0;
                }

                new window.ComponentPositionElement(
                    `component-input-position-element-${this._COMPONENT_RANDOM_ID}` ,
                    props
                )

            }
        }
    }





    /* ---------------------------------------------
      FUNCTIONs
     --------------------------------------------- */

    fn_getElementInput(){
        return document.querySelector(`input#component-input-price-${this._COMPONENT_RANDOM_ID}`);
    }
    fn_getElementCalculatorElement(elName){
        return document.querySelector(`.component-input-price-coefficient-text-${this._COMPONENT_RANDOM_ID}-${elName}`);
    }

    fn_getValueInput(){
        const data = this._COMPONENT_CONFIG;
        const prop_calculator  =   data.hasOwnProperty("prop_calculator")     ?  data.prop_calculator  :  null;

        let inputValue =0 ;
        const input = this.fn_getElementInput();
        if (input != null){
            inputValue = input.value
        }

        let calcs = {};
        if (prop_calculator != null){
            for (let i = 0; i < prop_calculator.length; i++) {
                const itemCalc = prop_calculator[i];

                const el = this.fn_getElementCalculatorElement(itemCalc?.name ?? "");
                const name = itemCalc?.name ?? null;
                if (name != null){
                    const coefficient = itemCalc?.coefficient ?? 1;
                    const value  =  coefficient * tools_converter.convertStringToPrice(inputValue);
                    calcs[name] = value;
                    el.innerText =tools_converter.convertPriceToString(value)
                }
            }
        }

        return {value: tools_converter.convertStringToPrice(inputValue), calcs }
    }

    fn_onHandleInput(event){
        const data = this._COMPONENT_CONFIG;
        const prop_coefficient  =   data.hasOwnProperty("prop_coefficient")     ?  data.prop_coefficient  :  null;

        const value = event.target.value;
        event.target.value =  tools_converter.convertPriceToString(value);
        if (prop_coefficient != null){
            const realVal = tools_converter.convertStringToPrice(value) * prop_coefficient;
        }
    }
    fn_onFormatValue(event){
        document.querySelector(`#component-input-position-element-${this._COMPONENT_RANDOM_ID}`).classList.add("d-none");
    }
    fn_onUnFormatValue(event){
        document.querySelector(`#component-input-position-element-${this._COMPONENT_RANDOM_ID}`).classList.remove("d-none");
    }

    fn_onClearInput(event){
        this.fn_getElementInput().value = ""
        this.runFn("fn_onInputCallBack" , "event");
        this.runFn("fn_onFocusInput" , "event");
    }

    fn_onFocusInput(event){
        this.fn_getElementInput().focus();
        this.runFn("fn_onFocusCallBack" , "event");
    }

    fn_onInputCallBack(event){
        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("fn_oninput") && typeof data.fn_oninput != null){
            const dataValue = this.fn_getValueInput();
            data.fn_oninput(event , dataValue.value , dataValue.calcs);
        }
    }
    fn_onFocusCallBack(event){
        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("fn_onfocus") && typeof data.fn_onfocus != null){
            const dataValue = this.fn_getValueInput();
            data.fn_onfocus(event , dataValue.value , dataValue.calcs);
        }
    }
    fn_onBlurCallBack(event){
        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("fn_onblur") && typeof data.fn_onblur != null){
            const dataValue = this.fn_getValueInput();
            data.fn_onblur(event , dataValue.value , dataValue.calcs);
        }
    }

    fn_clickBtnTools(event){
        event.stopPropagation();
        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("fn_clickBtnTools") && typeof data.fn_clickBtnTools != null){
            const dataValue = this.fn_getValueInput();
            data.fn_clickBtnTools(event , dataValue.value , dataValue.calcs);
        }
    }


    call_setValue(value){
        const input = this.fn_getElementInput();
        if (input != null){
            input.value = tools_converter.convertPriceToString(value)
        }
        this.fn_onInputCallBack();
    }

}


/*-------------------------------------
 010-04) Component Input email
-------------------------------------*/
class ComponentInputEmailBase extends ComponentBase{
    /* ---------------------------------------------
           PROPERTYs Pattern
    --------------------------------------------- */
    _COMPONENT_PATTERN = {
        prop_size: {
            prop: "prop_size",
            default: tools_css.standardSizes.m.name
        },
        prop_backgroundColorForm: {
            prop: "prop_backgroundColorForm",
            default: tools_const?.styles?.inputEmail?.backgroundColor_form ?? ""
        },
        prop_colorIcon: {
            prop: "prop_colorIcon",
            default: tools_const?.styles?.inputEmail?.color_icon ?? ""
        },
        prop_title: {
            prop: "prop_title",
            default: "TITLE"
        },
        prop_inputClass: {
            prop: "prop_inputClass",
            default: ["form-control"]
        },
        prop_inputStyles: {
            prop: "prop_inputStyles",
            default: {}
        },
        prop_name: {
            prop: "prop_name",
            default: null
        },
        prop_value: {
            prop: "prop_value",
            default: null
        },
        prop_placeholder: {
            prop: "prop_placeholder",
            default: null
        },
        prop_icon: {
            prop: "prop_icon",
            default: null
        },
        prop_iconEmail: {
            prop: "prop_icon",
            default: tools_icons.icon_email
        },
        prop_isDisable: {
            prop: "prop_isDisable",
            default: false
        },
        prop_isAbsoluteRule: {
            prop: "prop_isAbsoluteRule",
            default: true
        },
        prop_listRules: {
            prop: "prop_listRules",
            default: []
        },
        prop_msgRules: {
            prop: "prop_msgRules",
            default: null
        }
    };

    /* ---------------------------------------------
           PROPERTYs Props
    --------------------------------------------- */
    _COMPONENT_PROPS = {
        part_structure: [],

        part_label: [

        ],

        part_body: [
            this._COMPONENT_PATTERN.prop_size,
            this._COMPONENT_PATTERN.prop_backgroundColorForm,
        ],

        part_body_email: [
            this._COMPONENT_PATTERN.prop_inputClass,
            this._COMPONENT_PATTERN.prop_inputStyles,
            this._COMPONENT_PATTERN.prop_name,
            this._COMPONENT_PATTERN.prop_value,
            this._COMPONENT_PATTERN.prop_placeholder,
            this._COMPONENT_PATTERN.prop_iconEmail,
            this._COMPONENT_PATTERN.prop_isDisable,
            this._COMPONENT_PATTERN.prop_size
        ],

        part_body_icon: [
            this._COMPONENT_PATTERN.prop_icon ,
            this._COMPONENT_PATTERN.prop_colorIcon ,
            this._COMPONENT_PATTERN.prop_size
        ],

        part_body_icon_clear: [
            this._COMPONENT_PATTERN.prop_isDisable,
            this._COMPONENT_PATTERN.prop_size
        ],

        part_body_validate: [
            this._COMPONENT_PATTERN.prop_isAbsoluteRule,
            this._COMPONENT_PATTERN.prop_listRules,
            this._COMPONENT_PATTERN.prop_msgRules,
            this._COMPONENT_PATTERN.prop_isDisable,
            this._COMPONENT_PATTERN.prop_title
        ]
    };

    /* ---------------------------------------------
   PROPERTYs Schema
   --------------------------------------------- */
    _COMPONENT_SCHEMA = {
        part_structure:{
            part_label : {} ,
            part_body : {
                part_body_email:{},
                part_body_icon:{},
                part_body_icon_clear:{},
                part_body_validate:{},
            },
        } ,
    }

}
window.ComponentInputEmail = class ComponentInputEmail extends ComponentInputEmailBase{

    _STATUS_IS_SHOW = false;

    /* ---------------------------------------------
       SETUP
   --------------------------------------------- */
    constructor(elId , config) {
        super(
            listComponent[ComponentInputEmail.name] ,
            elId
        );
        super.renderComponent(config);
    }



    /* ---------------------------------------------
   TEMPLATEs
 --------------------------------------------- */
    componentFn(){
        this.templateFn("part_label");
        this.templateFn("part_body_icon");
        this.templateFn("part_body_icon_clear");
        this.templateFn("part_body_icon_visit");
        this.templateFn("part_body_validate");
    }


    templateFn(partName = null){
        switch (partName){
            case "part_structure":
                return this.template_render_structure(partName);

            case "part_body":
                return this.template_render_body(partName);

            case "part_body_email":
                return this.template_render_bodyEmail(partName);

            case "part_label":
                return this.componentFn_render_label(partName);

            case "part_body_icon":
                return this.componentFn_render_bodyIcon(partName);

            case "part_body_icon_clear":
                return this.componentFn_render_bodyIconClear(partName);

            case "part_body_validate":
                return this.componentFn_render_bodyValidate(partName);

            default:
                return this.templateBasic_render();
        }
    }

    template_render_structure(partName) {

        const content = `
  
     <component-label id="component-input-email-label-${this._COMPONENT_RANDOM_ID}" ></component-label>

     ${this.templateFn("part_body") ?? ""}
     
      <component-validate id="component-input-email-validate-${this._COMPONENT_RANDOM_ID}"></component-validate>
      `;

        return this.templateBasic_render_structure(content , []);
    }

    template_render_body(partName) {

        const data = this.getPartProps(partName)

        if (data != null){
            const prop_size                     =   data.hasOwnProperty("prop_size")                     ?  data.prop_size                     : null;
            const prop_backgroundColorForm      =   data.hasOwnProperty("prop_backgroundColorForm")      ?  data.prop_backgroundColorForm      : null;

            let elHeight = tools_css.getHeightSize(prop_size);

            return                                       `
<section  data-part-name="${partName}"
          id="component-input-email-body-${this._COMPONENT_RANDOM_ID}"  
          class="position-relative rounded-0 d-block" >
          
     <style>
         #${this._COMPONENT_ID} #component-input-email-body-${this._COMPONENT_RANDOM_ID}{
               height: ${elHeight}px;
               background-color: ${prop_backgroundColorForm};
         }
         
     </style>
     
     ${this.templateFn("part_body_email") ?? ""}
     
     <component-icon id="component-input-email-icon-${this._COMPONENT_RANDOM_ID}" ></component-icon>
     <component-icon id="component-input-email-icon-clear-${this._COMPONENT_RANDOM_ID}" ></component-icon>
        
</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    template_render_bodyEmail(partName) {

        const data = this.getPartProps(partName)

        if (data != null){
            const screanWidthType = tools_css.getScreenWidth();

            const prop_inputClass    =   data.hasOwnProperty("prop_inputClass")               ?  data.prop_inputClass                                   :  [];
            const prop_inputStyles   =   data.hasOwnProperty("prop_inputStyles")              ?  data.prop_inputStyles                                  :  {};
            const prop_name          =   data.hasOwnProperty("prop_name")                     ?  data.prop_name                                         :  null;
            const prop_value         =   data.hasOwnProperty("prop_value")                    ?  tools_converter.convertPriceToString(data.prop_value)  :  null;
            const prop_placeholder   =   data.hasOwnProperty("prop_placeholder")              ?  data.prop_placeholder                                  :  null;
            const prop_icon          =   data.hasOwnProperty("prop_icon")                     ?  data.prop_icon                                         :  null;
            const prop_isDisable     =  data.hasOwnProperty("prop_isDisable")                 ?  data.prop_isDisable                                    : false;

            const directionRtl       =  this._COMPONENT_CONFIG.hasOwnProperty("directionRtl") ? this._COMPONENT_CONFIG.directionRtl                     : false;
            const prop_size          =   data.hasOwnProperty("prop_size")                     ?  data.prop_size                                         : null;

            let elHeight = tools_css.getHeightSize(prop_size);
            let elfontSize = tools_css.getFontSize(prop_size);

            let padding = "180px"
            if (screanWidthType == tools_css?.standardScreanWidth?.xs?.name){
                padding = "35px";
            }

            return `
<section  data-part-name="${partName}"
          id="component-input-email-element-${this._COMPONENT_RANDOM_ID}"  
          class="" >
          
     <style>
         #${this._COMPONENT_ID} #component-input-email-element-${this._COMPONENT_RANDOM_ID}{
              
         }
         #${this._COMPONENT_ID} #component-input-email-${this._COMPONENT_RANDOM_ID}{
              ${directionRtl ? "margin-right" : "margin-left"} : ${prop_icon != null ? "30px" : "0"} ;
              ${directionRtl ? `right : 0` :`left : 0` };
              width: calc( 100% - ${prop_icon != null ? "30px" : "0px"});
            
              ${prop_icon != null ? (directionRtl ? "border-top-right-radius: 0 !important" : "border-top-left-radius: 0 !important") : ""};
              ${prop_icon != null ? (directionRtl ? "border-bottom-right-radius: 0 !important" : "border-bottom-left-radius: 0 !important") : ""};
           
              ${(directionRtl ? "border-top-left-radius: 0 !important" : "border-top-right-radius: 0 !important") };
              ${(directionRtl ? "border-bottom-left-radius: 0 !important" : "border-bottom-right-radius: 0 !important")};
           
              height: ${elHeight}px;
              line-height: ${elHeight}px;
              white-space: nowrap;
              overflow: hidden;
              text-overflow: ellipsis;
              font-size: ${elfontSize}px;
              top: 0;
              ${tools_public.renderListStyle(prop_inputStyles)}
         }
     </style>

     <input id="component-input-email-${this._COMPONENT_RANDOM_ID}"   
            class=" ${tools_public.renderListClass(prop_inputClass)} border-1"
            name="${prop_name || "" }"  
            type="email"  
            value="${prop_value || ""}"
            placeholder="${prop_placeholder || ""}"
            ${prop_isDisable ? 'disabled' : ''}
            onInput="${this.getFn("fn_onInputCallBack" , "event")}"
            onblur=" ${this.getFn("fn_onBlurCallBack" , "event")}"
            onfocus="${this.getFn("fn_onFocusCallBack" , "event")}"
            />
       
</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    componentFn_render_bodyIcon(partName) {

        const data = this.getPartProps(partName)

        if (data != null){
            const directionRtl       =  this._COMPONENT_CONFIG.hasOwnProperty("directionRtl") ? this._COMPONENT_CONFIG.directionRtl      : false;
            const prop_icon          =   data.hasOwnProperty("prop_icon")                     ?  data.prop_icon                          :  null;
            const prop_colorIcon     =   data.hasOwnProperty("prop_colorIcon")                ?  data.prop_colorIcon                     : null;
            const prop_size          =   data.hasOwnProperty("prop_size")                     ?  data.prop_size                          : null;

            const elIconHeight = tools_css.getIconSize(prop_size);

            let styles = {
                "z-index": `${ tools_css.getZIndex(tools_css.standardZIndex.tools_btn.name , 10) }`,
                "cursor" : "pointer",
                "top" : "50%" ,
                "color" : prop_colorIcon ,
            }
            if (directionRtl){
                styles["right"]= "0"
                styles["transform"]= "translate(-5px, -50%)"
            }
            else {
                styles["left"]= "0"
                styles["transform"]= "translate(5px, -50%)"
            }

            if (prop_icon != null){
                new window.ComponentIcon(
                    `component-input-email-icon-${this._COMPONENT_RANDOM_ID}` ,
                    {
                        prop_icon: typeof prop_icon == "function" ? prop_icon(elIconHeight , prop_colorIcon) : prop_icon,

                        prop_iconClass : ["position-absolute"] ,
                        prop_iconStyles : styles ,

                        fn_callback: ()=>{
                            this.runFn("fn_onFocusInput" , "event")
                        }
                    }
                )
            }

        }
    }

    componentFn_render_bodyIconClear(partName) {

        const data = this.getPartProps(partName)

        if (data != null){
            const prop_isDisable     =  data.hasOwnProperty("prop_isDisable")                 ?  data.prop_isDisable                     : false;

            if (!prop_isDisable){

                const directionRtl       =  this._COMPONENT_CONFIG.hasOwnProperty("directionRtl") ? this._COMPONENT_CONFIG.directionRtl      : false;
                const prop_size          =   data.hasOwnProperty("prop_size")                     ?  data.prop_size                                         : null;

                let styles = {
                    "z-index": `${ tools_css.getZIndex(tools_css.standardZIndex.tools_btn.name , 10) }`,
                    "cursor" : "pointer",
                    "top" : "50%" ,
                };

                if (directionRtl){
                    styles["left"]= "0";
                    styles["transform"]=  "translate(15px, -50%)" ;
                }
                else {
                    styles["right"]= "0";
                    styles["transform"]=  "translate(-15px, -50%)" ;
                }

                new window.ComponentIcon(
                    `component-input-email-icon-clear-${this._COMPONENT_RANDOM_ID}` ,
                    {
                        styles: {}  ,

                        prop_iconClass : ["position-absolute"] ,
                        prop_iconStyles : styles ,
                        prop_icon : tools_icons.icon_clear({size : prop_size} ) ,

                        fn_callback: ()=>{
                            this.runFn("fn_onClearInput" , "event")
                        }
                    }
                )
            }


        }
    }

    componentFn_render_label(partName) {

        const data = this.getPartProps(partName)

        if (data != null){

            this.componentFneBasic_render_structure(
                `component-input-email-label-${this._COMPONENT_RANDOM_ID}` ,
                {
                    prop_for:  `component-input-email-${this._COMPONENT_RANDOM_ID}`,
                    fn_callback: () => {

                    } ,
                }
            );
        }
    }

    componentFn_render_bodyValidate(partName) {

        const data = this.getPartProps(partName)

        if (data != null){

            const data = this.getPartProps(partName)

            if (data != null){
                const prop_isDisable     =  data.hasOwnProperty("prop_isDisable")          ?  data.prop_isDisable              : false;

                if (!prop_isDisable){

                    const prop_isAbsoluteRule    =  data.hasOwnProperty("prop_isAbsoluteRule")            ?  data.prop_isAbsoluteRule                : true;
                    const prop_listRules         =  data.hasOwnProperty("prop_listRules")                 ?  data.prop_listRules                     : [];
                    const prop_msgRules          =  data.hasOwnProperty("prop_msgRules")                  ?  data.prop_msgRules                      : null;
                    const prop_title             =  data.hasOwnProperty("prop_title")                     ?  data.prop_title                         : [];
                    const directionRtl           =  this._COMPONENT_CONFIG.hasOwnProperty("directionRtl") ? this._COMPONENT_CONFIG.directionRtl      : false;


                    prop_listRules.push({
                        description: "Must have email format",
                        rule : "_is_email" ,
                        params: {}
                    })

                    new window.ComponentValidate(
                        `component-input-email-validate-${this._COMPONENT_RANDOM_ID}` ,
                        {
                            prop_reference: `component-input-email-${this._COMPONENT_RANDOM_ID}` ,
                            prop_isAbsolute: prop_isAbsoluteRule ,
                            prop_listRules ,
                            prop_msgRules ,
                            prop_title
                        }
                    );
                }

            }

        }
    }





    /* ---------------------------------------------
       FUNCTIONs
    --------------------------------------------- */



    /* ---------------------------------------------
       FUNCTIONs
    --------------------------------------------- */

    fn_getInputElement(){
        return   document.querySelector(`input#component-input-email-${this._COMPONENT_RANDOM_ID}`);
    }


    fn_getInputValue(event){
        const input = this.fn_getInputElement();
        return input != null ? input.value : "";
    }


    fn_onHandleInput(event){
        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("prop_listRules") && typeof data.prop_listRules != null){
            this.fn_readyListRules(data.prop_listRules)
        }
    }


    fn_onInputCallBack(event){
        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("fn_oninput") && typeof data.fn_oninput != null){
            data.fn_oninput(event , this.fn_getValueInput());
        }
    }


    fn_onFocusCallBack(event){
        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("fn_onfocus") && typeof data.fn_onfocus != null){
            data.fn_onfocus(event , this.fn_getValueInput());
        }
    }


    fn_onBlurCallBack(event){
        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("fn_onblur") && typeof data.fn_onblur != null){
            data.fn_onblur(event , this.fn_getValueInput());
        }
    }


    fn_onClearInput(event){
        this.fn_getInputElement().value="";
        this.fn_onInputCallBack(event);
        this.fn_onFocusInput(event);
    }


    fn_onVisitInput(event){
        this._STATUS_IS_SHOW = !this._STATUS_IS_SHOW;
        this.templateFn("part_body_icon_visit");
        this.fn_getInputElement().setAttribute("type" , this._STATUS_IS_SHOW ? "" : "password")
    }


    fn_onFocusInput(event){
        const input = this.fn_getInputElement();
        input.focus();
        this.fn_onFocusCallBack();
    }
}


/*-------------------------------------
 010-05) Component Input Password
-------------------------------------*/
class ComponentInputPasswordBase extends ComponentBase{
    /* ---------------------------------------------
              PROPERTYs Pattern
       --------------------------------------------- */

    _COMPONENT_PATTERN = {
        prop_size: {
            prop: "prop_size",
            default: tools_css.standardSizes.m.name
        },
        prop_backgroundColorForm: {
            prop: "prop_backgroundColorForm",
            default: tools_const?.styles?.inputPassword?.backgroundColor_form ?? ""
        },
        prop_colorIcon: {
            prop: "prop_colorIcon",
            default: tools_const?.styles?.inputPassword?.color_icon ?? ""
        },
        prop_title: {
            prop: "prop_title",
            default: "null"
        },
        prop_inputClass: {
            prop: "prop_inputClass",
            default: [" form-control"]
        },
        prop_inputStyles: {
            prop: "prop_inputStyles",
            default: {}
        },
        prop_name: {
            prop: "prop_name",
            default: null
        },
        prop_value: {
            prop: "prop_value",
            default: null
        },
        prop_placeholder: {
            prop: "prop_placeholder",
            default: null
        },
        prop_icon: {
            prop: "prop_icon",
            default: tools_icons.icon_password
        },
        prop_isDisable: {
            prop: "prop_isDisable",
            default: false
        },
        prop_hasRules: {
            prop: "prop_hasRules",
            default: true
        },
        prop_isAbsoluteRule: {
            prop: "prop_isAbsoluteRule",
            default: true
        },
        prop_listRules: {
            prop: "prop_listRules",
            default: []
        },
        prop_msgRules: {
            prop: "prop_msgRules",
            default: null
        },
    };


    /* ---------------------------------------------
           PROPERTYs Props
    --------------------------------------------- */
    _COMPONENT_PROPS = {
        part_structure: [],

        part_label: [

        ],

        part_body: [
            this._COMPONENT_PATTERN.prop_backgroundColorForm ,
            this._COMPONENT_PATTERN.prop_size ,
        ],

        part_body_password: [
            this._COMPONENT_PATTERN.prop_inputClass ,
            this._COMPONENT_PATTERN.prop_inputStyles ,
            this._COMPONENT_PATTERN.prop_name ,
            this._COMPONENT_PATTERN.prop_value ,
            this._COMPONENT_PATTERN.prop_placeholder ,
            this._COMPONENT_PATTERN.prop_icon ,
            this._COMPONENT_PATTERN.prop_isDisable ,
            this._COMPONENT_PATTERN.prop_size ,
        ],

        part_body_icon: [
            this._COMPONENT_PATTERN.prop_icon ,
            this._COMPONENT_PATTERN.prop_size ,
            this._COMPONENT_PATTERN.prop_colorIcon
        ],

        part_body_icon_clear: [
            this._COMPONENT_PATTERN.prop_isDisable,
            this._COMPONENT_PATTERN.prop_size
        ],

        part_body_icon_visit: [
            this._COMPONENT_PATTERN.prop_isDisable,
            this._COMPONENT_PATTERN.prop_size,
            this._COMPONENT_PATTERN.prop_colorIcon
        ],

        part_body_validate: [
            this._COMPONENT_PATTERN.prop_hasRules,
            this._COMPONENT_PATTERN.prop_isAbsoluteRule,
            this._COMPONENT_PATTERN.prop_listRules,
            this._COMPONENT_PATTERN.prop_msgRules,
            this._COMPONENT_PATTERN.prop_isDisable,
            this._COMPONENT_PATTERN.prop_title,
            this._COMPONENT_PATTERN.prop_size,
        ]
    };



    /* ---------------------------------------------
   PROPERTYs Schema
   --------------------------------------------- */
    _COMPONENT_SCHEMA = {
        part_structure:{
            part_label : {} ,
            part_body : {
                part_body_password:{},
                part_body_icon:{},
                part_body_icon_clear:{},
                part_body_icon_visit:{},
                part_body_validate:{},
            },
        } ,
    }

}
window.ComponentInputPassword = class ComponentInputPassword extends ComponentInputPasswordBase{

    _STATUS_IS_SHOW = false;

    /* ---------------------------------------------
       SETUP
   --------------------------------------------- */
    constructor(elId , config) {
        super(
            listComponent[ComponentInputPassword.name] ,
            elId
        );
        super.renderComponent(config);
    }



    /* ---------------------------------------------
   TEMPLATEs
 --------------------------------------------- */
    componentFn(){
        this.templateFn("part_label");
        this.templateFn("part_body_icon");
        this.templateFn("part_body_icon_clear");
        this.templateFn("part_body_icon_visit");
        this.templateFn("part_body_validate");
    }
    templateFn(partName = null){
        switch (partName){
            case "part_structure":
                return this.template_render_structure(partName);

            case "part_body":
                return this.template_render_body(partName);

            case "part_body_password":
                return this.template_render_bodyPassword(partName);

            case "part_label":
                return this.componentFn_render_label(partName);

            case "part_body_icon":
                return this.componentFn_render_bodyIcon(partName);

            case "part_body_icon_clear":
                return this.componentFn_render_bodyIconClear(partName);

            case "part_body_icon_visit":
                return this.componentFn_render_bodyIconVisit(partName);

            case "part_body_validate":
                return this.componentFn_render_bodyValidate(partName);

            default:
                return this.templateBasic_render();
        }
    }

    template_render_structure(partName) {

        const content = `
  
     <component-label id="component-input-password-label-${this._COMPONENT_RANDOM_ID}" ></component-label>

     ${this.templateFn("part_body") ?? ""}
     
      <component-validate id="component-input-password-validate-${this._COMPONENT_RANDOM_ID}"></component-validate>
      `;

        return this.templateBasic_render_structure(content , []);
    }

    template_render_body(partName) {

        const data = this.getPartProps(partName)

        if (data != null){
            const prop_size                     =   data.hasOwnProperty("prop_size")                     ?  data.prop_size                     : null;
            const prop_backgroundColorForm      =   data.hasOwnProperty("prop_backgroundColorForm")      ?  data.prop_backgroundColorForm      : null;

            let elHeight = tools_css.getHeightSize(prop_size);

            return                                       `
<section  data-part-name="${partName}"
          id="component-input-password-body-${this._COMPONENT_RANDOM_ID}"  
          class="position-relative d-block" >
          
     <style>
         #${this._COMPONENT_ID} #component-input-password-body-${this._COMPONENT_RANDOM_ID}{
               height: ${elHeight}px;
               background-color: ${prop_backgroundColorForm};
         }
         
     </style>
     
     ${this.templateFn("part_body_password") ?? ""}
     
     <component-icon id="component-input-password-icon-${this._COMPONENT_RANDOM_ID}" ></component-icon>
     <component-icon id="component-input-password-icon-clear-${this._COMPONENT_RANDOM_ID}" ></component-icon>
     <component-icon id="component-input-password-icon-visit-${this._COMPONENT_RANDOM_ID}" ></component-icon>
        
</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    template_render_bodyPassword(partName) {

        const data = this.getPartProps(partName)

        if (data != null){
            const screanWidthType = tools_css.getScreenWidth();

            const prop_inputClass    =   data.hasOwnProperty("prop_inputClass")               ?  data.prop_inputClass                                   :  [];
            const prop_inputStyles   =   data.hasOwnProperty("prop_inputStyles")              ?  data.prop_inputStyles                                  :  {};
            const prop_name          =   data.hasOwnProperty("prop_name")                     ?  data.prop_name                                         :  null;
            const prop_value         =   data.hasOwnProperty("prop_value")                    ?  tools_converter.convertPriceToString(data.prop_value)  :  null;
            const prop_placeholder   =   data.hasOwnProperty("prop_placeholder")              ?  data.prop_placeholder                                  :  null;
            const prop_icon          =   data.hasOwnProperty("prop_icon")                     ?  data.prop_icon                                         :  null;
            const prop_isDisable     =   data.hasOwnProperty("prop_isDisable")                ?  data.prop_isDisable                                    : false;

            const directionRtl       =  this._COMPONENT_CONFIG.hasOwnProperty("directionRtl") ? this._COMPONENT_CONFIG.directionRtl                     : false;
            const prop_size          =   data.hasOwnProperty("prop_size")                     ?  data.prop_size                                         : null;

            let elHeight = tools_css.getHeightSize(prop_size);
            let elfontSize = tools_css.getFontSize(prop_size);

            let padding = "180px"
            if (screanWidthType == tools_css?.standardScreanWidth?.xs?.name){
                padding = "35px";
            }

            return `
<section  data-part-name="${partName}"
          id="component-input-password-element-${this._COMPONENT_RANDOM_ID}"  
          class="" >
          
     <style>
         #${this._COMPONENT_ID} #component-input-password-element-${this._COMPONENT_RANDOM_ID}{
            
         }
         #${this._COMPONENT_ID} #component-input-password-${this._COMPONENT_RANDOM_ID}{
              ${directionRtl ? "margin-right" : "margin-left"} : ${prop_icon != null ? "30px" : "0"} ;
              ${directionRtl ? "margin-left" : "margin-right"} : 30px ;
              ${directionRtl ? `right : 0` :`left : 0` };
              width: calc( 100% - 30px - ${prop_icon != null ? "30px" : "0px"});
            
              ${prop_icon != null ? (directionRtl ? "border-top-right-radius: 0 !important" : "border-top-left-radius: 0 !important") : ""};
              ${prop_icon != null ? (directionRtl ? "border-bottom-right-radius: 0 !important" : "border-bottom-left-radius: 0 !important") : ""};
           
              ${(directionRtl ? "border-top-left-radius: 0 !important" : "border-top-right-radius: 0 !important") };
              ${(directionRtl ? "border-bottom-left-radius: 0 !important" : "border-bottom-right-radius: 0 !important")};
           
              height: ${elHeight}px;
              line-height: ${elHeight}px;
              white-space: nowrap;
              overflow: hidden;
              text-overflow: ellipsis;
              font-size: ${elfontSize}px;
              top: 0;
              ${tools_public.renderListStyle(prop_inputStyles)}
         }
     </style>

     <input id="component-input-password-${this._COMPONENT_RANDOM_ID}"   
            class=" ${tools_public.renderListClass(prop_inputClass)} border-1 position-absolute"
            name="${prop_name || "" }"  
            type="password"  
            value="${prop_value || ""}"
            placeholder="${prop_placeholder || ""}"
            ${prop_isDisable ? 'disabled' : ''}
            onInput="${this.getFn("fn_onInputCallBack" , "event")}"
            onblur=" ${this.getFn("fn_onBlurCallBack" , "event")}"
            onfocus="${this.getFn("fn_onFocusCallBack" , "event")}"
            />
       
</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    componentFn_render_bodyIcon(partName) {

        const data = this.getPartProps(partName)

        if (data != null){
            const directionRtl       =  this._COMPONENT_CONFIG.hasOwnProperty("directionRtl") ? this._COMPONENT_CONFIG.directionRtl      : false;
            const prop_icon          =   data.hasOwnProperty("prop_icon")                     ?  data.prop_icon                          :  null;
            const prop_size          =   data.hasOwnProperty("prop_size")                     ?  data.prop_size                          : null;
            const prop_colorIcon     =   data.hasOwnProperty("prop_colorIcon")                ?  data.prop_colorIcon                     : null;

            const elIconHeight = tools_css.getIconSize(prop_size);

            let styles = {
                "z-index": `${ tools_css.getZIndex(tools_css.standardZIndex.icon_attach.name , 3) }`,
                "cursor" : "pointer",
                "top" : "50%" ,
                "color" : prop_colorIcon ,
            }
            if (directionRtl){
                styles["right"]= "0"
                styles["transform"]= "translate(-5px, -50%)"
            }
            else {
                styles["left"]= "0"
                styles["transform"]= "translate(5px, -50%)"
            }

            if (prop_icon != null){
                new window.ComponentIcon(
                    `component-input-password-icon-${this._COMPONENT_RANDOM_ID}` ,
                    {
                        prop_icon: prop_icon != null ? (typeof prop_icon == "function" ? prop_icon(elIconHeight , prop_colorIcon) : prop_icon) : null ,

                        prop_iconClass : ["position-absolute"] ,
                        prop_iconStyles : styles ,

                        fn_callback: (event)=>{
                            this.fn_onFocusInput(event);
                        }
                    }
                )
            }

        }


    }

    componentFn_render_bodyIconClear(partName) {

        const data = this.getPartProps(partName)

        if (data != null){
            const prop_isDisable     =  data.hasOwnProperty("prop_isDisable")                 ?  data.prop_isDisable                     : false;

            if (!prop_isDisable){

                const directionRtl       =  this._COMPONENT_CONFIG.hasOwnProperty("directionRtl") ? this._COMPONENT_CONFIG.directionRtl      : false;
                const prop_size          =   data.hasOwnProperty("prop_size")                     ?  data.prop_size                                         : null;

                let styles = {
                    "z-index": `${ tools_css.getZIndex(tools_css.standardZIndex.icon_attach.name , 3) }`,
                    "cursor" : "pointer",
                    "top" : "50%" ,
                };

                if (directionRtl){
                    styles["left"]= "0";
                    styles["transform"]=  "translate(40px, -50%)" ;
                }
                else {
                    styles["right"]= "0";
                    styles["transform"]=  "translate(-40px, -50%)" ;
                }


                new window.ComponentIcon(
                    `component-input-password-icon-clear-${this._COMPONENT_RANDOM_ID}` ,
                    {
                        styles: {}  ,

                        prop_iconClass : ["position-absolute"] ,
                        prop_iconStyles : styles ,
                        prop_icon : tools_icons.icon_clear({size : prop_size }) ,

                        fn_callback: ()=>{
                            this.runFn("fn_onClearInput" , "event")
                        }
                    }
                )
            }


        }
    }

    componentFn_render_bodyIconVisit(partName) {

        const data = this.getPartProps(partName)

        if (data != null){
            const prop_isDisable     =  data.hasOwnProperty("prop_isDisable")                 ?  data.prop_isDisable                     : false;

            if (!prop_isDisable){

                const directionRtl       =  this._COMPONENT_CONFIG.hasOwnProperty("directionRtl") ? this._COMPONENT_CONFIG.directionRtl      : false;
                const prop_size          =   data.hasOwnProperty("prop_size")                     ?  data.prop_size                          : null;
                const prop_colorIcon     =   data.hasOwnProperty("prop_colorIcon")                ?  data.prop_colorIcon                     : null;

                let styles = {
                    "z-index": `${ tools_css.getZIndex(tools_css.standardZIndex.icon_attach.name , 3) }`,
                    "cursor" : "pointer",
                    "top" : "50%" ,
                    "color" : prop_colorIcon ,
                };

                if (directionRtl){
                    styles["left"]= "0"
                    styles["transform"]= "translate(5px, -50%)"
                }
                else {
                    styles["right"]= "0"
                    styles["transform"]= "translate(-5px, -50%)"
                }


                new window.ComponentIcon(
                    `component-input-password-icon-visit-${this._COMPONENT_RANDOM_ID}` ,
                    {
                        classList: []  ,
                        styles: {

                        }  ,

                        prop_iconClass : ["position-absolute"] ,
                        prop_iconStyles : styles ,
                        prop_icon : this._STATUS_IS_SHOW ? tools_icons.icon_visit({size : prop_size /*, colors: {primary:prop_colorIcon}*/}) : tools_icons.icon_un_visit({size : prop_size /*, colors: {primary:prop_colorIcon}*/}),

                        fn_callback: (event)=>{
                            this.fn_onVisitInput(event);
                        }
                    }
                )
            }


        }
    }

    componentFn_render_label(partName) {

        const data = this.getPartProps(partName)

        if (data != null){

            this.componentFneBasic_render_structure(
                `component-input-password-label-${this._COMPONENT_RANDOM_ID}` ,
                {
                    prop_for:  `component-input-password-${this._COMPONENT_RANDOM_ID}`,
                    fn_callback: () => {

                    } ,
                }
            );
        }
    }

    componentFn_render_bodyValidate(partName) {
        const data = this.getPartProps(partName)
        if (data != null){

            const prop_isDisable     =  data.hasOwnProperty("prop_isDisable")          ?  data.prop_isDisable              : false;
            const prop_hasRules      =  data.hasOwnProperty("prop_hasRules")           ?  data.prop_hasRules               : true;
            const prop_size          =   data.hasOwnProperty("prop_size")              ?  data.prop_size                   : null;

            if (!prop_isDisable && prop_hasRules){

                const prop_isAbsoluteRule    =  data.hasOwnProperty("prop_isAbsoluteRule")            ?  data.prop_isAbsoluteRule                : true;
                const prop_listRules         =  data.hasOwnProperty("prop_listRules")                 ?  data.prop_listRules                     : [];
                const prop_msgRules          =  data.hasOwnProperty("prop_msgRules")                  ?  data.prop_msgRules                      : null;
                const prop_title             =  data.hasOwnProperty("prop_title")                     ?  data.prop_title                         : [];
                const directionRtl           =  this._COMPONENT_CONFIG.hasOwnProperty("directionRtl") ? this._COMPONENT_CONFIG.directionRtl      : false;

                new window.ComponentValidate(
                    `component-input-password-validate-${this._COMPONENT_RANDOM_ID}` ,
                    {
                        prop_reference: `component-input-password-${this._COMPONENT_RANDOM_ID}` ,
                        prop_isAbsolute: prop_isAbsoluteRule ,
                        prop_listRules ,
                        prop_msgRules ,
                        prop_title ,
                        prop_size
                    }
                );
            }
        }
    }





    /* ---------------------------------------------
       FUNCTIONs
    --------------------------------------------- */

    fn_getInputElement(){
        return   document.querySelector(`input#component-input-password-${this._COMPONENT_RANDOM_ID}`);
    }


    fn_getInputValue(event){
        const input = this.fn_getInputElement();
        return input != null ? input.value : "";
    }


    fn_onHandleInput(event){
        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("prop_listRules") && typeof data.prop_listRules != null){
            this.fn_readyListRules(data.prop_listRules)
        }
    }


    fn_onInputCallBack(event){
        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("fn_oninput") && typeof data.fn_oninput != null){
            data.fn_oninput(event , this.fn_getValueInput());
        }
    }


    fn_onFocusCallBack(event){
        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("fn_onfocus") && typeof data.fn_onfocus != null){
            data.fn_onfocus(event , this.fn_getValueInput());
        }
    }


    fn_onBlurCallBack(event){
        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("fn_onblur") && typeof data.fn_onblur != null){
            data.fn_onblur(event , this.fn_getValueInput());
        }
    }


    fn_onClearInput(event){
        this.fn_getInputElement().value="";
        this.fn_onInputCallBack(event);
        this.fn_onFocusInput(event);
    }


    fn_onVisitInput(event){
        this._STATUS_IS_SHOW = !this._STATUS_IS_SHOW;
        this.templateFn("part_body_icon_visit");
        this.fn_getInputElement().setAttribute("type" , this._STATUS_IS_SHOW ? "" : "password")
    }


    fn_onFocusInput(event){
        const input = this.fn_getInputElement();
        input.focus();
        this.fn_onFocusCallBack();
    }

}


/*-------------------------------------
 010-06) Component Input File
-------------------------------------*/
class ComponentInputFileBase extends ComponentBase{

    /* ---------------------------------------------
       PROPERTYs Pattern
    --------------------------------------------- */
    _COMPONENT_PATTERN = {
        prop_name: {
            prop: "prop_name",
            default: "NAME"
        },
        prop_accept: {
            prop: "prop_accept",
            default: "*"
        },
        prop_maxCount: {
            prop: "prop_maxCount",
            default: null
        },
        prop_maxSize: {
            prop: "prop_maxSize",
            default: null
        },
        prop_textValidateSize: {
            prop: "prop_textValidateSize",
            default: "حداکثر سایر فایل، باید {{fileMaxSize}} کیلوبایت باشد"
        },
        prop_textValidateAccept: {
            prop: "prop_textValidateAccept",
            default: "فرمت قابل پذیرش {{fileAccept}} می باشد"
        },
        prop_title: {
            prop: "prop_title",
            default: null
        },
        prop_borderColor: {
            prop: "prop_borderColor",
            default: tools_const.hasOwnProperty("styles") && tools_const.styles.hasOwnProperty("inputFile") && tools_const.styles.inputFile.hasOwnProperty("boderColor") ? tools_const.styles.inputFile.boderColor : "red"
        },
        prop_borderColorHover: {
            prop: "prop_borderColorHover",
            default: tools_const.hasOwnProperty("styles") && tools_const.styles.hasOwnProperty("inputFile") && tools_const.styles.inputFile.hasOwnProperty("boderColorHover") ? tools_const.styles.inputFile.boderColorHover : "red"
        },
        prop_borderHeight: {
            prop: "prop_borderHeight",
            default: "150px"
        },
        prop_textColor: {
            prop: "prop_textColor",
            default: tools_const.hasOwnProperty("styles") && tools_const.styles.hasOwnProperty("inputFile") && tools_const.styles.inputFile.hasOwnProperty("textColor") ? tools_const.styles.inputFile.textColor : "red"
        },
        prop_text: {
            prop: "prop_text",
            default: "لطفا فایل خود را بکشید و رها کنید یا برای انتخاب کلیک کنید "
        },
        prop_showListFiles: {
            prop: "prop_showListFiles",
            default: true
        },
        var_fileIsValid: {
            prop: "var_fileIsValid",
            default: null
        },
        var_fileIsNotValid: {
            prop: "var_fileIsNotValid",
            default: null
        },
        prop_deleteBody: {
            prop: "prop_deleteBody",
            default: "آیا از حذف قایل مطمئن هستید"
        },
        prop_deleteBtnCancel: {
            prop: "prop_deleteBtnCancel",
            default: "لغو"
        },
        prop_deleteBtnAccept: {
            prop: "prop_deleteBtnAccept",
            default: "تایید"
        } ,

        prop_backgroundColor_itemFile_invalid: {
            prop: "prop_backgroundColor_itemFile_invalid",
            default: tools_const?.styles?.inputFile?.backgroundColor_itemFile_invalid ?? null
        },
        prop_backgroundColor_itemFile: {
            prop: "prop_backgroundColor_itemFile",
            default: tools_const?.styles?.inputFile?.backgroundColor_itemFile ?? null
        },
        prop_color_itemFile: {
            prop: "prop_color_itemFile",
            default: tools_const?.styles?.inputFile?.color_itemFile ?? null
        },
        prop_color_itemFile_icons: {
            prop: "prop_color_itemFile_icons",
            default: tools_const?.styles?.inputFile?.color_itemFile_icons ?? null
        },
    };

    /* ---------------------------------------------
           PROPERTYs Props
    --------------------------------------------- */
    _COMPONENT_PROPS = {
        part_structure: [],

        part_value: [
            this._COMPONENT_PATTERN.prop_name,
            this._COMPONENT_PATTERN.prop_accept,
            this._COMPONENT_PATTERN.prop_maxCount,
            this._COMPONENT_PATTERN.prop_maxSize,
            this._COMPONENT_PATTERN.prop_textValidateSize,
            this._COMPONENT_PATTERN.prop_textValidateAccept
        ],

        part_label: [
            this._COMPONENT_PATTERN.prop_title,
            this._COMPONENT_PATTERN.prop_maxCount,
            this._COMPONENT_PATTERN.prop_maxSize,
            this._COMPONENT_PATTERN.prop_textValidateSize,
            this._COMPONENT_PATTERN.prop_textValidateAccept
        ],

        part_body: [
            this._COMPONENT_PATTERN.prop_borderColor,
            this._COMPONENT_PATTERN.prop_borderColorHover,
            this._COMPONENT_PATTERN.prop_borderHeight
        ],

        part_body_text: [
            this._COMPONENT_PATTERN.prop_textColor,
            this._COMPONENT_PATTERN.prop_text
        ],

        part_footer: [],

        part_footer_files: [
            this._COMPONENT_PATTERN.prop_backgroundColor_itemFile,
            this._COMPONENT_PATTERN.prop_backgroundColor_itemFile_invalid,
            this._COMPONENT_PATTERN.prop_color_itemFile,
            this._COMPONENT_PATTERN.prop_color_itemFile_icons,
            this._COMPONENT_PATTERN.prop_showListFiles,
            this._COMPONENT_PATTERN.var_fileIsValid,
            this._COMPONENT_PATTERN.var_fileIsNotValid
        ],

        part_footer_files_tooltips: [
            this._COMPONENT_PATTERN.prop_showListFiles,
            this._COMPONENT_PATTERN.var_fileIsNotValid
        ],

        part_window_confirm: [
            this._COMPONENT_PATTERN.prop_deleteBody,
            this._COMPONENT_PATTERN.prop_deleteBtnCancel,
            this._COMPONENT_PATTERN.prop_deleteBtnAccept
        ]
    };


    /* ---------------------------------------------
   PROPERTYs Schema
   --------------------------------------------- */
    _COMPONENT_SCHEMA = {
        part_structure:{
            part_label : {} ,
            part_value : {} ,
            part_body : {
                part_body_text:{}
            },
            part_footer: {
                part_footer_files:{}
            },
            part_window_confirm: {}
        } ,
    }

}
window.ComponentInputFile = class ComponentInputFile extends ComponentInputFileBase{

    _COMPONENT_WINDOW_DELETE = null;

    /* ---------------------------------------------
       SETUP
   --------------------------------------------- */
    constructor(elId , config) {
        super(
            listComponent[ComponentInputFile.name] ,
            elId
        );
        super.renderComponent(config);
    }



    /* ---------------------------------------------
   TEMPLATEs
 --------------------------------------------- */
    componentFn(){
        this.templateFn("part_label");
        this.templateFn("part_window_confirm");
        this.templateFn("part_footer_files_tooltips");

        document.addEventListener("dragover", e => e.preventDefault());
        document.addEventListener("drop", e => e.preventDefault());
    }
    templateFn(partName = null){
        switch (partName){
            case "part_structure":
                return this.template_render_structure(partName);

            case "part_label":
                return this.componentFn_render_label(partName);

            case "part_value":
                return this.template_render_value(partName);

            case "part_body":
                return this.template_render_body(partName);
            case "part_body_text":
                return this.template_render_bodyText(partName);

            case "part_footer":
                return this.template_render_bodyFooter(partName);
            case "part_footer_files":
                return this.template_render_bodyFooterFiles(partName);
            case "part_footer_files_tooltips":
                return this.template_render_bodyFooterFilesTooltips(partName);

            case "part_window_confirm":
                return this.componentFn_render_windowConfirmDelete(partName);

            default:
                return this.templateBasic_render();
        }
    }

    template_render_structure(partName) {

        const content = `
  
     <component-label id="component-input-file-label-${this._COMPONENT_RANDOM_ID}" ></component-label>
     
     ${this.templateFn("part_value") ?? ""}
     
     ${this.templateFn("part_body") ?? ""}

     ${this.templateFn("part_footer") ?? ""}
     
      <component-window-confirm id="component-input-file-window-confirm-delete-${this._COMPONENT_RANDOM_ID}" ></component-window-confirm>
        
                `;
        return this.templateBasic_render_structure(content , ["position-relative"]);
    }

    template_render_value(partName) {

        const data = this.getPartProps(partName)

        if (data != null){

            const prop_name      =   data.hasOwnProperty("prop_name")               ?  data.prop_name                    :  "";
            const prop_accept    =   data.hasOwnProperty("prop_accept")             ?  data.prop_accept                  :  "";
            const prop_maxCount  =   data.hasOwnProperty("prop_maxCount")           ?  data.prop_maxCount                :  null;

            return                                       `
<section  data-part-name="${partName}"
          id="component-input-file-value-${this._COMPONENT_RANDOM_ID}"  
          class="" >
          
     <style>
         #${this._COMPONENT_ID} #component-input-date-value-${this._COMPONENT_RANDOM_ID}{
         
         }
     </style>

     <input id="component-input-file-value-input-${this._COMPONENT_RANDOM_ID}" name="${prop_name}" 
            type="file" 
            class="d-none" 
            onchange=" ${this.getFn("fn_onChangeFiles" , "event")};"
            ${prop_maxCount != null && prop_maxCount > 1 ? "multiple" : ''}
            accept="${prop_accept}"/>
       
</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    template_render_body(partName) {

        const data = this.getPartProps(partName)

        if (data != null){

            const prop_borderColor         =   data.hasOwnProperty("prop_borderColor")               ?  data.prop_borderColor                    :  "";
            const prop_borderColorHover    =   data.hasOwnProperty("prop_borderColorHover")          ?  data.prop_borderColorHover               :  "";
            const prop_borderHeight        =   data.hasOwnProperty("prop_borderHeight")              ?  data.prop_borderHeight                   :  "";

            return                                       `
<section  data-part-name="${partName}"
          id="component-input-file-body-${this._COMPONENT_RANDOM_ID}"  
          draggable="true"
          onclick="${this.getFn("fn_clickToFileInput")}"
          ondragover="${this.getFn("fn_onDragStart" , "event")}"
          ondragenter="${this.getFn("fn_onDragStart" , "event")}"
          ondragleave="${this.getFn("fn_onDragEnd" , "event")}"
          ondrop=" ${this.getFn("fn_onDrap" , "event")};"
          class="p-2 rounded position-relative" >
          
     <style>
         #${this._COMPONENT_ID} #component-input-file-body-${this._COMPONENT_RANDOM_ID}{
             cursor: pointer;
             border-style: dashed;
             border-width: 2px;
             border-color: ${prop_borderColor};
             height: ${prop_borderHeight}
         }
         
         #${this._COMPONENT_ID} #component-input-file-body-${this._COMPONENT_RANDOM_ID}:hover{
             border-color: ${prop_borderColorHover} !important;
         }
     
         #${this._COMPONENT_ID} .component-input-file-body-${this._COMPONENT_RANDOM_ID}-active{
             border-color: ${prop_borderColorHover} !important;
         }
     </style>
     
     ${this.templateFn("part_body_text") ?? ""}
     
</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    template_render_bodyText(partName) {

        const data = this.getPartProps(partName)

        if (data != null){

            const prop_textColor    =   data.hasOwnProperty("prop_textColor")               ?  data.prop_textColor                    :  "";
            const prop_text         =   data.hasOwnProperty("prop_text")                    ?  data.prop_text                         :  "";

            return                                       `
<section  data-part-name="${partName}"
          id="component-input-file-body-text-${this._COMPONENT_RANDOM_ID}"  
          class="position-absolute text-center" >
          
     <style>
         #${this._COMPONENT_ID} #component-input-file-body-text-${this._COMPONENT_RANDOM_ID}{
             color: ${prop_textColor};
             font-size: 11pt;
             transform: translate(-50% , -50%);
             left: 50%;
             top: 50%;
         }
     </style>

     <b> ${prop_text} </b>

</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    template_render_bodyFooter(partName){

        const data = this.getPartProps(partName)

        if (data != null){

            return                                       `
<section  data-part-name="${partName}"
          id="component-input-file-footer-${this._COMPONENT_RANDOM_ID}"  
          class="row" >
          
     <style>
         #${this._COMPONENT_ID} #component-input-file-footer-${this._COMPONENT_RANDOM_ID}{
             
         }
     </style>

     ${this.templateFn("part_footer_files") ?? ""}

</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;

    }

    template_render_bodyFooterFiles(partName){

        const data = this.getPartProps(partName)

        if (data != null){

            const prop_backgroundColor_itemFile             =   data.hasOwnProperty("prop_backgroundColor_itemFile")              ?  data.prop_backgroundColor_itemFile                  :  null;
            const prop_backgroundColor_itemFile_invalid     =   data.hasOwnProperty("prop_backgroundColor_itemFile_invalid")      ?  data.prop_backgroundColor_itemFile_invalid          :  null;
            const prop_color_itemFile                       =   data.hasOwnProperty("prop_color_itemFile")                        ?  data.prop_color_itemFile                            :  null;
            const prop_color_itemFile_icons                 =   data.hasOwnProperty("prop_color_itemFile_icons")                  ?  data.prop_color_itemFile_icons                      :  null;
            const prop_showListFiles                        =   data.hasOwnProperty("prop_showListFiles")                         ?  data.prop_showListFiles                             :  true;
            const var_fileIsValid                           =   data.hasOwnProperty("var_fileIsValid")                            ?  data.var_fileIsValid                                :  null;
            const var_fileIsNotValid                        =   data.hasOwnProperty("var_fileIsNotValid")                         ?  data.var_fileIsNotValid                             :  null;

            if (prop_showListFiles){

                let counter = 1;

                let htmlAcceptFiles = "";
                if (var_fileIsValid != null){
                    for (let i = 0; i < var_fileIsValid.length; i++) {
                        const itemFile = var_fileIsValid[i];

                        const formatted = (itemFile.size / 10000).toFixed(3);

                        htmlAcceptFiles += `
<div class="component-input-file-footer-files-${this._COMPONENT_RANDOM_ID}-items  shadow-sm rounded row px-1 py-1 mx-0 my-1 border border-2">

   <span class="component-input-file-footer-files-${this._COMPONENT_RANDOM_ID}-items-counter bg-white rounded ">${counter}</span>
   
   <b class="component-input-file-footer-files-${this._COMPONENT_RANDOM_ID}-items-fileName ">  ${itemFile.name}</b>
   
   <span class="component-input-file-footer-files-${this._COMPONENT_RANDOM_ID}-items-fileSize col-3 bg-success rounded text-white border border-white row p-0 m-0">  
      <span class="col-7">
         ${formatted}
      </span>
      <span class="col-5">
          KB
      </span>
   </span>
   
   <span class="fileDelete col-1  text-danger" title="delete" onclick="${this.getFn("fn_showWindowDelete" , "event" , `'${itemFile.name}'`)}">
${tools_icons.icon_delete({size: 25 , colors:{primary:prop_color_itemFile_icons }})}
   </span>
  
</div>
                    `;

                        counter ++;
                    }
                }


                let htmlUnAcceptFiles = "";
                if (var_fileIsNotValid != null){
                    for (let i = 0; i < var_fileIsNotValid.length; i++) {
                        const itemFile = var_fileIsNotValid[i];

                        const formatted = (itemFile.size / 10000).toFixed(3);

                        htmlUnAcceptFiles += `
<div class=" component-input-file-footer-files-${this._COMPONENT_RANDOM_ID}-items-invalid  shadow-sm bg-danger rounded row px-1 py-1 mx-0 my-1">

   <span class="component-input-file-footer-files-${this._COMPONENT_RANDOM_ID}-items-counter  bg-white rounded ">${counter}</span>
   
   <span class="component-input-file-footer-files-${this._COMPONENT_RANDOM_ID}-items-fileName  text-white  ">  ${itemFile.name}</span>
   
   <span class="component-input-file-footer-files-${this._COMPONENT_RANDOM_ID}-items-fileSize  bg-success rounded text-white border border-white row p-0 m-0">  
      <span class="col-8">
         ${formatted}
      </span>
      <span class="col-4">
          KB
      </span>
   </span>
   
    <component-tooltip-description  id="component-input-file-footer-files-tooltip-${this._COMPONENT_RANDOM_ID}-${i}"> </component-tooltip-description>
  
  
</div>
                    `;

                        counter ++;
                    }
                }

                return `
<section  data-part-name="${partName}"
          id="component-input-file-footer-files-${this._COMPONENT_RANDOM_ID}"  
          class=" " >
          
     <style>
         #${this._COMPONENT_ID} #component-input-file-footer-files-${this._COMPONENT_RANDOM_ID}{
             max-width:           450px
         }
         #${this._COMPONENT_ID} #component-input-file-footer-files-${this._COMPONENT_RANDOM_ID} .fileDelete{
              cursor:             pointer;
         }
         
         
         #${this._COMPONENT_ID} .component-input-file-footer-files-${this._COMPONENT_RANDOM_ID}-items-invalid{
              background-color:   ${prop_backgroundColor_itemFile_invalid}
         }
         #${this._COMPONENT_ID} .component-input-file-footer-files-${this._COMPONENT_RANDOM_ID}-items{
              background-color:   ${prop_backgroundColor_itemFile}
         }
         #${this._COMPONENT_ID} .component-input-file-footer-files-${this._COMPONENT_RANDOM_ID}-items-counter{
              width:              40px;
         }
         #${this._COMPONENT_ID} .component-input-file-footer-files-${this._COMPONENT_RANDOM_ID}-items-fileName{
              width:              60%;
              color:              ${prop_color_itemFile};
              font-size:          10pt;
              white-space:        nowrap; 
              overflow:           hidden;          
              text-overflow:      ellipsis;    
              direction:          ltr !important;
              text-align:         left;    
         }
         #${this._COMPONENT_ID} .component-input-file-footer-files-${this._COMPONENT_RANDOM_ID}-items-fileSize{
              width:              20%;
              font-size:          10pt;
              direction:          ltr !important;
         }
     </style>

     ${htmlAcceptFiles}
     ${htmlUnAcceptFiles}

</section>
        `;

            }

        }

        return `
<section data-part-name="${partName}"></section>
        `;

    }

    componentFn_render_label(partName) {

        const data = this.getPartProps(partName)

        if (data != null){

            let   prop_labelTooltipDescription     = data.hasOwnProperty("prop_labelTooltipDescription")    ? data.prop_labelTooltipDescription     : null;

            if (prop_labelTooltipDescription == null){

                let prop_textValidateSize   = data.hasOwnProperty("prop_textValidateSize") && data.prop_textValidateSize != null       ? data.prop_textValidateSize     : "Error File Size";
                let prop_textValidateAccept = data.hasOwnProperty("prop_textValidateAccept") && data.prop_textValidateAccept != null   ? data.prop_textValidateAccept   : "Error File Accept";
                const prop_accept             = data.hasOwnProperty("prop_accept") && data.prop_accept != null                           ? data.prop_accept               : "";
                let prop_maxSize            = data.hasOwnProperty("prop_maxSize") && data.prop_maxSize != null                         ? data.prop_maxSize              : "";

                prop_maxSize = (prop_maxSize / 10000).toFixed(3);

                prop_textValidateSize = prop_textValidateSize.replace("{{fileMaxSize}}", prop_maxSize);
                prop_textValidateAccept = prop_textValidateAccept.replace("{{fileAccept}}", prop_accept);

                prop_labelTooltipDescription = `
     <div> - ${prop_textValidateSize} </div>
     <div> - ${prop_textValidateAccept} </div>
                `;

            }


            this.componentFneBasic_render_structure(
                `component-input-file-label-${this._COMPONENT_RANDOM_ID}` ,
                {
                    prop_for:  `component-input-file-value-input-${this._COMPONENT_RANDOM_ID}`,
                    prop_labelTooltipDescription: prop_labelTooltipDescription ,
                    fn_callback: () => {
                        this.fn_selectDate(event)
                    } ,
                }
            );
        }
    }

    componentFn_render_windowConfirmDelete(partName) {

        const data = this.getPartProps(partName)

        if (data != null){

            const prop_deleteBtnCancel            = data.hasOwnProperty("prop_deleteBtnCancel")            ? data.prop_deleteBtnCancel            : "";
            const prop_deleteBtnAccept            = data.hasOwnProperty("prop_deleteBtnAccept")            ? data.prop_deleteBtnAccept            : "";
            const prop_deleteBody                 = data.hasOwnProperty("prop_deleteBody")                 ? data.prop_deleteBody                 : "";

            this._COMPONENT_WINDOW_DELETE = new window.ComponentWindowConfirm(
                `component-input-file-window-confirm-delete-${this._COMPONENT_RANDOM_ID}` ,
                {
                    prop_titleBtnCancel:  prop_deleteBtnCancel ,
                    prop_titleBtnAccept  :  prop_deleteBtnAccept,
                    prop_body  :  prop_deleteBody,
                    prop_showBtnResize : false ,
                    fn_callback: (event , data) => {
                        this.fn_deleteFileSelected(event , data);
                    } ,
                }
            )


        }
    }

    template_render_bodyFooterFilesTooltips(partName) {

        const data = this.getPartProps(partName)

        if (data != null){

            const prop_showListFiles     =   data.hasOwnProperty("prop_showListFiles")      ?  data.prop_showListFiles          :  true;

            const var_fileIsNotValid     =   data.hasOwnProperty("var_fileIsNotValid")      ?  data.var_fileIsNotValid          :  null;

            if (prop_showListFiles && var_fileIsNotValid != null) {
                for (let i = 0; i < var_fileIsNotValid.length; i++) {
                    const itemFile = var_fileIsNotValid[i];

                    let htmlError = "";
                    if (itemFile.hasOwnProperty("errors")){
                        for (const itemError of itemFile.errors) {
                            htmlError += `<div> - ${itemError}</div>`
                        }
                    }

                    new window.ComponentTooltipDescription(
                        `component-input-file-footer-files-tooltip-${this._COMPONENT_RANDOM_ID}-${i}` ,
                        {
                            classList: "fileDelete col-1"  ,

                            prop_icon: "?" ,
                            prop_description: htmlError,
                        }
                    )
                }
            }

        }
    }



    /* ---------------------------------------------
       FUNCTIONs
    --------------------------------------------- */
    fn_getInput(){
        return document.querySelector(`input#component-input-file-value-input-${this._COMPONENT_RANDOM_ID}`);
    }
    fn_getDragArea(){
        return document.querySelector(`section#component-input-file-body-${this._COMPONENT_RANDOM_ID}`);
    }
    fn_clickToFileInput(){
        const elInput = this.fn_getInput();
        if (elInput != null){
            elInput.click();
        }
    }
    fn_onDragStart(event){
        event.preventDefault();
        const elDrag = this.fn_getDragArea();
        if (elDrag != null){
            elDrag.classList.add(`component-input-file-body-${this._COMPONENT_RANDOM_ID}-active`);
        }
    }
    fn_onDragEnd(event){
        event.preventDefault();
        const elDrag = this.fn_getDragArea();
        if (elDrag != null){
            elDrag.classList.remove(`component-input-file-body-${this._COMPONENT_RANDOM_ID}-active`);
        }
    }
    fn_onDrap(event){
        this.fn_onDragEnd(event);

        const files = event.dataTransfer.files;
        if (files) {
            this.fn_onValidateCountFiles(files)
        }
    }


    fn_onChangeFiles(event){
        this.fn_onValidateCountFiles(event.target.files)
    }
    fn_onValidateCountFiles(files){
        const data = this._COMPONENT_CONFIG;

        const dataTransfer = new DataTransfer();
        const filesAccepts = [];
        const filesUnAccepts = [];

        const elInput = this.fn_getInput();
        if (elInput != null){

            let prop_textValidateSize   = data.hasOwnProperty("prop_textValidateSize") && data.prop_textValidateSize != null       ? data.prop_textValidateSize     : "Error File Size";
            let prop_textValidateAccept = data.hasOwnProperty("prop_textValidateAccept") && data.prop_textValidateAccept != null   ? data.prop_textValidateAccept   : "Error File Accept";
            const prop_accept             = data.hasOwnProperty("prop_accept") && data.prop_accept != null                           ? data.prop_accept               : "";
            let prop_maxSize            = data.hasOwnProperty("prop_maxSize") && data.prop_maxSize != null                         ? data.prop_maxSize              : "";

            prop_maxSize = (prop_maxSize / 10000).toFixed(3);

            prop_textValidateSize = prop_textValidateSize.replace("{{fileMaxSize}}", prop_maxSize);
            prop_textValidateAccept = prop_textValidateAccept.replace("{{fileAccept}}", prop_accept);

            let limit = files.length;
            if (data.hasOwnProperty("prop_maxCount") && data.prop_maxCount != null){
                limit = Math.min(files.length, data.prop_maxCount);
            }

            let numberAceppted = 0;
            for (let i = 0; i < files.length; i++) {
                const fileSelected = files[i];
                fileSelected.errors = [];

                const validateSize = this.fn_onValidateSizeFiles(fileSelected);
                const validateAccept = this.fn_onIsAccepted(fileSelected);

                let isValid = false;
                if (validateSize && validateAccept){
                    isValid = true;
                }

                if (!validateSize){
                    fileSelected.errors.push(prop_textValidateSize);
                    isValid = false;
                }
                if (!validateAccept){
                    fileSelected.errors.push(prop_textValidateAccept);
                    isValid = false;
                }

                if (isValid){
                    dataTransfer.items.add(fileSelected);
                    filesAccepts.push(fileSelected);
                    numberAceppted++;
                }
                else{
                    filesUnAccepts.push(fileSelected);
                }

                if(limit <= numberAceppted){
                    break;
                }
            }

            elInput.files = dataTransfer.files;

            this.fn_callback(dataTransfer.files);
        }

        this.set("var_fileIsValid" , filesAccepts);
        this.set("var_fileIsNotValid" , filesUnAccepts);
    }
    fn_onValidateSizeFiles(file){
        const data = this._COMPONENT_CONFIG;

        if (file != null){
            if (data.hasOwnProperty("prop_maxSize") && data.prop_maxSize != null){
                const sizeValidate =  data.prop_maxSize*1000;

                if (file.size <= sizeValidate){
                    return true;
                }
                else {
                    return false;
                }
            }

            return true;
        }

        return false;
    }
    fn_onIsAccepted(file) {
        const data = this._COMPONENT_CONFIG;
        let accept = "";
        if (data.hasOwnProperty("prop_accept") && data.prop_accept != null){
            accept = data.prop_accept;
        }

        if (!accept) return true;

        const mime = file.type;
        const name = file.name;

        return accept.split(',').some(type => {
            type = type.trim();
            if (type.endsWith('/*')) {
                return mime.startsWith(type.replace('/*', ''));
            } else if (type.startsWith('.')) {
                return name.toLowerCase().endsWith(type.toLowerCase());
            } else {
                return mime === type;
            }
        });
    }


    fn_showWindowDelete(event , filename){
        this._COMPONENT_WINDOW_DELETE.call_open(event , filename)
    }
    fn_deleteFileSelected(event , filename){

        const elInput = this.fn_getInput();
        if (elInput != null){
            const dt = new DataTransfer();
            const files = elInput.files;

            Array.from(files).forEach((file, index) => {
                if (file.name !== filename) {
                    dt.items.add(file);
                }
            });

            this.fn_onValidateCountFiles(dt.files);
        }
    }


    fn_callback(files){
        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("fn_callback") && typeof data.fn_callback != null){
            data.fn_callback(event , files);
        }
    }

}


/*-------------------------------------
 010-07) Component Input Color
-------------------------------------*/
class ComponentInputColorBase extends ComponentBase{

    /* ---------------------------------------------
        PROPERTYs Pattern
     --------------------------------------------- */
    _COMPONENT_PATTERN = {
        prop_size : {
            prop: "prop_size" ,
            default: tools_css.standardSizes.m.name
        } ,
        prop_showTitleFront: {
            prop: "prop_showTitleFront",
            default: true
        },
        prop_name: {
            prop: "prop_name",
            default: ""
        },
        var_colorSelected: {
            prop: "var_colorSelected",
            default: "#ff0000"
        },

        prop_title: {
            prop: "prop_title",
            default: null
        },
        prop_colorSelected: {
            prop: "prop_colorSelected",
            default: null
        },
        prop_isDisable: {
            prop: "prop_isDisable",
            default: false
        },
        prop_borderColor: {
            prop: "prop_borderColor",
            default: tools_const?.styles?.inputColor?.boderColor ?? ""
        },
        prop_formClass: {
            prop: "prop_formClass",
            default: ["rounded"]
        },
        prop_formStyles: {
            prop: "prop_formStyles",
            default: {}
        },
        prop_optionHeight: {
            prop: "prop_optionHeight",
            default: 375
        },
        prop_optionWidth: {
            prop: "prop_optionWidth",
            default: 350
        },
        prop_optionStyles: {
            prop: "prop_optionStyles",
            default: {}
        },
        prop_positionTop: {
            prop: "prop_positionTop",
            default: "0px"
        },
        prop_backgroundColorBody: {
            prop: "prop_backgroundColorBody",
            default: tools_const?.styles?.inputColor?.backgroundColor_body ?? ""
        },
        prop_colorBody: {
            prop: "prop_colorBody",
            default: tools_const?.styles?.inputColor?.color_body ?? ""
        },
        prop_colorIconClear: {
            prop: "prop_colorIconClear",
            default: tools_const?.styles?.inputColor?.color_iconClear ?? ""
        },
        prop_hasRules: {
            prop: "prop_hasRules",
            default: true
        },
        prop_isAbsoluteRule: {
            prop: "prop_isAbsoluteRule",
            default: true
        },
        prop_listRules: {
            prop: "prop_listRules",
            default: []
        } ,
        prop_msgRules: {
            prop: "prop_msgRules",
            default: null
        },
        prop_colorIconEmpty: {
            prop: "prop_colorIconEmpty",
            default: tools_const?.styles?.inputColor?.color_iconEmpty ?? ""
        },
        var_isEmptyColor: {
            prop: "var_isEmptyColor",
            default: false
        },
    };


    /* ---------------------------------------------
           PROPERTYs Props
    --------------------------------------------- */
    _COMPONENT_PROPS = {
        part_structure: [],

        part_value: [
            this._COMPONENT_PATTERN.prop_name,
            this._COMPONENT_PATTERN.var_colorSelected
        ],

        part_label: [

        ],

        part_form_color: [
            this._COMPONENT_PATTERN.prop_colorSelected,
            this._COMPONENT_PATTERN.prop_isDisable,
            this._COMPONENT_PATTERN.prop_borderColor,
            this._COMPONENT_PATTERN.prop_formClass,
            this._COMPONENT_PATTERN.prop_formStyles,
            this._COMPONENT_PATTERN.prop_size,
            this._COMPONENT_PATTERN.var_isEmptyColor ,
        ],

        part_form_title: [
            this._COMPONENT_PATTERN.prop_size,
            this._COMPONENT_PATTERN.prop_showTitleFront,
        ],

        part_form_selector: [
            this._COMPONENT_PATTERN.prop_optionHeight,
            this._COMPONENT_PATTERN.prop_optionWidth,
            this._COMPONENT_PATTERN.prop_optionStyles,
            this._COMPONENT_PATTERN.prop_positionTop,
            this._COMPONENT_PATTERN.prop_backgroundColorBody
        ],

        part_form_selector_information_code: [
            this._COMPONENT_PATTERN.prop_colorSelected,
            this._COMPONENT_PATTERN.prop_colorBody
        ],

        part_form_selector_information_opacity: [
            this._COMPONENT_PATTERN.prop_colorBody
        ],

        part_form_selector_hue_slider: [
            this._COMPONENT_PATTERN.prop_optionWidth
        ],

        part_form_selector_saturation_lightness_square: [
            this._COMPONENT_PATTERN.prop_optionWidth
        ],

        part_form_selector_opacity_slider: [
            this._COMPONENT_PATTERN.prop_optionWidth
        ],

        part_validate: [
            this._COMPONENT_PATTERN.prop_hasRules,
            this._COMPONENT_PATTERN.prop_isAbsoluteRule,
            this._COMPONENT_PATTERN.prop_listRules,
            this._COMPONENT_PATTERN.prop_isDisable,
            this._COMPONENT_PATTERN.prop_title,
            this._COMPONENT_PATTERN.prop_msgRules
        ],

        part_form_icon_clear: [
            this._COMPONENT_PATTERN.prop_isDisable,
            this._COMPONENT_PATTERN.prop_size,
            this._COMPONENT_PATTERN.prop_colorIconClear ,
        ],

        part_form_color_icon_empty: [
            this._COMPONENT_PATTERN.prop_size,
            this._COMPONENT_PATTERN.prop_colorIconEmpty ,
            this._COMPONENT_PATTERN.var_isEmptyColor ,
        ]
    };


    /* ---------------------------------------------
   PROPERTYs Schema
   --------------------------------------------- */
    _COMPONENT_SCHEMA = {
        part_structure: {
            part_value: {} ,
            part_label: {} ,
            part_form_color: {
                part_form_color_icon_empty: {} ,
            } ,
            part_form_title: {} ,
            part_form_icon_clear: {} ,
            part_form_selector:{
                part_form_selector_information_code:{},
                part_form_selector_information_opacity:{},
                part_form_selector_hue_slider: {} ,
                part_form_selector_saturation_lightness_square: {} ,
                part_form_selector_opacity_slider: {} ,
            },
            part_validate: {}
        } ,
    }

}
window.ComponentInputColor = class ComponentInputColor extends ComponentInputColorBase{

    var_showFormSelectOption = false;
    var_hex = "";
    var_hue = null;
    var_sat = 100;
    var_light = 50;
    var_opacity = 1;

    var_draggingHue=false;
    var_draggingSL=false;
    var_draggingOpacity=false;

    /* ---------------------------------------------
       SETUP
   --------------------------------------------- */
    constructor(elId , config) {
        super(
            listComponent[ComponentInputColor.name] ,
            elId
        );
        super.renderComponent(config);
    }


    /* ---------------------------------------------
      TEMPLATEs
    --------------------------------------------- */
    componentFn(){
        this.templateFn("part_label");
        this.templateFn("part_form_selector");
        this.templateFn("part_validate");
        this.templateFn("part_form_icon_clear");
        this.templateFn("part_form_color_icon_empty");

        this.onRegisterFinish().then(el => {
            this.fn_connectToElementReference();
            this.fn_startCalcColorDefaultSelected();

            this.fn_checkValueColor()
        })
    }
    templateFn(partName = null){
        switch (partName){
            case "part_structure":
                return this.template_render_structure(partName);
            case "part_value":
                return this.template_render_value(partName);
            case "part_form_color":
                return this.template_render_formColor(partName);
            case "part_form_title":
                return this.template_render_formTitle(partName);
            case "part_form_selector_information_code":
                return this.template_render_informationCode(partName);
            case "part_form_selector_information_opacity":
                return this.template_render_informationOpacity(partName);
            case "part_form_selector_hue_slider":
                return this.template_render_formSelectorHueSlider(partName);
            case "part_form_selector_saturation_lightness_square":
                return this.template_render_formSelectorSaturationLightnessSquare(partName);
            case "part_form_selector_opacity_slider":
                return this.template_render_formSelectorOpacitySlider(partName);
            case "part_label":
                return this.componentFn_render_label(partName);
            case "part_form_selector":
                return this.componentFn_render_formSelector(partName);
            case "part_validate":
                return this.componentFn_render_validate(partName);
            case "part_form_icon_clear":
                return this.componentFn_render_formIconClear(partName);
            case "part_form_color_icon_empty":
                return this.componentFn_render_formColorIconEmpty(partName);
            default:
                return this.templateBasic_render();
        }
    }

    template_render_structure(partName) {
        const content = `
             <component-label id="component-input-color-label-${ this._COMPONENT_RANDOM_ID}"></component-label>
               
             ${this.templateFn("part_value") ?? ""}
             
             <section class="position-relative" style="display: flow-root">
                 ${this.templateFn("part_form_color") ?? ""}
             
                 ${this.templateFn("part_form_title") ?? ""}
             
                 <component-icon id="component-input-color-icon-clear-${ this._COMPONENT_RANDOM_ID}"></component-icon>
             </section>

             <section class="position-relative">
                   <component-position-element id="component-input-color-form-selector-${ this._COMPONENT_RANDOM_ID}">
                         <component-body>
                                <section class="row px-0 py-2 m-0">
                                   
                                    <div class="col-10 mt-2">
                                          ${this.templateFn("part_form_selector_saturation_lightness_square") ?? ""}
                                    </div>
                                    <div class="col-2 mt2">
                                          ${this.templateFn("part_form_selector_hue_slider") ?? ""}
                                    </div>
                                    <div class="col-12 mt-2">
                                          ${this.templateFn("part_form_selector_opacity_slider") ?? ""}
                                    </div>
                                    
                                    <div class="col-8 border-top mt-3">
                                          ${this.templateFn("part_form_selector_information_code") ?? ""}
                                    </div>
                                    <div class="col-4 border-top mt-3">
                                          ${this.templateFn("part_form_selector_information_opacity") ?? ""}
                                    </div>
                                </section>  
                          </component-body>
                   </component-position-element>
             </section>
             
             <component-validate id="component-input-color-validate-${this._COMPONENT_RANDOM_ID}"></component-validate>
                `;
        return this.templateBasic_render_structure(content);
    }

    template_render_value(partName) {

        const data = this.getPartProps(partName)

        if (data != null){
            const prop_name           =   data.hasOwnProperty("prop_name")              ?  data.prop_name            :  "";
            const var_colorSelected   =   data.hasOwnProperty("var_colorSelected")      ?  data.var_colorSelected    :  "";

            return `
<section  data-part-name="${partName}"
          id="component-input-color-value-${this._COMPONENT_RANDOM_ID}"  
          class="" >
          
     <style>
         #${this._COMPONENT_ID} #component-input-color-value-${this._COMPONENT_RANDOM_ID}{
         
         }
     </style>
     
     <input id="component-input-color-value-${ this._COMPONENT_RANDOM_ID}-input-value" name="${prop_name}"  value="${var_colorSelected}" type="hidden"/>

</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    template_render_formColor(partName) {

        const data = this.getPartProps(partName)

        if (data != null){
            const prop_borderColor                      =   data.hasOwnProperty("prop_borderColor")                       ?  data.prop_borderColor                          : "";
            const prop_formClass                        =   data.hasOwnProperty("prop_formClass")                         ?  data.prop_formClass                            : [];
            const prop_formStyles                       =   data.hasOwnProperty("prop_formStyles")                        ?  data.prop_formStyles                           : {};
            const prop_isDisable                        =   data.hasOwnProperty("prop_isDisable")                         ?  data.prop_isDisable                            : false;
            const prop_colorSelected                    =   data.hasOwnProperty("prop_colorSelected")                     ?  data.prop_colorSelected                        : "";
            const prop_size                             =   data.hasOwnProperty("prop_size")                              ?  data.prop_size                                 : "";
            const directionRtl                          =  this._COMPONENT_CONFIG.hasOwnProperty("directionRtl")          ? this._COMPONENT_CONFIG.directionRtl             : false;
            const var_isEmptyColor                      =  data.hasOwnProperty("var_isEmptyColor")                        ?  data.var_isEmptyColor                          : false;

            const elHeight = tools_css.getHeightSize(prop_size);

            return `
<section data-part-name="${partName}" 
         id="component-input-color-form-color-${ this._COMPONENT_RANDOM_ID}" 
         class="${tools_public.renderListClass(prop_formClass)} position-relative"
         onclick="${this.getFn("fn_onclickInputColor" , "event")}">
         
     <style>
         #${this._COMPONENT_ID} #component-input-color-form-color-${ this._COMPONENT_RANDOM_ID}{
             cursor: ${prop_isDisable ? "not-allowed" : "pointer"};
             border: solid 1px ${prop_borderColor};
             box-shadow: #00000047 0px 0px 5px, inset 0 2px 4px #0000004d;
             background-color:  ${var_isEmptyColor ? "" : prop_colorSelected};
             float: ${directionRtl ? "right" : "left"};
             width: ${elHeight}px;
             height: ${elHeight}px;
             ${tools_public.renderListStyle(prop_formStyles)}
         }
     </style>
    
     <component-icon id="component-input-color-icon-color-empty-${ this._COMPONENT_RANDOM_ID}"></component-icon>
    
</section>`

        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    template_render_formTitle(partName ) {

        const data = this.getPartProps(partName)

        if (data != null){

            const prop_showTitleFront                        =   data.hasOwnProperty("prop_showTitleFront")                         ?  data.prop_showTitleFront                           : false;
            const prop_size                                  =   data.hasOwnProperty("prop_size")                                   ?  data.prop_size                                     : false;
            const directionRtl                               =  this._COMPONENT_CONFIG.hasOwnProperty("directionRtl")               ? this._COMPONENT_CONFIG.directionRtl                 : false;

            const elHeight = tools_css.getHeightSize(prop_size);
            const elFontSize = tools_css.getFontSize(prop_size);

            if (prop_showTitleFront){
                return `
<section data-part-name="${partName}" 
         id="component-input-color-form-title-${ this._COMPONENT_RANDOM_ID}" 
         class="mx-2"    
         onclick="${this.getFn("fn_onclickInputColor" , "event")}">
         
     <style>
         #${this._COMPONENT_ID} #component-input-color-form-title-${ this._COMPONENT_RANDOM_ID}{
             cursor: pointer;
             float: ${directionRtl ? "right" : "left" };
             height: ${elHeight}px;
             line-height: ${elHeight}px;
             font-size: ${elFontSize}px;
         }
     </style>
     
      <b>
          ${this.var_hex}
      </b>
      
</section>
        `;
            }
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    template_render_informationCode(partName) {

        const data = this.getPartProps(partName)

        if (data != null){

            const prop_colorSelected   =   data.hasOwnProperty("prop_colorSelected")      ?  data.prop_colorSelected    :  "";
            const prop_colorBody       =   data.hasOwnProperty("prop_colorBody")          ?  data.prop_colorBody        :  "";


            return `
<section data-part-name="${partName}" 
         id="component-input-color-form-selector-information-code-${ this._COMPONENT_RANDOM_ID}" 
         class="text-center "
         onclick="${this.getFn("fn_copyColorCodeSelected" , "event")}">
         
     <style>
         #${this._COMPONENT_ID} #component-input-color-form-selector-information-code-${ this._COMPONENT_RANDOM_ID}{
             cursor: pointer;
             color: ${prop_colorBody};
         }
     </style>
     
     <p class="p-0 m-0 ">
         <b>Hex</b>
     </p>
     <p class="txt-color-code p-0 m-0">
         ${prop_colorSelected}
     </p>
    
</section>`

        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    template_render_informationOpacity(partName) {

        const data = this.getPartProps(partName)

        if (data != null){
            const prop_colorBody       =   data.hasOwnProperty("prop_colorBody")          ?  data.prop_colorBody        :  "";

            return `
<section data-part-name="${partName}" 
         id="component-input-color-form-information-opacity-${ this._COMPONENT_RANDOM_ID}" 
          class="text-center">
         
     <style>
         #${this._COMPONENT_ID} #component-input-color-form-information-opacity-${ this._COMPONENT_RANDOM_ID}{
            color: ${prop_colorBody};
         }
     </style>
     
     <p class="p-0 m-0 ">
        <b>Opacity</b>
     </p>
     <p class="txt-color-opacity p-0 m-0">
          ${this.var_opacity*100}
     </p>
    
</section>`

        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    template_render_formSelectorHueSlider(partName) {

        const data = this.getPartProps(partName)

        if (data != null){
            const prop_optionWidth       =   data.hasOwnProperty("prop_optionWidth")          ?  data.prop_optionWidth        :  0;

            return `
<section data-part-name="${partName}" 
         id="component-input-color-form-selector-hue-slider-${ this._COMPONENT_RANDOM_ID}" 
          class="">
         
     <style>
         #${this._COMPONENT_ID} #component-input-color-form-selector-hue-slider-${ this._COMPONENT_RANDOM_ID}{
             width: 30px;
             height: ${prop_optionWidth*0.70}px;
             position: relative;
             cursor: pointer;
         }
         #${this._COMPONENT_ID} #component-input-color-form-selector-hue-slider-${ this._COMPONENT_RANDOM_ID} .hue-canvas{
             border-radius: 30px;
         }
         #${this._COMPONENT_ID} #component-input-color-form-selector-hue-slider-${ this._COMPONENT_RANDOM_ID} .hue-indicator{
             position: absolute;
             width: 25px;
             height: 25px;
             background: #fff;
             border-radius: 100%;
             left: 50%;
             transform: translate(-50%, -50%);
         }
         
     </style>
    
     <canvas class="hue-canvas mx-auto d-block" width="20" height="${prop_optionWidth*0.70}"></canvas>
    
     <div  class="hue-indicator"></div>

</section>`

        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    template_render_formSelectorSaturationLightnessSquare(partName) {

        const data = this.getPartProps(partName)

        if (data != null){
            const prop_optionWidth       =   data.hasOwnProperty("prop_optionWidth")          ?  data.prop_optionWidth        :  0;

            return `
<section data-part-name="${partName}" 
         id="component-input-color-form-selector-saturation-lightness-square-${this._COMPONENT_RANDOM_ID}" 
          class="">
         
     <style>
         #${this._COMPONENT_ID} #component-input-color-form-selector-saturation-lightness-square-${this._COMPONENT_RANDOM_ID}{
             width: ${prop_optionWidth * 0.70}px;
             height: ${prop_optionWidth * 0.70}px;
             position: relative;
             cursor: pointer;
         }
         #${this._COMPONENT_ID} #component-input-color-form-selector-saturation-lightness-square-${this._COMPONENT_RANDOM_ID} .sl-indicator{
             position: absolute;
             width: 20px;
             height: 20px;
             background-color: white;
             border-radius: 100%;
             transform: translate(-50%, -50%);
             pointer-events: none;
         }
         #${this._COMPONENT_ID} #component-input-color-form-selector-saturation-lightness-square-${this._COMPONENT_RANDOM_ID} .sl-indicator:after{
             content: "";
             position: absolute;
             width: 8px;
             height: 8px;
             background-color: #000000;
             border-radius: 100%;
             left: 50%;
             top: 50%;
             transform: translate(-50%, -50%);
         }
     </style>
     
     <canvas class="sl-canvas" width="${prop_optionWidth * 0.70}" height="${prop_optionWidth * 0.70}"></canvas>
      
     <div class="sl-indicator"></div>
    
</section>`

        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    template_render_formSelectorOpacitySlider(partName) {

        const data = this.getPartProps(partName)

        if (data != null){
            const prop_optionWidth       =   data.hasOwnProperty("prop_optionWidth")          ?  data.prop_optionWidth        :  0;

            return `
<section data-part-name="${partName}" 
         id="component-input-color-form-selector-opacity-slider-${ this._COMPONENT_RANDOM_ID}" 
         class="">
         
     <style>
         #${this._COMPONENT_ID} #component-input-color-form-selector-opacity-slider-${ this._COMPONENT_RANDOM_ID}{
              position: relative;
              width: ${prop_optionWidth*0.70}px;
              height: 25px;
              cursor: pointer;
         }
        #${this._COMPONENT_ID} #component-input-color-form-selector-opacity-slider-${ this._COMPONENT_RANDOM_ID} .opacity-canvas{
             border-radius: 30px;
             margin-top: 2.5px;
         }
         #${this._COMPONENT_ID} #component-input-color-form-selector-opacity-slider-${ this._COMPONENT_RANDOM_ID} .opacity-indicator{
              position: absolute;
              width: 25px;
              height: 25px;
              background: #fff;
              border-radius: 100%;
              border: 2px solid #fff;
              top: 50%;
              transform: translate(-50%, -50%);
              pointer-events: none;
         }
     </style>
    
     <canvas class="opacity-canvas"  width="${prop_optionWidth*0.70}" height="20"></canvas>
     <div  class="opacity-indicator"></div>
    
</section>`

        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    componentFn_render_label(partName) {
        this.componentFneBasic_render_structure(
            `component-input-color-label-${ this._COMPONENT_RANDOM_ID}` ,
            {
                // prop_for: `component-check-box-input-${ this._COMPONENT_RANDOM_ID}` ,
                fn_callback: (event)=>{
                    this.fn_onclickInputColor();
                }
            }
        );
    }

    componentFn_render_formSelector(partName) {
        const data = this.getPartProps(partName)

        if (data != null){

            const prop_backgroundColorBody     =  data.hasOwnProperty("prop_backgroundColorBody")      ?  data.prop_backgroundColorBody    :  "";
            const prop_optionStyles            =  data.hasOwnProperty("prop_optionStyles")             ?  data.prop_optionStyles           :  {};
            const prop_optionHeight            =  data.hasOwnProperty("prop_optionHeight")             ?  data.prop_optionHeight           :  130;
            const prop_optionWidth             =  data.hasOwnProperty("prop_optionWidth")              ?  data.prop_optionWidth            :  "100%";
            const prop_positionTop             =  data.hasOwnProperty("prop_positionTop")              ?  data.prop_positionTop            :  "";

            prop_optionStyles["background-color"] = prop_backgroundColorBody

            new window.ComponentPositionElement(
                `component-input-color-form-selector-${ this._COMPONENT_RANDOM_ID}` ,
                {
                    classList: this.var_showFormSelectOption ? "" : "d-none" ,

                    prop_elementClass: ["form-control" , "custom-select" , "rounded" , "px-2"] ,

                    prop_elementStyles: prop_optionStyles ,
                    prop_width: prop_optionWidth,
                    prop_height: prop_optionHeight,
                    prop_positionTop: prop_positionTop,
                }
            )
        }
    }

    componentFn_render_validate(partName){
        const data = this.getPartProps(partName)

        if (data != null){

            const data = this.getPartProps(partName)

            if (data != null){
                const prop_isDisable     =  data.hasOwnProperty("prop_isDisable")          ?  data.prop_isDisable              : false;

                if (!prop_isDisable){

                    const prop_isAbsoluteRule    =  data.hasOwnProperty("prop_isAbsoluteRule")            ?  data.prop_isAbsoluteRule                : true;
                    const prop_listRules         =  data.hasOwnProperty("prop_listRules")                 ?  data.prop_listRules                     : [];
                    const prop_title             =  data.hasOwnProperty("prop_title")                     ?  data.prop_title                         : [];
                    const prop_msgRules          =  data.hasOwnProperty("prop_msgRules")                  ?  data.prop_msgRules                      : null;
                    const directionRtl           =  this._COMPONENT_CONFIG.hasOwnProperty("directionRtl") ? this._COMPONENT_CONFIG.directionRtl      : false;

                    new window.ComponentValidate(
                        `component-input-color-validate-${this._COMPONENT_RANDOM_ID}` ,
                        {
                            prop_reference: `component-input-color-value-${ this._COMPONENT_RANDOM_ID}-input-value` ,
                            prop_isAbsolute: prop_isAbsoluteRule ,
                            prop_listRules ,
                            prop_msgRules ,
                            prop_title
                        }
                    );
                }

            }

        }
    }

    componentFn_render_formIconClear(partName){
        const data = this.getPartProps(partName)

        if (data != null){
            const prop_isDisable     =  data.hasOwnProperty("prop_isDisable")          ?  data.prop_isDisable              : false;

            if (!prop_isDisable){
                const prop_size              =  data.hasOwnProperty("prop_size")                      ?  data.prop_size                          : null;
                const prop_colorIconClear    =  data.hasOwnProperty("prop_colorIconClear")            ?  data.prop_colorIconClear                : "";
                const directionRtl           =  this._COMPONENT_CONFIG.hasOwnProperty("directionRtl") ? this._COMPONENT_CONFIG.directionRtl      : false;

                const elIconHeight = tools_css.getIconSize(prop_size);

                let styles = {
                    "z-index": `${ tools_css.getZIndex(tools_css.standardZIndex.icon_attach.name , 5) }`,
                    "cursor" : "pointer",
                    "top" : "50%" ,
                }
                if (directionRtl){
                    styles["left"]= "0";
                    styles["transform"]= "translate(5px, -50%)";
                }
                else {
                    styles["right"]= "0"
                    styles["transform"]= "translate(-5px, -50%)";
                }

                new window.ComponentIcon(
                    `component-input-color-icon-clear-${ this._COMPONENT_RANDOM_ID}` ,
                    {
                        prop_icon:          tools_icons.icon_clear_broom({size : prop_size/* , colors: {primary:prop_colorIconClear}*/}  ),

                        prop_iconClass :    ["position-absolute"] ,
                        prop_iconStyles :   styles ,

                        fn_callback: ()=>{
                            this.fn_updateIndicators(true)
                        }
                    }
                )

            }

        }
    }

    componentFn_render_formColorIconEmpty(partName){
        const data = this.getPartProps(partName)

        if (data != null){
            const prop_size              =  data.hasOwnProperty("prop_size")                      ?  data.prop_size                          : null;
            const prop_colorIconEmpty    =  data.hasOwnProperty("prop_colorIconEmpty")            ?  data.prop_colorIconEmpty                : "";
            const var_isEmptyColor       =  data.hasOwnProperty("var_isEmptyColor")               ?  data.var_isEmptyColor                   : false;

            if(var_isEmptyColor){
                const elIconHeight = tools_css.getIconSize(prop_size);

                let styles = {
                    "z-index": `${ tools_css.getZIndex(tools_css.standardZIndex.icon_attach.name , 5) }`,
                    "cursor" : "pointer",
                    "top" : "50%" ,
                    "left" : "50%" ,
                    "transform" : "translate(-50%, -50%)" ,
                }

                new window.ComponentIcon(
                    `component-input-color-icon-color-empty-${ this._COMPONENT_RANDOM_ID}` ,
                    {
                        prop_icon:          tools_icons.icon_empty({size : prop_size /*, colors: {primary:prop_colorIconEmpty}*/} ),

                        prop_iconClass :    ["position-absolute"] ,
                        prop_iconStyles :   styles
                    }
                )
            }

        }
    }


    /* ---------------------------------------------
      FUNCTIONs
     --------------------------------------------- */

    fn_checkValueColor(){
        const data = this._COMPONENT_CONFIG;
        const var_colorSelected   =   data.hasOwnProperty("var_colorSelected")      ?  data.var_colorSelected    :  null;
        if (var_colorSelected == null || var_colorSelected == ""){
            this.set("var_isEmptyColor" , true);
        }
    }


    // -------- get element selected--------
    fn_getFormColorElement(){
        return document.querySelector(` #${this._COMPONENT_ID} #component-input-color-form-color-${ this._COMPONENT_RANDOM_ID}`);
    }
    fn_getFormTitleElement(){
        return document.querySelector(` #${this._COMPONENT_ID} #component-input-color-form-title-${ this._COMPONENT_RANDOM_ID} b`);
    }

    fn_getFormSelectorElement(){
        return document.querySelector(`#${this._COMPONENT_ID} #component-input-color-form-selector-${ this._COMPONENT_RANDOM_ID}`);
    }

    fn_getTextForColorCode(){
        return document.querySelector(`#${this._COMPONENT_ID} #component-input-color-form-selector-information-code-${ this._COMPONENT_RANDOM_ID} .txt-color-code`);
    }
    fn_getTextForColorOpacity(){
        return document.querySelector(`#${this._COMPONENT_ID} #component-input-color-form-information-opacity-${ this._COMPONENT_RANDOM_ID} .txt-color-opacity`);
    }

    fn_getHueCanvas(){
        return document.querySelector(`#component-input-color-form-selector-hue-slider-${ this._COMPONENT_RANDOM_ID} .hue-canvas`);
    }
    fn_getHueCtx(){
        return this.fn_getHueCanvas()?.getContext('2d');
    }
    fn_getHueIndicator(){
        return document.querySelector(`#component-input-color-form-selector-hue-slider-${ this._COMPONENT_RANDOM_ID} .hue-indicator`);
    }

    fn_getSlCanvas(){
        return document.querySelector(`#component-input-color-form-selector-saturation-lightness-square-${ this._COMPONENT_RANDOM_ID} .sl-canvas`);
    }
    fn_getSlCtx(){
        return this.fn_getSlCanvas()?.getContext('2d');
    }
    fn_getSlIndicator(){
        return document.querySelector(`#component-input-color-form-selector-saturation-lightness-square-${ this._COMPONENT_RANDOM_ID} .sl-indicator`);
    }

    fn_getOpacityCanvas(){
        return document.querySelector(`#component-input-color-form-selector-opacity-slider-${ this._COMPONENT_RANDOM_ID} .opacity-canvas`);
    }
    fn_getOpacityCtx(){
        return this.fn_getOpacityCanvas()?.getContext('2d');
    }
    fn_getOpacityIndicator(){
        return document.querySelector(`#component-input-color-form-selector-opacity-slider-${ this._COMPONENT_RANDOM_ID} .opacity-indicator`);
    }



    // -------- add Event Listtener--------
    fn_connectToElementReference(){

        const slCanvas = this.fn_getSlCanvas();
        const hueCanvas = this.fn_getHueCanvas();
        const opacityCanvas = this.fn_getOpacityCanvas();

        hueCanvas?.addEventListener('mousedown', e=>{
            this.var_draggingHue=true;
            this.fn_moveHue(e);
        });
        slCanvas?.addEventListener('mousedown', e=>{
            this.var_draggingSL=true;
            this.fn_moveSL(e);
        });
        opacityCanvas?.addEventListener('mousedown', e=>{
            this.var_draggingOpacity=true;
            this.fn_moveOpacity(e);
        });


        window.addEventListener('mousemove', e=>{
            if(this.var_draggingHue) this.fn_moveHue(e);
            if(this.var_draggingSL) this.fn_moveSL(e);
            if(this.var_draggingOpacity) this.fn_moveOpacity(e);
        });

        window.addEventListener('mouseup', ()=>{
            this.var_draggingHue=false;
            this.var_draggingSL=false;
            this.var_draggingOpacity=false;
        });

    }


    fn_startCalcColorDefaultSelected(){
        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("prop_colorSelected")){
            const [h, s, l] = this.fn_hexToHsl(data.prop_colorSelected);
            this.var_hue = h;
            this.var_sat = s;
            this.var_light = l;
            this.var_opacity = 1;
        }

        this.fn_drawHue();
        this.fn_updateIndicators();
    }


    // -------- copy color code --------
    fn_copyColorCodeSelected(){
        const colorCode = this.fn_getTextForColorCode().innerHTML;
        tools_public.getCopyText(colorCode);
    }


    // -------- Show Options --------
    fn_onclickInputColor(event , status=null){
        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("prop_isDisable") && !data.prop_isDisable){
            if (status != null){
                this.var_showFormSelectOption = status;
            }
            else{
                this.var_showFormSelectOption = !this.var_showFormSelectOption;
            }

            const body = this.fn_getFormSelectorElement();
            if (this.var_showFormSelectOption){
                body.classList.remove("d-none")
            }
            else {
                body.classList.add("d-none")
            }
        }
    }



    // -------- Hue Slider --------
    fn_drawHue(){
        const hueCanvas = this.fn_getHueCanvas();
        const hueCtx = this.fn_getHueCtx();

        const grad = hueCtx?.createLinearGradient(0,0,0,hueCanvas.height);
        grad?.addColorStop(0,"red");
        grad?.addColorStop(0.17,"yellow");
        grad?.addColorStop(0.33,"lime");
        grad?.addColorStop(0.5,"cyan");
        grad?.addColorStop(0.67,"blue");
        grad?.addColorStop(0.83,"magenta");
        grad?.addColorStop(1,"red");
        if(hueCtx!=null) hueCtx.fillStyle = grad;
        hueCtx?.fillRect(0,0,hueCanvas.width,hueCanvas.height);
    }


    // -------- Saturation-Lightness --------
    fn_drawSL(){
        const slCanvas = this.fn_getSlCanvas();
        const slCtx = this.fn_getSlCtx();

        const width = slCanvas?.width;
        const height = slCanvas?.height;
        const imageData = slCtx?.createImageData(width,height);
        const data = imageData?.data;

        if (height != null)
            for(let y=0;y<height;y++){
                const l = 100 - (y/height*100);
                for(let x=0;x<width;x++){
                    const s = x/width*100;
                    const rgb = this.fn_hslToRgb(this.var_hue,s,l);
                    const idx = (y*width + x)*4;
                    data[idx] = rgb[0];
                    data[idx+1] = rgb[1];
                    data[idx+2] = rgb[2];
                    data[idx+3] = 255;
                }
            }
        slCtx?.putImageData(imageData,0,0);
    }


    // -------- Opacity Slider --------
    fn_drawOpacity(){
        const opacityCanvas = this.fn_getOpacityCanvas();
        const opacityCtx = this.fn_getOpacityCtx();

        const width = opacityCanvas?.width;
        const height = opacityCanvas?.height;

        // رنگ فعلی انتخاب شده (H, S, L)
        const rgb = this.fn_hslToRgb(this.var_hue, this.var_sat, this.var_light);

        // Gradient از شفاف تا رنگ کامل
        const grad = opacityCtx?.createLinearGradient(0,0,width,0);
        grad?.addColorStop(0, `rgba(${rgb.join(",")},0)`); // کاملاً شفاف
        grad?.addColorStop(1, `rgba(${rgb.join(",")},1)`); // کاملاً رنگی

        if(opacityCtx != null)opacityCtx.fillStyle = grad;
        if(opacityCtx != null)opacityCtx.fillRect(0,0,width,height);
    }


    // -------- HSL to RGB --------
    fn_hslToRgb(h,s,l){
        s/=100; l/=100;
        const k=(n)=> (n + h/30)%12;
        const a = s*Math.min(l,1-l);
        const f = n=> l - a*Math.max(-1,Math.min(k(n)-3,Math.min(9-k(n),1)));
        return [Math.round(f(0)*255),Math.round(f(8)*255),Math.round(f(4)*255)];
    }


    // -------- HEX to HSL --------
    fn_hexToHsl(hex) {
        if (hex == null) return [0 , 0 , 0];
        hex = hex.replace(/^#/, "");
        if(hex.length === 3){
            hex = hex.split("").map(x=>x+x).join("");
        }
        const bigint = parseInt(hex, 16);
        let r = (bigint >> 16) & 255;
        let g = (bigint >> 8) & 255;
        let b = bigint & 255;

        r /= 255; g /= 255; b /= 255;
        const max = Math.max(r, g, b), min = Math.min(r, g, b);
        let h, s, l = (max + min) / 2;

        if(max === min){
            h = s = 0;
        } else {
            const d = max - min;
            s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
            switch(max){
                case r: h = (g - b) / d + (g < b ? 6 : 0); break;
                case g: h = (b - r) / d + 2; break;
                case b: h = (r - g) / d + 4; break;
            }
            h /= 6;
        }

        return [Math.round(h*360), Math.round(s*100), Math.round(l*100)];
    }


    // -------- Update Indicators and Inputs --------
    fn_updateIndicators(clear=false){
        const slIndicator = this.fn_getSlIndicator();
        const slCanvas = this.fn_getSlCanvas();
        const hueIndicator = this.fn_getHueIndicator();
        const hueCanvas = this.fn_getHueCanvas();
        const opacityIndicator = this.fn_getOpacityIndicator();
        const opacityCanvas = this.fn_getOpacityCanvas();
        const txtColorCode = this.fn_getTextForColorCode();
        const formColor = this.fn_getFormColorElement();
        const formTitle= this.fn_getFormTitleElement();

        if (clear){
            this.var_hsl = null;
            this.var_hex = null;
            this.set("var_isEmptyColor" , true);
        }
        else{
            if(slIndicator != null)slIndicator.style.left = (this.var_sat/100*slCanvas.width)+"px";
            if(slIndicator != null)slIndicator.style.top = ((1-this.var_light/100)*slCanvas.height)+"px";
            if(hueIndicator != null)hueIndicator.style.top = (this.var_hue/360*hueCanvas.height)+"px";
            if(opacityIndicator != null)opacityIndicator.style.left = (this.var_opacity*opacityCanvas.width)+"px";

            this.var_hsl = `hsl(${Math.round(this.var_hue)},${Math.round(this.var_sat)}%,${Math.round(this.var_light)}%)`;
            this.var_hex = this.fn_hslToHex(this.var_hue,this.var_sat,this.var_light);
            this.set("var_isEmptyColor" , false);
        }

        this.set("var_colorSelected" , this.var_hsl);

        if(txtColorCode != null)txtColorCode.textContent = this.var_hex; // نمایش HEX
        if(formColor != null)formColor.style.backgroundColor =  this.var_hsl; // نمایش HEX

        if(formTitle != null)formTitle.textContent =  this.var_hex; // نمایش HEX
        if(formTitle != null)formTitle.style.color =  this.var_hex; // نمایش HEX

        this.fn_drawSL();
        this.fn_drawOpacity();

        this.fn_onChangeColor(this.var_hex);
    }


    // -------- Move Functions --------
    fn_moveHue(e){
        const hueCanvas = this.fn_getHueCanvas();

        const rect = hueCanvas.getBoundingClientRect();
        let y = e.clientY - rect.top;
        y = Math.max(0,Math.min(y,hueCanvas.height));
        this.var_hue = y/hueCanvas.height*360;
        this.fn_updateIndicators();
    }

    fn_moveSL(e){
        const slCanvas = this.fn_getSlCanvas();

        const rect = slCanvas.getBoundingClientRect();
        let x = e.clientX - rect.left;
        let y = e.clientY - rect.top;
        x = Math.max(0,Math.min(x,slCanvas.width));
        y = Math.max(0,Math.min(y,slCanvas.height));
        this.var_sat = x/slCanvas.width*100;
        this.var_light = 100 - y/slCanvas.height*100;
        this.fn_updateIndicators();
    }

    fn_moveOpacity(e){
        const opacityCanvas = this.fn_getOpacityCanvas();
        const opacityIndicator = this.fn_getOpacityIndicator();
        const txtColorOpacity = this.fn_getTextForColorOpacity();
        const formColor = this.fn_getFormColorElement();

        const rect = opacityCanvas.getBoundingClientRect();
        let x = e.clientX - rect.left;
        x = Math.max(0, Math.min(x,opacityCanvas.width));
        this.var_opacity = parseFloat((x/opacityCanvas.width).toFixed(2));
        opacityIndicator.style.left = `${x}px`;

        const rgb = this.fn_hslToRgb(this.var_hue, this.var_sat, this.var_light);
        const rgbaHex = `rgba(${rgb.join(",")},${this.var_opacity})`;
        txtColorOpacity.textContent = Math.round(this.var_opacity *100);
        formColor.style.backgroundColor = rgbaHex;
    }

    fn_hslToHex(h,s,l){
        s/=100; l/=100;
        const a = s * Math.min(l,1-l);
        const f = n=>{
            const k = (n + h/30)%12;
            const color = l - a * Math.max(Math.min(k-3,9-k,1),-1);
            return Math.round(255*color);
        };
        const r = f(0), g = f(8), b = f(4);
        return `#${r.toString(16).padStart(2,'0')}${g.toString(16).padStart(2,'0')}${b.toString(16).padStart(2,'0')}`;
    }




    fn_onChangeColor( color){
        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("fn_onChangeColor") && typeof data.fn_onChangeColor != null){
            data.fn_onChangeColor( color);
        }
    }
}


/*-------------------------------------
 010-08) Component Input size
-------------------------------------*/
class ComponentInputSizeBase extends ComponentBase{

    /* ---------------------------------------------
         PROPERTYs Pattern
  --------------------------------------------- */
    _COMPONENT_PATTERN = {
        prop_title: {
            prop: "prop_title",
            default: "title"
        },
        prop_backgroundColorForm: {
            prop: "prop_backgroundColorForm",
            default: tools_const?.styles?.inputSize?.backgroundColor_form ?? ""
        },
        prop_colorIcon: {
            prop: "prop_colorIcon",
            default: tools_const?.styles?.inputSize?.color_icon ?? ""
        },

        prop_icon: {
            prop: "prop_icon",
            default: null
        },
        prop_isDisable: {
            prop: "prop_isDisable",
            default: false
        },
        prop_iconPositive: {
            prop: "prop_iconPositive",
            default: tools_icons.icon_plus_badge
        },
        prop_iconNegetive: {
            prop: "prop_iconNegetive",
            default: tools_icons.icon_minus_badge
        },
        prop_inputClass: {
            prop: "prop_inputClass",
            default: ["form-control" ,"border" , "border-1", "w-100"]
        },
        prop_size: {
            prop: "prop_size",
            default: tools_css.standardSizes.m.name
        },
        prop_inputStyles: {
            prop: "prop_inputStyles",
            default: {}
        },
        prop_name: {
            prop: "prop_name",
            default: null
        },
        prop_value: {
            prop: "prop_value",
            default: null
        },
        prop_placeholder: {
            prop: "prop_placeholder",
            default: null
        },
        prop_min: {
            prop: "prop_min",
            default: null
        },
        prop_max: {
            prop: "prop_max",
            default: null
        },
        prop_isAbsoluteRule: {
            prop: "prop_isAbsoluteRule",
            default: true
        },
        prop_listRules: {
            prop: "prop_listRules",
            default: []
        },
        prop_msgRules: {
            prop: "prop_msgRules",
            default: null
        }
    };

    /* ---------------------------------------------
           PROPERTYs Props
    --------------------------------------------- */
    _COMPONENT_PROPS = {
        part_structure: [],

        part_label: [

        ],

        part_body: [
            this._COMPONENT_PATTERN.prop_size ,
            this._COMPONENT_PATTERN.prop_backgroundColorForm ,
        ],

        part_body_icon: [
            this._COMPONENT_PATTERN.prop_icon ,
            this._COMPONENT_PATTERN.prop_size ,
            this._COMPONENT_PATTERN.prop_colorIcon ,
        ],

        part_body_icon_clear: [
            this._COMPONENT_PATTERN.prop_isDisable ,
            this._COMPONENT_PATTERN.prop_size ,
        ],

        part_body_icon_positive: [
            this._COMPONENT_PATTERN.prop_isDisable,
            this._COMPONENT_PATTERN.prop_iconPositive,
            this._COMPONENT_PATTERN.prop_size,
            this._COMPONENT_PATTERN.prop_colorIcon,
        ],

        part_body_icon_negetive: [
            this._COMPONENT_PATTERN.prop_isDisable,
            this._COMPONENT_PATTERN.prop_iconNegetive,
            this._COMPONENT_PATTERN.prop_size,
            this._COMPONENT_PATTERN.prop_colorIcon,
        ],

        part_body_input_size: [
            this._COMPONENT_PATTERN.prop_inputClass,
            this._COMPONENT_PATTERN.prop_inputStyles,
            this._COMPONENT_PATTERN.prop_name,
            this._COMPONENT_PATTERN.prop_value,
            this._COMPONENT_PATTERN.prop_placeholder,
            this._COMPONENT_PATTERN.prop_icon,
            this._COMPONENT_PATTERN.prop_isDisable,
            this._COMPONENT_PATTERN.prop_min,
            this._COMPONENT_PATTERN.prop_max,
            this._COMPONENT_PATTERN.prop_size
        ],

        part_validate: [
            this._COMPONENT_PATTERN.prop_isAbsoluteRule,
            this._COMPONENT_PATTERN.prop_listRules,
            this._COMPONENT_PATTERN.prop_msgRules,
            this._COMPONENT_PATTERN.prop_isDisable,
            this._COMPONENT_PATTERN.prop_title
        ]
    };


    /* ---------------------------------------------
   PROPERTYs Schema
   --------------------------------------------- */
    _COMPONENT_SCHEMA = {
        part_structure: {
            part_label: {} ,
            part_body: {
                part_body_icon: {} ,
                part_body_icon_clear: {} ,
                part_body_icon_positive: {} ,
                part_body_icon_negetive: {} ,
                part_body_input_size: {} ,
            } ,
            part_validate: {} ,
        } ,
    }

}
window.ComponentInputSize = class ComponentInputSize extends ComponentInputSizeBase {

    /* ---------------------------------------------
       SETUP
   --------------------------------------------- */
    constructor(elId , config) {
        super(
            listComponent[ComponentInputSize.name] ,
            elId
        );
        super.renderComponent(config);
    }


    /* ---------------------------------------------
      TEMPLATEs
    --------------------------------------------- */
    componentFn(screanWidthType){
        this.templateFn("part_label");
        this.templateFn("part_body_icon");
        this.templateFn("part_body_icon_clear");
        this.templateFn("part_body_icon_positive");
        this.templateFn("part_body_icon_negetive");
        this.templateFn("part_validate");

        this.onRegisterFinish().then(el => {
            this.fn_connectToElementReference();
        })
    }
    templateFn(partName = null){

        switch (partName){
            case "part_structure":
                return this.template_render_structure(partName);
            case "part_body":
                return this.template_render_body(partName);
            case "part_body_input_size":
                return this.template_render_bodyInputSize(partName);
            case "part_label":
                return this.componentFn_render_label(partName);
            case "part_body_icon":
                return this.componentFn_render_bodyIcon(partName);
            case "part_body_icon_clear":
                return this.componentFn_render_bodyIconClear(partName);
            case "part_body_icon_positive":
                return this.componentFn_render_bodyIconPositive(partName);
            case "part_body_icon_negetive":
                return this.componentFn_render_bodyIconNegetive(partName);
            case "part_validate":
                return this.componentFn_render_validate(partName);
            default:
                return this.templateBasic_render();
        }
    }

    template_render_structure(partName ) {
        const content = `
      
      <component-label id="component-input-size-label-${ this._COMPONENT_RANDOM_ID}"></component-label>
     
      ${this.templateFn("part_body") ?? ""}
      
      <component-validate id="component-input-size-validate-${this._COMPONENT_RANDOM_ID}"></component-validate>
      
                `;
        return this.templateBasic_render_structure(content);
    }

    template_render_body(partName) {

        const data = this.getPartProps(partName)

        if (data != null){
            const prop_size                    =   data.hasOwnProperty("prop_size")                     ?  data.prop_size                      : null;
            const prop_backgroundColorForm     =   data.hasOwnProperty("prop_backgroundColorForm")      ?  data.prop_backgroundColorForm       : null;

            let elHeight = tools_css.getHeightSize(prop_size);

            return                                       `
<section  data-part-name="${partName}"
          id="component-input-password-body-${this._COMPONENT_RANDOM_ID}"  
          class="position-relative  rounded-0 d-block border" >
          
     <style>
         #${this._COMPONENT_ID} #component-input-password-body-${this._COMPONENT_RANDOM_ID}{
             background-color: rgba(176,245,237,0);
             height: ${elHeight+2}px;
             background-color: ${prop_backgroundColorForm};
         }
     </style>
     
     ${this.templateFn("part_body_input_size") ?? ""}
     
     <component-icon id="component-input-size-icon-${this._COMPONENT_RANDOM_ID}" ></component-icon>
     <component-icon id="component-input-size-icon-clear-${this._COMPONENT_RANDOM_ID}" ></component-icon>
     <component-icon id="component-input-size-icon-return-${this._COMPONENT_RANDOM_ID}" ></component-icon>
     <component-button id="component-input-size-icon-positive-${this._COMPONENT_RANDOM_ID}" ></component-button>
     <component-button id="component-input-size-icon-negetive-${this._COMPONENT_RANDOM_ID}" ></component-button>
        
</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    template_render_bodyInputSize(partName) {

        const data = this.getPartProps(partName)

        if (data != null){
            const screanWidthType = tools_css.getScreenWidth();

            const directionRtl       =  this._COMPONENT_CONFIG.hasOwnProperty("directionRtl") ? this._COMPONENT_CONFIG.directionRtl                     : false;
            const prop_inputClass    =   data.hasOwnProperty("prop_inputClass")               ?  data.prop_inputClass                                   :  [];
            const prop_inputStyles   =   data.hasOwnProperty("prop_inputStyles")              ?  data.prop_inputStyles                                  :  {};
            const prop_name          =   data.hasOwnProperty("prop_name")                     ?  data.prop_name                                         :  null;
            const prop_value         =   data.hasOwnProperty("prop_value")                    ?  tools_converter.convertPriceToString(data.prop_value)  :  null;
            const prop_placeholder   =   data.hasOwnProperty("prop_placeholder")              ?  data.prop_placeholder                                  :  null;
            const prop_icon          =   data.hasOwnProperty("prop_icon")                     ?  data.prop_icon                                         :  null;
            const prop_isDisable     =   data.hasOwnProperty("prop_isDisable")                ?  data.prop_isDisable                                    : false;
            const prop_size          =   data.hasOwnProperty("prop_size")                     ?  data.prop_size                                         : null;

            let elHeight = tools_css.getHeightSize(prop_size);
            let elFontSize = tools_css.getFontSize(prop_size);

            let padding = "180px"
            if (screanWidthType == tools_css?.standardScreanWidth?.xs?.name){
                padding = "35px";
            }

            return `
<section  data-part-name="${partName}"
          id="component-input-size-element-${this._COMPONENT_RANDOM_ID}"  
          class="" >
          
     <style>
         #${this._COMPONENT_ID} #component-input-size-element-${this._COMPONENT_RANDOM_ID}{
              ${prop_icon ? (directionRtl ? "margin-right: 35px;" : "margin-left: 35px;") : ""}
              ${directionRtl ? "margin-left" : "margin-right"} : 70px;
         }
         #${this._COMPONENT_ID} #component-input-size-${this._COMPONENT_RANDOM_ID}{
              height: ${elHeight}px;
              font-size: ${elFontSize}px;
              border-radius: 0 !important;
              ${directionRtl ? "padding-left" : "padding-right"} : 20px;
              ${tools_public.renderListStyle(prop_inputStyles)}
         }
     </style>

     <input id="component-input-size-${this._COMPONENT_RANDOM_ID}"   
            class=" ${tools_public.renderListClass(prop_inputClass)}"
            name="${prop_name || "" }"  
            type="text"  
            value="${prop_value || ""}"
            placeholder="${prop_placeholder || ""}"
            ${prop_isDisable ? 'disabled' : ''}
            />
       
</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    componentFn_render_label(partName ) {
        this.componentFneBasic_render_structure(
            `component-input-size-label-${ this._COMPONENT_RANDOM_ID}` ,
            {
                prop_for: `component-input-size-${ this._COMPONENT_RANDOM_ID}` ,
                fn_callback: ()=>{

                }
            }
        );
    }

    componentFn_render_bodyIcon(partName) {

        const data = this.getPartProps(partName)

        if (data != null){
            const directionRtl       =  this._COMPONENT_CONFIG.hasOwnProperty("directionRtl") ? this._COMPONENT_CONFIG.directionRtl      : false;
            const prop_icon          =   data.hasOwnProperty("prop_icon")                     ?  data.prop_icon                          : null;
            const prop_size          =   data.hasOwnProperty("prop_size")                     ?  data.prop_size                          : null;
            const prop_colorIcon     =   data.hasOwnProperty("prop_colorIcon")                ?  data.prop_colorIcon                     : null;

            const elIconHeight = tools_css.getIconSize(prop_size);

            let styles = {
                "z-index": `${ tools_css.getZIndex(tools_css.standardZIndex.icon_attach.name , 5) }`,
                "cursor" : "pointer",
                "top" : "50%" ,
                "color" : prop_colorIcon ,
            }
            if (directionRtl){
                styles["right"]= "0"
                styles["transform"]= "translate(-5px, -50%)";
            }
            else {
                styles["left"]= "0";
                styles["transform"]= "translate(5px, -50%)";
            }

            if (prop_icon != null){
                new window.ComponentIcon(
                    `component-input-size-icon-${this._COMPONENT_RANDOM_ID}` ,
                    {
                        prop_icon: prop_icon != null ? ( typeof prop_icon == "function" ? prop_icon(elIconHeight , prop_colorIcon) : prop_icon)  : null ,

                        prop_iconClass : ["position-absolute"] ,
                        prop_iconStyles : styles ,

                        fn_callback: ()=>{
                            this.fn_onFocusInput();
                        }
                    }
                )
            }

        }
    }

    componentFn_render_bodyIconClear(partName) {

        const data = this.getPartProps(partName)

        if (data != null){
            const prop_isDisable     =  data.hasOwnProperty("prop_isDisable")                 ?  data.prop_isDisable                     : false;

            if (!prop_isDisable){
                const prop_size          =   data.hasOwnProperty("prop_size")                     ?  data.prop_size                                         : null;
                const directionRtl       =  this._COMPONENT_CONFIG.hasOwnProperty("directionRtl") ? this._COMPONENT_CONFIG.directionRtl                     : false;

                let elHeight = tools_css.getHeightSize(prop_size);

                let styles = {
                    "z-index": `${ tools_css.getZIndex(tools_css.standardZIndex.icon_attach.name , 5) }`,
                    "width" :   "35px",
                    "cursor" : "pointer",
                    "top" : "50%" ,
                };

                if (directionRtl){
                    styles["left"]= "0";
                    styles["transform"]= "translate(70px , -50%)"
                }
                else {
                    styles["right"]= "0";
                    styles["transform"]= "translate(-70px , -50%)"
                }


                new window.ComponentIcon(
                    `component-input-size-icon-clear-${this._COMPONENT_RANDOM_ID}` ,
                    {
                        styles: {}  ,

                        prop_iconClass : ["position-absolute"] ,
                        prop_iconStyles : styles ,
                        prop_icon : tools_icons.icon_clear({size : prop_size}),

                        fn_callback: (event)=>{
                            this.fn_onClearInput(event);
                        }
                    }
                )
            }


        }
    }

    componentFn_render_bodyIconPositive(partName) {

        const data = this.getPartProps(partName)

        if (data != null){
            const prop_isDisable     =  data.hasOwnProperty("prop_isDisable")                 ?  data.prop_isDisable                     : false;

            if (!prop_isDisable){

                const directionRtl                 =  this._COMPONENT_CONFIG.hasOwnProperty("directionRtl")    ? this._COMPONENT_CONFIG.directionRtl         : false;
                const prop_iconPositive            =  data.hasOwnProperty("prop_iconPositive")                 ?  data.prop_iconPositive                     : false;
                const prop_size                    =   data.hasOwnProperty("prop_size")                        ?  data.prop_size                             : null;

                let elHeight = tools_css.getHeightSize(prop_size);

                let btnStyles = {
                    "z-index": `${ tools_css.getZIndex(tools_css.standardZIndex.icon_attach.name , 5) }`,
                    "width" :   "35px",
                    "cursor" : "pointer",
                    "top" : "0" ,
                    "text-align" : "center" ,
                };
                let styles = {
                    "height" : "38px" ,
                }

                btnStyles["border-top-right-radius"]= "0px !important";
                btnStyles["border-bottom-right-radius"]= "0px !important";
                btnStyles["border-top-left-radius"]= "0px !important";
                btnStyles["border-bottom-left-radius"]= "0px !important";

                if (directionRtl){
                    btnStyles["left"]= "0px";
                }
                else {
                    btnStyles["right"]= "0px";
                }


                new window.ComponentButton(
                    `component-input-size-icon-positive-${this._COMPONENT_RANDOM_ID}` ,
                    {
                        styles: styles ,

                        prop_btnClass : ["position-absolute" ] ,
                        prop_size : prop_size ,
                        prop_btnStyles : btnStyles ,
                        prop_title : prop_iconPositive(prop_size, "#fff") ,

                        fn_callback: (event)=>{
                            this.fn_positiveInputValue(event);
                        }
                    }
                )
            }


        }
    }

    componentFn_render_bodyIconNegetive(partName) {

        const data = this.getPartProps(partName)

        if (data != null){
            const prop_isDisable     =  data.hasOwnProperty("prop_isDisable")                 ?  data.prop_isDisable                     : false;

            if (!prop_isDisable){

                const directionRtl          =  this._COMPONENT_CONFIG.hasOwnProperty("directionRtl")    ? this._COMPONENT_CONFIG.directionRtl         : false;
                const prop_iconNegetive     =  data.hasOwnProperty("prop_iconNegetive")                 ?  data.prop_iconNegetive                     : false;
                const prop_size             =   data.hasOwnProperty("prop_size")                        ?  data.prop_size                             : null;

                let elHeight = tools_css.getHeightSize(prop_size);

                let styles = {
                    "z-index": `${ tools_css.getZIndex(tools_css.standardZIndex.icon_attach.name , 5) }`,
                    "width" :   "35px",
                    "cursor" : "pointer",
                    "top" : "0" ,
                    "text-align" : "center" ,
                };

                if (directionRtl){
                    styles["left"]= "35px";
                }
                else {
                    styles["right"]= "35px";
                }


                new window.ComponentButton(
                    `component-input-size-icon-negetive-${this._COMPONENT_RANDOM_ID}` ,
                    {
                        styles: {
                            "border-radius" : "0 important"
                        }  ,

                        prop_btnClass : ["position-absolute" , "rounded-0" , " border-white" , "border-start"] ,
                        prop_size : prop_size ,
                        prop_btnStyles : styles ,
                        prop_title : prop_iconNegetive(prop_size, "#fff") ,

                        fn_callback: (event)=>{
                            this.fn_negetiveInputValue(event);
                        }
                    }
                )
            }


        }
    }

    componentFn_render_validate(partName) {

        const data = this.getPartProps(partName)

        if (data != null){

            const data = this.getPartProps(partName)

            if (data != null){
                const prop_isDisable     =  data.hasOwnProperty("prop_isDisable")          ?  data.prop_isDisable              : false;

                if (!prop_isDisable){

                    const prop_isAbsoluteRule    =  data.hasOwnProperty("prop_isAbsoluteRule")            ?  data.prop_isAbsoluteRule                : true;
                    const prop_listRules         =  data.hasOwnProperty("prop_listRules")                 ?  data.prop_listRules                     : [];
                    const prop_title             =  data.hasOwnProperty("prop_title")                     ?  data.prop_title                         : [];
                    const prop_msgRules          =  data.hasOwnProperty("prop_msgRules")                  ?  data.prop_msgRules                      : [];
                    const directionRtl           =  this._COMPONENT_CONFIG.hasOwnProperty("directionRtl") ? this._COMPONENT_CONFIG.directionRtl      : false;

                    new window.ComponentValidate(
                        `component-input-size-validate-${this._COMPONENT_RANDOM_ID}` ,
                        {
                            prop_reference: `component-input-size-${this._COMPONENT_RANDOM_ID}` ,
                            prop_isAbsolute: prop_isAbsoluteRule ,
                            prop_listRules ,
                            prop_msgRules ,
                            prop_title
                        }
                    );
                }

            }

        }
    }



    /* ---------------------------------------------
      FUNCTIONs
     --------------------------------------------- */

    // -------- get elements--------
    fn_getInputElement(){
        return   document.querySelector(`input#component-input-size-${this._COMPONENT_RANDOM_ID}`);
    }


    // -------- add Event Listtener--------
    fn_connectToElementReference(){
        const inputEl = this.fn_getInputElement();

        /// callBacks
        inputEl.addEventListener("input", this.fn_onInputCallBack.bind(this));
        inputEl.addEventListener("blur", this.fn_onBlurCallBack.bind(this));
        inputEl.addEventListener("focus", this.fn_onFocusCallBack.bind(this));

        /// validate for is number
        inputEl.addEventListener("input", this.fn_validateInputIsNumber.bind(this));
    }


    // -------- positive or negetive value input --------
    fn_positiveInputValue(event){
        const inputEl = this.fn_getInputElement();
        let value = parseFloat(tools_converter.convertStrToNum(inputEl.value)) ;

        if (isNaN(value)) {
            value = 0;
        } else {
            value = value + 1;
        }

        this.fn_setValueInput(inputEl , value);
    }

    fn_negetiveInputValue(event){
        const inputEl = this.fn_getInputElement();
        let value = parseFloat(tools_converter.convertStrToNum(inputEl.value)) ;

        if (isNaN(value)) {
            value = 0;
        }
        else {
            value = value - 1;
        }

        this.fn_setValueInput(inputEl , value);
    }



    // -------- validate for is number input --------
    fn_validateInputIsNumber(event) {
        const inputEl = this.fn_getInputElement();
        const value = parseFloat(tools_converter.convertStrToNum(event.target.value))
        this.fn_setValueInput(inputEl , value);
    }



    // -------- set value input --------
    fn_setValueInput(inputEl , value) {
        const data = this._COMPONENT_CONFIG;
        const prop_min = data.hasOwnProperty("prop_min") && data.prop_min != null ? data.prop_min : null;
        const prop_max = data.hasOwnProperty("prop_max") && data.prop_max != null ? data.prop_max : null;

        if (prop_min != null && value<prop_min  ){
            inputEl.value = prop_min;
        }
        else if (prop_max != null && value>prop_max  ){
            inputEl.value = prop_max;
        }
        else{
            inputEl.value = value;
        }
    }




    // -------- clear input --------
    fn_onClearInput(event){
        const inputEl = this.fn_getInputElement();
        inputEl.value="";
        this.fn_onFocusInput(event);
        this.fn_onInputCallBack(event);
    }


    // -------- clear input --------
    fn_onFocusInput(event){
        const inputEl = this.fn_getInputElement();
        inputEl.focus();
    }


    // -------- callbacks --------
    fn_onInputCallBack(event){
        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("fn_oninput") && typeof data.fn_oninput != null){
            data.fn_oninput(event , this.fn_getValueInput());
        }
    }


    fn_onFocusCallBack(event){
        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("fn_onfocus") && typeof data.fn_onfocus != null){
            data.fn_onfocus(event , this.fn_getValueInput());
        }
    }


    fn_onBlurCallBack(event){
        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("fn_onblur") && typeof data.fn_onblur != null){
            data.fn_onblur(event , this.fn_getValueInput());
        }
    }

}


/*-------------------------------------
 010-09) Component Input size
-------------------------------------*/
class ComponentInputAclBase extends ComponentBase{

    /* ---------------------------------------------
         PROPERTYs Pattern
  --------------------------------------------- */
    _COMPONENT_PATTERN = {
        prop_size: {
            prop: "prop_size",
            default: tools_css.standardSizes.m.name
        },


        prop_name: {
            prop: "prop_name",
            default: ""
        },
        prop_value: {
            prop: "prop_value",
            default: []
        },

        prop_title: {
            prop: "prop_title",
            default: "title"
        },

        prop_inputClass: {
            prop: "prop_inputClass",
            default: ["form-control" ,"border" , "border-1", "w-100"]
        },
        prop_inputStyles: {
            prop: "prop_inputStyles",
            default: {}
        },

        prop_colorIcon: {
            prop: "prop_colorIcon",
            default: tools_const?.styles?.inputAcl?.color_icon ?? ""
        },


        prop_isDisable: {
            prop: "prop_isDisable",
            default: false
        },

        prop_bodyHeight: {
            prop: "prop_bodyHeight",
            default: 300
        },

        prop_bodyTop: {
            prop: "prop_bodyTop",
            default: 5
        },

        prop_backgroundColorHeaderList: {
            prop: "prop_backgroundColorHeaderList",
            default: tools_const?.styles?.inputAcl?.backgroundColor_headerList ?? ""
        },
        prop_backgroundColorBodyHeader: {
            prop: "prop_backgroundColorBodyHeader",
            default: tools_const?.styles?.inputAcl?.backgroundColor_bodyHeader ?? ""
        },
        prop_backgroundColorBodyFoter: {
            prop: "prop_backgroundColorBodyFoter",
            default: tools_const?.styles?.inputAcl?.backgroundColor_bodyFootrer ?? ""
        },
        prop_borderColorSelector: {
            prop: "prop_borderColorSelector",
            default: tools_const?.styles?.inputAcl?.borderColor_selector ?? ""
        },
        prop_btnColor: {
            prop: "prop_btnColor",
            default: tools_const?.styles?.inputAcl?.color_btn ?? ""
        },


        prop_itemAclColorUnSelected: {
            prop: "prop_itemAclColorUnSelected",
            default: tools_const?.styles?.inputAcl?.color_itemAcl_unSelected ?? ""
        },
        prop_itemAclIconColorUnSelected: {
            prop: "prop_itemAclIconColorUnSelected",
            default: tools_const?.styles?.inputAcl?.iconColor_itemAcl_unSelected ?? ""
        },
        prop_itemAclBorderColorUnSelected: {
            prop: "prop_itemAclBorderColorUnSelected",
            default: tools_const?.styles?.inputAcl?.borderColor_itemAcl_unSelected ?? ""
        },
        prop_itemAclBackgroundColorUnSelected: {
            prop: "prop_itemAclBackgroundColorUnSelected",
            default: tools_const?.styles?.inputAcl?.backgroundColor_itemAcl_unSelected ?? ""
        },
        prop_itemAclColorUnSelectedHover: {
            prop: "prop_itemAclColorUnSelectedHover",
            default: tools_const?.styles?.inputAcl?.color_itemAcl_unSelected_hover ?? ""
        },
        prop_itemAclBackgroundColorUnSelectedHover: {
            prop: "prop_itemAclBackgroundColorUnSelectedHover",
            default: tools_const?.styles?.inputAcl?.backgroundColor_itemAcl_unSelected_hover  ?? ""
        },


        prop_itemAclColorSelected: {
            prop: "prop_itemAclColorSelected",
            default: tools_const?.styles?.inputAcl?.color_itemAcl_selected ?? ""
        },
        prop_itemAclIconColorSelected: {
            prop: "prop_itemAclIconColorSelected",
            default: tools_const?.styles?.inputAcl?.iconColor_itemAcl_selected ?? ""
        },
        prop_itemAclBorderColorSelected: {
            prop: "prop_itemAclBorderColorSelected",
            default: tools_const?.styles?.inputAcl?.borderColor_itemAcl_selected ?? ""
        },
        prop_itemAclBackgroundColorSelected: {
            prop: "prop_itemAclBackgroundColorSelected",
            default: tools_const?.styles?.inputAcl?.backgroundColor_itemAcl_selected ?? ""
        },
        prop_itemAclColorSelectedHover: {
            prop: "prop_itemAclColorSelectedHover",
            default: tools_const?.styles?.inputAcl?.color_itemAcl_selected_hover ?? ""
        },
        prop_itemAclBackgroundColorSelectedHover: {
            prop: "prop_itemAclBackgroundColorSelectedHover",
            default: tools_const?.styles?.inputAcl?.backgroundColor_itemAcl_selected_hover  ?? ""
        },


        prop_langSelected: {
            prop: "prop_langSelected",
            default: component_props.directionRtl ? "fa" : "en"
        } ,
        prop_langs: {
            prop: "prop_langs",
            default: {
                fa: {
                    btn_accept : "تایید" ,
                    btn_cancel : "لغو" ,

                } ,
                en: {
                    btn_accept : "Accept" ,
                    btn_cancel : "Cancel" ,
                }
            }
        },

        prop_requestTimout: {
            prop: "prop_requestTimout",
            default: 400
        } ,

        prop_requestCount: {
            prop: "prop_requestCount",
            default: 100
        } ,

        prop_requestUrl: {
            prop: "prop_requestUrl",
            default: ""
        } ,

        var_itemsSelected: {
            prop: "var_itemsSelected",
            default: []
        } ,
    };

    /* ---------------------------------------------
           PROPERTYs Props
    --------------------------------------------- */
    _COMPONENT_PROPS = {
        part_structure: [],

        part_label: [

        ],

        part_value: [
            this._COMPONENT_PATTERN.prop_name,
            this._COMPONENT_PATTERN.prop_value,
        ],

        part_header: [
            this._COMPONENT_PATTERN.prop_backgroundColorHeaderList ,
            this._COMPONENT_PATTERN.prop_inputClass ,
            this._COMPONENT_PATTERN.prop_inputStyles ,
            this._COMPONENT_PATTERN.prop_size ,

        ],

        part_header_list: [
            this._COMPONENT_PATTERN.prop_size ,
            this._COMPONENT_PATTERN.prop_value,
        ],

        part_header_icon: [
            this._COMPONENT_PATTERN.prop_size ,
            this._COMPONENT_PATTERN.prop_colorIcon ,
        ],

        part_header_icon_clear: [
            this._COMPONENT_PATTERN.prop_size ,
            this._COMPONENT_PATTERN.prop_colorIcon ,
            this._COMPONENT_PATTERN.prop_isDisable ,
        ],

        part_body: [
            this._COMPONENT_PATTERN.prop_bodyHeight ,
            this._COMPONENT_PATTERN.prop_bodyTop ,
            this._COMPONENT_PATTERN.prop_isDisable ,
        ],

        part_body_form: [
            this._COMPONENT_PATTERN.prop_backgroundColorBodyHeader ,
            this._COMPONENT_PATTERN.prop_backgroundColorBodyFoter ,
            this._COMPONENT_PATTERN.prop_borderColorSelector ,
            this._COMPONENT_PATTERN.prop_size ,
            this._COMPONENT_PATTERN.prop_bodyHeight ,
        ],

        part_body_form_searcher: [
            this._COMPONENT_PATTERN.prop_size ,
            this._COMPONENT_PATTERN.prop_colorIcon ,
            this._COMPONENT_PATTERN.prop_requestTimout ,
        ],

        part_body_form_list_acl:[
            this._COMPONENT_PATTERN.prop_size ,
            this._COMPONENT_PATTERN.prop_requestCount ,
            this._COMPONENT_PATTERN.prop_requestUrl ,
            this._COMPONENT_PATTERN.prop_itemAclColorUnSelected ,
            this._COMPONENT_PATTERN.prop_itemAclBackgroundColorUnSelected ,
            this._COMPONENT_PATTERN.prop_itemAclIconColorUnSelected ,
            this._COMPONENT_PATTERN.prop_itemAclBorderColorUnSelected ,
            this._COMPONENT_PATTERN.prop_itemAclColorUnSelectedHover ,
            this._COMPONENT_PATTERN.prop_itemAclBackgroundColorUnSelectedHover ,
        ] ,

        part_body_form_list_selected:[
            this._COMPONENT_PATTERN.prop_size ,
            this._COMPONENT_PATTERN.prop_itemAclColorSelected ,
            this._COMPONENT_PATTERN.prop_itemAclBackgroundColorSelected ,
            this._COMPONENT_PATTERN.prop_itemAclIconColorSelected ,
            this._COMPONENT_PATTERN.prop_itemAclBorderColorSelected ,
            this._COMPONENT_PATTERN.prop_itemAclColorSelectedHover ,
            this._COMPONENT_PATTERN.prop_itemAclBackgroundColorSelectedHover ,
            this._COMPONENT_PATTERN.prop_value,
        ] ,


        part_body_form_icon_select_all: [
            this._COMPONENT_PATTERN.prop_size ,
            this._COMPONENT_PATTERN.prop_btnColor ,
        ],

        part_body_form_icon_clear_all: [
            this._COMPONENT_PATTERN.prop_size ,
            this._COMPONENT_PATTERN.prop_btnColor ,
        ],

        part_body_form_btn_accept: [
            this._COMPONENT_PATTERN.prop_size ,
            this._COMPONENT_PATTERN.prop_langSelected ,
            this._COMPONENT_PATTERN.prop_langs ,
        ],

        part_body_form_btn_cancel: [
            this._COMPONENT_PATTERN.prop_size ,
            this._COMPONENT_PATTERN.prop_langSelected ,
            this._COMPONENT_PATTERN.prop_langs ,
        ],

    };


    /* ---------------------------------------------
   PROPERTYs Schema
   --------------------------------------------- */
    _COMPONENT_SCHEMA = {
        part_structure: {
            part_value: {} ,
            part_label: {} ,
            part_header: {
                part_header_icon: {} ,
                part_header_icon_clear: {} ,
                part_header_list: {} ,
            } ,
            part_body: {
                part_body_form:{
                    part_body_form_searcher:{} ,
                    part_body_form_list_acl:{} ,
                    part_body_form_list_selected:{} ,
                    part_body_form_icon_select_all:{} ,
                    part_body_form_icon_clear_all:{} ,
                    part_body_form_btn_accept:{} ,
                    part_body_form_btn_cancel:{} ,
                }
            } ,
        } ,
    }

}
window.ComponentInputAcl = class ComponentInputAcl extends ComponentInputAclBase {

    _SHOW_BODY = false;
    _LIST_ACL = [];
    _LIST_VALUE_TEMPLATE = [];
    _REQUEST_ACL_PAGE = 1;
    _REQUEST_ACL_SEARCH = "";
    _REQUEST_TIMEOUT = null;
    _REQUEST_LOADING = false;
    _REQUEST_FINISH = false;

    /* ---------------------------------------------
       SETUP
    --------------------------------------------- */
    constructor(elId , config) {
        super(
            listComponent[ComponentInputAcl.name] ,
            elId
        );
        super.renderComponent(config);
    }


    /* ---------------------------------------------
      TEMPLATEs
    --------------------------------------------- */
    componentFn(screanWidthType){
        this.templateFn("part_label");
        this.templateFn("part_header_icon");
        this.templateFn("part_header_icon_clear");
        this.templateFn("part_body");
        this.templateFn("part_body_form_searcher");
        this.templateFn("part_body_form_icon_select_all");
        this.templateFn("part_body_form_icon_clear_all");
        this.templateFn("part_body_form_btn_accept");
        this.templateFn("part_body_form_btn_cancel");
    }
    templateFn(partName = null){
        switch (partName){
            case "part_structure":
                return this.template_render_structure(partName);
            case "part_value":
                return this.template_render_value(partName);
            case "part_header":
                return this.template_render_header(partName);
            case "part_header_list":
                return this.template_render_headerList(partName);
            case "part_body_form":
                return this.template_render_bodyForm(partName);
            case "part_body_form_list_acl":
                return this.template_render_bodyFormListAcl(partName);
            case "part_body_form_list_selected":
                return this.template_render_bodyFormListSelected(partName);
            case "part_label":
                return this.componentFn_render_label(partName);
            case "part_header_icon":
                return this.componentFn_render_headerIcon(partName);
            case "part_header_icon_clear":
                return this.componentFn_render_headerIconClear(partName);
            case "part_body":
                return this.componentFn_render_body(partName);
            case "part_body_form_searcher":
                return this.componentFn_render_bodyFormSearcher(partName);
            case "part_body_form_icon_select_all":
                return this.componentFn_render_bodyFormIconSelectAll(partName);
            case "part_body_form_icon_clear_all":
                return this.componentFn_render_bodyFormIconClearAll(partName);
            case "part_body_form_btn_accept":
                return this.componentFn_render_bodyFormBtnAccept(partName);
            case "part_body_form_btn_cancel":
                return this.componentFn_render_bodyFormBtnCancel(partName);
            default:
                return this.templateBasic_render();
        }
    }

    template_render_structure(partName ) {
        const content = `
        <component-label id="component-input-acl-label-${ this._COMPONENT_RANDOM_ID}"></component-label>
     
        ${this.templateFn("part_value")}
        
        ${this.templateFn("part_header")}
        
        <section class="position-relative">
           <component-position-element id="component-input-acl-body-${ this._COMPONENT_RANDOM_ID}">
               <component-body>
                   ${this.templateFn("part_body_form")}
               </component-body>
           </component-position-element>
        </section>
      
        <component-validate id="component-input-acl-validate-${this._COMPONENT_RANDOM_ID}"></component-validate>
      
                `;
        return this.templateBasic_render_structure(content);
    }

    template_render_value(partName) {

        const data = this.getPartProps(partName)

        if (data != null){
            const prop_name  =   data.hasOwnProperty("prop_name")       ?  data.prop_name     :  "";
            const prop_value =   data.hasOwnProperty("prop_value")      ?  data.prop_value    :  [];

            return `
<section  data-part-name="${partName}"
          id="component-input-acl-value-${this._COMPONENT_RANDOM_ID}"  
          class="" >
          
     <style>
         #${this._COMPONENT_ID} #component-input-acl-value-${this._COMPONENT_RANDOM_ID}{
         
         }
     </style>
     
     <input id="component-input-color-value-${ this._COMPONENT_RANDOM_ID}-input-value" name="${prop_name}"  value='${prop_value != null ? JSON.stringify(prop_value) : '[]'}' type="hidden"/>

</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    template_render_header(partName ) {
        const data = this.getPartProps(partName)

        if (data != null){
            const screanWidthType = tools_css.getScreenWidth();

            const directionRtl                           =  this._COMPONENT_CONFIG.hasOwnProperty("directionRtl")                     ? this._COMPONENT_CONFIG.directionRtl       : false;
            const prop_inputClass                        =   data.hasOwnProperty("prop_inputClass")                                   ?  data.prop_inputClass                     :  [];
            const prop_inputStyles                       =   data.hasOwnProperty("prop_inputStyles")                                  ?  data.prop_inputStyles                    :  {};
            const prop_size                              =   data.hasOwnProperty("prop_size")                                         ?  data.prop_size                           : null;
            const prop_backgroundColorHeaderList         =   data.hasOwnProperty("prop_backgroundColorHeaderList")                    ?  data.prop_backgroundColorHeaderList      : "";

            let elHeight = tools_css.getHeightSize(prop_size);
            let elFontSize = tools_css.getFontSize(prop_size);

            return `
<section  data-part-name="${partName}"
          id="component-input-acl-header-${this._COMPONENT_RANDOM_ID}"  
          class="${tools_public.renderListClass(prop_inputClass)} position-relative p-0"  >
          
     <style>
         #${this._COMPONENT_ID} #component-input-acl-header-${this._COMPONENT_RANDOM_ID}{
              cursor:                                                pointer;
              height:                                                ${elHeight}px;
              border-radius:                                         0 !important;
              background-color:                                      ${prop_backgroundColorHeaderList};
              ${tools_public.renderListStyle(prop_inputStyles)};
         }
     </style>
     
     ${this.templateFn("part_header_list")}
       
     <component-icon id="component-input-acl-icon-${this._COMPONENT_RANDOM_ID}" ></component-icon>
     <component-icon id="component-input-acl-icon-clear-${this._COMPONENT_RANDOM_ID}" ></component-icon>
   
</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    template_render_headerList(partName ) {
        const data = this.getPartProps(partName)

        if (data != null){
            const screanWidthType = tools_css.getScreenWidth();

            const directionRtl                           =  this._COMPONENT_CONFIG.hasOwnProperty("directionRtl")                     ? this._COMPONENT_CONFIG.directionRtl       : false;
            const prop_size                              =   data.hasOwnProperty("prop_size")                                         ?  data.prop_size                           : null;
            const prop_value                             =   data.hasOwnProperty("prop_value")                                        ?  data.prop_value                          : [];

            let elHeight = tools_css.getHeightSize(prop_size);
            let elFontSize = tools_css.getFontSize(prop_size);
            const valStr = this.fn_readyListStrAcls(prop_value);

            return `
<section  data-part-name="${partName}"
          id="component-input-acl-header-list-${this._COMPONENT_RANDOM_ID}"  
          class="bg-white" 
          onclick="${this.getFn("fn_setStatusShowBody" , "event")}" >
          
     <style>
         #${this._COMPONENT_ID} #component-input-acl-header-list-${this._COMPONENT_RANDOM_ID}{
              ${directionRtl ? "margin-right" : "margin-left"} :     30px;
              ${directionRtl ? "padding-right" : "padding-left"} :   10px;
              ${directionRtl ? "padding-left" : "padding-right"} :   40px;
              height:                                                100%;
              font-size:                                             ${elFontSize}px;
              white-space:                                           nowrap;        
              overflow:                                              hidden;      
              text-overflow:                                         ellipsis;   
         }
     </style>
     
     <b>${valStr}</b>
  
</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    template_render_bodyForm(partName ) {
        const data = this.getPartProps(partName)

        if (data != null){
            const prop_backgroundColorBodyHeader          =   data.hasOwnProperty("prop_backgroundColorBodyHeader")            ?  data.prop_backgroundColorBodyHeader         : "";
            const prop_backgroundColorBodyFoter           =   data.hasOwnProperty("prop_backgroundColorBodyFoter")             ?  data.prop_backgroundColorBodyFoter          : "";
            const prop_borderColorSelector                =   data.hasOwnProperty("prop_borderColorSelector")                  ?  data.prop_borderColorSelector               : "";
            const prop_size                               =   data.hasOwnProperty("prop_size")                                 ?  data.prop_size                              : null;
            const prop_bodyHeight                         =   data.hasOwnProperty("prop_bodyHeight")                           ?  data.prop_bodyHeight                        : 200;

            const elHeight = tools_css.getHeightSize(prop_size);

            return `
<section  data-part-name="${partName}"
          id="component-input-acl-header-body-form-${this._COMPONENT_RANDOM_ID}"  
          class="" >
          
     <style>
         #${this._COMPONENT_ID} #component-input-acl-header-body-form-${this._COMPONENT_RANDOM_ID}{
              height:           ${prop_bodyHeight}px;
         }
         #${this._COMPONENT_ID} #component-input-acl-header-body-form-header-${this._COMPONENT_RANDOM_ID}{
              height:           ${elHeight+15}px;
              background-color: ${prop_backgroundColorBodyHeader};
              padding:          5px 10px;
         }
         #${this._COMPONENT_ID} #component-input-acl-header-body-form-body-${this._COMPONENT_RANDOM_ID}{
              height:           calc(100% - ${elHeight+15}px - ${elHeight+15}px);
              padding:          5px 5px;
         }
         #${this._COMPONENT_ID} #component-input-acl-header-body-form-body-acl-${this._COMPONENT_RANDOM_ID}{
              height:           100%;
              border:           solid 1px ${prop_borderColorSelector};
         }
         #${this._COMPONENT_ID} #component-input-acl-header-body-form-body-controler-${this._COMPONENT_RANDOM_ID}{
              height:           100%;
         }
         #${this._COMPONENT_ID} #component-input-acl-header-body-form-body-selector-${this._COMPONENT_RANDOM_ID}{
              height:           100%;
              border:           solid 1px ${prop_borderColorSelector};
         }
        
         #${this._COMPONENT_ID} #component-input-acl-header-body-form-footer-${this._COMPONENT_RANDOM_ID}{
              height:           ${elHeight+15}px;
              background-color: ${prop_backgroundColorBodyFoter};
              padding:          5px 10px;
         }
     </style>
     
     <div id="component-input-acl-header-body-form-header-${this._COMPONENT_RANDOM_ID}" class="">
         <component-input id="component-input-acl-header-body-form-header-searcher-${this._COMPONENT_RANDOM_ID}"></component-input>
     </div>
     
     <div id="component-input-acl-header-body-form-body-${this._COMPONENT_RANDOM_ID}" class="row px-0 py-2 my-0 mx-2">
         <div id="component-input-acl-header-body-form-body-acl-${this._COMPONENT_RANDOM_ID}" class="col-5 p-0"  >
                 ${this.templateFn("part_body_form_list_acl")}
         </div>
         <div id="component-input-acl-header-body-form-body-controler-${this._COMPONENT_RANDOM_ID}" class="col-2 position-relative">
               <component-button id="component-input-acl-header-body-form-body-select-all-${this._COMPONENT_RANDOM_ID}" ></component-button>
               <component-button id="component-input-acl-header-body-form-body-clear-all-${this._COMPONENT_RANDOM_ID}" ></component-button>
         </div>
         <div id="component-input-acl-header-body-form-body-selector-${this._COMPONENT_RANDOM_ID}" class="col-5 p-0">
                 ${this.templateFn("part_body_form_list_selected")}
         </div>
     </div>
  
     <div id="component-input-acl-header-body-form-footer-${this._COMPONENT_RANDOM_ID}" class="row px-0 px-0 py-2 m-0 ">
         <div class="col-6">
             <component-button id="component-input-acl-header-body-form-footer-btn-cancel-${this._COMPONENT_RANDOM_ID}"></component-button>
         </div>
         <div class="col-6">
             <component-button id="component-input-acl-header-body-form-footer-btn-accept-${this._COMPONENT_RANDOM_ID}"></component-button>
         </div>
        
     </div>
  
</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    template_render_bodyFormListAcl(partName ) {
        const data = this.getPartProps(partName)

        if (data != null){
            const directionRtl                                      =  this._COMPONENT_CONFIG.hasOwnProperty("directionRtl")                ? this._COMPONENT_CONFIG.directionRtl                    : false;
            const prop_size                                         =   data.hasOwnProperty("prop_size")                                    ?  data.prop_size                                        : null;
            const prop_itemAclColorUnSelected                       =   data.hasOwnProperty("prop_itemAclColorUnSelected")                  ?  data.prop_itemAclColorUnSelected                      : "";
            const prop_itemAclBackgroundColorUnSelected             =   data.hasOwnProperty("prop_itemAclBackgroundColorUnSelected")        ?  data.prop_itemAclBackgroundColorUnSelected            : "";
            const prop_itemAclBorderColorUnSelected                 =   data.hasOwnProperty("prop_itemAclBorderColorUnSelected")            ?  data.prop_itemAclBorderColorUnSelected                : "";
            const prop_itemAclColorUnSelectedHover                  =   data.hasOwnProperty("prop_itemAclColorUnSelectedHover")             ?  data.prop_itemAclColorUnSelectedHover                 : "";
            const prop_itemAclBackgroundColorUnSelectedHover        =   data.hasOwnProperty("prop_itemAclBackgroundColorUnSelectedHover")   ?  data.prop_itemAclBackgroundColorUnSelectedHover       : "";

            const elHeight = tools_css.getHeightSize(prop_size);
            const elFontSize = tools_css.getFontSize(prop_size);

            return `
<section  data-part-name="${partName}"
          id="component-input-acl-header-body-form-list-acl-${this._COMPONENT_RANDOM_ID}"  
          class="p-1 position-relative w-100 h-100 " >
          
     <style>
         #${this._COMPONENT_ID} #component-input-acl-header-body-form-list-acl-${this._COMPONENT_RANDOM_ID}{
              
         }
         #${this._COMPONENT_ID} #component-input-acl-header-body-form-list-acl-scroller-${this._COMPONENT_RANDOM_ID}{
              overflow:           auto;
         }
         #${this._COMPONENT_ID} #component-input-acl-header-body-form-list-acl-inside-${this._COMPONENT_RANDOM_ID}{
            
         }
         #${this._COMPONENT_ID} #component-input-acl-header-body-form-list-acl-inside-${this._COMPONENT_RANDOM_ID} .item-acl{
              border:              1px  solid ${prop_itemAclBorderColorUnSelected};
              background-color:    ${prop_itemAclBackgroundColorUnSelected};
              color:               ${prop_itemAclColorUnSelected};
              height:              ${elHeight}px;
              line-height:         ${elHeight}px;
              font-size:           ${elFontSize};
              padding:             0   5px;
              margin:              5px 0px;
              cursor:              pointer
         }
         #${this._COMPONENT_ID} #component-input-acl-header-body-form-list-acl-inside-${this._COMPONENT_RANDOM_ID} .item-acl:hover{
              background-color:    ${prop_itemAclBackgroundColorUnSelectedHover};
              color:               ${prop_itemAclColorUnSelectedHover};
         }
         #${this._COMPONENT_ID} #component-input-acl-header-body-form-list-acl-inside-${this._COMPONENT_RANDOM_ID} .item-acl i{
              top:                                         50%;
              ${directionRtl ? "left" : "right"} :         0;
              transform:                                   translate(${directionRtl ? "15px" : "-15px"} , -50%);
         }
     </style>
     
     <component-loading id="component-input-acl-header-body-list-acl-loading-${this._COMPONENT_RANDOM_ID}"></component-loading>
     
     <div id="component-input-acl-header-body-form-list-acl-scroller-${this._COMPONENT_RANDOM_ID}" class="w-100 h-100"  onscroll="${this.getFn("fn_scrollListAcl" , "event")}">
         <div id="component-input-acl-header-body-form-list-acl-inside-${this._COMPONENT_RANDOM_ID}" class="w-100" ></div>
     </div>
     
</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    template_render_bodyFormListSelected(partName ) {
        const data = this.getPartProps(partName)

        if (data != null){
            const directionRtl                                    =  this._COMPONENT_CONFIG.hasOwnProperty("directionRtl")              ? this._COMPONENT_CONFIG.directionRtl                  : false;
            const prop_size                                       =   data.hasOwnProperty("prop_size")                                  ?  data.prop_size                                      : null;
            const prop_itemAclColorSelected                       =   data.hasOwnProperty("prop_itemAclColorSelected")                  ?  data.prop_itemAclColorSelected                      : "";
            const prop_itemAclBackgroundColorSelected             =   data.hasOwnProperty("prop_itemAclBackgroundColorSelected")        ?  data.prop_itemAclBackgroundColorSelected            : "";
            const prop_itemAclBorderColorSelected                 =   data.hasOwnProperty("prop_itemAclBorderColorSelected")            ?  data.prop_itemAclBorderColorSelected                : "";
            const prop_itemAclColorSelectedHover                  =   data.hasOwnProperty("prop_itemAclColorSelectedHover")             ?  data.prop_itemAclColorSelectedHover                 : "";
            const prop_itemAclBackgroundColorSelectedHover        =   data.hasOwnProperty("prop_itemAclBackgroundColorSelectedHover")   ?  data.prop_itemAclBackgroundColorSelectedHover       : "";

            const elHeight = tools_css.getHeightSize(prop_size);
            const elFontSize = tools_css.getFontSize(prop_size);

            return `
<section  data-part-name="${partName}"
          id="component-input-acl-header-body-form-list-selected-${this._COMPONENT_RANDOM_ID}"  
          class="px-1 py-0" >
          
     <style>
          #${this._COMPONENT_ID} #component-input-acl-header-body-form-list-selected-${this._COMPONENT_RANDOM_ID}{
              
         }
         #${this._COMPONENT_ID} #component-input-acl-header-body-form-list-selected-scroller-${this._COMPONENT_RANDOM_ID}{
              overflow:           auto;
         }
         #${this._COMPONENT_ID} #component-input-acl-header-body-form-list-selected-inside-${this._COMPONENT_RANDOM_ID}{
            
         }
         #${this._COMPONENT_ID} #component-input-acl-header-body-form-list-selected-inside-${this._COMPONENT_RANDOM_ID} .item-selected{
              border:              1px  solid ${prop_itemAclBorderColorSelected};
              background-color:    ${prop_itemAclBackgroundColorSelected};
              color:               ${prop_itemAclColorSelected};
              height:              ${elHeight}px;
              line-height:         ${elHeight}px;
              font-size:           ${elFontSize};
              padding:             0   5px;
              margin:              5px 0px;
              cursor:              pointer
         }
         #${this._COMPONENT_ID} #component-input-acl-header-body-form-list-selected-inside-${this._COMPONENT_RANDOM_ID} .item-selected:hover{
              background-color:    ${prop_itemAclBackgroundColorSelectedHover};
              color:               ${prop_itemAclColorSelectedHover};
         }
         #${this._COMPONENT_ID} #component-input-acl-header-body-form-list-selected-inside-${this._COMPONENT_RANDOM_ID} .item-selected i{
              top:                                         50%;
              ${directionRtl ? "left" : "right"} :         0;
              transform:                                   translate(${directionRtl ? "15px" : "-15px"} , -50%);
         }
     </style>
     
   
     <div id="component-input-acl-header-body-form-list-selected-scroller-${this._COMPONENT_RANDOM_ID}" class="w-100 h-100" >
         <div id="component-input-acl-header-body-form-list-selected-inside-${this._COMPONENT_RANDOM_ID}" class="w-100" ></div>
     </div>
     
</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    componentFn_render_label(partName ) {
        this.componentFneBasic_render_structure(
            `component-input-acl-label-${ this._COMPONENT_RANDOM_ID}` ,
            {
                fn_callback: (event)=>{
                    this.fn_setStatusShowBody(event)
                }
            }
        );
    }

    componentFn_render_headerIcon(partName) {

        const data = this.getPartProps(partName)

        if (data != null){
            const directionRtl       =  this._COMPONENT_CONFIG.hasOwnProperty("directionRtl") ? this._COMPONENT_CONFIG.directionRtl      : false;
            const prop_icon          =   data.hasOwnProperty("prop_icon")                     ?  data.prop_icon                          : null;
            const prop_size          =   data.hasOwnProperty("prop_size")                     ?  data.prop_size                          : null;
            const prop_colorIcon     =   data.hasOwnProperty("prop_colorIcon")                ?  data.prop_colorIcon                     : null;

            let styles = {
                "z-index": `${ tools_css.getZIndex(tools_css.standardZIndex.icon_attach.name , 5) }`,
                "cursor" : "pointer",
                "top" : "50%" ,
            }
            if (directionRtl){
                styles["right"]= "0"
                styles["transform"]= "translate(-5px, -50%)";
            }
            else {
                styles["left"]= "0";
                styles["transform"]= "translate(5px, -50%)";
            }

            new window.ComponentIcon(
                `component-input-acl-icon-${this._COMPONENT_RANDOM_ID}` ,
                {
                    prop_icon: tools_icons.icon_input_acl({size : prop_size /*, colors: {primary:prop_colorIcon}*/} )  ,

                    prop_iconClass : ["position-absolute"] ,
                    prop_iconStyles : styles ,

                    fn_callback: (event)=>{
                        this.fn_setStatusShowBody(event)
                    }
                }
            )

        }
    }

    componentFn_render_headerIconClear(partName) {

        const data = this.getPartProps(partName)

        if (data != null){
            const prop_isDisable     =  data.hasOwnProperty("prop_isDisable")                 ?  data.prop_isDisable                     : false;

            if (!prop_isDisable){
                const prop_size          =   data.hasOwnProperty("prop_size")                     ?  data.prop_size                                         : null;
                const directionRtl       =  this._COMPONENT_CONFIG.hasOwnProperty("directionRtl") ? this._COMPONENT_CONFIG.directionRtl                     : false;
                const prop_colorIcon     =   data.hasOwnProperty("prop_colorIcon")                ?  data.prop_colorIcon                     : null;

                let styles = {
                    "z-index": `${ tools_css.getZIndex(tools_css.standardZIndex.icon_attach.name , 5) }`,
                    "width" :   "35px",
                    "cursor" : "pointer",
                    "top" : "50%" ,
                    "transform" : "translate(0 , -50%)" ,
                };

                if (directionRtl){
                    styles["left"]= "0";
                }
                else {
                    styles["right"]= "0";
                }


                new window.ComponentIcon(
                    `component-input-acl-icon-clear-${this._COMPONENT_RANDOM_ID}` ,
                    {
                        styles: {}  ,

                        prop_iconClass : ["position-absolute"] ,
                        prop_iconStyles : styles ,
                        prop_icon : tools_icons.icon_clear({size : prop_size /*, colors: {primary:prop_colorIcon}*/}  ),

                        fn_callback: (event)=>{
                            this.fn_clearAcl(event)
                        }
                    }
                )
            }


        }
    }

    componentFn_render_body(partName) {

        const data = this.getPartProps(partName)

        if (data != null){
            const prop_isDisable     =  data.hasOwnProperty("prop_isDisable")                 ?  data.prop_isDisable                     : false;

            if (!prop_isDisable){
                const prop_bodyHeight  =   data.hasOwnProperty("prop_bodyHeight")             ?  data.prop_bodyHeight               : 200;
                const prop_bodyTop     =   data.hasOwnProperty("prop_bodyTop")                ?  data.prop_bodyTop                  : 0;

                new window.ComponentPositionElement(
                    `component-input-acl-body-${ this._COMPONENT_RANDOM_ID}` ,
                    {
                        classList: this.var_showFormSelectOption ? "" : "d-none" ,

                        prop_elementClass: ["border", "shadow-sm", "bg-white", "p-0", "rounded-0"] ,
                        prop_height: prop_bodyHeight+"px",
                        prop_minWidth: 350,
                        prop_positionTop: prop_bodyTop,
                    }
                )
            }


        }
    }

    componentFn_render_bodyFormSearcher(partName) {

        const data = this.getPartProps(partName)

        if (data != null){
            const prop_isDisable     =  data.hasOwnProperty("prop_isDisable")                 ?  data.prop_isDisable                     : false;

            if (!prop_isDisable){
                const prop_size              =   data.hasOwnProperty("prop_size")             ?  data.prop_size               : null;
                const prop_colorIcon         =   data.hasOwnProperty("prop_colorIcon")        ?  data.prop_colorIcon          : 0;
                const prop_requestTimout     =   data.hasOwnProperty("prop_requestTimout")    ?  data.prop_requestTimout      : 500;

                new window.ComponentInput(
                    `component-input-acl-header-body-form-header-searcher-${ this._COMPONENT_RANDOM_ID}` ,
                    {

                        prop_show_label: false ,
                        prop_icon: tools_icons.icon_search({size : prop_size /*, colors: {primary:prop_colorIcon}*/}  ) ,

                        fn_oninput: (event , value) => {
                            this._REQUEST_ACL_SEARCH = value;
                            this._REQUEST_ACL_PAGE = 1;
                            this._REQUEST_FINISH = false;
                            if ( this._REQUEST_TIMEOUT != null) clearTimeout( this._REQUEST_TIMEOUT)
                            this._REQUEST_TIMEOUT = setTimeout(()=>{
                                this.fn_clearListAcl()
                                this.fn_sendRequestAcl(event);
                            } , prop_requestTimout)
                        } ,
                    }
                )
            }


        }
    }

    componentFn_render_bodyFormIconSelectAll(partName) {

        const data = this.getPartProps(partName)

        if (data != null){
            const directionRtl       =  this._COMPONENT_CONFIG.hasOwnProperty("directionRtl") ? this._COMPONENT_CONFIG.directionRtl       : false;

            const prop_icon          =   data.hasOwnProperty("prop_icon")                     ?  data.prop_icon                          : null;
            const prop_size          =   data.hasOwnProperty("prop_size")                     ?  data.prop_size                          : null;
            const prop_btnColor      =   data.hasOwnProperty("prop_btnColor")                 ?  data.prop_btnColor                      : null;

            let styles = {
                "z-index":    `${ tools_css.getZIndex(tools_css.standardZIndex.icon_attach.name , 5) }`,
                "cursor" :    "pointer",
                "top" :       "45%" ,
                "left" :      "50%" ,
                "transform" : "translate(-50%, -50%)" ,
            }

            new window.ComponentButton(
                `component-input-acl-header-body-form-body-select-all-${this._COMPONENT_RANDOM_ID}` ,
                {
                    prop_title: directionRtl ? tools_icons.icon_selectAllLeft({size : prop_size /*, colors: {primary:prop_btnColor}*/} ) : tools_icons.icon_selectAllRight({size : prop_size /*, colors: {primary:prop_btnColor}*/})   ,

                    prop_btnClass : ["position-absolute"] ,
                    prop_btnStyles : styles ,

                    fn_callback: (event)=>{
                        this.fn_selectAllAcl();
                    }
                }
            )

        }
    }

    componentFn_render_bodyFormIconClearAll(partName) {

        const data = this.getPartProps(partName)

        if (data != null){
            const prop_icon          =   data.hasOwnProperty("prop_icon")                     ?  data.prop_icon                          : null;
            const prop_size          =   data.hasOwnProperty("prop_size")                     ?  data.prop_size                          : null;
            const prop_btnColor      =   data.hasOwnProperty("prop_btnColor")                 ?  data.prop_btnColor                      : null;

            let styles = {
                "z-index":    `${ tools_css.getZIndex(tools_css.standardZIndex.icon_attach.name , 5) }`,
                "cursor" :    "pointer",
                "top" :       "65%" ,
                "left" :      "50%" ,
                "transform" : "translate(-50%, -50%)" ,
            }

            new window.ComponentButton(
                `component-input-acl-header-body-form-body-clear-all-${this._COMPONENT_RANDOM_ID}` ,
                {
                    prop_title: tools_icons.icon_clear_broom({size : prop_size /*, colors: {primary:prop_btnColor}*/}  )  ,

                    prop_btnClass : ["position-absolute"] ,
                    prop_btnStyles : styles ,

                    fn_callback: (event)=>{
                        this.fn_clearAllAcl()
                    }
                }
            )

        }
    }

    componentFn_render_bodyFormBtnAccept(partName) {

        const data = this.getPartProps(partName)

        if (data != null){
            const prop_size              =     data.hasOwnProperty("prop_size")          ?  data.prop_size               :  null;
            const prop_langs             =     data.hasOwnProperty("prop_langs")         ?  data.prop_langs              :  null;
            const prop_langSelected      =     data.hasOwnProperty("prop_langSelected")  ?  data.prop_langSelected       :  null;

            let titleBtnAccept  = [];
            if (prop_langs != null && prop_langSelected != null && prop_langs.hasOwnProperty(prop_langSelected)){
                const langs = prop_langs[prop_langSelected];
                titleBtnAccept = langs?.btn_accept ?? ""
            }

            new window.ComponentButton(
                `component-input-acl-header-body-form-footer-btn-accept-${this._COMPONENT_RANDOM_ID}` ,
                {
                    classList: "" ,

                    prop_title : titleBtnAccept ,
                    prop_btnStyles : {

                    } ,
                    prop_btnType: "button" ,

                    fn_callback: (event)=>{
                        this.fn_acceptAclSelected(event);
                    }
                }
            )
        }
    }

    componentFn_render_bodyFormBtnCancel(partName) {

        const data = this.getPartProps(partName)

        if (data != null){
            const prop_size              =     data.hasOwnProperty("prop_size")          ?  data.prop_size               :  null;
            const prop_langs             =     data.hasOwnProperty("prop_langs")         ?  data.prop_langs              :  null;
            const prop_langSelected      =     data.hasOwnProperty("prop_langSelected")  ?  data.prop_langSelected       :  null;

            let titleBtnCancel  = [];
            if (prop_langs != null && prop_langSelected != null && prop_langs.hasOwnProperty(prop_langSelected)){
                const langs = prop_langs[prop_langSelected];
                titleBtnCancel = langs?.btn_cancel ?? ""
            }

            new window.ComponentButton(
                `component-input-acl-header-body-form-footer-btn-cancel-${this._COMPONENT_RANDOM_ID}` ,
                {
                    classList: "" ,

                    prop_title : titleBtnCancel ,
                    prop_btnStyles : {

                    } ,
                    prop_type: "back" ,
                    prop_btnType: "button" ,

                    fn_callback: (event)=>{
                        this.fn_cancelAclSelected(event);

                    }
                }
            )
        }
    }




    /* ---------------------------------------------
      FUNCTIONs
     --------------------------------------------- */

    fn_getElBody(){
        return document.querySelector(`#component-input-acl-body-${ this._COMPONENT_RANDOM_ID}`)
    }

    fn_getElListAcl(){
        return document.querySelector(`#component-input-acl-header-body-form-list-acl-inside-${ this._COMPONENT_RANDOM_ID}`)
    }

    fn_getElListSelected(){
        return document.querySelector(`#component-input-acl-header-body-form-list-selected-inside-${ this._COMPONENT_RANDOM_ID}`)
    }

    fn_readyListStrAcls(prop_value){
        let resultExp = "";
        if (prop_value == null){
            prop_value = [];
        }

        if (prop_value != null && Array.isArray(prop_value)){
            for (let i = 0; i < prop_value.length; i++) {
                const itemValue = prop_value[i];
                if (itemValue != null && itemValue.hasOwnProperty("name")){
                    resultExp += itemValue["name"] + ", "
                }
            }
        }

        return resultExp;
    }

    fn_clearAcl(event){
        this.set("prop_value" , []);
        this.fn_callback();
    }

    fn_acceptAclSelected(event){
        this.fn_setStatusShowBody(event , false);
        this.fn_callback();

        this.set("prop_value" , this.fn_getListTempItemsSelected());
    }
    fn_cancelAclSelected(event){
        this.fn_setStatusShowBody(event);
        this.fn_clearListSelected();
    }

    fn_setStatusShowBody(event , status=null){
        const elBody = this.fn_getElBody();
        if (status != null ){
            if ( status){
                elBody.classList.remove("d-none");
            }
            else{
                elBody.classList.add("d-none");
            }
        }
        else{
            if ( this._SHOW_BODY){
                elBody.classList.add("d-none");
            }
            else{
                elBody.classList.remove("d-none");
            }
        }

        this._SHOW_BODY =  status == null ? !this._SHOW_BODY : status;
        if(this._SHOW_BODY){
            this.fn_startFormAcl();
        }
    }

    fn_startFormAcl(){
        this._LIST_ACL = [];
        this._REQUEST_ACL_PAGE = 1;
        this._REQUEST_FINISH = false;
        this.fn_clearListAcl();
        this.fn_sendRequestAcl(event);
        this.fn_readyFirstTimeOpenSelected();
    }

    fn_readyFirstTimeOpenSelected(){
        const data = this._COMPONENT_CONFIG;
        const prop_value  =   data.hasOwnProperty("prop_value")         ?  data.prop_value      : [];
        const listSelected = this.fn_getElListSelected();
        if (prop_value != null){
            for (let i = 0; i < prop_value.length; i++) {
                const itemValue = prop_value[i];
                if (itemValue != null && itemValue.hasOwnProperty("id") && itemValue.hasOwnProperty("name")){
                    const elNew =  this.fn_createElSelected(itemValue);
                    if(elNew != null) listSelected.innerHTML += elNew;
                }
            }
        }
    }

    fn_scrollListAcl(event){
        const container = event.target;

        const scrollTop = container.scrollTop;
        const scrollHeight = container.scrollHeight;
        const clientHeight = container.clientHeight;

        if (scrollTop + clientHeight + 50 >= scrollHeight && !this._REQUEST_LOADING) {
            this.fn_sendRequestAcl(event);
        }
    }

    fn_sendRequestAcl(event){
        const data = this._COMPONENT_CONFIG;
        const prop_requestCount  =   data.hasOwnProperty("prop_requestCount")  ?  data.prop_requestCount    : 100;
        const prop_requestUrl    =   data.hasOwnProperty("prop_requestUrl")    ?  data.prop_requestUrl      : "";

        if (!this._REQUEST_FINISH){
            this._REQUEST_LOADING = true;
            tools_submit.fetcth(
                prop_requestUrl,
                {

                    //prop_size ,
                    data: {
                        contentType: tools_const.contentTypes.json ,
                        data: [
                            {"name" : "count"   , "value" : prop_requestCount} ,
                            {"name" : "search"  , "value" : this._REQUEST_ACL_SEARCH} ,
                            {"name" : "page"    , "value" : this._REQUEST_ACL_PAGE} ,
                        ]
                    },
                    componentLoadingData:  {elId: `component-input-acl-header-body-list-acl-loading-${this._COMPONENT_RANDOM_ID}`},
                    callback:(response , request)=>{
                        this._REQUEST_LOADING = false;
                        if (response == null || response.length == 0){
                            this._REQUEST_FINISH = true;
                        }
                        else{
                            this._REQUEST_ACL_PAGE += 1;
                            this._LIST_ACL.push(...response);
                            this.fn_addToListAcl(response);
                        }

                    }
                });
        }

    }

    fn_clearListAcl(){
        const elList = this.fn_getElListAcl();
        elList.innerHTML = "";
    }

    fn_addToListAcl(newList){
        const data = this._COMPONENT_CONFIG;
        const directionRtl                            =  this._COMPONENT_CONFIG.hasOwnProperty("directionRtl")              ? this._COMPONENT_CONFIG.directionRtl       : false;
        const prop_size                               =   data.hasOwnProperty("prop_size")                                  ?  data.prop_size                           : null;
        const prop_itemAclIconColorUnSelected         =   data.hasOwnProperty("prop_itemAclIconColorUnSelected")            ?  data.prop_itemAclIconColorUnSelected     : "";

        const list = this.fn_getListTempItemsSelected();

        const elList = this.fn_getElListAcl();
        if (newList != null && Array.isArray(newList)){
            for (let i = 0; i < newList.length; i++) {
                const item = newList[i];
                if (item != null && item.hasOwnProperty("id") && item.hasOwnProperty("name")){

                    let isSelected = false;
                    if ( list != null && Array.isArray( list )){
                        for (let j = 0; j <  list.length; j++) {
                            const itemSelected =  list[j]
                            if (itemSelected != null && itemSelected.hasOwnProperty("id") && itemSelected.id == item.id){
                                isSelected = true;
                                break;
                            }
                        }
                    }

                    if (!isSelected){
                        const elNew =  this.fn_createElAcl(item);
                        if(elNew != null) elList.innerHTML += elNew;
                    }

                }

            }
        }
    }

    fn_onClickItemAcl(event , itemId){
        const itemSelected = event.target.closest('.item-acl');

        if (this._LIST_ACL != null && Array.isArray(this._LIST_ACL)){
            for (let i = 0; i < this._LIST_ACL.length; i++) {
                const item = this._LIST_ACL[i];

                if (item != null && item.hasOwnProperty("id") && item.hasOwnProperty("name") && item.id == itemId){
                    itemSelected.remove();
                    const listSelected = this.fn_getElListSelected();
                    const elNew =  this.fn_createElSelected(item);
                    if(elNew != null) listSelected.innerHTML += elNew;
                    break;
                }
            }
        }
    }

    fn_clearListSelected(){
        const elList = this.fn_getElListSelected();
        elList.innerHTML = "";
    }

    fn_createElSelected(item){
        const data = this._COMPONENT_CONFIG;
        const prop_size                             =   data.hasOwnProperty("prop_size")                                ?  data.prop_size                         : null;
        const prop_itemAclIconColorSelected         =   data.hasOwnProperty("prop_itemAclIconColorSelected")            ?  data.prop_itemAclIconColorSelected     : "";

        if (item != null && item.hasOwnProperty("id") && item.hasOwnProperty("name")){
            return `
                <div class="item-selected position-relative" data-item-id="${item.id}"  data-item-name="${item.name}"  onClick="${this.getFn("fn_onClickRemoveAcl" , "event" , item.id)}">
                      ${item.name}
                      <i class="position-absolute">
                           ${tools_icons.icon_clear({size : prop_size /*, colors: {primary:prop_itemAclIconColorSelected}*/} ) }
                      </i>
                </div>
            `
        }
        return null;
    }

    fn_onClickRemoveAcl(event){
        const itemSelected = event.target.closest('.item-selected');
        let itemId = itemSelected.getAttribute("data-item-id");

        if (itemId != null){
            itemId = parseInt(itemId);

            const list = this.fn_getListTempItemsSelected();
            if (list != null && Array.isArray(list)){
                for (let i = 0; i < list.length; i++) {
                    const item = list[i];

                    if (item != null && item.hasOwnProperty("id") && item.hasOwnProperty("name") && item.id == itemId){
                        itemSelected.remove();
                        const listAcl = this.fn_getElListAcl();
                        const elNew =  this.fn_createElAcl(item);
                        if(elNew != null) listAcl.innerHTML += elNew;
                        break;
                    }
                }
            }
        }

    }

    fn_createElAcl(item){
        const data = this._COMPONENT_CONFIG;
        const prop_size                               =   data.hasOwnProperty("prop_size")                                  ?  data.prop_size                           : null;
        const prop_itemAclIconColorUnSelected         =   data.hasOwnProperty("prop_itemAclIconColorUnSelected")            ?  data.prop_itemAclIconColorUnSelected     : "";
        const directionRtl                            =  this._COMPONENT_CONFIG.hasOwnProperty("directionRtl")              ? this._COMPONENT_CONFIG.directionRtl       : false;

        if (item != null && item.hasOwnProperty("id") && item.hasOwnProperty("name")){
            return `
                <div class="item-acl position-relative" onClick="${this.getFn("fn_onClickItemAcl" , "event" , item.id)}">
                        ${item.name}
                        <i class="position-absolute">
                                 ${directionRtl ? tools_icons.icon_arrow_left({size : prop_size /*, colors: {primary:prop_itemAclIconColorUnSelected}*/}  ) : tools_icons.icon_arrow_right({size : prop_size/* , colors: {primary:prop_itemAclIconColorUnSelected}*/}  ) }
                        </i>
                </div>
            `
        }
        return null;
    }

    fn_getListTempItemsSelected(){
        let resultExp = [];
        const list = this.fn_getElListSelected().querySelectorAll(".item-selected");

        if (list != null){
            for (let i = 0; i < list.length; i++) {
                const item = list[i];
                const itemId = item.getAttribute("data-item-id");
                const itemName = item.getAttribute("data-item-name");
                if (itemId != null && itemName != null){
                    resultExp.push({
                        id : parseInt(itemId),
                        name : itemName,
                    })
                }
            }
        }
        return resultExp;
    }

    fn_selectAllAcl(){
        const data = this._COMPONENT_CONFIG;
        const prop_value  =   data.hasOwnProperty("prop_value")         ?  data.prop_value      : [];
        const listSelected = this.fn_getElListSelected();

        const list = this.fn_getListTempItemsSelected();

        if (this._LIST_ACL != null && Array.isArray(this._LIST_ACL)){
            for (let i = 0; i < this._LIST_ACL.length; i++) {
                const item = this._LIST_ACL[i];

                let isSelected = false;
                if (list != null && Array.isArray(list) && item.hasOwnProperty("id")) {
                    for (let j = 0; j < list.length; j++) {
                        const itemSelected = list[i];

                        if (itemSelected != null && itemSelected.hasOwnProperty("id")  && itemSelected.id == item.id) {
                            isSelected = true;
                            break;
                        }
                    }
                }

                if (!isSelected){
                    const elNew =  this.fn_createElSelected(item);
                    if(elNew != null) listSelected.innerHTML += elNew;
                }
            }
        }

        this.fn_clearListAcl();
        this.fn_sendRequestAcl();
    }

    fn_clearAllAcl(){
        const list = this.fn_getListTempItemsSelected();
        this.fn_clearListSelected();
        this.fn_addToListAcl(list);
        this.fn_sendRequestAcl();
    }

    fn_callback(event){
        const data = this._COMPONENT_CONFIG;
        const prop_value  =   data.hasOwnProperty("prop_value")         ?  data.prop_value      : [];

        if (data.hasOwnProperty("fn_callback") && typeof data.fn_callback != null){
            data.fn_callback(event , prop_value );
        }
    }
}


/*-------------------------------------
 010-010) Component Date
-------------------------------------*/
class ComponentDateBase extends ComponentBase{

    _DATE_TYPE_JALALI = 0;
    _DATE_TYPE_MILADI = 1;

    /* ---------------------------------------------
     PROPERTYs Pattern
    -------------------------------------------- */
    _COMPONENT_PATTERN = {
        prop_size: {
            prop: "prop_size",
            default: tools_css.standardSizes.m.name,
        },
        prop_backgroundHeader: {
            prop: "prop_backgroundHeader",
            default: tools_const?.styles?.inputDate?.backgroundColor_header || ""
        },
        prop_colorIcon: {
            prop: "prop_colorIcon",
            default: tools_const?.styles?.inputDate?.color_icon || ""
        },
        prop_backgroundMain: {
            prop: "prop_backgroundMain",
            default: tools_const?.styles?.inputDate?.backgroundColor_main || ""
        },
        prop_iconArrow: {
            prop: "prop_iconArrow",
            default: tools_const?.styles?.inputDate?.color_iconArrow || ""
        },
        prop_name: {
            prop: "prop_name",
            default: ""
        },
        prop_value: {
            prop: "prop_value",
            default: null
        },
        prop_type: {
            prop: "prop_type",
            default: 0
        },
        prop_dateType: {
            prop: "prop_dateType",
            default: component_props.directionRtl ? this._DATE_TYPE_JALALI : this._DATE_TYPE_MILADI
        },
        prop_prevYears: {
            prop: "prop_prevYears",
            default: 100
        },
        prop_nextYears: {
            prop: "prop_nextYears",
            default: 25
        },
        prop_backgroundRowSelected: {
            prop: "prop_backgroundRowSelected",
            default: tools_const?.styles?.inputDate?.backgroundColor_rowSelected || ""
        },
        prop_backgroundColumnSelected: {
            prop: "prop_backgroundColumnSelected",
            default: tools_const?.styles?.inputDate?.backgroundColor_colSelected || ""
        },
        prop_colorColumnSelected: {
            prop: "prop_colorColumnSelected",
            default: tools_const?.styles?.inputDate?.color_columnSelected || ""
        },
        prop_isDisable: {
            prop: "prop_isDisable",
            default: false
        } ,
        prop_langSelected: {
            prop: "prop_langSelected",
            default: component_props.directionRtl ? "fa" : "en"
        } ,
        prop_langs: {
            prop: "prop_langs",
            default: {
                fa: {
                    month_0 : "فروردین" ,
                    month_1 : "اردیبهشت" ,
                    month_2 : "خرداد" ,
                    month_3 : "تیر" ,
                    month_4 : "مرداد" ,
                    month_5 : "شهریور" ,
                    month_6 : "مهر" ,
                    month_7 : "آبان" ,
                    month_8 : "آذر" ,
                    month_9 : "دی" ,
                    month_10 : "بهمن" ,
                    month_11 : "اسفند" ,

                    day_0 : "ش" ,
                    day_1 : "ی.ش" ,
                    day_2 : "د.ش" ,
                    day_3 : "س.ش" ,
                    day_4 : "چ.ش" ,
                    day_5 : "پ.ش" ,
                    day_6 : "ج" ,

                    btn_accept : "تایید" ,
                    btn_now : "اکنون" ,

                } ,
                en: {
                    month_0 : "January" ,
                    month_1 : "February" ,
                    month_2 : "March" ,
                    month_3 : "April" ,
                    month_4 : "May" ,
                    month_5 : "June" ,
                    month_6 : "July" ,
                    month_7 : "August" ,
                    month_8 : "September" ,
                    month_9 : "October" ,
                    month_10 : "November" ,
                    month_11 : "December" ,

                    day_0 : "Sa" ,
                    day_1 : "Su" ,
                    day_2 : "Mo" ,
                    day_3 : "Tu" ,
                    day_4 : "We" ,
                    day_5 : "Th" ,
                    day_6 : "Fr" ,

                    btn_accept : "Accept" ,
                    btn_now : "Now" ,
                }
            }
        },

        var_selected_date: {
            prop: "var_selected_date",
            default: null
        },
    };


    /* ---------------------------------------------
           PROPERTYs Props
    --------------------------------------------- */
    _COMPONENT_PROPS = {
        part_structure: [
            this._COMPONENT_PATTERN.prop_backgroundMain
        ],

        part_label: [

        ],

        part_value: [
            this._COMPONENT_PATTERN.prop_name,
            this._COMPONENT_PATTERN.prop_value
        ],

        part_header: [
            this._COMPONENT_PATTERN.prop_size,
            this._COMPONENT_PATTERN.prop_backgroundHeader,
        ],
        part_header_inputs: [
            this._COMPONENT_PATTERN.prop_size,
            this._COMPONENT_PATTERN.prop_type,
            this._COMPONENT_PATTERN.prop_dateType,
            this._COMPONENT_PATTERN.prop_value,
            this._COMPONENT_PATTERN.var_selected_date
        ],

        part_header_icon_clear: [
            this._COMPONENT_PATTERN.prop_size,
            this._COMPONENT_PATTERN.prop_isDisable,
        ],
        part_header_icon_calender: [
            this._COMPONENT_PATTERN.prop_isDisable,
            this._COMPONENT_PATTERN.prop_size,
            this._COMPONENT_PATTERN.prop_colorIcon,
        ],

        part_body: [],
        part_body_header: [],


        part_body_header_year: [],
        part_body_header_year_btn_previous: [
            this._COMPONENT_PATTERN.prop_size,
            this._COMPONENT_PATTERN.prop_iconArrow
        ],
        part_body_header_year_options: [
            this._COMPONENT_PATTERN.prop_prevYears,
            this._COMPONENT_PATTERN.prop_nextYears,
            this._COMPONENT_PATTERN.prop_value,
            this._COMPONENT_PATTERN.prop_size
        ],
        part_body_header_year_btn_next: [
            this._COMPONENT_PATTERN.prop_size,
            this._COMPONENT_PATTERN.prop_iconArrow
        ],


        part_body_header_month: [],
        part_body_header_month_btn_previous: [
            this._COMPONENT_PATTERN.prop_size,
            this._COMPONENT_PATTERN.prop_iconArrow
        ],
        part_body_header_month_options: [
            this._COMPONENT_PATTERN.prop_langs,
            this._COMPONENT_PATTERN.prop_langSelected,
            this._COMPONENT_PATTERN.prop_value ,
            this._COMPONENT_PATTERN.prop_size,
        ],
        part_body_header_month_btn_next: [
            this._COMPONENT_PATTERN.prop_size,
            this._COMPONENT_PATTERN.prop_iconArrow
        ],


        part_body_weeks: [],
        part_body_weeks_table: [
            this._COMPONENT_PATTERN.prop_backgroundRowSelected,
            this._COMPONENT_PATTERN.prop_backgroundColumnSelected,
            this._COMPONENT_PATTERN.prop_colorColumnSelected,
            this._COMPONENT_PATTERN.prop_value,
            this._COMPONENT_PATTERN.prop_langs,
            this._COMPONENT_PATTERN.prop_langSelected,
            this._COMPONENT_PATTERN.prop_size,
        ],

        part_body_footer: [],
        part_body_footer_btn_accept: [
            this._COMPONENT_PATTERN.prop_langs,
            this._COMPONENT_PATTERN.prop_langSelected,
            this._COMPONENT_PATTERN.prop_size,
        ],

        part_body_footer_btn_now: [
            this._COMPONENT_PATTERN.prop_langs,
            this._COMPONENT_PATTERN.prop_langSelected,
            this._COMPONENT_PATTERN.prop_size,
        ]
    };



    /* ---------------------------------------------
   PROPERTYs Schema
   --------------------------------------------- */
    _COMPONENT_SCHEMA = {
        part_structure: {
            part_label: {} ,
            part_value: {} ,
            part_header: {
                part_header_inputs:{} ,
                part_header_icon_clear:{} ,
                part_header_icon_calender:{} ,
            } ,
            part_body: {
                part_body_header:{
                    part_body_header_year:{
                        part_body_header_year_btn_previous: {},
                        part_body_header_year_options: {},
                        part_body_header_year_btn_next: {},
                    } ,
                    part_body_header_month:{
                        part_body_header_month_btn_previous: {},
                        part_body_header_monthr_options: {},
                        part_body_header_month_btn_next: {},
                    } ,
                } ,
                part_body_weeks:{
                    part_body_weeks_table:{}
                } ,
                part_body_footer:{
                    part_body_footer_btn_accept :{},
                    part_body_footer_btn_now :{},
                } ,
            } ,
        } ,
    }


}
window.ComponentDate = class ComponentDate extends ComponentDateBase{

    SHOW_DATE_BODY = false;
    TIMEINTERVAL_INPUTS = null;
    TIMEINTERVAL_INPUTS_DURATION = 250;

    TYPE_YAER = "YEAR";
    TYPE_MONTH = "MONTH";
    TYPE_DAY = "DAY";

    TYPE_INPUT_ONE_DIGIT = 0;
    TYPE_INPUT_PART_DIGIT = 1;
    TYPE_INPUT_FULL_DIGIT = 2;
    TYPE_INPUT_FRIZE_DIGIT = 3;



    /* ---------------------------------------------
       SETUP
   --------------------------------------------- */
    constructor(elId , config) {
        super(
            listComponent[ComponentDate.name] ,
            elId
        );
        super.renderComponent(config);
    }



    /* ---------------------------------------------
      TEMPLATEs
    --------------------------------------------- */
    componentFn(){
        this.templateFn("part_label");
        this.templateFn("part_header_icon_clear");
        this.templateFn("part_header_icon_calender");

        this.templateFn("part_body");

        this.templateFn("part_body_header_year_btn_previous");
        this.templateFn("part_body_header_year_options");
        this.templateFn("part_body_header_year_btn_next");

        this.templateFn("part_body_header_month_btn_previous");
        this.templateFn("part_body_header_month_options");
        this.templateFn("part_body_header_month_btn_next");

        this.templateFn("part_body_weeks_table");

        this.templateFn("part_body_footer_btn_accept");
        this.templateFn("part_body_footer_btn_now");
    }
    templateFn(partName = null){
        switch (partName){
            case "part_structure":
                return this.template_render_structure(partName);

            case "part_value":
                return this.template_render_value(partName);

            case "part_label":
                return this.componentFn_render_label(partName);

            case "part_header":
                return this.template_render_header(partName);
            case "part_header_inputs":
                return this.template_render_headerInputs(partName);
            case "part_header_icon_clear":
                return this.componentFn_render_headerIconClear(partName);
            case "part_header_icon_calender":
                return this.componentFn_render_headerIconCalender(partName);

            case "part_body":
                return this.componentFn_render_body(partName);

            case "part_body_header":
                return this.template_render_bodyHeader(partName);

            case "part_body_header_year":
                return this.template_render_bodyHeader_year(partName);
            case "part_body_header_year_btn_previous":
                return this.componentFn_render_bodyHeader_year_btnPrevious(partName);
            case "part_body_header_year_options":
                return this.componentFn_render_bodyHeader_year_options(partName);
            case "part_body_header_year_btn_next":
                return this.componentFn_render_bodyHeader_year_btnNext(partName);

            case "part_body_header_month":
                return this.template_render_bodyHeader_month(partName);
            case "part_body_header_month_btn_previous":
                return this.componentFn_render_bodyHeader_month_btnPrevious(partName);
            case "part_body_header_month_options":
                return this.componentFn_render_bodyHeader_month_options(partName);
            case "part_body_header_month_btn_next":
                return this.componentFn_render_bodyHeader_month_btnNext(partName);

            case "part_body_weeks":
                return this.template_render_bodyWeeks(partName);
            case "part_body_weeks_table":
                return this.componentFn_render_bodyWeeks_table(partName);

            case "part_body_footer":
                return this.template_render_bodyFooter(partName);
            case "part_body_footer_btn_accept":
                return this.componentFn_render_bodyFooter_btnAccept(partName);
            case "part_body_footer_btn_now":
                return this.componentFn_render_bodyFooter_btnNow(partName);

            default:
                return this.templateBasic_render();
        }
    }

    template_render_structure(partName) {
        const data = this.getPartProps(partName)

        const prop_backgroundMain            = data.hasOwnProperty("prop_backgroundMain")            ? data.prop_backgroundMain            : null;

        const content = `
     <style>
         #${this._COMPONENT_ID} #component-input-date-body-contnet${this._COMPONENT_RANDOM_ID}{
             background-color: ${prop_backgroundMain};
         }
     </style>
     <component-label id="component-input-date-label-${this._COMPONENT_RANDOM_ID}" ></component-label>
     
     ${this.templateFn("part_value") ?? ""}
     
     ${this.templateFn("part_header") ?? ""}
     
     <component-position-element id="component-input-date-body-${this._COMPONENT_RANDOM_ID}">
        <component-body>
             <section id="component-input-date-body-contnet${this._COMPONENT_RANDOM_ID}" class=" px-0 h-100 rounded">
                 ${this.templateFn("part_body_header") ?? ""}
                 ${this.templateFn("part_body_weeks") ?? ""}
                 ${this.templateFn("part_body_footer") ?? ""}
             </section>
        </component-body>
     </component-position-element>
                `;
        return this.templateBasic_render_structure(content , ["position-relative"]);
    }

    template_render_value(partName) {

        const data = this.getPartProps(partName)

        if (data != null){

            const prop_name    =   data.hasOwnProperty("prop_name")               ?  data.prop_name                    :  "";
            const prop_value   =   data.hasOwnProperty("prop_value")              ?  data.prop_value                   :  null;

            return `
<section  data-part-name="${partName}"
          id="component-input-date-value-${this._COMPONENT_RANDOM_ID}"  
          class="" >
          
     <style>
         #${this._COMPONENT_ID} #component-input-date-value-${this._COMPONENT_RANDOM_ID}{
         
         }
     </style>

     <input name="${prop_name}"  value="${prop_value != null ? prop_value : ""}"  type="hidden"/>
       
</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    template_render_header(partName) {

        const data = this.getPartProps(partName)

        if (data != null) {
            const prop_backgroundHeader   =   data.hasOwnProperty("prop_backgroundHeader")              ?  data.prop_backgroundHeader               :  "";
            const prop_size               =   data.hasOwnProperty("prop_size")                          ?  data.prop_size                           :  null;
            const directionRtl            =  this._COMPONENT_CONFIG.hasOwnProperty("directionRtl")      ? this._COMPONENT_CONFIG.directionRtl       : false;

            let elHeight = tools_css.getHeightSize(prop_size);

            return `
<section  data-part-name="${partName}"
          id="component-input-date-header-${this._COMPONENT_RANDOM_ID}"  
          class=" form-control rounded-0 border-1 m-0 p-0 position-relative" >
          
     <style>
         #${this._COMPONENT_ID} #component-input-date-header-${this._COMPONENT_RANDOM_ID}{
             background-color: ${prop_backgroundHeader};
             height:          ${elHeight}px;
         }
         #${this._COMPONENT_ID} #component-input-date-header-form-${this._COMPONENT_RANDOM_ID}{
               margin-left :    ${directionRtl ? "0" : "30px"};
               float:           left;
               height:          ${elHeight-2}px;
               width:           calc(100% - 30px)
         }
     </style>
         
     <div id="component-input-date-header-form-${this._COMPONENT_RANDOM_ID}" 
          class="position-relative border bg-white">
           ${this.templateFn("part_header_inputs") ?? ""} 
           
           <component-icon id="component-input-date-header-icon-clear-${this._COMPONENT_RANDOM_ID}"></component-icon>  
     </div>

     <component-icon id="component-input-date-header-icon-calender-${this._COMPONENT_RANDOM_ID}"></component-icon>  
     
</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    template_render_headerInputs(partName) {

        const data = this.getPartProps(partName)

        if (data != null){

            const prop_size          =   data.hasOwnProperty("prop_size")                     ?  data.prop_size                                         :  null;
            const prop_type          =   data.hasOwnProperty("prop_type")                     ?  data.prop_type                                         :  0;
            const directionRtl       =  this._COMPONENT_CONFIG.hasOwnProperty("directionRtl") ? this._COMPONENT_CONFIG.directionRtl                     : false;

            let inputs = "";
            if (prop_type == this.TYPE_INPUT_ONE_DIGIT){

                const yearDigitOne   =  this.fn_getDigitDatePart(this.TYPE_YAER , 1);
                const yearDigitTwo   =  this.fn_getDigitDatePart(this.TYPE_YAER , 2);
                const yearDigitThree =  this.fn_getDigitDatePart(this.TYPE_YAER , 3);
                const yearDigitFour  =  this.fn_getDigitDatePart(this.TYPE_YAER , 4);

                const monthDigitOne  =  this.fn_getDigitDatePart(this.TYPE_MONTH , 1);
                const monthDigitTwo  =  this.fn_getDigitDatePart(this.TYPE_MONTH , 2);

                const dayDigitOne    = this.fn_getDigitDatePart(this.TYPE_DAY , 1);
                const dayDigitTwo    = this.fn_getDigitDatePart(this.TYPE_DAY , 2);

                inputs = `
                    <div class="row parts-form-input-date w-100">
                             <div class="part-form-input-date-1 col-6 row p-0 m-0 position-relative">
                                  <div class="col-3 pe-0 ps-1 m-0">
                                       <input
                                             id="Date_1-${this._COMPONENT_RANDOM_ID}" 
                                             oninput="${ this.getFn("fn_moveToNext" , "event" , `'Date_2-${this._COMPONENT_RANDOM_ID}'`)   };   " 
                                             onfocus="${ this.getFn("fn_onFocus" , "event" ,    `'Date_1-${this._COMPONENT_RANDOM_ID}'`)   };"
                                             onkeydown="${ this.getFn("fn_moveToPrev" , "event" ,  null) };"
                                             onblur="${this.getFn("fn_onChangeDateDigit" , "event" ,  `'${this.TYPE_YAER}'` , 1)}"
                                             value="${yearDigitOne}" 
                                             type="text"  maxlength="1" class="inputs-date  form-control text-center"  />
                                  </div>
                                  <div class="col-3 pe-0 ps-1 m-0">
                                       <input
                                             id="Date_2-${this._COMPONENT_RANDOM_ID}" 
                                             oninput="  ${ this.getFn("fn_moveToNext"       , "event"  , `'Date_3-${this._COMPONENT_RANDOM_ID}'`)  }; " 
                                             onfocus="  ${ this.getFn("fn_onFocus"          , "event"  , `'Date_2-${this._COMPONENT_RANDOM_ID}'`)  };"
                                             onkeydown="${ this.getFn("fn_moveToPrev"       , "event"  , `'Date_1-${this._COMPONENT_RANDOM_ID}'`)  };"
                                             onblur="   ${this.getFn("fn_onChangeDateDigit" , "event" ,  `'${this.TYPE_YAER}'` , 2)}"
                                             value="${yearDigitTwo}" 
                                             type="text"  maxlength="1" class="inputs-date  form-control text-center"  />
                                  </div>
                                  <div class="col-3 pe-0 ps-1 m-0">
                                       <input 
                                             id="Date_3-${this._COMPONENT_RANDOM_ID}"
                                             oninput="  ${ this.getFn("fn_moveToNext"  , "event"  ,  `'Date_4-${this._COMPONENT_RANDOM_ID}'`)  }; " 
                                             onfocus="  ${ this.getFn("fn_onFocus"     , "event"  ,  `'Date_3-${this._COMPONENT_RANDOM_ID}'`)   };"
                                             onkeydown="${ this.getFn("fn_moveToPrev"  , "event"  ,  `'Date_2-${this._COMPONENT_RANDOM_ID}'`)   };"
                                             onblur="   ${this.getFn("fn_onChangeDateDigit" , "event" ,  `'${this.TYPE_YAER}'` , 3)}"
                                             value="${yearDigitThree}"
                                             type="text"  maxlength="1" class="inputs-date  form-control text-center"  />
                                  </div>
                                  <div class="col-3 pe-0 ps-1 m-0">
                                       <input 
                                             id="Date_4-${ this._COMPONENT_RANDOM_ID}" 
                                             oninput="  ${ this.getFn("fn_moveToNext"         , "event"  ,  `'Date_5-${this._COMPONENT_RANDOM_ID}'`)   };" 
                                             onfocus="  ${ this.getFn("fn_onFocus"           , "event"  ,  `'Date_4-${this._COMPONENT_RANDOM_ID}'`)   };"
                                             onkeydown="${ this.getFn("fn_moveToPrev"        , "event"  ,  `'Date_3-${this._COMPONENT_RANDOM_ID}'`)   };"
                                             onblur="   ${ this.getFn("fn_onChangeDateDigit" , "event" ,  `'${this.TYPE_YAER}'` , 4)}"
                                             value="${yearDigitFour}" 
                                             type="text"  maxlength="1" class="inputs-date  form-control text-center"  />
                                  </div>
                             </div>
                             
                             <div class="part-form-input-date-2 col-3 row  p-0 m-0 position-relative">
                                  <div class="col-6 pe-0 ps-1 m-0">
                                       <input                                           
                                             id="Date_5-${this._COMPONENT_RANDOM_ID}"
                                             oninput="  ${ this.getFn("fn_moveToNext"       , "event"  ,  `'Date_6-${this._COMPONENT_RANDOM_ID}'`)   };" 
                                             onfocus="  ${ this.getFn("fn_onFocus"          , "event"  ,  `'Date_5-${this._COMPONENT_RANDOM_ID}'`)   };"
                                             onkeydown="${ this.getFn("fn_moveToPrev"       , "event"  ,  `'Date_4-${this._COMPONENT_RANDOM_ID}'`)   };"
                                             onblur="   ${this.getFn("fn_onChangeDateDigit" , "event" ,  `'${this.TYPE_MONTH}'`  , 1)}"
                                             value="${monthDigitOne}" 
                                             type="text"  maxlength="1" class="inputs-date  form-control text-center"  />
                                  </div>
                                  <div class="col-6 pe-0 ps-1 m-0">
                                       <input 
                                             id="Date_6-${this._COMPONENT_RANDOM_ID}" 
                                             oninput="  ${ this.getFn("fn_moveToNext"  , "event"  , `'Date_7-${this._COMPONENT_RANDOM_ID}'`)   };" 
                                             onfocus="  ${ this.getFn("fn_onFocus"     , "event"  , `'Date_6-${this._COMPONENT_RANDOM_ID}'`)   };"
                                             onkeydown="${ this.getFn("fn_moveToPrev"  , "event"  , `'Date_5-${this._COMPONENT_RANDOM_ID}'`)   };"
                                             onblur="   ${this.getFn("fn_onChangeDateDigit" , "event" ,  `'${this.TYPE_MONTH}'`  , 2)};"
                                             value="${monthDigitTwo}" 
                                             type="text"  maxlength="1" class="inputs-date  form-control text-center"  />
                                  </div>
                             </div>
                             
                             <div class="part-form-input-date-3 col-3 row  p-0  m-0 position-relative">
                                  <div class="col-6 pe-0 ps-1 m-0">
                                       <input 
                                             id="Date_7-${this._COMPONENT_RANDOM_ID}" 
                                             oninput="  ${ this.getFn("fn_moveToNext"       , "event"  , `'Date_8-${this._COMPONENT_RANDOM_ID}'`)  };" 
                                             onfocus="  ${ this.getFn("fn_onFocus"          , "event"  , `'Date_7-${this._COMPONENT_RANDOM_ID}'`)  };"
                                             onkeydown="${ this.getFn("fn_moveToPrev"       , "event"  , `'Date_6-${this._COMPONENT_RANDOM_ID}'`)  };"
                                             onblur="   ${this.getFn("fn_onChangeDateDigit" , "event" ,  `'${this.TYPE_DAY}'`  , 1)};"
                                             value="${dayDigitOne}"
                                             type="text"  maxlength="1" class="inputs-date  form-control text-center"  />
                                  </div>
                                  <div class="col-6 pe-0 ps-1 m-0">
                                       <input 
                                             id="Date_8-${this._COMPONENT_RANDOM_ID}" 
                                             oninput="  ${ this.getFn("fn_moveToNext"       , "event"  , null)                                     };" 
                                             onfocus="  ${ this.getFn("fn_onFocus"          , "event"  , `'Date_8-${this._COMPONENT_RANDOM_ID}'`)  };"
                                             onkeydown="${ this.getFn("fn_moveToPrev"       , "event"  , `'Date_7-${this._COMPONENT_RANDOM_ID}'`)  };"
                                             onblur="   ${this.getFn("fn_onChangeDateDigit" , "event" ,  `'${this.TYPE_DAY}'`  , 2)};"
                                             value="${dayDigitTwo}" 
                                             type="text"  maxlength="1" class="inputs-date  form-control text-center"  />
                                  </div>
                             </div>
                         </div>
            `;
            }
            else if (prop_type == this.TYPE_INPUT_PART_DIGIT){

                const yearDigitOne   = this.fn_getDigitDatePart(this.TYPE_YAER);

                const monthDigitOne  = this.fn_getDigitDatePart(this.TYPE_MONTH);

                const dayDigitOne    = this.fn_getDigitDatePart(this.TYPE_DAY);

                inputs = `
                    <div class="row parts-form-input-date w-100">
                             <div class="part-form-input-date-1 col-6 row  p-0  m-0 position-relative">
                                  <div class="col-12 pe-0 ps-1 m-0">
                                       <input
                                             id="Date_1-${this._COMPONENT_RANDOM_ID}" 
                                             oninput="  ${ this.getFn("fn_moveToNext"  , "event"  , `'Date_2-${this._COMPONENT_RANDOM_ID}'` , `'${this.TYPE_YAER}'`)  };" 
                                             onfocus="  ${ this.getFn("fn_onFocus"     , "event"  , `'Date_1-${this._COMPONENT_RANDOM_ID}'` )  };"
                                             onkeydown="${ this.getFn("fn_moveToPrev"  , "event"  ,  null)  };"
                                             onblur="   ${this.getFn("fn_onChangeDateDigit" , "event" ,  `'${this.TYPE_YAER}'`  , 1)};"
                                             value="${yearDigitOne}" 
                                             type="text"  maxlength="4" class="inputs-date  form-control text-center"  />
                                  </div>
                             </div>
                             
                             <div class="part-form-input-date-2 col-3 row pe-2 ps-2 m-0 position-relative">
                                  <div class="col-12 pe-0 ps-1 m-0">
                                       <input                                           
                                             id="Date_2-${this._COMPONENT_RANDOM_ID}" 
                                             oninput="  ${ this.getFn("fn_moveToNext"  , "event"  , `'Date_3-${this._COMPONENT_RANDOM_ID}'` , `'${this.TYPE_MONTH}'` )  }; " 
                                             onfocus="  ${ this.getFn("fn_onFocus"     , "event"  , `'Date_2-${this._COMPONENT_RANDOM_ID}'` )  };"
                                             onkeydown="${ this.getFn("fn_moveToPrev"  , "event"  , `'Date_1-${this._COMPONENT_RANDOM_ID}'` )  };"
                                             onblur="   ${this.getFn("fn_onChangeDateDigit" , "event" ,  `'${this.TYPE_MONTH}'`  , 2)};"
                                             value="${monthDigitOne}" 
                                             type="text"  maxlength="2" class="inputs-date  form-control text-center"  />
                                  </div>
                             </div>
                             
                             <div class="part-form-input-date-3 col-3 row  p-0  m-0 position-relative">
                                  <div class="col-12 pe-0 ps-1 m-0">
                                       <input 
                                             id="Date_3-${this._COMPONENT_RANDOM_ID}" 
                                             oninput="  ${ this.getFn("fn_moveToNext"  , "event"  , "null" , `'${this.TYPE_DAY}'`)              }; " 
                                             onfocus="  ${ this.getFn("fn_onFocus"     , "event"  , `'Date_3-${this._COMPONENT_RANDOM_ID}'`)  };"
                                             onkeydown="${ this.getFn("fn_moveToPrev"  , "event"  , `'Date_2-${this._COMPONENT_RANDOM_ID}'`)  };"
                                             onblur="   ${this.getFn("fn_onChangeDateDigit" , "event" ,  `'${this.TYPE_DAY}'`  , 3)};"
                                             value="${dayDigitOne}"
                                             type="text"  maxlength="2" class="inputs-date  form-control text-center"  />
                                  </div>
                             </div>
                     </div>
            `;
            }
            else if (prop_type == this.TYPE_INPUT_FULL_DIGIT){
                const digitAll   = this.fn_getDigitDatePart();
                inputs = `
                    <div class="row parts-form-input-date w-100">
                    
                           <input
                                 id="Date_1-${this._COMPONENT_RANDOM_ID}" 
                                 oninput="  ${this.getFn("fn_onChangeDateDigit" , "event"  )}" 
                                 onfocus="  ${ this.getFn("fn_onFocus"          , "event"  )  };"
                                 onkeydown="${ this.getFn("fn_moveToPrev"       , "event"  )  };"
                                 onblur="   ${this.getFn("fn_onChangeDateDigit" , "event"  )};"
                                 value="${digitAll}" 
                                 type="text"  maxlength="10" class="inputs-date  form-control text-center "  />
                                 
                    </div>
            `;
            }
            else if (prop_type == this.TYPE_INPUT_FRIZE_DIGIT){
                const yearDigitOne   = this.fn_getDigitDatePart(this.TYPE_YAER);

                const monthDigitOne  = this.fn_getDigitDatePart(this.TYPE_MONTH);

                const dayDigitOne    = this.fn_getDigitDatePart(this.TYPE_DAY);

                inputs = `
                    <div class="row parts-form-input-date w-100" onclick="${this.getFn("fn_selectDate" , "event")}">
                          
                             <div class="part-form-input-date-1 col-6 row  p-0  m-0 position-relative">
                                  <div class="col-12 pe-0 ps-1 m-0">
                                       <span class="inputs-date  form-control text-center">
                                               ${yearDigitOne}
                                        </span>
                                  </div>
                             </div>
                             
                             <div class="part-form-input-date-2 col-3 row p-0  m-0 position-relative">
                                  <div class="col-12 pe-0 ps-1 m-0">
                                       <span class="inputs-date  form-control text-center">
                                               ${monthDigitOne}
                                        </span>
                                  </div>
                             </div>
                             
                             <div class="part-form-input-date-3 col-3 row p-0 m-0 position-relative">
                                  <div class="col-12 pe-0 ps-1 m-0">
                                         <span class="inputs-date  form-control text-center">
                                               ${dayDigitOne}
                                        </span>
                                  </div>
                             </div>
                     </div>
            `;
            }

            const elHeight = tools_css.getHeightSize(prop_size);
            const elFontSize = tools_css.getFontSize(prop_size);

            return `
<section  data-part-name="${partName}"
          id="component-input-date-header-inputs-${this._COMPONENT_RANDOM_ID}"  
          class="w-100" >
          
     <style>
         #${this._COMPONENT_ID} #component-input-date-header-inputs-${this._COMPONENT_RANDOM_ID}{
              direction:        ltr !important;
         }
         
         #${this._COMPONENT_ID} .parts-form-input-date{
              width:        175px;
              margin:       auto;
              ${directionRtl ? "padding-left" : "padding-right"} : 25px;
         }
         #${this._COMPONENT_ID} .part-form-input-date-1:after , .part-form-input-date-2:after{
              content:      "/";
              right:        0;
              line-height:  ${elHeight-4}px;
              position:     absolute;
         }
         #${this._COMPONENT_ID} .inputs-date{
              border-color: #ebebeb;
              height:       ${elHeight - 4}px;
              line-height:  ${elHeight - 4}px;
              font-size:    ${elFontSize}px;
              padding:      0;
              margin:       0;
              border:       none;
              outline:      none;
         }
     </style>
     
     ${inputs}
     
</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    template_render_bodyHeader(partName) {

        const data = this.getPartProps(partName)

        if (data != null){

            return `
<section  data-part-name="${partName}"
          id="component-input-date-body-header-${this._COMPONENT_RANDOM_ID}"  
          class="row p-0 m-0 border-bottom border-2 border-white " >
          
     <style>
         #${this._COMPONENT_ID} #component-input-date-body-header-${this._COMPONENT_RANDOM_ID}{
             height: 40px;
             direction: ltr !important;
         }
     </style>
     
     ${this.templateFn("part_body_header_year") ?? ""}
     
     ${this.templateFn("part_body_header_month") ?? ""}
     
</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    template_render_bodyHeader_year(partName) {

        const data = this.getPartProps(partName)

        if (data != null){

            return `
<section  data-part-name="${partName}"
          id="component-input-date-body-heade-year-${this._COMPONENT_RANDOM_ID}"  
          class=" col-5  p-0 m-0 " >
          
     <style>
         #${this._COMPONENT_ID} #component-input-date-body-header-year-${this._COMPONENT_RANDOM_ID}{

         }
     </style>
     
     <div class="row p-0 m-0 border-end border-white border-2 h-100">
        
       
        <div class="col-3 h-100 position-relative">
            <component-icon id="component-input-date-body-header-year-btn-pervious-${this._COMPONENT_RANDOM_ID}"></component-icon>
        </div>
        
        <div class="col-6 p-0 m-0 position-relative h-100">
            <component-select-option id="component-input-date-body-header-year-options-${this._COMPONENT_RANDOM_ID}"></component-select-option>
        </div>
        
        <div class="col-3 h-100 position-relative">
            <component-icon id="component-input-date-body-header-year-btn-next-${this._COMPONENT_RANDOM_ID}"></component-icon>
        </div>

     </div>
     
</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    template_render_bodyHeader_month(partName) {

        const data = this.getPartProps(partName)

        if (data != null){

            return `
<section  data-part-name="${partName}"
          id="component-input-date-body-heade-year-${this._COMPONENT_RANDOM_ID}"  
          class=" col-7  p-0 m-0 " >
          
     <style>
         #${this._COMPONENT_ID} #component-input-date-body-header-year-${this._COMPONENT_RANDOM_ID}{

         }
     </style>
     
     <div class="row p-0 m-0 h-100">
         
        <div class="col-3 h-100 position-relative">
            <component-icon id="component-input-date-body-header-month-btn-pervious-${this._COMPONENT_RANDOM_ID}"></component-icon>
        </div>
        
        <div class="col-6 p-0 m-0 position-relative h-100">
            <component-select-option id="component-input-date-body-month-options-${this._COMPONENT_RANDOM_ID}"></component-select-option>
        </div>
        
        <div class="col-3 h-100 position-relative">
            <component-icon id="component-input-date-body-header-month-btn-next-${this._COMPONENT_RANDOM_ID}"></component-icon>
        </div>
                 
     </div>
     
</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    template_render_bodyWeeks(partName) {

        const data = this.getPartProps(partName)

        if (data != null){

            return `
<section  data-part-name="${partName}"
          id="component-input-date-body-weeks-${this._COMPONENT_RANDOM_ID}"  
         class="row p-0 m-0 border-bottom border-2 border-white pb-1 " >
          
     <style>
         #${this._COMPONENT_ID} #component-input-date-body-weeks-${this._COMPONENT_RANDOM_ID}{
             height: 200px;
         }
     </style>
     
     <component-table id="component-input-date-body-weeks-table-${this._COMPONENT_RANDOM_ID}"></component-table>
     
</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    template_render_bodyFooter(partName) {

        const data = this.getPartProps(partName)

        if (data != null){

            return `
<section  data-part-name="${partName}"
          id="component-input-date-body-footer-${this._COMPONENT_RANDOM_ID}"  
          class="row px-0 m-0 pt-1" >
          
     <style>
         #${this._COMPONENT_ID} #component-input-date-body-footer-${this._COMPONENT_RANDOM_ID}{
                      height: 40px;
         }
     </style>
     
     
       
     <div class="col-4">
          <component-button id="component-input-date-body-footer-btn-accept-${this._COMPONENT_RANDOM_ID}"></component-button>
     </div>
                               
     <div class="col-4"></div>
     
     <div class="col-4">
          <component-button id="component-input-date-body-footer-btn-now-${this._COMPONENT_RANDOM_ID}"></component-button>
     </div>

</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }


    componentFn_render_label(partName) {
        this.componentFneBasic_render_structure(
            `component-input-date-label-${ this._COMPONENT_RANDOM_ID}` ,
            {
                prop_for:  `component-input-input-${ this._COMPONENT_RANDOM_ID}` ,
                fn_callback:  () => {
                    this.fn_selectDate(event)
                } ,
            }
        );
    }

    componentFn_render_headerIconClear(partName) {

        const data = this.getPartProps(partName)

        if (data != null){
            const prop_isDisable     =  data.hasOwnProperty("prop_isDisable")                 ?  data.prop_isDisable                     : false;
            if (!prop_isDisable){

                const prop_size                 =  data.hasOwnProperty("prop_size")                      ?  data.prop_size                          :  0;
                const directionRtl       =  this._COMPONENT_CONFIG.hasOwnProperty("directionRtl") ? this._COMPONENT_CONFIG.directionRtl                     : false;

                let styles = {
                    "z-index":   `${ tools_css.getZIndex(tools_css.standardZIndex.tools_btn.name , 10) }`,
                    "cursor" :   "pointer",
                    "top" :      "50%" ,
                }
                if (directionRtl){
                    styles["left"]= "0"
                    styles["transform"]= "translate(5px, -50%)"
                }
                else {
                    styles["right"]= "0"
                    styles["transform"]= "translate(-5px, -50%)"
                }

                new window.ComponentIcon(
                    `component-input-date-header-icon-clear-${this._COMPONENT_RANDOM_ID}` ,
                    {
                        prop_icon : tools_icons.icon_reload({size : prop_size /*, colors: {primary:"#000"}*/} ),

                        prop_iconClass : ["position-absolute"] ,
                        prop_iconStyles : styles ,

                        fn_callback: (event)=>{
                            this.fn_onCLickIconClear(event)
                        }
                    }
                )

            }

        }
    }

    componentFn_render_headerIconCalender(partName) {

        const data = this.getPartProps(partName)

        if (data != null){
            const directionRtl       =  this._COMPONENT_CONFIG.hasOwnProperty("directionRtl") ? this._COMPONENT_CONFIG.directionRtl      : false;
            const prop_size          =  data.hasOwnProperty("prop_size")                      ?  data.prop_size                          :  null;
            const prop_colorIcon     =  data.hasOwnProperty("prop_colorIcon")                 ?  data.prop_colorIcon                     :  null;
            const prop_isDisable     =  data.hasOwnProperty("prop_isDisable")                 ?  data.prop_isDisable                     : false;

            const elIconHeight = tools_css.getIconSize(prop_size);

            let styles = {
                "z-index":   `${ tools_css.getZIndex(tools_css.standardZIndex.tools_btn.name , 10) }`,
                "cursor" :   "pointer",
                "top" :      "50%" ,
                "color" :    prop_colorIcon ,
            }
            if (directionRtl){
                styles["right"]= "0"
                styles["transform"]= "translate(-5px, -50%)"
            }
            else {
                styles["left"]= "0"
                styles["transform"]= "translate(5px, -50%)"
            }

            new window.ComponentIcon(
                `component-input-date-header-icon-calender-${this._COMPONENT_RANDOM_ID}` ,
                {
                    prop_icon: tools_icons.icon_calendar({size : elIconHeight /*, colors: {primary:prop_colorIcon}*/} ) ,

                    prop_iconClass : ["position-absolute"] ,
                    prop_iconStyles : styles ,

                    fn_callback: ()=>{
                        if( !prop_isDisable){
                            this.fn_selectDate(event);
                        }
                    }
                }
            )

        }
    }

    componentFn_render_body(partName) {

        const data = this.getPartProps(partName)

        if (data != null){


            new window.ComponentPositionElement(
                `component-input-date-body-${this._COMPONENT_RANDOM_ID}` ,
                {
                    classList: "d-none" ,

                    prop_elementStyles: {
                        "padding" : "0 !important"
                    },

                    prop_width: "100%",
                    prop_minWidth: 350,
                    prop_height: "280px",
                }
            )

        }

    }

    componentFn_render_bodyHeader_year_btnPrevious(partName) {
        const data = this.getPartProps(partName)
        if (data != null){
            const prop_size                 =  data.hasOwnProperty("prop_size")                      ?  data.prop_size                          :  null;
            const prop_iconArrow            =  data.hasOwnProperty("prop_iconArrow")                 ?  data.prop_iconArrow                     :  0;

            new window.ComponentIcon(
                `component-input-date-body-header-year-btn-pervious-${this._COMPONENT_RANDOM_ID}` ,
                {
                    prop_iconClass : ["text-white" , "d-block" , "text-center" , "position-absolute"] ,
                    prop_iconStyles : {
                        "line-height" : "35px" ,
                        "font-size" : "14pt" ,
                        "cursor" : "pointer",
                        "border" : "none" ,
                        "outline" : "none" ,
                        "top" : "50%" ,
                        "left" : "50%" ,
                        "transform" : "translate(-50% , -50%)"
                    } ,

                    prop_icon : tools_icons.icon_arrow_left({size : prop_size /*, colors: {primary:prop_iconArrow}*/} ) ,

                    fn_callback: (event)=>{
                        this.fn_goToYear(event);
                    }
                }
            )

        }
    }

    componentFn_render_bodyHeader_year_options(partName) {
        const data = this.getPartProps(partName)
        if (data != null){

            const prop_prevYears     =     data.hasOwnProperty("prop_prevYears")      ?  data.prop_prevYears      :  100;
            const prop_nextYears     =     data.hasOwnProperty("prop_nextYears")      ?  data.prop_nextYears      :  25;
            const prop_size          =     data.hasOwnProperty("prop_size")           ?  data.prop_size           :  null;

            const var_selected_date  =   this.fn_getPartDate();
            const var_selected_year  =   var_selected_date != null && var_selected_date.hasOwnProperty("total") &&  var_selected_date.total.hasOwnProperty("year") ?  parseInt(var_selected_date.total.year)  : -1;

            const datePart = this.fn_getPartDate();
            const thisYear = datePart != null && datePart.hasOwnProperty("total") && datePart.total.hasOwnProperty("year") ? parseInt(datePart.total.year) : this.DEFULAT_YEAR;

            let listYear = [];
            for (let i = thisYear - prop_prevYears; i < thisYear + prop_nextYears ; i++) {
                listYear.push(
                    {id:i-1 , name: i.toString()}
                )
            }

            new window.ComponentSelectOption(
                `component-input-date-body-header-year-options-${this._COMPONENT_RANDOM_ID}` ,
                {
                    prop_title:null ,
                    prop_optionWidth : "150px" ,

                    prop_titleClass: [] ,
                    prop_titleStyles: {

                    } ,

                    prop_positionLeft: "-25%" ,

                    prop_icon : null ,
                    prop_size ,
                    prop_itemSelected: var_selected_year,
                    prop_options: listYear ,
                    fn_callback: (event , index)=>{
                        this.fn_goToYearSelected(event , index);
                    }
                }
            )

        }
    }

    componentFn_render_bodyHeader_year_btnNext(partName) {
        const data = this.getPartProps(partName)
        if (data != null){

            const prop_size                 =  data.hasOwnProperty("prop_size")                      ?  data.prop_size                          :  null;
            const prop_iconArrow            =  data.hasOwnProperty("prop_iconArrow")                 ?  data.prop_iconArrow                     :  0;

            new window.ComponentIcon(
                `component-input-date-body-header-year-btn-next-${this._COMPONENT_RANDOM_ID}` ,
                {
                    prop_iconClass : ["text-white" , "d-block" , "text-center", "position-absolute"] ,
                    prop_iconStyles : {
                        "line-height" : "35px" ,
                        "font-size" : "14pt" ,
                        "cursor" : "pointer",
                        "border" : "none" ,
                        "outline" : "none" ,
                        "top" : "50%" ,
                        "left" : "50%" ,
                        "transform" : "translate(-50% , -50%)"
                    } ,

                    prop_icon : tools_icons.icon_arrow_right({size : prop_size /*, colors: {primary:prop_iconArrow}*/} ) ,

                    fn_callback: (event)=>{
                        this.fn_goToYear(event , true);
                    }
                }
            )

        }
    }

    componentFn_render_bodyHeader_month_btnPrevious(partName) {
        const data = this.getPartProps(partName)
        if (data != null){
            const prop_size                 =  data.hasOwnProperty("prop_size")                      ?  data.prop_size                          :  null;
            const prop_iconArrow            =  data.hasOwnProperty("prop_iconArrow")                 ?  data.prop_iconArrow                     :  0;

            new window.ComponentIcon(
                `component-input-date-body-header-month-btn-pervious-${this._COMPONENT_RANDOM_ID}` ,
                {
                    prop_iconClass : ["text-white" , "d-block" , "text-center" ,  "position-absolute"] ,
                    prop_iconStyles : {
                        "line-height" : "35px" ,
                        "font-size" : "14pt" ,
                        "cursor" : "pointer",
                        "border" : "none" ,
                        "outline" : "none" ,
                        "top" : "50%" ,
                        "left" : "50%" ,
                        "transform" : "translate(-50% , -50%)"
                    } ,

                    prop_icon : tools_icons.icon_arrow_left({size : prop_size /*, colors: {primary:prop_iconArrow}*/} ) ,

                    fn_callback: (event)=>{
                        this.fn_goToMonth(event);
                    }
                }
            )

        }
    }

    componentFn_render_bodyHeader_month_options(partName) {
        const data = this.getPartProps(partName)
        if (data != null){

            const var_selected_date  =   this.fn_getPartDate();
            const var_selected_month = var_selected_date != null && var_selected_date.hasOwnProperty("total") &&  var_selected_date.total.hasOwnProperty("month") ?  parseInt(var_selected_date.total.month) : -1;

            const prop_size              =     data.hasOwnProperty("prop_size")          ?  data.prop_size               :  null;
            const prop_langs             =     data.hasOwnProperty("prop_langs")         ?  data.prop_langs              :  null;
            const prop_langSelected      =     data.hasOwnProperty("prop_langSelected")  ?  data.prop_langSelected       :  null;

            let listMonth = [];
            if (prop_langs != null && prop_langSelected != null && prop_langs.hasOwnProperty(prop_langSelected)){
                const langs = prop_langs[prop_langSelected];
                listMonth = [
                    {id:0 , name:  langs?.month_0 ?? ""} ,
                    {id:1 , name:  langs?.month_1 ?? ""} ,
                    {id:2 , name:  langs?.month_2 ?? ""} ,
                    {id:3 , name:  langs?.month_3 ?? ""} ,
                    {id:4 , name:  langs?.month_4 ?? ""} ,
                    {id:5 , name:  langs?.month_5 ?? ""} ,
                    {id:6 , name:  langs?.month_6 ?? ""} ,
                    {id:7 , name:  langs?.month_7 ?? ""} ,
                    {id:8 , name:  langs?.month_8 ?? ""} ,
                    {id:9 , name:  langs?.month_9 ?? ""} ,
                    {id:10 , name: langs?.month_10 ?? ""} ,
                    {id:11 , name: langs?.month_11 ?? ""} ,
                ]
            }

            new window.ComponentSelectOption(
                `component-input-date-body-month-options-${this._COMPONENT_RANDOM_ID}` ,
                {
                    prop_title:null ,
                    prop_optionWidth : "200px" ,

                    prop_titleClass: [] ,
                    prop_titleStyles: {

                    } ,

                    prop_positionLeft: "-15%" ,

                    prop_icon : null ,
                    prop_size ,
                    prop_options: listMonth,
                    prop_itemSelected: var_selected_month,
                    fn_callback: (event , index)=>{
                        this.fn_goToMonthSelected(event , index)
                    }
                }
            )

        }
    }

    componentFn_render_bodyHeader_month_btnNext(partName) {
        const data = this.getPartProps(partName)
        if (data != null){
            const prop_size                 =  data.hasOwnProperty("prop_size")                      ?  data.prop_size                          :  null;
            const prop_iconArrow            =  data.hasOwnProperty("prop_iconArrow")                 ?  data.prop_iconArrow                     :  0;

            new window.ComponentIcon(
                `component-input-date-body-header-month-btn-next-${this._COMPONENT_RANDOM_ID}` ,
                {
                    prop_iconClass : ["text-white" , "d-block" , "text-center" , "position-absolute"] ,
                    prop_iconStyles : {
                        "line-height" : "35px" ,
                        "font-size" : "14pt" ,
                        "cursor" : "pointer",
                        "border" : "none" ,
                        "outline" : "none" ,
                        "top" : "50%" ,
                        "left" : "50%" ,
                        "transform" : "translate(-50% , -50%)"
                    } ,

                    prop_icon : tools_icons.icon_arrow_right({size : prop_size /*, colors: {primary:prop_iconArrow}*/} ) ,

                    fn_callback: (event)=>{
                        this.fn_goToMonth(event , true);
                    }
                }
            )

        }
    }

    componentFn_render_bodyWeeks_table(partName) {
        const data = this.getPartProps(partName)
        if (data != null){

            const prop_backgroundRowSelected                 =   data.hasOwnProperty("prop_backgroundRowSelected")                ?  data.prop_backgroundRowSelected                :  null;
            const prop_backgroundColumnSelected              =   data.hasOwnProperty("prop_backgroundColumnSelected")             ?  data.prop_backgroundColumnSelected             :  null;
            const prop_colorColumnSelected                   =   data.hasOwnProperty("prop_colorColumnSelected")                  ?  data.prop_colorColumnSelected                  :  null;

            const prop_size              =     data.hasOwnProperty("prop_size")          ?  data.prop_size               :  null;
            const prop_langs             =     data.hasOwnProperty("prop_langs")         ?  data.prop_langs              :  null;
            const prop_langSelected      =     data.hasOwnProperty("prop_langSelected")  ?  data.prop_langSelected       :  null;

            let headers = [];
            if (prop_langs != null && prop_langSelected != null && prop_langs.hasOwnProperty(prop_langSelected)){
                const langs = prop_langs[prop_langSelected];
                headers = [
                    {id:"day_0" , content: langs?.day_0 ?? "" },
                    {id:"day_1" , content: langs?.day_1 ?? "" },
                    {id:"day_2" , content: langs?.day_2 ?? "" },
                    {id:"day_3" , content: langs?.day_3 ?? "" },
                    {id:"day_4" , content: langs?.day_4 ?? "" },
                    {id:"day_5" , content: langs?.day_5 ?? "" },
                    {id:"day_6" , content: langs?.day_6 ?? "" },
                ]
            }

            //---------------
            const var_selected_date  =   this.fn_getPartDate();
            const listWeek = this.fn_getJalaliMonthGrid(
                var_selected_date != null && var_selected_date.hasOwnProperty("total") && var_selected_date.total.toString("year") ?   parseInt(var_selected_date.total.year) : -1 ,
                var_selected_date != null && var_selected_date.hasOwnProperty("total") && var_selected_date.total.toString("month") ?   parseInt(var_selected_date.total.month)   : -1
            );



            new window.ComponentTable(
                `component-input-date-body-weeks-table-${this._COMPONENT_RANDOM_ID}` ,
                {
                    classList: "row p-0 m-0"  ,
                    prop_hasColNumber:false ,
                    prop_hasColSelector:false ,

                    prop_structureClass : ["h-100"] ,
                    prop_structureStyles : {
                        //"background" : "#fff" ,
                    },
                    prop_size ,

                    prop_valueType: 3 ,
                    prop_valueRow : var_selected_date != null && var_selected_date.hasOwnProperty("inMonth") && var_selected_date.inMonth.toString("week") ?   parseInt(var_selected_date.inMonth.week) : -1 ,
                    prop_valueCol : var_selected_date != null && var_selected_date.hasOwnProperty("inWeek") && var_selected_date.inMonth.toString("inWeek") ?   parseInt(var_selected_date.inWeek.day)   : -1 ,

                    prop_valueRow_backgroundColor : prop_backgroundRowSelected ,
                    prop_valueCol_backgroundColor : prop_backgroundColumnSelected ,
                    prop_valueCol_textColor : prop_colorColumnSelected ,

                    prop_tableClass : ["h-100" , "border-none"] ,
                    prop_tableStyles : {
                        "height" : "100%" ,
                    },
                    prop_tableHeadClass : [ "border-bottom" , "border-white"] ,
                    prop_tableItemHeadClass : [ "" , "text-white"]  ,
                    prop_tableItemHeadStyles : {
                        "font-size" : "8pt" ,
                        "line-height" : "25px" ,
                        "border-left" : "white solid 1px" ,
                        "border-right" : "white solid 1px" ,
                        "border-bottom" : "white solid 1px" ,
                        "width" : "14%" ,
                        "text-align" : "center !important" ,
                    },
                    prop_tableBodyClass : [ "bg-white"] ,
                    prop_tableItemBodyClass : [  "rounded" , "d-block"] ,
                    prop_tableItemBodyStyles: {
                        "color" : "#525252" ,
                        "text-align" : "center" ,
                    },
                    prop_tableItemBodyHoverStyles : {
                        "background-color" : "#e1e1e1!important" ,
                        "cursor" : "pointer" ,
                    },


                    prop_order : ["day_0" , "day_1" , "day_2" , "day_3", "day_4" , "day_5", "day_6" ] ,
                    prop_header : headers,

                    prop_data : listWeek,

                    fn_callback: (event , dayNum , dayName , dayIndex , weekIndex)=>{
                        this.fn_goToDaySelected(event , dayNum , dayName , dayIndex , weekIndex)
                    }
                }
            )

        }
    }

    componentFn_render_bodyFooter_btnAccept(partName) {
        const data = this.getPartProps(partName)
        if (data != null){

            const prop_size              =     data.hasOwnProperty("prop_size")          ?  data.prop_size               :  null;
            const prop_langs             =     data.hasOwnProperty("prop_langs")         ?  data.prop_langs              :  null;
            const prop_langSelected      =     data.hasOwnProperty("prop_langSelected")  ?  data.prop_langSelected       :  null;

            let titleBtnAccept  = [];
            if (prop_langs != null && prop_langSelected != null && prop_langs.hasOwnProperty(prop_langSelected)){
                const langs = prop_langs[prop_langSelected];
                titleBtnAccept = langs?.btn_accept ?? ""
            }

            new window.ComponentButton(
                `component-input-date-body-footer-btn-accept-${this._COMPONENT_RANDOM_ID}` ,
                {
                    prop_title : titleBtnAccept ,
                    prop_btnStyles : {
                        "border" : "none" ,
                        "outline" : "none" ,
                    } ,
                    prop_btnType: "button" ,

                    fn_callback: (event)=>{
                        this.fn_onCLickBtnAccept(event)
                    }
                }
            )

        }
    }

    componentFn_render_bodyFooter_btnNow(partName) {
        const data = this.getPartProps(partName)
        if (data != null){

            const prop_size              =     data.hasOwnProperty("prop_size")          ?  data.prop_size               :  null;
            const prop_langs             =     data.hasOwnProperty("prop_langs")         ?  data.prop_langs              :  null;
            const prop_langSelected      =     data.hasOwnProperty("prop_langSelected")  ?  data.prop_langSelected       :  null;

            let titleBtnNow = [];
            if (prop_langs != null && prop_langSelected != null && prop_langs.hasOwnProperty(prop_langSelected)){
                const langs = prop_langs[prop_langSelected];
                titleBtnNow = langs?.btn_now ?? ""
            }

            new window.ComponentButton(
                `component-input-date-body-footer-btn-now-${this._COMPONENT_RANDOM_ID}` ,
                {
                    prop_title : titleBtnNow ,
                    prop_size ,
                    prop_btnStyles : {
                        "border" : "none" ,
                        "outline" : "none" ,
                    } ,
                    prop_type: "back" ,
                    prop_btnType: "button" ,

                    fn_callback: ()=>{
                        this.fn_onCLickBtNow(event)
                    }
                }
            )
        }
    }



    /* ---------------------------------------------
       FUNCTIONs
    --------------------------------------------- */

    fn_selectDate(event , show=null){
        const statusShow = (show == null)  ? this.SHOW_DATE_BODY : show
        this.SHOW_DATE_BODY = !statusShow;

        const elBody = document.querySelector(`#component-input-date-body-${this._COMPONENT_RANDOM_ID}`);
        if (this.SHOW_DATE_BODY){
            elBody.classList.remove("d-none")
        }
        else {
            elBody.classList.add("d-none")
        }
    }

    fn_getDaysInJalaliMonth(year, month){
        const data = this._COMPONENT_CONFIG;
        const prop_dateType = data.hasOwnProperty("prop_dateType") ? data.prop_dateType : this._DATE_TYPE_JALALI;

        if (prop_dateType ==  this._DATE_TYPE_JALALI){
            return jalaali.jalaaliMonthLength(year, month);
        }
        else if (prop_dateType ==  this._DATE_TYPE_MILADI){
            return new Date(year, month, 0).getDate();
        }
    }

    fn_jalaliToTimeUnix(jy, jm, jd){
        const data = this._COMPONENT_CONFIG;
        const prop_dateType = data.hasOwnProperty("prop_dateType") ? data.prop_dateType : this._DATE_TYPE_JALALI;

        if (prop_dateType ==  this._DATE_TYPE_JALALI){
            const gDate = jalaali.toGregorian(jy, jm, jd);
            const date = new Date(gDate.gy, gDate.gm - 1, gDate.gd);
            const timeUnix = Math.floor(date.getTime() / 1000);

            return {
                date: date,
                timeUnix: timeUnix
            };
        }
        else if (prop_dateType ==  this._DATE_TYPE_MILADI){
            const date = new Date(jy, jm - 1, jd);
            const timeUnix = Math.floor(date.getTime() / 1000);

            return {
                date: date,
                timeUnix: timeUnix
            };
        }
    }

    fn_getJalaliMonthGrid(year, month){
        const data = this._COMPONENT_CONFIG;
        const prop_dateType = data.hasOwnProperty("prop_dateType") ? data.prop_dateType : this._DATE_TYPE_JALALI;

        const daysInMonth = this.fn_getDaysInJalaliMonth(year+1, month+1);

        let gDate = null;
        if (prop_dateType ==  this._DATE_TYPE_JALALI){
            gDate = jalaali.toGregorian(year+1, month+1 , 1);
        }
        else if (prop_dateType ==  this._DATE_TYPE_MILADI){
            gDate = new Date(year + 1, month, 1);
        }

        const date = new Date(gDate.gy, gDate.gm - 1, gDate.gd);
        const firstDayOfWeek = date.getDay()+2;

        const offset = (firstDayOfWeek + 6) % 7;

        const weeks = [];
        let currentDay = 1;

        let week = {};
        for (let i = 0; i < 7; i++) {
            week[`day_${i}`] = i < offset ? null : currentDay++;
        }
        weeks.push(week);

        while (currentDay <= daysInMonth) {
            let week = {};
            for (let i = 0; i < 7; i++) {
                week[`day_${i}`] = currentDay <= daysInMonth ? currentDay++ : null;
            }
            weeks.push(week);
        }

        return weeks;
    }

    fn_getPartDate(date = null){
        const data = this._COMPONENT_CONFIG;
        const prop_dateType = data.hasOwnProperty("prop_dateType") ? data.prop_dateType : this._DATE_TYPE_JALALI;

        if (date == null){
            const prop_value = this.get("prop_value" , null);
            date =  prop_value != null ? new Date(prop_value * 1000) : new Date();
        }

        let gYear = date.getFullYear();
        let gMonth = date.getMonth() + 1; // از 0 شروع میشه
        let gDay = date.getDate();

        let year = 0;
        let month=0;
        let day=0;
        let dateStr="";
        if (prop_dateType ==  this._DATE_TYPE_JALALI){
            let { jy, jm, jd } = jalaali.toJalaali(gYear, gMonth, gDay);
            [year, month, day] = [jy.toString() , jm.toString().padStart(2, '0') , jd.toString().padStart(2, '0')];
            dateStr = `${jy}/${jm.toString().padStart(2, '0')}/${jd.toString().padStart(2, '0')}`
        }
        else if (prop_dateType ==  this._DATE_TYPE_MILADI){
            const formatter = new Intl.DateTimeFormat();
            dateStr = formatter.format(date);
            [month, day , year] = dateStr.split('/');
        }

        const jalaliYear = +tools_converter.numPersianToEnglish(year) -1  ;
        const jalaliMonth = +tools_converter.numPersianToEnglish(month)  -1 ;
        const jalaliDay =  +tools_converter.numPersianToEnglish(day) -1;

        const listWeek = this.fn_getJalaliMonthGrid(jalaliYear, jalaliMonth);
        let startWeekDay = -1;
        let totalWeek = 0;
        if (listWeek != null && Array.isArray(listWeek)){
            totalWeek = listWeek.length;

            for (const weekIndex in listWeek) {
                const week =  listWeek[weekIndex];
                for (const dayIndex in listWeek[weekIndex]) {
                    const day =  week[dayIndex];
                    if (day == null ){
                        startWeekDay ++;
                    }
                    else {
                        break;
                    }
                }
            }
        }

        const dayInMonth = startWeekDay + jalaliDay + 2 ;
        let week = Math.floor(dayInMonth / 7);

        let dayInWeek = dayInMonth % 7
        if (dayInWeek == 0){
            week -= 1;
            dayInWeek = 6;
        }
        else {
            dayInWeek = dayInMonth % 7 - 1;
        }

        return {
            total: {
                year: tools_converter.numPersianToEnglish(year) -1 ,
                month: tools_converter.numPersianToEnglish(month) -1,
                day: tools_converter.numPersianToEnglish(day) -1,
                text: dateStr,
            },
            inMonth: {
                dayStart : startWeekDay ,
                day: jalaliDay ,

                week: week ,
                weekTotal: totalWeek ,
            },
            inWeek:{
                day: dayInWeek
            }
        };
    }

    fn_readyDatePicker(){
        const var_selected_date = this.fn_getPartDate();
        let   year       =   var_selected_date != null && var_selected_date.hasOwnProperty("total") && var_selected_date.total.toString("year") ?   parseInt(var_selected_date.total.year) : -1 ;
        let   month      =   var_selected_date != null && var_selected_date.hasOwnProperty("total") && var_selected_date.total.toString("month") ?   parseInt(var_selected_date.total.month) : -1 ;
        let   day        =   var_selected_date != null && var_selected_date.hasOwnProperty("total") && var_selected_date.total.toString("day") ?   parseInt(var_selected_date.total.day) : -1 ;

        const value = this.fn_jalaliToTimeUnix(year+1 , month+1 , day+1);

        this.set("prop_value" , value != null && value.hasOwnProperty("timeUnix") ? value.timeUnix : null);
    }

    fn_onCLickIconClear(event){
        const data = this._COMPONENT_CONFIG;
        const prop_dateType = data.hasOwnProperty("prop_dateType") ? data.prop_dateType : this._DATE_TYPE_JALALI;

        const today = new Date();
        let jToday = null;
        if (prop_dateType ==  this._DATE_TYPE_JALALI){
            jToday = jalaali.toJalaali(today);
        }
        else if (prop_dateType ==  this._DATE_TYPE_MILADI){
            jToday = {
                jy: today.getFullYear(),
                jm: today.getMonth() + 1, // JS ماه‌ها صفرمبنایی هستند
                jd: today.getDate()
            };

        }


        const value = this.fn_jalaliToTimeUnix(jToday.jy, jToday.jm, jToday.jd);

        this.set("prop_value" , value != null && value.hasOwnProperty("timeUnix") ? value.timeUnix : null);

        this.fn_readyDatePicker()
    }

    fn_onCLickBtnAccept(event){
        this.fn_selectDate(event , true)
    }

    fn_onCLickBtNow(event){
        this.fn_onCLickIconClear(event)
    }

    fn_goToYearSelected(event , yearNum){
        const var_selected_date = this.fn_getPartDate();
        let   month       =   var_selected_date != null && var_selected_date.hasOwnProperty("total") && var_selected_date.total.toString("month") ?   parseInt(var_selected_date.total.month) : -1 ;
        let   day       =   var_selected_date != null && var_selected_date.hasOwnProperty("total") && var_selected_date.total.toString("day") ?   parseInt(var_selected_date.total.day) : -1 ;

        const value = this.fn_jalaliToTimeUnix(yearNum+1 , month+1 , day+1);

        this.set("prop_value" , value != null && value.hasOwnProperty("timeUnix") ? value.timeUnix : null);
    }

    fn_goToYear(event , isNext = false){
        const var_selected_date = this.fn_getPartDate();

        let   year      =   var_selected_date != null && var_selected_date.hasOwnProperty("total") && var_selected_date.total.toString("year") ?   parseInt(var_selected_date.total.year) : -1 ;
        let   month     =   var_selected_date != null && var_selected_date.hasOwnProperty("total") && var_selected_date.total.toString("month") ?   parseInt(var_selected_date.total.month) : -1 ;
        let   day       =   var_selected_date != null && var_selected_date.hasOwnProperty("total") && var_selected_date.total.toString("day") ?   parseInt(var_selected_date.total.day) : -1 ;

        const prop_prevYears     =   this.get("prop_prevYears" , 100);
        const prop_nextYears     =   this.get("prop_nextYears" , 25);

        const datePart = this.fn_getPartDate();
        const thisYear = datePart != null && datePart.hasOwnProperty("total") && datePart.total.hasOwnProperty("year") ? parseInt(datePart.total.year) : this.DEFULAT_YEAR;

        if (isNext && year + 1 <= thisYear + prop_nextYears -2){
            year += 1;
        }
        else if (!isNext && year - 1 >= thisYear - prop_prevYears -1){
            year -= 1;
        }

        const value = this.fn_jalaliToTimeUnix(year+1 , month+1 , day+1);
        this.set("prop_value" , value != null && value.hasOwnProperty("timeUnix") ? value.timeUnix : null);
    }

    fn_goToMonthSelected(event , monthNum = null){
        const var_selected_date = this.fn_getPartDate();
        let   year      =   var_selected_date != null && var_selected_date.hasOwnProperty("total") && var_selected_date.total.toString("year") ?   parseInt(var_selected_date.total.year) : -1 ;
        let   day       =   var_selected_date != null && var_selected_date.hasOwnProperty("total") && var_selected_date.total.toString("day") ?   parseInt(var_selected_date.total.day) : -1 ;

        const value =  this.fn_jalaliToTimeUnix(year+1 , monthNum+1 , day+1);
        this.set("prop_value" , value != null && value.hasOwnProperty("timeUnix") ? value.timeUnix : null);
    }

    fn_goToMonth(event , isNext = false){
        const var_selected_date = this.fn_getPartDate();

        let   year      =   var_selected_date != null && var_selected_date.hasOwnProperty("total") && var_selected_date.total.toString("year") ?   parseInt(var_selected_date.total.year) : -1 ;
        let   month     =   var_selected_date != null && var_selected_date.hasOwnProperty("total") && var_selected_date.total.toString("month") ?   parseInt(var_selected_date.total.month) : -1 ;
        let   day       =   var_selected_date != null && var_selected_date.hasOwnProperty("total") && var_selected_date.total.toString("day") ?   parseInt(var_selected_date.total.day) : -1 ;

        const maxDay = this.fn_getDaysInJalaliMonth(year+1 , isNext ? month+1 : month -1);

        if (isNext ){
            if (month + 1 > 11){
                month = 0;
                year += 1;
            }
            else {
                month += 1;
            }
        }
        else if (!isNext ){
            if (month - 1 <0 ){
                month = 11;
                year -= 1;
            }
            else {
                month -= 1;
            }
        }

        day = day > maxDay ? maxDay : day;

        const value = this.fn_jalaliToTimeUnix(year+1 , month+1 , day+1);
        this.set("prop_value" , value != null && value.hasOwnProperty("timeUnix") ? value.timeUnix : null);
    }

    fn_goToDaySelected(event , dayNum , dayName , dayIndex , weekIndex) {
        const var_selected_date = this.fn_getPartDate();

        const value = this.fn_jalaliToTimeUnix(
            var_selected_date != null && var_selected_date.hasOwnProperty("total") && var_selected_date.total.toString("year") ?   parseInt(var_selected_date.total.year) +1 : -1 ,
            var_selected_date != null && var_selected_date.hasOwnProperty("total") && var_selected_date.total.toString("month") ?   parseInt(var_selected_date.total.month) +1 : -1 ,
            parseInt(dayNum)
        )

        this.set("prop_value" , value != null && value.hasOwnProperty("timeUnix") ? value.timeUnix : null);
    }

    fn_getDigitDatePart(type=null , digit=null){
        const var_selected_date = this.fn_getPartDate();

        const prop_type  =  this.get("prop_type" , this.TYPE_INPUT_ONE_DIGIT);

        let number = 0;
        let value = 0;


        if (prop_type == this.TYPE_INPUT_ONE_DIGIT){
            if (type == this.TYPE_YAER){
                number = var_selected_date != null && var_selected_date.hasOwnProperty("total") && var_selected_date.total.toString("year") ?  ( parseInt(var_selected_date.total.year) +1).toString() : -1 ;
            }
            else if( type == this.TYPE_MONTH){
                const val =   var_selected_date != null && var_selected_date.hasOwnProperty("total") && var_selected_date.total.toString("month") ? (  parseInt(var_selected_date.total.month)+1).toString() : -1 ;
                number = val.length == 1 ? "0" +  val : val;
            }
            else if(type == this.TYPE_DAY){
                const val =   var_selected_date != null && var_selected_date.hasOwnProperty("total") && var_selected_date.total.toString("day") ?  ( parseInt(var_selected_date.total.day)+1 ).toString(): -1 ;
                number = val.length == 1 ? "0" +  val : val;
            }

            if (number != null && number > 0){
                number = number.toString();
                if (number.length > digit-1){
                    value = number[digit-1]
                }
            }
        }
        else if (prop_type == this.TYPE_INPUT_PART_DIGIT || prop_type == this.TYPE_INPUT_FRIZE_DIGIT){
            if (type == this.TYPE_YAER){
                number = var_selected_date != null && var_selected_date.hasOwnProperty("total") && var_selected_date.total.toString("year") ?  ( parseInt(var_selected_date.total.year) +1).toString() : -1 ;
            }
            else if( type == this.TYPE_MONTH){
                const val =   var_selected_date != null && var_selected_date.hasOwnProperty("total") && var_selected_date.total.toString("month") ? (  parseInt(var_selected_date.total.month)+1).toString() : -1 ;
                number = val.length == 1 ? "0" +  val : val;
            }
            else if(type == this.TYPE_DAY){
                const val =   var_selected_date != null && var_selected_date.hasOwnProperty("total") && var_selected_date.total.toString("day") ?  ( parseInt(var_selected_date.total.day)+1 ).toString(): -1 ;
                number = val.length == 1 ? "0" +  val : val;
            }

            value = number.toString();
        }
        else if (prop_type == this.TYPE_INPUT_FULL_DIGIT){

            let yearStr = var_selected_date != null && var_selected_date.hasOwnProperty("total") && var_selected_date.total.toString("year") ?  ( parseInt(var_selected_date.total.year) +1).toString() : -1 ;

            let monthStr =   var_selected_date != null && var_selected_date.hasOwnProperty("total") && var_selected_date.total.toString("month") ? (  parseInt(var_selected_date.total.month)+1).toString() : -1 ;
            monthStr = monthStr.length == 1 ? "0" +  monthStr : monthStr;

            let dayStr =   var_selected_date != null && var_selected_date.hasOwnProperty("total") && var_selected_date.total.toString("day") ?  ( parseInt(var_selected_date.total.day)+1 ).toString(): -1 ;
            dayStr = dayStr.length == 1 ? "0" +  dayStr : dayStr;

            value = yearStr + "/" + monthStr + "/" + dayStr;
        }

        return value;
    }

    fn_onChangeDateDigit(event , type=null , index=null){

        const prop_type  =  this.get("prop_type" , this.TYPE_INPUT_ONE_DIGIT);
        const inputs = document.querySelectorAll(`#${this._COMPONENT_ID} input.inputs-date`)

        inputs.forEach(input => {
            input.addEventListener('blur', () => {
                // یک تأخیر کوتاه برای بررسی اینکه وارد input دیگری نشده
                clearTimeout(this.TIMEINTERVAL_INPUTS);
                this.TIMEINTERVAL_INPUTS = setTimeout(() => {
                    if (![...inputs].some(el => el === document.activeElement)) {

                        let valueTextYear = "";
                        let valueTextMonth = "";
                        let valueTextDay = "";
                        if (prop_type == this.TYPE_INPUT_ONE_DIGIT){
                            for (const index in inputs) {
                                const itemInput = inputs[index]
                                if (index >= 0 && index <=3){
                                    valueTextYear += itemInput.value;
                                }
                                if (index >= 4 && index <=5){
                                    valueTextMonth += itemInput.value;
                                }
                                if (index >= 6 && index <=7){
                                    valueTextDay += itemInput.value;
                                }
                            }
                            //      valueText = valueTextYear + "/" + valueTextMonth + "/" + valueTextDay
                        }
                        else if (prop_type == this.TYPE_INPUT_PART_DIGIT){
                            for (const index in inputs) {
                                const itemInput = inputs[index]
                                if (index ==0){
                                    valueTextYear = itemInput.value;
                                }
                                if (index ==1){
                                    valueTextMonth = itemInput.value;
                                }
                                if (index ==2){
                                    valueTextDay = itemInput.value;
                                }
                            }
                        }
                        else if (prop_type == this.TYPE_INPUT_FULL_DIGIT){
                            const itemInput = inputs[0];

                            let val = itemInput.value.replace(/\D/g, ''); // فقط عددها

                            if (val.length > 8) val = val.slice(0, 8);

                            if (val.length >= 4) valueTextYear = parseInt(val.slice(0, 4));
                            if (val.length >= 6) valueTextMonth = parseInt(val.slice(4, 6));
                            if (val.length >= 8) valueTextDay = parseInt(val.slice(6, 8));
                        }

                        this.fn_commitNewTime(valueTextYear , valueTextMonth , valueTextDay);


                    }
                }, this.TIMEINTERVAL_INPUTS_DURATION); // تاخیر کم برای اینکه اگر به input بعدی رفت متوجه بشیم
            });
        });

    }

    fn_commitNewTime(year , month , day){

        /// year
        year = parseInt(year);
        const prop_prevYears     =   this.get("prop_prevYears" , 100);
        const prop_nextYears     =   this.get("prop_nextYears" , 25);

        const datePart = this.fn_getPartDate();
        const thisYear = datePart != null && datePart.hasOwnProperty("year") ? parseInt(datePart.year) : this.DEFULAT_YEAR;

        if (year > thisYear + prop_nextYears -1 ){
            year = thisYear + prop_nextYears -1 ;
        }
        else if (year < thisYear - prop_prevYears - 1){
            year = thisYear - prop_prevYears;
        }

        /// month
        month = parseInt(month).toString().padStart(2, '0');
        month = parseInt(month);
        month = month > 12 ? 12 : month;
        month = month == 0 ? 1 : month;

        /// day
        day =  parseInt(day).toString().padStart(2, '0');
        day =  parseInt(day);

        const maxDay = this.fn_getDaysInJalaliMonth(year+1 , month+1);
        day =  day > maxDay ? maxDay : day;
        day =  day == 0 ? 1 : day;

        if (year >0 && month>0 && day>0){
            /// value
            const value = this.fn_jalaliToTimeUnix(year , month , day);
            this.set("prop_value" , value != null && value.hasOwnProperty("timeUnix") ? value.timeUnix : null);
        }
    }

    fn_commitNewDate(event ){
        let year = 0;
        let month = 0;
        let day = 0;
        if (event.key === "Enter") {
            let val = event.target.value.replace(/\D/g, '');

            if (val.length > 8) val = val.slice(0, 8);

            if (val.length >= 4) year = parseInt(val.slice(0, 4));
            if (val.length >= 6) month = parseInt(val.slice(4, 6));
            if (val.length >= 8) day = val.slice(6, 8);

            this.fn_commitNewTime(year , month , day , null);
        }
    }



    fn_moveToNext(event , nextFieldID , type=null){
        const prop_type  =  this.get("prop_type" , this.TYPE_INPUT_ONE_DIGIT);

        let statusMove = false;
        const valPart = event.target.value;

        if (prop_type == this.TYPE_INPUT_ONE_DIGIT){
            statusMove = true;
        }
        else if (prop_type == this.TYPE_INPUT_PART_DIGIT){

            let number = 0;
            if (type == this.TYPE_YAER){
                if (valPart.length == 4){
                    statusMove = true
                }
            }
            else if( type == this.TYPE_MONTH){
                if (valPart.length == 2){
                    statusMove = true
                }
            }
            else if(type == this.TYPE_DAY){
                if (valPart.length == 2){
                    statusMove = true
                }
            }
        }

        if (statusMove){
            if (event.key !== 'Backspace' && event.target.value !== '') {
                if (nextFieldID !== '') {
                    const el =  document.getElementById(nextFieldID);

                    if (el != null){
                        el.focus();
                    }
                }
            }
        }
    }

    fn_moveToPrev(event , prevFieldID , type=null , digit=null){
        const prop_type  =  this.get("prop_type" , this.TYPE_INPUT_ONE_DIGIT);

        let statusMove = false;
        const valPart = event.target.value;

        if (prop_type == this.TYPE_INPUT_ONE_DIGIT){
            statusMove = true;
        }
        else if (prop_type == this.TYPE_INPUT_PART_DIGIT){
            statusMove = true
        }


        if (statusMove){
            if (event.key === 'Backspace' && event.target.value === '') {
                if (prevFieldID !== '') {
                    const el = document.getElementById(prevFieldID);
                    if (el != null){
                        el.focus();
                    }
                }
            }
        }
    }

    fn_onFocus(event , myElId){
        const prop_type  =  this.get("prop_type" , this.TYPE_INPUT_ONE_DIGIT);

        if (prop_type == this.TYPE_INPUT_ONE_DIGIT || prop_type == this.TYPE_INPUT_PART_DIGIT){

            const el = document.getElementById(myElId);
            if (el != null){
                el.select();

                // if (myElId == "Date_8"){
                //     el.select();
                // }
                // else {
                //     el.value = "";
                // }
            }

        }
    }


}


/*-------------------------------------
 010-011) Component OTP
-------------------------------------*/
class ComponentOtpBase extends ComponentBase{

    /* ---------------------------------------------
        PROPERTYs Pattern
     --------------------------------------------- */
    _COMPONENT_PATTERN = {
        prop_size: {
            prop: "prop_size",
            default: tools_css.standardSizes.m.name
        },
        prop_name: {
            prop: "prop_name",
            default: "otp"
        },
        prop_input: {
            prop: "prop_input",
            default: null
        },
        prop_langs: {
            prop: "prop_langs",
            default: {
                _title_otp_description: "کد برای شماره/ایمیل زیر ارسال شد",
                _tooltip_otp_description: null,
            }
        },
        prop_length: {
            prop: "prop_length",
            default: 6
        },
    };

    /* ---------------------------------------------
           PROPERTYs Props
    --------------------------------------------- */
    _COMPONENT_PROPS = {
        part_structure: [],

        part_value: [

        ],

        part_elements: [],

        part_label: [
            this._COMPONENT_PATTERN.prop_name,
            this._COMPONENT_PATTERN.prop_input,
            this._COMPONENT_PATTERN.prop_langs,
            this._COMPONENT_PATTERN.prop_size,
        ],

        part_inputs: [
            this._COMPONENT_PATTERN.prop_name,
            this._COMPONENT_PATTERN.prop_length,
            this._COMPONENT_PATTERN.prop_size
        ],

        part_timerDown: [
            this._COMPONENT_PATTERN.prop_size ,
            this._COMPONENT_PATTERN.prop_langs ,
        ]
    };



    /* ---------------------------------------------
   PROPERTYs Schema
   --------------------------------------------- */
    _COMPONENT_SCHEMA = {
        part_structure: {
            part_value: {} ,
            part_elements: {
                part_label: {} ,
                part_inputs: {} ,
                part_timerDown: {} ,
            } ,
        } ,
    }

}
window.ComponentOtp = class ComponentOtp extends ComponentOtpBase{

    _OTP_TIMER = null;

    /* ---------------------------------------------
       SETUP
   --------------------------------------------- */
    constructor(elId , config) {
        super(
            listComponent[ComponentOtp.name] ,
            elId
        );
        super.renderComponent(config);
    }



    /* ---------------------------------------------
     TEMPLATEs
    --------------------------------------------- */
    componentFn(){
        this.templateFn("part_label");
        this.templateFn("part_timerDown");
    }
    templateFn(partName = null){
        switch (partName){
            case "part_structure":
                return this.template_render_structure(partName);
            case "part_value":
                return this.template_render_value(partName);
            case "part_elements":
                return this.template_render_elements(partName);
            case "part_inputs":
                return this.template_render_inputs(partName);
            case "part_label":
                return this.componentFn_render_label(partName);
            case "part_timerDown":
                return this.componentFn_render_timerDown(partName);
            default:
                return this.templateBasic_render();
        }
    }

    template_render_structure(partName) {
        const content = `
      ${this.templateFn("part_value") ?? ""}
      
      ${this.templateFn("part_elements") ?? ""}
                `;
        return this.templateBasic_render_structure(content);
    }

    template_render_value(partName) {

        const data = this.getPartProps(partName)
        if (data != null){

            return `
<section data-part-name="${partName}" 
         id="component-tabs-value-${ this._COMPONENT_RANDOM_ID}" 
         class="" >
         
     <style>
         #${this._COMPONENT_ID} #component-tabs-value-${ this._COMPONENT_RANDOM_ID}{
         
         }
     </style>
     
     <input type="hidden" name="otp_value_${ this._COMPONENT_RANDOM_ID}" value=""/>
     
</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;

    }

    template_render_elements(partName){

        const data = this.getPartProps(partName)

        if (data != null){

            return `
<section data-part-name="${partName}" 
         id="component-otp-elements-${ this._COMPONENT_RANDOM_ID}" 
         class="" >
         
     <style>
         #${this._COMPONENT_ID} #component-otp-elements-${ this._COMPONENT_RANDOM_ID}{
         
         }
     </style>
     
     <section class="component-element-structure mb-2">
     
          <component-label id="component-otp-label-${ this._COMPONENT_RANDOM_ID}"></component-label>

          ${this.templateFn("part_inputs") ?? ""}
          
          <component-timer-down id="component-otp-timer-down-${ this._COMPONENT_RANDOM_ID}"></component-timer-down>
          
     </section>
</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    template_render_inputs(partName){

        const data = this.getPartProps(partName)

        if (data != null){

            const prop_name             =   data.hasOwnProperty("prop_name")             ?  data.prop_name             :  "otp";
            const prop_length           =   data.hasOwnProperty("prop_length")           ?  data.prop_length           :  6;
            const prop_size             =   data.hasOwnProperty("prop_size")             ?  data.prop_size             : null;

            const elHeight = tools_css.getHeightSize(prop_size);
            const elfontSize = tools_css.getFontSize(prop_size);

            let inputHtmls = "";
            for (let num=0; num<prop_length; num++){

                inputHtmls += `
<input  id="component-otp-inputs-${ this._COMPONENT_RANDOM_ID}-${prop_name}${num}" 
        oninput="${this.getFn("fn_onMoveToNext" , "event" , (num < prop_length-1 ? `'component-otp-inputs-${ this._COMPONENT_RANDOM_ID}-${prop_name}${num+1}'` : null) )}" 
        onkeydown="${num > 0 ?  this.getFn("fn_onMoveToPrev" , "event" , `'component-otp-inputs-${ this._COMPONENT_RANDOM_ID}-${prop_name}${num-1}'`)  : ''}" 
        onfocus="${this.getFn("fn_onFocus" , "event" , `'component-otp-inputs-${ this._COMPONENT_RANDOM_ID}-${prop_name}${num}'`)}"
        type="text"  maxlength="1"
        class="input-otp my-1 mx-2 text-center  form-control rounded-0  border rounded shadow-sm font-10pt"  />
`;
            }

            return `
<section data-part-name="${partName}" 
         id="component-otp-inputs-${ this._COMPONENT_RANDOM_ID}" 
         class="" >
         
     <style>
         #${this._COMPONENT_ID} #component-otp-inputs-${ this._COMPONENT_RANDOM_ID} .form-otp{
             direction: ltr !important;
          }
         #${this._COMPONENT_ID} #component-otp-inputs-${ this._COMPONENT_RANDOM_ID} .input-otp{
             height: ${elHeight}px;
             line-height: ${elHeight}px;
          }
     </style>
     
     <div class="form-otp inputs d-flex flex-row justify-content-center">
         ${inputHtmls}
     </div>
     
</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    componentFn_render_timerDown(partName){

        const data = this.getPartProps(partName)
        if (data != null){

            const prop_size             =   data.hasOwnProperty("prop_size")             ?  data.prop_size             : 0;
            const prop_langs            =   data.hasOwnProperty("prop_langs")            ?  data.prop_langs            : {};

            const elHeight = tools_css.getHeightSize(prop_size);
            const elfontSize = tools_css.getFontSize(prop_size);

            this._OTP_TIMER = new window.ComponentTimerDown(
                `component-otp-timer-down-${ this._COMPONENT_RANDOM_ID}` ,
                {
                    prop_description: prop_langs.hasOwnProperty("_tooltip_otp_description") ? prop_langs._tooltip_otp_description : null ,

                    fn_onBackClick: (event)=>{
                        this.fn_onGetNewToken();
                    } ,
                    fn_onFinishTimer: (event)=>{
                        this.fn_onFinishToken();
                    } ,
                }
            );
        }


    }

    componentFn_render_label(partName){

        const data = this.getPartProps(partName)
        if (data != null){

            const prop_name             =   data.hasOwnProperty("prop_name")             ?  data.prop_name             :  "otp";
            const prop_langs            =   data.hasOwnProperty("prop_langs")            ?  data.prop_langs            : {};
            const prop_input            =   data.hasOwnProperty("prop_input")            ?  data.prop_input            :  null;

            this.componentFneBasic_render_structure(
                `component-otp-label-${ this._COMPONENT_RANDOM_ID}` ,
                {
                    prop_title:
                        `
<p class="title-otp text-center  mb-0 px-2 ">
    ${prop_langs.hasOwnProperty("_title_otp_description") ? prop_langs._title_otp_description : ""}
    <b style="display:block; direction: ltr">
       ${prop_input}
    </b>
</p>
                `,
                    prop_for:  `component-otp-inputs-${ this._COMPONENT_RANDOM_ID}-${prop_name}0`,
                }
            );
        }


    }



    /* ---------------------------------------------
      FUNCTIONs
     --------------------------------------------- */
    fn_getElValue(){
        return document.querySelector(` #${this._COMPONENT_ID} #component-tabs-value-${ this._COMPONENT_RANDOM_ID} input`);
    }

    fn_onGetValue(){
        let resultExp = "";

        const data = this._COMPONENT_CONFIG;

        if ( data.hasOwnProperty("prop_length") && data.hasOwnProperty("prop_name") ){
            const prop_length  = data.prop_length;
            const prop_name    = data.prop_name;

            for (let i=0 ; i<prop_length; i++){
                const partEl = document.querySelector(`input#component-otp-inputs-${ this._COMPONENT_RANDOM_ID}-${prop_name}${i}`);
                const partValue = partEl.value;
                resultExp += partValue;
            }
        }

        const elValue = this.fn_getElValue();
        elValue.value = resultExp;

        return resultExp;
    }



    fn_onMoveToNext(event , nextFieldID){
        if (event.key !== 'Backspace' && event.target.value !== '') {
            if (nextFieldID !== '') {
                const el = document.getElementById(nextFieldID);
                if (el != null){
                    el.focus();
                }
            }
        }
        this.fn_onGetValue();
    }

    fn_onMoveToPrev(event , prevFieldID){
        if (event.key === 'Backspace' && event.target.value === '') {
            if (prevFieldID !== '') {
                const el = document.getElementById(prevFieldID);
                if (el != null){
                    el.focus();
                }
            }
        }
        this.fn_onGetValue();
    }

    fn_onFocus(event , myElId){
        const el = document.getElementById(myElId);
        if (el != null){
            el.value = "";
        }
        this.fn_onGetValue();
    }

    call_startCountdown(durationForEnd){
        const now = new Date().getTime();

        this._OTP_TIMER.call_startCountdown(
            now + durationForEnd*60*1000
        );
    }

    call_getValue(){
        const elValue = this.fn_getElValue();
        return elValue.value
    }


    fn_onGetNewToken(){
        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("fn_onGetNewToken") && typeof data.fn_onGetNewToken != null){
            if (this._TIME_INTRVAl != null){
                clearInterval(this._TIME_INTRVAl);
            }
            data.fn_onGetNewToken();
        }
    }

    fn_onFinishToken(){
        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("fn_onFinishToken") && typeof data.fn_onFinishToken != null){
            data.fn_onFinishToken();
        }
    }
}


/*-------------------------------------
 010-012) Component Select Option
-------------------------------------*/
class ComponentSelectOptionBase extends ComponentBase{

    /* ---------------------------------------------
        PROPERTYs Pattern
   --------------------------------------------- */
    _COMPONENT_PATTERN = {
        prop_name: {
            prop: "prop_name",
            default: ""
        },
        prop_backgroundColorForm: {
            prop: "prop_backgroundColorForm",
            default: tools_const?.styles?.selectOption?.backgroundColor_form ?? ""
        },
        prop_colorIcon: {
            prop: "prop_colorIcon",
            default: tools_const?.styles?.selectOption?.color_icon ?? ""
        },
        prop_itemSelected: {
            prop: "prop_itemSelected",
            default: null
        },
        prop_title: {
            prop: "prop_title",
            default: "title"
        },

        prop_titleClass: {
            prop: "prop_titleClass",
            default: [" px-2"]
        },
        prop_titleStyles: {
            prop: "prop_titleStyles",
            default: {}
        },
        prop_icon: {
            prop: "prop_icon",
            default: null
        },
        prop_options: {
            prop: "prop_options",
            default: []
        },
        prop_btnAddStatus: {
            prop: "prop_btnAddStatus",
            default: false
        },
        prop_placeholder: {
            prop: "prop_placeholder",
            default: null
        },
        prop_size: {
            prop: "prop_size",
            default: tools_css.standardSizes.m.name,
        },
        prop_btnAddIcon: {
            prop: "prop_btnAddIcon",
            default: "&plus;"
        },
        prop_btnAddTitle: {
            prop: "prop_btnAddTitle",
            default: "add item"
        },
        prop_btnAddClass: {
            prop: "prop_btnAddClass",
            default: []
        },
        var_showFormSelectOption: {
            prop: "var_showFormSelectOption",
            default: false
        },
        prop_optionHeight: {
            prop: "prop_optionHeight",
            default: 200
        },
        prop_optionWidth: {
            prop: "prop_optionWidth",
            default: "100%"
        },
        prop_optionStyles: {
            prop: "prop_optionStyles",
            default: {}
        },
        prop_positionTop: {
            prop: "prop_positionTop",
            default: ""
        },
        prop_positionLeft: {
            prop: "prop_positionLeft",
            default: ""
        },
        prop_positionBottom: {
            prop: "prop_positionBottom",
            default: ""
        },
        prop_positionRight: {
            prop: "prop_positionRight",
            default: ""
        },
        prop_listIcons: {
            prop: "prop_listIcons",
            default: null
        },
        prop_firstCallback: {
            prop: "prop_firstCallback",
            default: false
        },
        prop_optionItemNotSelectedBackground: {
            prop: "prop_optionItemNotSelectedBackground",
            default: tools_const?.styles?.selectOption?.backgroundColor_itemNotSelected || ""
        },
        prop_optionItemHoverBackground: {
            prop: "prop_optionItemHoverBackground",
            default: tools_const?.styles?.selectOption?.backgroundColor_itemHover || ""
        },
        prop_optionItemSelectedBackground: {
            prop: "prop_optionItemSelectedBackground",
            default: tools_const?.styles?.selectOption?.backgroundColor_itemSelected || ""
        },
        prop_optionItemSelectedColor: {
            prop: "prop_optionItemSelectedColor",
            default: tools_const?.styles?.selectOption?.color_itemSelected || ""
        },
        var_searcherSelectOption: {
            prop: "var_searcherSelectOption",
            default: ""
        }
    };


    /* ---------------------------------------------
           PROPERTYs Props
    --------------------------------------------- */
    _COMPONENT_PROPS = {
        part_structure: [
            this._COMPONENT_PATTERN.prop_size
        ],

        part_value: [
            this._COMPONENT_PATTERN.prop_name,
            this._COMPONENT_PATTERN.prop_itemSelected
        ],

        part_label: [

        ],

        part_header: [
            this._COMPONENT_PATTERN.prop_titleClass,
            this._COMPONENT_PATTERN.prop_titleStyles,
            this._COMPONENT_PATTERN.prop_backgroundColorForm,
            this._COMPONENT_PATTERN.prop_size
        ],

        part_header_icon: [
            this._COMPONENT_PATTERN.prop_icon ,
            this._COMPONENT_PATTERN.prop_size ,
            this._COMPONENT_PATTERN.prop_colorIcon ,
        ],

        part_header_title: [
            this._COMPONENT_PATTERN.prop_icon,
            this._COMPONENT_PATTERN.prop_options,
            this._COMPONENT_PATTERN.prop_itemSelected,
            this._COMPONENT_PATTERN.prop_btnAddStatus,
            this._COMPONENT_PATTERN.prop_placeholder,
            this._COMPONENT_PATTERN.prop_size
        ],

        part_header_button: [
            this._COMPONENT_PATTERN.prop_btnAddStatus,
            this._COMPONENT_PATTERN.prop_btnAddIcon,
            this._COMPONENT_PATTERN.prop_btnAddTitle,
            this._COMPONENT_PATTERN.prop_btnAddClass ,
            this._COMPONENT_PATTERN.prop_size ,
        ],

        part_header_arrow_icon: [
            this._COMPONENT_PATTERN.prop_btnAddStatus,
            this._COMPONENT_PATTERN.var_showFormSelectOption
        ],

        part_body: [
            this._COMPONENT_PATTERN.prop_optionHeight,
            this._COMPONENT_PATTERN.prop_optionWidth,
            this._COMPONENT_PATTERN.prop_optionStyles,
            this._COMPONENT_PATTERN.prop_positionTop,
            this._COMPONENT_PATTERN.prop_positionLeft,
            this._COMPONENT_PATTERN.prop_positionBottom,
            this._COMPONENT_PATTERN.prop_positionRight
        ],

        part_body_searcher: [
            this._COMPONENT_PATTERN.prop_colorIcon ,
            this._COMPONENT_PATTERN.prop_size ,
        ],

        part_body_options: [
            this._COMPONENT_PATTERN.prop_listIcons,
            this._COMPONENT_PATTERN.prop_firstCallback,
            this._COMPONENT_PATTERN.prop_itemSelected,
            this._COMPONENT_PATTERN.prop_options,
            this._COMPONENT_PATTERN.prop_optionItemNotSelectedBackground,
            this._COMPONENT_PATTERN.prop_optionItemHoverBackground,
            this._COMPONENT_PATTERN.prop_optionItemSelectedBackground,
            this._COMPONENT_PATTERN.prop_optionItemSelectedColor,
            this._COMPONENT_PATTERN.var_searcherSelectOption,
            this._COMPONENT_PATTERN.prop_size
        ]
    };



    /* ---------------------------------------------
   PROPERTYs Schema
   --------------------------------------------- */
    _COMPONENT_SCHEMA = {
        part_structure: {
            part_value: {} ,
            part_label: {} ,
            part_header: {
                part_header_icon: {} ,
                part_header_title: {} ,
                part_header_arrow_icon: {} ,
                part_header_button: {} ,
            } ,
            part_body: {
                part_body_searcher:{} ,
                part_body_options:{} ,
            }
        } ,
    }


}
window.ComponentSelectOption = class ComponentSelectOption extends ComponentSelectOptionBase {

    var_showFormSelectOption = false;

    /* ---------------------------------------------
       SETUP
   --------------------------------------------- */
    constructor(elId , config) {
        super(
            listComponent[ComponentSelectOption.name] ,
            elId
        );
        super.renderComponent(config);
    }


    /* ---------------------------------------------
      TEMPLATEs
    --------------------------------------------- */
    componentFn(screanWidthType){
        this.templateFn("part_label");
        this.templateFn("part_header_icon" );
        this.templateFn("part_header_arrow_icon" );
        this.templateFn("part_header_button" );
        this.templateFn("part_body" );
        this.templateFn("part_body_searcher" );


        this.onRegisterFinish().then(el => {
            this.fn_firstCallback();
            this.fn_closeWhenClickOutside();
        })
    }
    templateFn(partName = null){

        switch (partName){
            case "part_structure":
                return this.template_render_structure(partName);
            case "part_value":
                return this.template_render_value(partName);
            case "part_label":
                return this.componentFn_render_label(partName);
            case "part_header":
                return this.template_render_header(partName);
            case "part_header_icon":
                return this.componentFn_render_headerIcon(partName);
            case "part_header_arrow_icon":
                return this.componentFn_render_headerArrowIcon(partName);
            case "part_header_button":
                return this.componentFn_render_headerButton(partName);
            case "part_header_title":
                return this.template_render_headerTitle(partName);
            case "part_body":
                return this.componentFn_render_body(partName);
            case "part_body_searcher":
                return this.componentFn_render_bodySearcher(partName);
            case "part_body_options":
                return this.template_render_bodyOptions(partName);
            default:
                return this.templateBasic_render();
        }
    }

    template_render_structure(partName ) {
        const data = this.getPartProps(partName)

        const content = `
      
     <style>
         #${this._COMPONENT_ID} #component-select-option-form-position-element-${ this._COMPONENT_RANDOM_ID}{
             z-index: ${tools_css.getZIndex(tools_css.standardZIndex.tools.name, 10)};
             position:relative; 
         }
     </style>
     
      <component-label id="component-select-option-label-${ this._COMPONENT_RANDOM_ID}"></component-label>
     
      ${this.templateFn("part_value") ?? ""}
      
      ${this.templateFn("part_header") ?? ""}
      
      <div id="component-select-option-form-position-element-${ this._COMPONENT_RANDOM_ID}">
          <component-position-element id="component-select-option-position-element-${ this._COMPONENT_RANDOM_ID}">
                <component-body>
                
                    <component-input id="component-select-option-body-searcher-${ this._COMPONENT_RANDOM_ID}"></component-input>    
                    
                    ${this.templateFn("part_body_options") ?? ""}
                    
                 </component-body>
          </component-position-element>
      </div>
                `;
        return this.templateBasic_render_structure(content);
    }

    template_render_value(partName ) {

        const data = this.getPartProps(partName)

        if (data != null){
            const prop_name               =   data.hasOwnProperty("prop_name")                ?  data.prop_name                 :  "";
            const prop_itemSelected       =   data.hasOwnProperty("prop_itemSelected")        ?  data.prop_itemSelected         : null;

            return `
<section data-part-name="${partName}" 
         id="component-select-option-value-${ this._COMPONENT_RANDOM_ID}" 
         class="" >
         
     <style>
         #${this._COMPONENT_ID} #component-select-option-value-${ this._COMPONENT_RANDOM_ID}{
             
         }
     </style>
     
      <input name="${prop_name}"  value="${prop_itemSelected != null ? prop_itemSelected : '' }" type="hidden"/>
       
</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    template_render_header(partName ) {

        const data = this.getPartProps(partName)

        if (data != null){
            const prop_titleClass           =  data.hasOwnProperty("prop_titleClass")                ?  data.prop_titleClass                    :  [];
            const prop_titleStyles          =  data.hasOwnProperty("prop_titleStyles")               ?  data.prop_titleStyles                   :  {};
            const prop_size                 =  data.hasOwnProperty("prop_size")                      ?  data.prop_size                          :  null;
            const prop_backgroundColorForm  =  data.hasOwnProperty("prop_backgroundColorForm")       ?  data.prop_backgroundColorForm           :  "";

            const elHeight = tools_css.getHeightSize(prop_size);

            return `
<section data-part-name="${partName}" 
         id="component-select-option-header-${ this._COMPONENT_RANDOM_ID}" 
         class="${tools_public.renderListClass(prop_titleClass)} form-control position-relative p-0 rounded-0"  
         onclick="${this.getFn('fn_showListOptions' , 'event')}">
     <style>
         #${this._COMPONENT_ID} #component-select-option-header-${ this._COMPONENT_RANDOM_ID}{
               height: ${elHeight+2}px;
               background-color: ${prop_backgroundColorForm};
       
               ${tools_public.renderListStyle(prop_titleStyles)}
               cursor: pointer;
         }
         
         @media (max-width: 768px) {
               #${this._COMPONENT_ID} #component-select-option-header-button-text-${ this._COMPONENT_RANDOM_ID}{
                    display: none;
               }
               #${this._COMPONENT_ID} #component-select-option-header-button-icon-${ this._COMPONENT_RANDOM_ID}{
                 
               }
         }
     </style>
     
           ${this.templateFn("part_header_title") ?? ""}
           
           <component-icon id="component-select-option-header-icon-arrow-${ this._COMPONENT_RANDOM_ID}"></component-icon>
           
           <component-icon id="component-select-option-header-icon-${this._COMPONENT_RANDOM_ID}" ></component-icon>
           
           <component-button id="component-select-option-header-button-${ this._COMPONENT_RANDOM_ID}"></component-button>
     
</section>
            `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    template_render_headerTitle(partName ) {
        const data = this.getPartProps(partName)

        if (data != null){
            const screanWidthType = tools_css.getScreenWidth();

            const prop_options              =  data.hasOwnProperty("prop_options")                   ?  data.prop_options                       : [];
            const prop_itemSelected         =  data.hasOwnProperty("prop_itemSelected")              ?  data.prop_itemSelected                  : [];
            const prop_btnAddStatus         =  data.hasOwnProperty("prop_btnAddStatus")              ?  data.prop_btnAddStatus                  : false;
            const prop_placeholder          =  data.hasOwnProperty("prop_placeholder")               ?  data.prop_placeholder                   : null;
            const prop_icon                 =  data.hasOwnProperty("prop_icon")                      ?  data.prop_icon                          : null;
            const directionRtl              =  this._COMPONENT_CONFIG.hasOwnProperty("directionRtl") ? this._COMPONENT_CONFIG.directionRtl      : false;
            const prop_size                 =  data.hasOwnProperty("prop_size")                      ?  data.prop_size                          :  0;

            const elfontSize = tools_css.getFontSize(prop_size);
            const elHeight = tools_css.getHeightSize(prop_size);

            const var_itemSelectedTitle =this.fn_getItemSelectedTitle(prop_options , prop_itemSelected , prop_placeholder)

            let padding = "180px"
            if (screanWidthType == tools_css?.standardScreanWidth?.xs?.name){
                padding = "35px";
            }

            return `
<section data-part-name="${partName}"
         id="component-select-option-header-title-${ this._COMPONENT_RANDOM_ID}"
         class=" d-block ${prop_icon != null ? "border": ""} ${prop_btnAddStatus ? "" : "rounded-0"} bg-white " >
     <style>
         #${this._COMPONENT_ID} #component-select-option-header-title-${ this._COMPONENT_RANDOM_ID}{
            ${directionRtl ? "margin-right" : "margin-left"} : ${prop_icon != null ? "30px" : "0"} ;
            ${directionRtl ? "padding-left" : "padding-right"} : 25px ;
            ${directionRtl ? `right : 0` :`left : 0` };
            width: calc(100% - ${prop_btnAddStatus ? (screanWidthType == tools_css?.standardScreanWidth?.xs?.name ? "30px" : "160px") : "0px"} - ${prop_icon != null ? "30px" : "0px"});
            ${directionRtl ? "border-top-right-radius: 0 !important" : "border-top-left-radius: 0 !important" } ;
            ${directionRtl ? "border-bottom-right-radius: 0 !important" : "border-bottom-left-radius: 0 !important" } ;
            height: ${elHeight}px;
            line-height: ${elHeight}px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            font-size: ${elfontSize}px;
            position: absolute;
            top: 0;
         }
     </style>

     <b class="select-title-${ this._COMPONENT_RANDOM_ID}  w-100 d-block position-relative text-center ">

        ${var_itemSelectedTitle}

     </b>

</section>
            `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    template_render_bodyOptions(partName ) {

        const data = this.getPartProps(partName)

        if (data != null){

            const directionRtl                           =  this._COMPONENT_CONFIG.hasOwnProperty("directionRtl")            ? this._COMPONENT_CONFIG.directionRtl             : false;

            const prop_listIcons                         =  data.hasOwnProperty("prop_listIcons")                            ?  data.prop_listIcons                            :  null;
            const prop_options                           =  data.hasOwnProperty("prop_options")                              ?  data.prop_options                              :  [];
            const prop_itemSelected                      =  data.hasOwnProperty("prop_itemSelected")                         ?  data.prop_itemSelected                         :   null;
            const prop_optionItemNotSelectedBackground   =  data.hasOwnProperty("prop_optionItemNotSelectedBackground")      ?  data.prop_optionItemNotSelectedBackground      :  "";
            const prop_optionItemHoverBackground         =  data.hasOwnProperty("prop_optionItemHoverBackground")            ?  data.prop_optionItemHoverBackground            :  "";
            const prop_optionItemSelectedBackground      =  data.hasOwnProperty("prop_optionItemSelectedBackground")         ?  data.prop_optionItemSelectedBackground         :  "";
            const prop_optionItemSelectedColor           =  data.hasOwnProperty("prop_optionItemSelectedColor")              ?  data.prop_optionItemSelectedColor              :  "";
            const prop_size                              =  data.hasOwnProperty("prop_size")                                 ?  data.prop_size                                 :  null;
            const var_searcherSelectOption               =  data.hasOwnProperty("var_searcherSelectOption")                  ?  data.var_searcherSelectOption                  :  "";

            const optionHtml = this.fn_onGetBodyOptions(prop_options , prop_itemSelected , var_searcherSelectOption , prop_listIcons , directionRtl);

            const elHeight = tools_css.getHeightSize(prop_size);
            const elfontSize = tools_css.getFontSize(prop_size);

            return `
<section data-part-name="${partName}" 
         id="component-select-option-body-options-${ this._COMPONENT_RANDOM_ID}" 
         class="h-100 d-block mt-2" >
     <style>
         #${this._COMPONENT_ID} #component-select-option-body-options-${ this._COMPONENT_RANDOM_ID}{
                  
         }
         #${this._COMPONENT_ID} #component-select-option-body-options-element-${ this._COMPONENT_RANDOM_ID}{
              height: calc(100% - 45px);
         }
         #${this._COMPONENT_ID} .component-select-option-body-options-item-${this._COMPONENT_RANDOM_ID}{
             background-color:    ${prop_optionItemNotSelectedBackground};
             width:               calc(100% - 20px);
             height:              ${elHeight}px;
             font-size:           ${elfontSize}px;
             padding:             3px ${25 * (prop_listIcons!= null && prop_listIcons.length > 0 ? prop_listIcons.length : 1)}px 3px 10px!important;
             white-space:         nowrap;
             overflow:            hidden;
             text-overflow:       ellipsis;
         }
         #${this._COMPONENT_ID} .component-select-option-body-options-item-${this._COMPONENT_RANDOM_ID}:hover{
             background-color: ${prop_optionItemHoverBackground};
             color: white;
             cursor: pointer;
         }
         #${this._COMPONENT_ID} .component-select-option-body-options-item-selected-${this._COMPONENT_RANDOM_ID}{
             background-color: ${prop_optionItemSelectedBackground};
             color: ${prop_optionItemSelectedColor};
         }
         
         #${this._COMPONENT_ID} .component-select-option-body-options-item-icon-${this._COMPONENT_RANDOM_ID}{
             cursor:               pointer;
             margin:               0 2.5px;
             font-size:            18pt;
             line-height:          15pt;
             top:                  50%;
             position:             absolute;
             transform:            translate(0 , -50%);
         }
     </style>
       
     <div id="component-select-option-body-options-element-${ this._COMPONENT_RANDOM_ID}"
          class="overflow-auto">
         ${optionHtml}
     </div>
       
</section>
            `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    componentFn_render_label(partName ) {
        this.componentFneBasic_render_structure(
            `component-select-option-label-${ this._COMPONENT_RANDOM_ID}` ,
            {
                prop_for: `component-select-option-header-${ this._COMPONENT_RANDOM_ID}` ,
                fn_callback: ()=>{
                    this.runFn("fn_showListOptions" , "event" )
                }
            }
        );
    }

    componentFn_render_headerIcon(partName ) {

        const data = this.getPartProps(partName)

        if (data != null){
            const directionRtl       =  this._COMPONENT_CONFIG.hasOwnProperty("directionRtl") ? this._COMPONENT_CONFIG.directionRtl      : false;
            const prop_icon          =   data.hasOwnProperty("prop_icon")                     ?  data.prop_icon                          :  null;
            const prop_size          =  data.hasOwnProperty("prop_size")                      ?  data.prop_size                          :  null;
            const prop_colorIcon     =  data.hasOwnProperty("prop_colorIcon")                 ?  data.prop_colorIcon                     :  "";

            const elHeight = tools_css.getHeightSize(prop_size);
            const elfontSize = tools_css.getFontSize(prop_size);

            let styles = {
                "z-index" : `${tools_css.getZIndex(tools_css.standardZIndex.tools_btn.name, 10)}`  ,
                "cursor" : "pointer",
                "top" : "50%" ,
                "color" : prop_colorIcon ,
            }
            if (directionRtl){
                styles["right"]= "0";
                styles["transform"]= "translate(-5px , -50%)" ;
            }
            else {
                styles["left"]= "0";
                styles["transform"]= "translate(5px , -50%)" ;
            }

            if (prop_icon != null){
                new window.ComponentIcon(
                    `component-select-option-header-icon-${this._COMPONENT_RANDOM_ID}` ,
                    {
                        prop_icon: typeof prop_icon == "function" ? prop_icon(elHeight , prop_colorIcon) : prop_icon,

                        prop_iconClass : ["position-absolute"] ,
                        prop_iconStyles : styles ,
                    }
                )
            }

        }
    }

    componentFn_render_headerArrowIcon(partName ) {

        const data = this.getPartProps(partName)

        if (data != null){
            const screanWidthType = tools_css.getScreenWidth();

            const directionRtl              =  this._COMPONENT_CONFIG.hasOwnProperty("directionRtl")  ? this._COMPONENT_CONFIG.directionRtl      : false;
            const prop_btnAddStatus         =  data.hasOwnProperty("prop_btnAddStatus")               ?  data.prop_btnAddStatus                  : false;
            const var_showFormSelectOption  =  data.hasOwnProperty("var_showFormSelectOption")        ?  data.var_showFormSelectOption           : false;

            let styles = {
                "font-size" : "20pt",
                "margin" : "0 10px",
                "top" : "50%",
            }
            if (directionRtl){
                if (screanWidthType == tools_css?.standardScreanWidth?.xs?.name){
                    styles["left"]=  "0px";
                    styles["transform"]= prop_btnAddStatus ? "translate(30px , -50%)" : "translate(0 , -50%)";
                }
                else{
                    styles["left"]=  "0px";
                    styles["transform"]= prop_btnAddStatus ? "translate(160px , -50%)" : "translate(0 , -50%)";
                }
            }
            else {
                if (screanWidthType == tools_css?.standardScreanWidth?.xs?.name){
                    styles["right"]=  "0px";
                    styles["transform"]= prop_btnAddStatus ? "translate(-30px , -50%)" :  "translate(0 , -50%)";
                }
                else{
                    styles["right"]= "0px";
                    styles["transform"]= prop_btnAddStatus ? "translate(-160px , -50%)" : "translate(0 , -50%)";
                }
            }


            new window.ComponentIcon(
                `component-select-option-header-icon-arrow-${ this._COMPONENT_RANDOM_ID}` ,
                {
                    prop_icon: var_showFormSelectOption ? tools_icons.icon_arrow_down() :  tools_icons.icon_arrow_up(),

                    prop_iconClass : ["position-absolute"] ,
                    prop_iconStyles : styles ,
                }
            )

        }
    }

    componentFn_render_headerButton(partName ) {

        const data = this.getPartProps(partName)

        if (data != null){
            const screanWidthType = tools_css.getScreenWidth();

            const prop_btnAddStatus         =  data.hasOwnProperty("prop_btnAddStatus")               ?  data.prop_btnAddStatus                  : false;

            if (prop_btnAddStatus){
                const directionRtl              =  this._COMPONENT_CONFIG.hasOwnProperty("directionRtl")  ? this._COMPONENT_CONFIG.directionRtl      : false;
                const prop_btnAddIcon           =  data.hasOwnProperty("prop_btnAddIcon")                 ?  data.prop_btnAddIcon                    : "&plus;";
                const prop_btnAddTitle          =  data.hasOwnProperty("prop_btnAddTitle")                ?  data.prop_btnAddTitle                   : "add item";
                const prop_btnAddClass          =  data.hasOwnProperty("prop_btnAddClass")                ?  data.prop_btnAddClass                   : [];
                const prop_size                 =  data.hasOwnProperty("prop_size")                       ?  data.prop_size                          :  0;

                let styles =  {
                    //"z-index" : `${tools_css.getZIndex(tools_css.standardZIndex.tools_btn.name, 10)}`  ,
                    "top" : "0" ,
                    "cursor" : "pointer" ,
                };
                styles["border-bottom-right-radius"] = "0 !important";
                styles["border-top-right-radius"] = "0 !important";
                styles["border-bottom-left-radius"] = "0 !important";
                styles["border-top-left-radius"] = "0 !important";
                if (directionRtl){
                    styles["left"] = "0";
                }
                else {
                    styles["right"] = "0";
                }

                if (screanWidthType == tools_css?.standardScreanWidth?.xs?.name){
                    styles["width"] = "30px";
                }
                else{
                    styles["width"] = "160px";
                }

                new window.ComponentButton(
                    `component-select-option-header-button-${ this._COMPONENT_RANDOM_ID}` ,
                    {
                        prop_btnClass: ["border" , "shadow-sm","position-absolute", "p-0" , "m-0" , "border-withe" , directionRtl? "border-end" : "border-start"] ,
                        prop_btnStyles: styles ,
                        prop_size: prop_size ,

                        prop_title: `
<span id="component-select-option-header-button-icon-${ this._COMPONENT_RANDOM_ID}" class="mx-3">
    ${prop_btnAddIcon}
</span>
<span id="component-select-option-header-button-text-${ this._COMPONENT_RANDOM_ID}" class="d-md-inline">
    ${prop_btnAddTitle}
</span>
                    `,


                        fn_callback: (event)=>{
                            this.runFn("fn_clickBtnTools" , "event")
                        }
                    }
                )
            }

        }
    }

    componentFn_render_body(partName ) {

        const data = this.getPartProps(partName)

        if (data != null){

            const prop_optionStyles         =  data.hasOwnProperty("prop_optionStyles")             ?  data.prop_optionStyles           :  {};
            const prop_optionHeight         =  data.hasOwnProperty("prop_optionHeight")             ?  data.prop_optionHeight           :  130;
            const prop_optionWidth          =  data.hasOwnProperty("prop_optionWidth")              ?  data.prop_optionWidth            :  "100%";
            const prop_positionTop          =  data.hasOwnProperty("prop_positionTop")              ?  data.prop_positionTop            :  "";
            const prop_positionLeft         =  data.hasOwnProperty("prop_positionLeft")             ?  data.prop_positionLeft           :  "";
            const prop_positionBottom       =  data.hasOwnProperty("prop_positionBottom")           ?  data.prop_positionBottom         :  "";
            const prop_positionRight        =  data.hasOwnProperty("prop_positionRight")            ?  data.prop_positionRight          :  "";

            new window.ComponentPositionElement(
                `component-select-option-position-element-${ this._COMPONENT_RANDOM_ID}` ,
                {
                    classList: "d-none" ,

                    prop_elementClass: ["form-control" , "custom-select" , "rounded" , "px-2"] ,
                    prop_elementStyles: prop_optionStyles ,
                    prop_width: prop_optionWidth,
                    prop_height: prop_optionHeight + "px",

                    prop_positionTop: prop_positionTop,
                    prop_positionLeft: prop_positionLeft,
                    prop_positionBottom: prop_positionBottom,
                    prop_positionRight: prop_positionRight,
                    prop_minWidth: 150,
                }
            )
        }
    }

    componentFn_render_bodySearcher(partName ) {

        const data = this.getPartProps(partName)

        if (data != null){
            const prop_size          =  data.hasOwnProperty("prop_size")                      ?  data.prop_size                          :  null;
            const prop_colorIcon     =  data.hasOwnProperty("prop_colorIcon")                 ?  data.prop_colorIcon                     :  "";

            new window.ComponentInput(
                `component-select-option-body-searcher-${ this._COMPONENT_RANDOM_ID}` ,
                {
                    prop_show_label: false ,
                    prop_icon: tools_icons.icon_search({size : prop_size /*, colors: {primary:prop_colorIcon}*/}  ) ,

                    fn_oninput: (event , value) => {
                        this.set("var_searcherSelectOption" , value)
                    } ,
                }
            )
        }
    }



    /* ---------------------------------------------
      FUNCTIONs
     --------------------------------------------- */
    fn_firstCallback(){
        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("prop_firstCallback") && data.prop_firstCallback){
            this.fn_onSelectItemSelectOption(null ,  data.hasOwnProperty("prop_itemSelected") ? data.prop_itemSelected : null );
        }
    }

    fn_closeWhenClickOutside(){
        document.addEventListener("click", (event) => {
            const isInside = event.target.closest(`#${this._COMPONENT_ID}`);
            if (!isInside) {
                this.fn_showListOptions(event, false);
            }
        });
    }

    fn_clickBtnTools(event){
        event.stopPropagation();
        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("fn_clickBtnTools") && typeof data.fn_clickBtnTools != null){
            data.fn_clickBtnTools(event , data.hasOwnProperty("prop_itemSelected") ? data.prop_itemSelected : null);
        }
        this.fn_showListOptions(event , false);
    }

    fn_onSelectItemSelectOption(event , itemIdSelected){
        const data = this._COMPONENT_CONFIG;
        const prop_options      = data != null && data.hasOwnProperty("prop_options")      ? data.prop_options      : [];

        let itemSelectedId = null;
        let itemSelectedData = null;
        if (prop_options != null && Array.isArray(prop_options)){
            for (const itemOption of prop_options) {
                if (itemOption.hasOwnProperty("id") && itemOption.hasOwnProperty("name") && itemOption.id == itemIdSelected){
                    itemSelectedId = itemOption.id;
                    itemSelectedData = itemOption;
                    this.set("prop_itemSelected" , itemSelectedId)
                    break;
                }
            }
        }
        this.fn_showListOptions(event , false);

        if (data.hasOwnProperty("fn_callback") && typeof data.fn_callback != null){
            data.fn_callback(event , itemSelectedId , itemSelectedData);
        }
    }

    fn_getItemSelectedTitle(prop_options , prop_itemSelected , prop_placeholder){
        let resultExp = prop_placeholder != null ? prop_placeholder : "---";

        if (prop_itemSelected != null && prop_options != null && Array.isArray(prop_options)){
            for (const itemOption of prop_options) {
                if (itemOption.hasOwnProperty("id") && itemOption.hasOwnProperty("name") && itemOption.id == prop_itemSelected){
                    resultExp = itemOption.name;
                    break;
                }
            }
        }

        return resultExp;
    }

    fn_showListOptions(event , status=null){
        const var_showFormSelectOption =  status == null ? !this.get("var_showFormSelectOption") : status;
        this.set("var_showFormSelectOption" ,  var_showFormSelectOption);

        const body = document.querySelector(`#component-select-option-position-element-${ this._COMPONENT_RANDOM_ID}`);
        if (body != null){
            if (var_showFormSelectOption){
                body.classList.remove("d-none")
            }
            else {
                body.classList.add("d-none")
            }
        }
    }

    fn_onGetBodyOptions(prop_options  , prop_itemSelected , var_searcherSelectOption , prop_listIcons=null , directionRtl){

        let optionsStr = "";

        if (prop_options != null && Array.isArray(prop_options)){
            for (let i=0; i < prop_options.length; i++){
                const item = prop_options[i];

                if (item.hasOwnProperty("name")){
                    let value = item.hasOwnProperty('id') ? item.id : 0;

                    let iconsHtml = "";
                    if (prop_listIcons != null && Array.isArray(prop_listIcons) && item.hasOwnProperty('id') && item.id != null){
                        for (let j = 0; j < prop_listIcons.length; j++) {
                            const itemIcon = prop_listIcons[j];
                            if (itemIcon.hasOwnProperty("icon") && itemIcon.hasOwnProperty("name") && itemIcon.hasOwnProperty("method") && typeof itemIcon.method != "undefined"){
                                const itemIconHtml = itemIcon["icon"];
                                const itemIconMethod = itemIcon.method;
                                const itemIconName = itemIcon.name;

                                iconsHtml += `
                                <i class="component-select-option-body-options-item-icon-${this._COMPONENT_RANDOM_ID} " style=" ${directionRtl? 'left' : 'right'}: ${(j)*25}px"
                                    onclick="${this.getFn("fn_onClickIconOption" , "event" , `'${itemIconName}'` , value)}">
                                      ${itemIconHtml} 
                                </i>
                                `;

                            }
                        }
                    }

                    if (typeof item.name.includes == "undefined" || item.name.includes(var_searcherSelectOption)){

                        optionsStr += `
<div class="component-select-option-body-options-item-${this._COMPONENT_RANDOM_ID} position-relative rounded my-1 ${prop_itemSelected != null && value == prop_itemSelected ? `component-select-option-body-options-item-selected-${this._COMPONENT_RANDOM_ID}` : ''}"
   onclick="${this.getFn("fn_onSelectItemSelectOption" , "event" , item.id)}"> 
   ${item.name} 
   
   ${iconsHtml}
</div>
                `;
                    }
                }
            }
        }

        return optionsStr;
    }

    fn_onClickIconOption(event , name , id){
        event.stopPropagation()

        const data = this._COMPONENT_CONFIG;
        const prop_listIcons      = data != null && data.hasOwnProperty("prop_listIcons")      ? data.prop_listIcons      : [];
        if (prop_listIcons != null && Array.isArray(prop_listIcons)){
            for (let j = 0; j < prop_listIcons.length; j++) {
                const itemIcon = prop_listIcons[j];
                if (itemIcon.hasOwnProperty("name") && itemIcon.hasOwnProperty("method") && typeof itemIcon.method != "undefined" && name == itemIcon.name) {
                    const itemIconMethod = itemIcon.method;
                    itemIconMethod(event , id);
                }
            }
        }
    }

    call_setValue(value){
        this.set("prop_value" , value )
    }

}


/*-------------------------------------
 010-013) Component Select Icon
-------------------------------------*/
class ComponentSelectIconBase extends ComponentBase{

    /* ---------------------------------------------
       PROPERTYs Pattern
  --------------------------------------------- */
    _COMPONENT_PATTERN = {
        prop_name: {
            prop: "prop_name",
            default: ""
        },
        prop_iconSelected: {
            prop: "prop_iconSelected",
            default: null
        },
        prop_title: {
            prop: "prop_title",
            default: "title"
        },
        prop_isAbsoluteRule: {
            prop: "prop_isAbsoluteRule",
            default: true
        },
        prop_listRules: {
            prop: "prop_listRules",
            default: []
        },
        prop_isDisable: {
            prop: "prop_isDisable",
            default: false
        }
    };


    /* ---------------------------------------------
           PROPERTYs Props
    --------------------------------------------- */
    _COMPONENT_PROPS = {
        part_structure: [],

        part_value: [
            this._COMPONENT_PATTERN.prop_name,
            this._COMPONENT_PATTERN.prop_iconSelected
        ],

        part_label: [

        ],

        part_validate: [
            this._COMPONENT_PATTERN.prop_isAbsoluteRule,
            this._COMPONENT_PATTERN.prop_listRules,
            this._COMPONENT_PATTERN.prop_isDisable,
            this._COMPONENT_PATTERN.prop_title
        ]
    };


    /* ---------------------------------------------
   PROPERTYs Schema
   --------------------------------------------- */
    _COMPONENT_SCHEMA = {
        part_structure: {
            part_value: {} ,
            part_label: {} ,
            part_validate: {} ,
        } ,
    }

}
window.ComponentSelectIcon = class ComponentSelectIcon extends ComponentSelectIconBase {

    var_showFormSelectIcon = false;

    /* ---------------------------------------------
       SETUP
   --------------------------------------------- */
    constructor(elId , config) {
        super(
            listComponent[ComponentSelectIcon.name] ,
            elId
        );
        super.renderComponent(config);
    }


    /* ---------------------------------------------
      TEMPLATEs
    --------------------------------------------- */
    componentFn(screanWidthType){
        this.templateFn("part_label");
        this.templateFn("part_validate");


    }
    templateFn(partName = null){

        switch (partName){
            case "part_structure":
                return this.template_render_structure(partName);
            case "part_value":
                return this.template_render_value(partName);
            case "part_label":
                return this.componentFn_render_label(partName);
            case "part_validate":
                return this.componentFn_render_validate(partName);
            default:
                return this.templateBasic_render();
        }
    }

    template_render_structure(partName ) {
        const content = `
      
      <component-label id="component-select-icon-label-${ this._COMPONENT_RANDOM_ID}"></component-label>
     
      ${this.templateFn("part_value") ?? ""}
      
      <component-validate id="component-select-icon-validate-${this._COMPONENT_RANDOM_ID}"></component-validate>
      
                `;
        return this.templateBasic_render_structure(content);
    }

    template_render_value(partName ) {

        const data = this.getPartProps(partName)

        if (data != null){
            const prop_name               =   data.hasOwnProperty("prop_name")                ?  data.prop_name                 :  "";
            const prop_iconSelected       =   data.hasOwnProperty("prop_iconSelected")        ?  data.prop_iconSelected         : null;

            return `
<section data-part-name="${partName}" 
         id="component-select-icon-value-${ this._COMPONENT_RANDOM_ID}" 
         class="" >
         
     <style>
         #${this._COMPONENT_ID} #component-select-icon-value-${ this._COMPONENT_RANDOM_ID}{
             
         }
     </style>
     
      <input id="component-select-icon-value-${ this._COMPONENT_RANDOM_ID}-input-value" name="${prop_name}"  value="${prop_iconSelected != null ? prop_iconSelected : '' }" type="hidden"/>
       
</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    componentFn_render_label(partName ) {
        this.componentFneBasic_render_structure(
            `component-select-icon-label-${ this._COMPONENT_RANDOM_ID}` ,
            {
                prop_for: `component-select-icon-header-${ this._COMPONENT_RANDOM_ID}` ,
                fn_callback: ()=>{

                }
            }
        );
    }

    componentFn_render_validate(partName) {

        const data = this.getPartProps(partName)

        if (data != null){

            const data = this.getPartProps(partName)

            if (data != null){
                const prop_isDisable     =  data.hasOwnProperty("prop_isDisable")          ?  data.prop_isDisable              : false;

                if (!prop_isDisable){

                    const prop_isAbsoluteRule    =  data.hasOwnProperty("prop_isAbsoluteRule")            ?  data.prop_isAbsoluteRule                : true;
                    const prop_listRules         =  data.hasOwnProperty("prop_listRules")                 ?  data.prop_listRules                     : [];
                    const prop_title             =  data.hasOwnProperty("prop_title")                     ?  data.prop_title                         : [];
                    const directionRtl           =  this._COMPONENT_CONFIG.hasOwnProperty("directionRtl") ? this._COMPONENT_CONFIG.directionRtl      : false;

                    new window.ComponentValidate(
                        `component-select-icon-validate-${this._COMPONENT_RANDOM_ID}` ,
                        {
                            prop_reference: `component-select-icon-value-${ this._COMPONENT_RANDOM_ID}-input-value` ,
                            prop_isAbsolute: prop_isAbsoluteRule ,
                            prop_listRules ,
                            prop_title
                        }
                    );
                }

            }

        }
    }



    /* ---------------------------------------------
      FUNCTIONs
     --------------------------------------------- */


}


/*-------------------------------------
 010-04) Component check box
-------------------------------------*/
class ComponentCheckBoxBase extends ComponentBase{


    /* ---------------------------------------------
         PROPERTYs Pattern
    --------------------------------------------- */
    _COMPONENT_PATTERN = {
        prop_size: {
            prop: "prop_size",
            default: tools_css.standardSizes.m.name,
        },
        prop_name: {
            prop: "prop_name",
            default: ""
        },
        prop_showTitleFront: {
            prop: "prop_showTitleFront",
            default: true
        },
        prop_isSelected: {
            prop: "prop_isSelected",
            default: false
        },
        prop_title: {
            prop: "prop_title",
            default: "title"
        },
        prop_colorIcon: {
            prop: "prop_colorIcon",
            default: tools_const?.styles?.inputCheckBox?.color_icon ?? ""
        },
        prop_borderColor: {
            prop: "prop_borderColor",
            default: tools_const?.styles?.inputCheckBox?.boderColor ?? ""
        },
        prop_backgroundColor_unSelected: {
            prop: "prop_backgroundColor_unSelected",
            default: tools_const?.styles?.inputCheckBox?.backgroundColor_unSelected ?? ""
        },
        prop_backgroundColor_selected: {
            prop: "prop_backgroundColor_selected",
            default: tools_const?.styles?.inputCheckBox?.backgroundColor_selected ?? ""
        },
        prop_backgroundColor_disable: {
            prop: "prop_backgroundColor_disable",
            default: tools_const?.styles?.inputCheckBox?.backgroundColor_disable ?? ""
        },
        prop_color_unSelected: {
            prop: "prop_color_unSelected",
            default: tools_const?.styles?.inputCheckBox?.color_unSelected ?? ""
        },
        prop_color_selected: {
            prop: "prop_color_selected",
            default: tools_const?.styles?.inputCheckBox?.color_selected ?? ""
        },
        prop_color_disable: {
            prop: "prop_color_disable",
            default: tools_const?.styles?.inputCheckBox?.color_disable ?? ""
        },
        prop_formClass: {
            prop: "prop_formClass",
            default: ["rounded"]
        },
        prop_formStyles: {
            prop: "prop_formStyles",
            default: { }
        },
        prop_isDisable: {
            prop: "prop_isDisable",
            default: false
        },
        prop_icon: {
            prop: "prop_icon",
            default: tools_icons.icon_tik
        },
        prop_isAbsoluteRule: {
            prop: "prop_isAbsoluteRule",
            default: true
        },
        prop_listRules: {
            prop: "prop_listRules",
            default: []
        }
    };

    /* ---------------------------------------------
           PROPERTYs Props
    --------------------------------------------- */
    _COMPONENT_PROPS = {
        part_structure: [],

        part_value: [
            this._COMPONENT_PATTERN.prop_name,
            this._COMPONENT_PATTERN.prop_isSelected
        ],

        part_label: [

        ],

        part_form: [
            this._COMPONENT_PATTERN.prop_borderColor,
            this._COMPONENT_PATTERN.prop_backgroundColor_unSelected,
            this._COMPONENT_PATTERN.prop_backgroundColor_selected,
            this._COMPONENT_PATTERN.prop_backgroundColor_disable,
            this._COMPONENT_PATTERN.prop_formClass,
            this._COMPONENT_PATTERN.prop_formStyles,
            this._COMPONENT_PATTERN.prop_isSelected,
            this._COMPONENT_PATTERN.prop_isDisable,
            this._COMPONENT_PATTERN.prop_size,
        ],

        part_form_title: [
            this._COMPONENT_PATTERN.prop_showTitleFront,
            this._COMPONENT_PATTERN.prop_color_unSelected,
            this._COMPONENT_PATTERN.prop_color_selected,
            this._COMPONENT_PATTERN.prop_color_unSelected,
            this._COMPONENT_PATTERN.prop_title,
            this._COMPONENT_PATTERN.prop_isDisable,
            this._COMPONENT_PATTERN.prop_isSelected,
            this._COMPONENT_PATTERN.prop_size,
        ],

        part_form_icon: [
            this._COMPONENT_PATTERN.prop_icon,
            this._COMPONENT_PATTERN.prop_colorIcon,
            this._COMPONENT_PATTERN.prop_isSelected ,
            this._COMPONENT_PATTERN.prop_size,
        ],

        part_validate: [
            this._COMPONENT_PATTERN.prop_isAbsoluteRule,
            this._COMPONENT_PATTERN.prop_listRules,
            this._COMPONENT_PATTERN.prop_isDisable,
            this._COMPONENT_PATTERN.prop_title
        ]
    };



    /* ---------------------------------------------
   PROPERTYs Schema
   --------------------------------------------- */
    _COMPONENT_SCHEMA = {
        part_structure: {
            part_value: {} ,
            part_label: {} ,
            part_form: {
                part_form_icon: {},
            } ,
            part_form_title: {} ,
            part_validate: {}
        } ,
    }

}
window.ComponentCheckBox = class ComponentCheckBox extends ComponentCheckBoxBase {


    /* ---------------------------------------------
       SETUP
   --------------------------------------------- */
    constructor(elId , config) {
        super(
            listComponent[ComponentCheckBox.name] ,
            elId
        );
        super.renderComponent(config);
    }


    /* ---------------------------------------------
      TEMPLATEs
    --------------------------------------------- */
    componentFn(screanWidthType){
        this.templateFn("part_label");
        this.templateFn("part_validate");
    }

    templateFn(partName = null){
        switch (partName){
            case "part_structure":
                return this.template_render_structure(partName);
            case "part_value":
                return this.template_render_value(partName);
            case "part_form":
                return this.template_render_form(partName);
            case "part_form_icon":
                return this.template_render_formIcon(partName);
            case "part_form_title":
                return this.template_render_formTitle(partName);
            case "part_label":
                return this.componentFn_render_label(partName);
            case "part_validate":
                return this.componentFn_render_validate(partName);
            default:
                return this.templateBasic_render();
        }
    }

    template_render_structure(partName ) {
        const content = `
          
               <component-label id="component-check-box-label-${ this._COMPONENT_RANDOM_ID}"></component-label>
               
                ${this.templateFn("part_value") ?? ""}
                
                ${this.templateFn("part_form") ?? ""}
                
                 ${this.templateFn("part_form_title") ?? ""}
          
                <component-validate id="component-check-box-validate-${this._COMPONENT_RANDOM_ID}"></component-validate>
                `;
        return this.templateBasic_render_structure(content);
    }

    template_render_value(partName ) {

        const data = this.getPartProps(partName)

        if (data != null){
            const prop_name               =   data.hasOwnProperty("prop_name")                ?  data.prop_name                 :  "";
            const prop_isSelected         =   data.hasOwnProperty("prop_isSelected")          ?  data.prop_isSelected           : false;

            return `
<section data-part-name="${partName}" 
         id="component-check-box-value-${ this._COMPONENT_RANDOM_ID}" 
         class="" >
         
     <style>
         #${this._COMPONENT_ID} #component-check-box-value-${ this._COMPONENT_RANDOM_ID}{
             
         }
     </style>
     
      <input id="component-check-box-value-${ this._COMPONENT_RANDOM_ID}-input-value" name="${prop_name}"  value="${prop_isSelected ? 1 : 0}" type="hidden"/>
       
</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    template_render_form(partName ) {

        const data = this.getPartProps(partName)

        if (data != null){
            const prop_borderColor                      =   data.hasOwnProperty("prop_borderColor")                       ?  data.prop_borderColor                          : "";
            const prop_backgroundColor_unSelected       =   data.hasOwnProperty("prop_backgroundColor_unSelected")        ?  data.prop_backgroundColor_unSelected           : "";
            const prop_backgroundColor_selected         =   data.hasOwnProperty("prop_backgroundColor_selected")          ?  data.prop_backgroundColor_selected             : "";
            const prop_backgroundColor_disable          =   data.hasOwnProperty("prop_backgroundColor_disable")           ?  data.prop_backgroundColor_disable              : "";
            const prop_formClass                        =   data.hasOwnProperty("prop_formClass")                         ?  data.prop_formClass                            : [];
            const prop_formStyles                       =   data.hasOwnProperty("prop_formStyles")                        ?  data.prop_formStyles                           : {};
            const prop_isSelected                       =   data.hasOwnProperty("prop_isSelected")                        ?  data.prop_isSelected                           : false;
            const prop_isDisable                        =   data.hasOwnProperty("prop_isDisable")                         ?  data.prop_isDisable                            : false;
            const prop_size                             =   data.hasOwnProperty("prop_size")                              ?  data.prop_size                                 : null;
            const directionRtl                          =  this._COMPONENT_CONFIG.hasOwnProperty("directionRtl")          ? this._COMPONENT_CONFIG.directionRtl             : false;

            const elHeight = tools_css.getHeightSize(prop_size);
            return `
<section data-part-name="${partName}" 
         id="component-check-box-form-${ this._COMPONENT_RANDOM_ID}" 
         class="${tools_public.renderListClass(prop_formClass)} position-relative"
         onclick="${this.getFn("fn_onclickCheckBox" , "event")}">
         
     <style>
         #${this._COMPONENT_ID} #component-check-box-form-${ this._COMPONENT_RANDOM_ID}{
             cursor: ${prop_isDisable ? "not-allowed" : "pointer"};
             border: solid 1px ${prop_borderColor};
             box-shadow: #00000047 0px 0px 5px, inset 0 2px 4px #0000004d;
             width: ${elHeight}px;
             height: ${elHeight}px;
             float: ${directionRtl ? "right" : "left" };
             background-color: ${prop_isDisable ? prop_backgroundColor_disable : (prop_isSelected ? prop_backgroundColor_selected : prop_backgroundColor_unSelected) };
             ${tools_public.renderListStyle(prop_formStyles)}
         }
     </style>
     
     ${this.templateFn("part_form_icon") ?? ""}
    
      
</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    template_render_formIcon(partName ) {

        const data = this.getPartProps(partName)

        if (data != null){
            const prop_icon                            =   data.hasOwnProperty("prop_icon")                          ?  data.prop_icon                            : {};
            const prop_isSelected                      =   data.hasOwnProperty("prop_isSelected")                    ?  data.prop_isSelected                      : false;
            const prop_size                            =   data.hasOwnProperty("prop_size")                          ?  data.prop_size                            : false;
            const prop_colorIcon                       =   data.hasOwnProperty("prop_colorIcon")                     ?  data.prop_colorIcon                       : "";

            const iconHeight = tools_css.getIconSize(prop_size);

            return `
<section data-part-name="${partName}" 
         id="component-check-box-form-icon-${ this._COMPONENT_RANDOM_ID}" 
         class="position-absolute" >
         
     <style>
         #${this._COMPONENT_ID} #component-check-box-form-icon-${ this._COMPONENT_RANDOM_ID}{
             top: 50%;
             left: 50%;
             transform: translate(-50% , -50%);
         }
     </style>
     
      ${prop_isSelected ? (prop_icon != null ? (typeof  prop_icon == "function" ? prop_icon(iconHeight , prop_colorIcon) : prop_icon) : "") : ""}
      
</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    template_render_formTitle(partName ) {

        const data = this.getPartProps(partName)

        if (data != null){

            const prop_color_unSelected                      =   data.hasOwnProperty("prop_color_unSelected")                       ?  data.prop_color_unSelected                         : "";
            const prop_color_selected                        =   data.hasOwnProperty("prop_color_selected")                         ?  data.prop_color_selected                           : "";
            const prop_color_disable                         =   data.hasOwnProperty("prop_color_disable")                          ?  data.prop_color_disable                            : "";
            const prop_title                                 =   data.hasOwnProperty("prop_title")                                  ?  data.prop_title                                    : "";
            const prop_showTitleFront                        =   data.hasOwnProperty("prop_showTitleFront")                         ?  data.prop_showTitleFront                           : false;
            const prop_isDisable                             =   data.hasOwnProperty("prop_isDisable")                              ?  data.prop_isDisable                                : false;
            const prop_isSelected                            =   data.hasOwnProperty("prop_isSelected")                             ?  data.prop_isSelected                               : false;
            const prop_size                                  =   data.hasOwnProperty("prop_size")                                   ?  data.prop_size                                     : false;
            const directionRtl                               =  this._COMPONENT_CONFIG.hasOwnProperty("directionRtl")               ? this._COMPONENT_CONFIG.directionRtl                 : false;

            const elHeight = tools_css.getHeightSize(prop_size);
            const elFontSize = tools_css.getFontSize(prop_size);

            if (prop_showTitleFront){
                return `
<section data-part-name="${partName}" 
         id="component-check-box-form-title-${ this._COMPONENT_RANDOM_ID}" 
         class="mx-2"    
         onclick="${this.getFn("fn_onclickCheckBox" , "event")}">
         
     <style>
         #${this._COMPONENT_ID} #component-check-box-form-title-${ this._COMPONENT_RANDOM_ID}{
             cursor: pointer;
             float: ${directionRtl ? "right" : "left" };
             height: ${elHeight}px;
             font-size: ${elFontSize}px;
             color: ${prop_isDisable ? prop_color_disable : (prop_isSelected ? prop_color_selected : prop_color_unSelected)};
         }
     </style>
     
      <b>
          ${prop_title}
      </b>
      
</section>
        `;
            }
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    componentFn_render_label(partName ) {
        this.componentFneBasic_render_structure(
            `component-check-box-label-${ this._COMPONENT_RANDOM_ID}` ,
            {
                // prop_for: `component-check-box-input-${ this._COMPONENT_RANDOM_ID}` ,
                fn_callback: (event)=>{
                    this.fn_onclickCheckBox(event);
                }
            }
        );
    }

    componentFn_render_validate(partName) {

        const data = this.getPartProps(partName)

        if (data != null){

            const data = this.getPartProps(partName)

            if (data != null){
                const prop_isDisable     =  data.hasOwnProperty("prop_isDisable")          ?  data.prop_isDisable              : false;

                if (!prop_isDisable){

                    const prop_isAbsoluteRule    =  data.hasOwnProperty("prop_isAbsoluteRule")            ?  data.prop_isAbsoluteRule                : true;
                    const prop_listRules         =  data.hasOwnProperty("prop_listRules")                 ?  data.prop_listRules                     : [];
                    const prop_title             =  data.hasOwnProperty("prop_title")                     ?  data.prop_title                         : [];
                    const directionRtl           =  this._COMPONENT_CONFIG.hasOwnProperty("directionRtl") ? this._COMPONENT_CONFIG.directionRtl      : false;

                    new window.ComponentValidate(
                        `component-check-box-validate-${this._COMPONENT_RANDOM_ID}` ,
                        {
                            prop_reference: `component-check-box-value-${ this._COMPONENT_RANDOM_ID}-input-value` ,
                            prop_isAbsolute: prop_isAbsoluteRule ,
                            prop_listRules ,
                            prop_title
                        }
                    );
                }

            }

        }
    }

    /* ---------------------------------------------
      FUNCTIONs
     --------------------------------------------- */
    fn_onclickCheckBox(event){
        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("prop_isDisable") && !data.prop_isDisable){
            const prop_isSelected = data != null && data.hasOwnProperty("prop_isSelected") ? data.prop_isSelected : false;
            this.set("prop_isSelected" , !prop_isSelected);

            if (data.hasOwnProperty("fn_callback") && typeof data.fn_callback != null){
                data.fn_callback(event , !prop_isSelected);
            }
        }
    }

    call_setValue(status){
        this.set("prop_isSelected" , status )
    }

    call_getValue(){
        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("prop_isDisable") && !data.prop_isDisable){
            return this.get("prop_isSelected" );
        }
        return null;
    }

}





//===============================================================================================================
// [10 - 19] button / inputs / tools -> [011] QR CODE
//===============================================================================================================

/*-------------------------------------
 011-01) Component Qr Code
-------------------------------------*/
class ComponentQrCodeBase extends ComponentBase{

    /* ---------------------------------------------
         PROPERTYs Pattern
  --------------------------------------------- */
    _COMPONENT_PATTERN = {
        prop_formClass: {
            prop: "prop_formClass",
            default: ["border", "rounded", "shadow-sm", "text-center"]
        },
        prop_formStyles: {
            prop: "prop_formStyles",
            default: {}
        },
        prop_value: {
            prop: "prop_value",
            default: ""
        },
        prop_size: {
            prop: "prop_size",
            default: 4
        },
        prop_version: {
            prop: "prop_version",
            default: 3
        }
    };

    /* ---------------------------------------------
           PROPERTYs Props
    --------------------------------------------- */
    _COMPONENT_PROPS = {
        part_structure: [],
        part_label: [],
        part_qr_code_element: [
            this._COMPONENT_PATTERN.prop_formClass,
            this._COMPONENT_PATTERN.prop_formStyles
        ],
        part_qr_code_view: [
            this._COMPONENT_PATTERN.prop_value,
            this._COMPONENT_PATTERN.prop_size,
            this._COMPONENT_PATTERN.prop_version
        ],
        part_qr_code_bottom: [],
        part_qr_code_bottom_text: [
            this._COMPONENT_PATTERN.prop_value
        ],
        part_qr_code_bottom_icon: []
    };



    /* ---------------------------------------------
   PROPERTYs Schema
   --------------------------------------------- */
    _COMPONENT_SCHEMA = {
        part_structure: {
            part_label:{} ,
            part_qr_code_element: {
                part_qr_code_view: {} ,
                part_qr_code_bottom: {
                    part_qr_code_bottom_text: {} ,
                    part_qr_code_bottom_icon: {} ,
                } ,
            }
        } ,
    }

}
window.ComponentQrCode = class ComponentQrCode extends ComponentQrCodeBase{

    /* ---------------------------------------------
       SETUP
    --------------------------------------------- */
    constructor(elId , config) {
        super(
            listComponent[ComponentQrCode.name] ,
            elId
        );
        super.renderComponent(config);
    }

    /* ---------------------------------------------
TEMPLATEs
--------------------------------------------- */
    componentFn(){
        this.templateFn("part_label");
        this.templateFn("part_qr_code_view");
        this.templateFn("part_qr_code_bottom_icon");
    }
    templateFn(partName = null){
        switch (partName){
            case "part_structure":
                return this.template_render_structure(partName);
            case "part_label":
                return this.componentFn_render_label(partName);
            case "part_qr_code_element":
                return this.template_render_qrCodeElement(partName);
            case "part_qr_code_view":
                return this.componentFn_render_qrCodeView(partName);
            case "part_qr_code_bottom":
                return this.template_render_qrCodeBottom(partName);
            case "part_qr_code_bottom_text":
                return this.template_render_qrCodeBottomText(partName);
            case "part_qr_code_bottom_icon":
                return this.componentFn_render_qrCodeBottomIcon(partName);
            default:
                return this.templateBasic_render();
        }
    }

    template_render_structure(partName) {
        const content = `
  <component-label id="component-qr-code-label-${this._COMPONENT_RANDOM_ID}"></component-label>
        
  ${this.templateFn("part_qr_code_element") ?? ""}
                `;
        return this.templateBasic_render_structure(content );
    }

    template_render_qrCodeElement(partName) {
        const data = this.getPartProps(partName)

        if (data != null){

            const prop_formClass     =  data.hasOwnProperty("prop_formClass")      ?  data.prop_formClass     : [];
            const prop_formStyles    =  data.hasOwnProperty("prop_formStyles")     ?  data.prop_formStyles    : {};

            return `
<section data-part-name="${partName}" 
         id="component-qr-code-element-${this._COMPONENT_RANDOM_ID}"
         class="${tools_public.renderListClass(prop_formClass)}">
         
     <style>
         #${this._COMPONENT_ID} #component-qr-code-element-${this._COMPONENT_RANDOM_ID}{
               ${tools_public.renderListStyle(prop_formStyles)}
         }
     </style>
     
     <div id="component-qr-code-view-${this._COMPONENT_RANDOM_ID}"></div>
     
       ${this.templateFn("part_qr_code_bottom") ?? ""}
      
</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    template_render_qrCodeBottom(partName) {
        const data = this.getPartProps(partName)

        if (data != null){

            return `
<section data-part-name="${partName}" 
         id="component-qr-code-bottom-${this._COMPONENT_RANDOM_ID}"
         onclick="${this.getFn("fn_onCLickCopy")}"
         class="mx-2 mb-1 rounded bg-dark text-white position-relative py-1">
         
     <style>
         #${this._COMPONENT_ID} #component-qr-code-bottom-${this._COMPONENT_RANDOM_ID}{
             cursor: pointer;
         }
     </style>
     
     ${this.templateFn("part_qr_code_bottom_text") ?? ""}
     
     <component-icon id="component-qr-code-bottom-icon-${this._COMPONENT_RANDOM_ID}"></component-icon>
      
</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    template_render_qrCodeBottomText(partName) {
        const data = this.getPartProps(partName)

        if (data != null){

            const prop_value     =  data.hasOwnProperty("prop_value")      ?  data.prop_value     : "";

            return `
<section data-part-name="${partName}" 
         id="component-qr-code-bottom-text-${this._COMPONENT_RANDOM_ID}" 
         title="COPY"
         class="">
         
     <style>
         #${this._COMPONENT_ID} #component-qr-code-bottom-text-${this._COMPONENT_RANDOM_ID}{
             font-size: 10pt;
             padding-left: 35px;
             padding-right: 35px;
             white-space: nowrap;
             overflow: hidden;
             text-overflow: ellipsis;
         }
     </style>
     
     ${prop_value}
     
</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    componentFn_render_label(partName) {
        this.componentFneBasic_render_structure(
            `component-qr-code-label-${this._COMPONENT_RANDOM_ID}` ,
            {
                prop_for:  `component-input-input-${ this._COMPONENT_RANDOM_ID}`
            }
        );
    }

    componentFn_render_qrCodeView(partName) {
        const data = this.getPartProps(partName);

        if (data != null){
            const prop_value     =  data.hasOwnProperty("prop_value")      ?  data.prop_value     : "";
            const prop_size      =  data.hasOwnProperty("prop_size")       ?  data.prop_size      : 4;
            const prop_version   =  data.hasOwnProperty("prop_version")    ?  data.prop_version   : 3;

            var qr = qrcode(prop_version, 'L')
            qr.addData(prop_value);
            qr.make();

            const el = document.querySelector(`div#component-qr-code-view-${this._COMPONENT_RANDOM_ID}`);
            if (el != null){
                el.innerHTML = qr.createSvgTag(prop_size)
            }
        }
    }

    componentFn_render_qrCodeBottomIcon(partName) {
        const data = this.getPartProps(partName);

        if (data != null){

            const styles = {
                "top" : "0" ,
            }
            styles[ this._COMPONENT_CONFIG.hasOwnProperty("directionRtl") && this._COMPONENT_CONFIG.directionRtl ? "right" : "left"] = "5px";

            new window.ComponentIcon(
                `component-qr-code-bottom-icon-${this._COMPONENT_RANDOM_ID}` ,
                {
                    classList: [ "position-absolute" ] ,
                    styles: styles,

                    prop_icon : "&#x1F4CB;" ,
                    prop_iconClass : [] ,
                    prop_iconStyles : {
                        "font-size" : "14pt",
                    } ,
                }
            )
        }

    }


    /* ---------------------------------------------
       FUNCTIONs
    --------------------------------------------- */
    fn_onCLickCopy(event){
        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("prop_value")){
            navigator.clipboard.writeText(data.prop_value).then(() => {
                alert("copied")
                console.log('متن کپی شد: ' , data.prop_value);
            }).catch(err => {
                console.error('خطا در کپی کردن متن: ', err);
            });
        }
    }
}


/*-------------------------------------
 011-02) Component Camera Qr Code Reader
-------------------------------------*/
class ComponentCameraQrCodeReaderBase extends ComponentBase{


    /* ---------------------------------------------
       PROPERTYs Pattern
--------------------------------------------- */
    _COMPONENT_PATTERN = {
        prop_size: {
            prop: "prop_size",
            default: tools_css.standardSizes.m.name,
        },
        prop_formMinHight: {
            prop: "prop_formMinHight",
            default: "150px"
        },
        prop_fps: {
            prop: "prop_fps",
            default: 10
        },
        prop_qrbox: {
            prop: "prop_qrbox",
            default: 250
        },
        prop_titleErrorExistCamera: {
            prop: "prop_titleErrorExistCamera",
            default: "دوربینی در دستگاه شما یافت نشد"
        },
        prop_titleBtnRetry: {
            prop: "prop_titleBtnRetry",
            default: "تلاش مجدد"
        },
        prop_titleErrorPermisionCamera: {
            prop: "prop_titleErrorPermisionCamera",
            default: "مجوز برای درخواست دوربین تایید نشد"
        },
        prop_showInput: {
            prop: "prop_showInput",
            default: true
        },
        prop_name: {
            prop: "prop_name",
            default: "camera_qr_code"
        }
    };

    /* ---------------------------------------------
           PROPERTYs Props
    --------------------------------------------- */
    _COMPONENT_PROPS = {
        part_structure: [],
        part_label: [],
        part_form: [
            this._COMPONENT_PATTERN.prop_formMinHight
        ],
        part_element: [
            this._COMPONENT_PATTERN.prop_fps,
            this._COMPONENT_PATTERN.prop_qrbox
        ],
        part_error_exist_camera: [
            this._COMPONENT_PATTERN.prop_titleErrorExistCamera,
            this._COMPONENT_PATTERN.prop_titleBtnRetry
        ],
        part_error_permision_camera: [
            this._COMPONENT_PATTERN.prop_titleErrorPermisionCamera,
            this._COMPONENT_PATTERN.prop_titleBtnRetry
        ],
        part_input: [
            this._COMPONENT_PATTERN.prop_size,
            this._COMPONENT_PATTERN.prop_showInput,
            this._COMPONENT_PATTERN.prop_name
        ]
    };



    /* ---------------------------------------------
   PROPERTYs Schema
   --------------------------------------------- */
    _COMPONENT_SCHEMA = {
        part_structure: {
            part_label:{} ,
            part_form:{
                part_element:{},
                part_error_exist_camera:{},
                part_error_permision_camera:{},
            } ,
            part_input:{}
        }
    }

}
window.ComponentCameraQrCodeReader = class ComponentCameraQrCodeReader extends ComponentCameraQrCodeReaderBase{

    _COMPONENT_CAMERA = null;
    _COMPONENT_ERROR_EXIST_CAMERA = null;
    _COMPONENT_ERROR_PERMISION_CAMERA = null;
    _COMPONENT_INPUT = null;

    /* ---------------------------------------------
       SETUP
   --------------------------------------------- */
    constructor(elId , config) {
        super(
            listComponent[ComponentCameraQrCodeReader.name] ,
            elId
        );
        super.renderComponent(config);
    }



    /* ---------------------------------------------
      TEMPLATEs
    --------------------------------------------- */
    componentFn(){
        this.templateFn("part_label");
        this.templateFn("part_element");
        this.templateFn("part_input");
    }
    templateFn(partName = null){
        switch (partName){
            case "part_structure":
                return this.template_render_structure(partName);
            case "part_label":
                return this.componentFn_render_label(partName);
            case "part_form":
                return this.template_render_form(partName);
            case "part_element":
                return this.componentFn_render_formElement(partName);
            case "part_error_exist_camera":
                return this.componentFn_render_formErrorExistCamera(partName);
            case "part_error_permision_camera":
                return this.componentFn_render_formErrorPermisionCamera(partName);
            case "part_input":
                return this.componentFn_render_input(partName);
            default:
                return this.templateBasic_render();
        }
    }

    template_render_structure(partName) {
        const content = `
  
  <component-label id="component-camera-qr-code-reader-label-${this._COMPONENT_RANDOM_ID}"></component-label>
  
   ${this.templateFn("part_form") ?? ""}
  
  <component-input id="component-camera-qr-code-reader-input-${this._COMPONENT_RANDOM_ID}"></component-input>

                `;
        return this.templateBasic_render_structure(content );
    }

    template_render_form(partName){
        const data = this.getPartProps(partName)

        if (data != null){

            const prop_formMinHight          = data.hasOwnProperty("prop_formMinHight")                      ? data.prop_formMinHight          : "";

            return `
<section data-part-name="${partName}" 
         id="component-camera-qr-code-reader-form-${this._COMPONENT_RANDOM_ID}"
         class="border rounded my-2 px-2">
         
     <style>
         #${this._COMPONENT_ID} #component-camera-qr-code-reader-form-${this._COMPONENT_RANDOM_ID}{
             min-height: ${prop_formMinHight};
         }
     </style>
     
     <component-is-empty id="component-camera-qr-code-reader-error-exist-camera-${this._COMPONENT_RANDOM_ID}"></component-is-empty>
      
     <component-is-empty id="component-camera-qr-code-reader-error-permision-camera-${this._COMPONENT_RANDOM_ID}"></component-is-empty>
  
     <section id="component-camera-qr-code-reader-element-${this._COMPONENT_RANDOM_ID}" ></section>
 
</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    componentFn_render_label(partName) {
        this.componentFneBasic_render_structure(
            `component-camera-qr-code-reader-label-${this._COMPONENT_RANDOM_ID}` ,
        );
    }

    componentFn_render_formElement(partName) {

        const data = this.getPartProps(partName)

        if (data != null){

            const prop_fps            = data.hasOwnProperty("prop_fps")                        ? data.prop_fps            : 10;
            const prop_qrbox          = data.hasOwnProperty("prop_qrbox")                      ? data.prop_qrbox          : 250;

            let  cameraExist = false;

            this._COMPONENT_CAMERA = new Html5Qrcode(
                `component-camera-qr-code-reader-element-${this._COMPONENT_RANDOM_ID}`
            );
            Html5Qrcode.getCameras().then(devices => {

                for (const device of devices) {
                    if (device.hasOwnProperty("id") && device.id != ""){

                        html5QrCode.start(
                            cameraId,
                            {
                                fps: prop_fps,
                                qrbox: prop_qrbox,
                            },
                            (decodedText, decodedResult) => {
                                this.fn_onScanSuccess(decodedText, decodedResult);
                            },
                            (errorMessage) => {
                                console.log(errorMessage);
                            }
                        ).catch(err => {
                            console.log(err);
                        });

                        cameraExist = true;
                        break;
                    }
                }

            }).catch(err => {
                this.templateFn("part_error_permision_camera");
                this.fn_hiddenErrorExistCamera();
                cameraExist = true;
            });

            if (!cameraExist){
                this.templateFn("part_error_exist_camera");
                this.fn_hiddenErrorPermoisionCamera();
            }

        }
    }

    componentFn_render_formErrorExistCamera(partName) {

        const data = this.getPartProps(partName)

        if (data != null){

            const prop_titleErrorExistCamera    = data.hasOwnProperty("prop_titleErrorExistCamera")    ? data.prop_titleErrorExistCamera      : "";
            const prop_titleBtnRetry            = data.hasOwnProperty("prop_titleBtnRetry")            ? data.prop_titleBtnRetry              : "";

            this._COMPONENT_ERROR_EXIST_CAMERA = new window.ComponentIsEmpty(
                `component-camera-qr-code-reader-error-exist-camera-${this._COMPONENT_RANDOM_ID}` ,
                {
                    classList: "m-2"  ,

                    prop_title:  prop_titleErrorExistCamera ,
                    prop_btnAddStatus: true,
                    prop_btnAddTitle:  prop_titleBtnRetry ,

                    fn_callback: () => {
                        this.templateFn("part_element");
                    } ,
                }
            )
        }
    }

    componentFn_render_formErrorPermisionCamera(partName) {

        const data = this.getPartProps(partName)

        if (data != null){

            const prop_titleErrorPermisionCamera            = data.hasOwnProperty("prop_titleErrorPermisionCamera")                        ? data.prop_titleErrorPermisionCamera            : "";
            const prop_titleBtnRetry            = data.hasOwnProperty("prop_titleBtnRetry")            ? data.prop_titleBtnRetry              : "";

            this._COMPONENT_ERROR_PERMISION_CAMERA = new window.ComponentIsEmpty(
                `component-camera-qr-code-reader-error-permision-camera-${this._COMPONENT_RANDOM_ID}` ,
                {
                    classList: "m-2"  ,

                    prop_title:  prop_titleErrorPermisionCamera ,

                    prop_btnAddStatus: true,
                    prop_btnAddTitle:  prop_titleBtnRetry ,

                    fn_callback: () => {
                        this.templateFn("part_element");
                    } ,
                }
            )

        }
    }

    componentFn_render_input(partName) {

        const data = this.getPartProps(partName)

        if (data != null){

            const prop_size            = data.hasOwnProperty("prop_size")            ? data.prop_size              : null;
            const prop_name            = data.hasOwnProperty("prop_name")            ? data.prop_name              : "";
            const prop_showInput       = data.hasOwnProperty("prop_showInput")       ? data.prop_showInput         : true;

            this._COMPONENT_INPUT = new window.ComponentInput(
                `component-camera-qr-code-reader-input-${this._COMPONENT_RANDOM_ID}` ,
                {
                    classList: [prop_showInput ? "" : "d-none"]  ,

                    prop_type:"string" ,
                    prop_icon: tools_icons.icon_crcode({size : prop_size }   ) ,
                    prop_name: prop_name ,
                    prop_isDisable: true ,

                }
            )

        }
    }



    /* ---------------------------------------------
       FUNCTIONs
    --------------------------------------------- */
    fn_onScanSuccess(decodedText, decodedResult) {
        this._COMPONENT_INPUT.set("prop_value" , decodedText);
        this.fn_onCallback(decodedText);
    }

    fn_hiddenErrorExistCamera() {
        document.querySelector(`#component-camera-qr-code-reader-error-exist-camera-${this._COMPONENT_RANDOM_ID}`).innerHTML=""
    }
    fn_hiddenErrorPermoisionCamera() {
        document.querySelector(`#component-camera-qr-code-reader-error-permision-camera-${this._COMPONENT_RANDOM_ID}`).innerHTML=""
    }


    fn_onCallback(qrCodde){
        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("fn_callback") && typeof data.fn_callback != null){
            data.fn_callback(qrCodde);
        }
    }


}


/*-------------------------------------
 011-03) Component Upload Qr Code Reader
-------------------------------------*/
class ComponentUploadQrCodeReaderBase extends ComponentBase{

    /* ---------------------------------------------
        PROPERTYs Pattern
     --------------------------------------------- */
    _COMPONENT_PATTERN = {
        prop_size: {
            prop: "prop_size",
            default: tools_css.standardSizes.m.name,
        },
        prop_formHight: {
            prop: "prop_formHight",
            default: 150
        },
        prop_showInput: {
            prop: "prop_showInput",
            default: true
        },
        prop_name: {
            prop: "prop_name",
            default: "upload_qr_code"
        }
    };

    /* ---------------------------------------------
           PROPERTYs Props
    --------------------------------------------- */
    _COMPONENT_PROPS = {
        part_structure: [],
        part_label: [],
        part_element: [
            this._COMPONENT_PATTERN.prop_formHight
        ],
        part_input: [
            this._COMPONENT_PATTERN.prop_showInput,
            this._COMPONENT_PATTERN.prop_name,
            this._COMPONENT_PATTERN.prop_size,
        ]
    };



    /* ---------------------------------------------
   PROPERTYs Schema
   --------------------------------------------- */
    _COMPONENT_SCHEMA = {
        part_structure: {
            part_label: {},
            part_element: {},
            part_input: {}
        }
    }

}
window.ComponentUploadQrCodeReader = class ComponentUploadQrCodeReader extends ComponentUploadQrCodeReaderBase {

    _COMPONENT_INPUT_FILE = null;
    _COMPONENT_ERROR_EXIST_CAMERA = null;
    _COMPONENT_ERROR_PERMISION_CAMERA = null;
    _COMPONENT_INPUT = null;


    /* ---------------------------------------------
       SETUP
   --------------------------------------------- */
    constructor(elId, config) {
        super(
            listComponent[ComponentUploadQrCodeReader.name] ,
            elId
        );
        super.renderComponent(config);
    }


    /* ---------------------------------------------
      TEMPLATEs
    --------------------------------------------- */
    componentFn() {
        this.templateFn("part_label");
        this.templateFn("part_element");
        this.templateFn("part_input");
    }

    templateFn(partName = null) {
        switch (partName) {
            case "part_structure":
                return this.template_render_structure(partName);
            case "part_label":
                return this.componentFn_render_label(partName);
            case "part_element":
                return this.componentFn_render_formElement(partName);
            case "part_input":
                return this.componentFn_render_input(partName);
            default:
                return this.templateBasic_render();
        }
    }

    template_render_structure(partName) {
        const content = `
  
  <component-label id="component-upload-qr-code-reader-label-${this._COMPONENT_RANDOM_ID}"></component-label>
  
  <div id="component-upload-qr-code-reader-input-reader-${this._COMPONENT_RANDOM_ID}" style="display: none"></div>
  <component-input-file id="component-upload-qr-code-reader-input-file-${this._COMPONENT_RANDOM_ID}"></component-input-file>
  
  <component-input id="component-upload-qr-code-reader-input-${this._COMPONENT_RANDOM_ID}"></component-input>

                `;
        return this.templateBasic_render_structure(content);
    }


    componentFn_render_label(partName) {
        this.componentFneBasic_render_structure(
            `component-upload-qr-code-reader-label-${this._COMPONENT_RANDOM_ID}` ,
        );
    }

    componentFn_render_formElement(partName) {

        const data = this.getPartProps(partName)

        if (data != null){

            const prop_formHight     = data.hasOwnProperty("prop_formHight")                 ? data.prop_formHight     : 150;

            new window.ComponentInputFile(
                `component-upload-qr-code-reader-input-file-${this._COMPONENT_RANDOM_ID}` ,
                {
                    prop_labelShow: false ,

                    prop_accept:  "image/*" ,
                    prop_maxCount: 1 ,
                    prop_borderHeight: prop_formHight+"px" ,
                    prop_showListFiles: false ,

                    fn_callback: (event , files) => {
                        if (files != null && files.length > 0){
                            this.fn_onScanSuccess(files[0]);
                        }
                    } ,

                }
            )

        }
    }

    componentFn_render_input(partName) {

        const data = this.getPartProps(partName)

        if (data != null){
            const prop_size            = data.hasOwnProperty("prop_size")            ? data.prop_size              : null;
            const prop_name            = data.hasOwnProperty("prop_name")            ? data.prop_name              : "";
            const prop_showInput       = data.hasOwnProperty("prop_showInput")       ? data.prop_showInput         : true;

            this._COMPONENT_INPUT = new window.ComponentInput(
                `component-upload-qr-code-reader-input-${this._COMPONENT_RANDOM_ID}` ,
                {
                    classList: [prop_showInput ? "" : "d-none"]  ,

                    prop_type:"string" ,
                    prop_icon: tools_icons.icon_crcode({size : prop_size }  ) ,
                    prop_name: prop_name ,
                    prop_isDisable: true ,

                }
            )

        }
    }



    /* ---------------------------------------------
       FUNCTIONs
    --------------------------------------------- */
    fn_onScanSuccess(file) {
        const html5Qr = new Html5Qrcode(
            `component-upload-qr-code-reader-input-reader-${this._COMPONENT_RANDOM_ID}`
        );
        html5Qr.scanFile(file, true)
            .then(decodedText => {
                this._COMPONENT_INPUT.set("prop_value" , decodedText);
                this.fn_onCallback(decodedText);
            })
            .catch(err => {
                console.log("خطا در خواندن QR: " + err)
            });
    }


    fn_onCallback(qrCodde){
        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("fn_callback") && typeof data.fn_callback != null){
            data.fn_callback(qrCodde);
        }
    }


}


/*-------------------------------------
 011-04) Component Qr Code Reader
-------------------------------------*/
class ComponentQrCodeReaderBase extends ComponentBase{

    /* ---------------------------------------------
         PROPERTYs Pattern
  --------------------------------------------- */
    _COMPONENT_PATTERN = {
        prop_size: {
            prop: "prop_size",
            default: tools_css.standardSizes.m.name,
        },
        prop_titleTabCamera: {
            prop: "prop_titleTabCamera",
            default: "دوربین"
        },
        prop_titleTabFile: {
            prop: "prop_titleTabFile",
            default: "فایل"
        },
        prop_titleTabInput: {
            prop: "prop_titleTabInput",
            default: "ورودی"
        },
        prop_name: {
            prop: "prop_name",
            default: ""
        },
        prop_value: {
            prop: "prop_value",
            default: ""
        },
        prop_placeholder: {
            prop: "prop_placeholder",
            default: ""
        }
    };

    /* ---------------------------------------------
           PROPERTYs Props
    --------------------------------------------- */
    _COMPONENT_PROPS = {
        part_structure: [],
        part_label: [],
        part_tabs: [
            this._COMPONENT_PATTERN.prop_titleTabCamera,
            this._COMPONENT_PATTERN.prop_titleTabFile,
            this._COMPONENT_PATTERN.prop_titleTabInput
        ],
        part_qr_code: [],
        part_qr_code_file: [],
        part_qr_code_camera: [],
        part_input: [
            this._COMPONENT_PATTERN.prop_name,
            this._COMPONENT_PATTERN.prop_value,
            this._COMPONENT_PATTERN.prop_placeholder,
            this._COMPONENT_PATTERN.prop_size,
        ]
    };



    /* ---------------------------------------------
   PROPERTYs Schema
   --------------------------------------------- */
    _COMPONENT_SCHEMA = {
        part_structure: {
            part_label: {},
            part_tabs: {},
            part_qr_code: {
                part_qr_code_file: {} ,
                part_qr_code_camera: {} ,
            },
            part_input: {}
        }
    }

}
window.ComponentQrCodeReader = class ComponentQrCodeReader extends ComponentQrCodeReaderBase {

    _COMPONENT_LABEL = null;
    _COMPONENT_TABS = null;
    _COMPONENT_INPUT = null;
    _COMPONENT_QR_CODE_CAMERA = null;
    _COMPONENT_QR_CODE_UPLOAD = null;


    /* ---------------------------------------------
       SETUP
   --------------------------------------------- */
    constructor(elId, config) {
        super(
            listComponent[ComponentQrCodeReader.name] ,
            elId
        );
        super.renderComponent(config);
    }


    /* ---------------------------------------------
      TEMPLATEs
    --------------------------------------------- */
    componentFn() {
        this.templateFn("part_label");
        this.templateFn("part_tabs");
        this.templateFn("part_tabs");
        this.templateFn("part_input");

        this.fn_onSelectTab(1);
    }

    templateFn(partName = null) {
        switch (partName) {
            case "part_structure":
                return this.template_render_structure(partName);
            case "part_label":
                return this.componentFn_render_label(partName);
            case "part_tabs":
                return this.componentFn_render_tabs(partName);
            case "part_qr_code":
                return this.template_render_qrCode(partName);
            case "part_qr_code_camera":
                return this.componentFn_render_qrCodeCamera(partName);
            case "part_qr_code_file":
                return this.componentFn_render_qrCodeFile(partName);
            case "part_input":
                return this.componentFn_render_input(partName);
            default:
                return this.templateBasic_render();
        }
    }


    template_render_structure(partName) {
        const content = `
  
  <component-label id="component-qr-code-reader-label-${this._COMPONENT_RANDOM_ID}"></component-label>

  <component-tabs id="component-qr-code-reader-tabs-${this._COMPONENT_RANDOM_ID}"></component-tabs>
  
   ${this.templateFn("part_qr_code") ?? ""}
  
  <component-input id="component-qr-code-reader-input-${this._COMPONENT_RANDOM_ID}"></component-input>
  
                `;
        return this.templateBasic_render_structure(content);
    }

    template_render_qrCode(partName) {
        const data = this.getPartProps(partName)

        if (data != null){

            return `
<section data-part-name="${partName}" 
         id="component-qr-code-reader-qr-code-${this._COMPONENT_RANDOM_ID}"
         class="">
         
     <style>
         #${this._COMPONENT_ID} #component-qr-code-reader-qr-code-${this._COMPONENT_RANDOM_ID}{
        
         }
     </style>
     
     
     <component-camera-qr-code-reader  id="component-qr-code-reader-qr-code-camera-${this._COMPONENT_RANDOM_ID}"></component-camera-qr-code-reader>
     
     <component-upload-qr-code-reader  id="component-qr-code-reader-qr-code-upload-${this._COMPONENT_RANDOM_ID}"></component-upload-qr-code-reader>
      
</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    componentFn_render_label(partName) {
        this.componentFneBasic_render_structure(
            `component-qr-code-reader-label-${this._COMPONENT_RANDOM_ID}` ,
        );
    }

    componentFn_render_tabs(partName) {

        const data = this.getPartProps(partName)

        if (data != null){

            const prop_titleTabCamera        = data.hasOwnProperty("prop_titleTabCamera")          ? data.prop_titleTabCamera                   : "";
            const prop_titleTabFile          = data.hasOwnProperty("prop_titleTabFile")            ? data.prop_titleTabFile                     : "";
            const prop_titleTabInput         = data.hasOwnProperty("prop_titleTabInput")           ? data.prop_titleTabInput                    : "";

            this._COMPONENT_TABS = new window.ComponentTabs(
                `component-qr-code-reader-tabs-${this._COMPONENT_RANDOM_ID}` ,
                {

                    prop_type: 0 ,
                    prop_tabSelected: 1 ,
                    prop_firstCallBack: false ,
                    prop_tabs: [
                        {id:1 , title: prop_titleTabCamera } ,
                        {id:2 , title: prop_titleTabFile   },
                        {id:3 , title: prop_titleTabInput  }
                    ] ,
                    fn_callback: (event , tabIndex) =>{
                        this.fn_onSelectTab(tabIndex)
                    }
                }
            )

        }
    }

    componentFn_render_input(partName) {

        const data = this.getPartProps(partName)

        if (data != null){

            const prop_size            = data.hasOwnProperty("prop_size")            ? data.prop_size              : null;
            const prop_name            = data.hasOwnProperty("prop_name")            ? data.prop_name              : "";
            const prop_value           = data.hasOwnProperty("prop_value")           ? data.prop_value             : "";
            const prop_placeholder     = data.hasOwnProperty("prop_placeholder")     ? data.prop_placeholder       : "";

            this._COMPONENT_INPUT = new window.ComponentInput(
                `component-qr-code-reader-input-${this._COMPONENT_RANDOM_ID}` ,
                {
                    prop_type:"string" ,
                    prop_icon: tools_icons.icon_crcode({size : prop_size }  ) ,
                    prop_name: prop_name ,
                    prop_value: prop_value ,
                    prop_placeholder: prop_placeholder ,
                    prop_isDisable: true ,

                    fn_onblur: (event , qrCode) => {
                        this.fn_onScanSuccess(qrCode);
                    } ,

                }
            )

        }
    }

    componentFn_render_qrCodeCamera(partName) {

        const data = this.getPartProps(partName)

        if (data != null){

            const prop_name            = data.hasOwnProperty("prop_name")            ? data.prop_name              : "";

            this._COMPONENT_QR_CODE_CAMERA = new window.ComponentCameraQrCodeReader(
                `component-qr-code-reader-qr-code-camera-${this._COMPONENT_RANDOM_ID}` ,
                {
                    prop_labelShow: false ,
                    prop_showInput: false ,

                    fn_callback: (qrCode)=>{
                        this.fn_onScanSuccess(qrCode);
                    }
                }
            )

        }
    }

    componentFn_render_qrCodeFile(partName) {

        const data = this.getPartProps(partName)

        if (data != null){

            const prop_name            = data.hasOwnProperty("prop_name")            ? data.prop_name              : "";

            this._COMPONENT_QR_CODE_UPLOAD = new window.ComponentUploadQrCodeReader(
                `component-qr-code-reader-qr-code-upload-${this._COMPONENT_RANDOM_ID}` ,
                {
                    prop_labelShow: false ,
                    prop_showInput: false ,

                    fn_callback: (qrCode)=>{
                        this.fn_onScanSuccess(qrCode);
                    }
                }
            )

        }
    }



    /* ---------------------------------------------
       FUNCTIONs
    --------------------------------------------- */


    fn_onSelectTab(tabId) {
        const tabCamera = document.querySelector(`#component-qr-code-reader-qr-code-camera-${this._COMPONENT_RANDOM_ID}`);
        const tabUpload = document.querySelector(`#component-qr-code-reader-qr-code-upload-${this._COMPONENT_RANDOM_ID}`);

        tabCamera.innerHTML = "";
        tabUpload.innerHTML = "";
        this._COMPONENT_INPUT.set("prop_isDisable" , true);

        if (tabId == 1){
            this.templateFn("part_qr_code_camera");
        }
        else if (tabId == 2){
            this.templateFn("part_qr_code_file");
        }
        else if (tabId == 3){
            this._COMPONENT_INPUT.set("prop_isDisable" , false);
        }
    }

    fn_onScanSuccess(decodedText) {
        this._COMPONENT_INPUT.set("prop_value" , decodedText);
        this.fn_onCallback(decodedText);
    }

    fn_onCallback(qrCodde){
        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("fn_callback") && typeof data.fn_callback != null){
            data.fn_callback(qrCodde);
        }
    }
}








//===============================================================================================================
// [10 - 19] button / inputs / tools -> [012] Inputs Tools
//===============================================================================================================

/*-------------------------------------
 012-01) Component check box
-------------------------------------*/
class ComponentAcceptTermsBase extends ComponentBase{


    /* ---------------------------------------------
         PROPERTYs Pattern
    --------------------------------------------- */
    _COMPONENT_PATTERN = {
        prop_draggable: {
            prop: "prop_draggable",
            default: false
        },
        prop_heightForm: {
            prop: "prop_heightForm",
            default: 150
        },
        prop_heightItems: {
            prop: "prop_heightItems",
            default: 45
        },
        prop_size: {
            prop: "prop_size",
            default: tools_css.standardSizes.m.name,
        },
        prop_titleAll: {
            prop: "prop_titleAll",
            default: "select all",
        },
        prop_checkBoxes: {
            prop: "prop_checkBoxes",
            default: [],
        },

    };

    /* ---------------------------------------------
           PROPERTYs Props
    --------------------------------------------- */
    _COMPONENT_PROPS = {
        part_structure: [],

        part_formAll: [

        ],

        part_formAll_checkBoxAll: [
            this._COMPONENT_PATTERN.prop_size,
            this._COMPONENT_PATTERN.prop_titleAll
        ],

        part_checkBoxesList: [
            this._COMPONENT_PATTERN.prop_size,
            this._COMPONENT_PATTERN.prop_checkBoxes,
            this._COMPONENT_PATTERN.prop_heightForm,
        ],

        part_checkBoxesList_draggableRender: [
            this._COMPONENT_PATTERN.prop_draggable,
            this._COMPONENT_PATTERN.prop_heightItems,
        ],

        part_checkBoxesList_checkBoxRender: [
            this._COMPONENT_PATTERN.prop_size,
            this._COMPONENT_PATTERN.prop_checkBoxes
        ],
    };



    /* ---------------------------------------------
   PROPERTYs Schema
   --------------------------------------------- */
    _COMPONENT_SCHEMA = {
        part_structure: {
            part_formAll: {
                part_formAll_checkBoxAll: {} ,
            } ,
            part_checkBoxesList: {
                part_checkBoxesList_draggableRender: {
                    part_checkBoxesList_checkBoxRender: {}
                } ,
            } ,
        } ,

    }

}
window.ComponentAcceptTerms = class ComponentAcceptTerms extends ComponentAcceptTermsBase {

    _COMPONENT_CHECK_BOX_ALL = null;
    _LIST_COMPONENT_CHECK_BOX_ITEMS = [];

    /* ---------------------------------------------
       SETUP
   --------------------------------------------- */
    constructor(elId , config) {
        super(
            listComponent[ComponentAcceptTerms.name] ,
            elId
        );
        super.renderComponent(config);
    }


    /* ---------------------------------------------
      TEMPLATEs
    --------------------------------------------- */
    componentFn(screanWidthType){
        this.templateFn("part_formAll_checkBoxAll");
        this.templateFn("part_checkBoxesList_checkBoxRender");
        this.templateFn("part_checkBoxesList_draggableRender");

        this.onRegisterFinish().then(el => {
            this.fn_onCheckBoxItem();
        })
    }

    templateFn(partName = null){
        switch (partName){
            case "part_structure":
                return this.template_render_structure(partName);
            case "part_formAll":
                return this.template_render_formAll(partName);
            case "part_formAll_checkBoxAll":
                return this.componentFn_render_formAll_checkBoxAll(partName);
            case "part_checkBoxesList":
                return this.template_render_checkBoxesList(partName);
            case "part_checkBoxesList_checkBoxRender":
                return this.componentFn_render_checkBoxesList_checkBoxRender(partName);
            case "part_checkBoxesList_draggableRender":
                return this.componentFn_render_checkBoxesList_draggableRender(partName);
            default:
                return this.templateBasic_render();
        }
    }

    template_render_structure(partName ) {
        const content = `
           ${this.templateFn("part_formAll") ?? ""}
           ${this.templateFn("part_checkBoxesList") ?? ""}
        `;
        return this.templateBasic_render_structure(content);
    }

    template_render_formAll(partName) {

        const data = this.getPartProps(partName)

        if (data != null){

            return `
<section data-part-name="${partName}" 
         id="component-accept-tems-check-box-all-form-${ this._COMPONENT_RANDOM_ID}" 
         class="border-bottom mx-2 pb-2" >
         
     <style>
         #${this._COMPONENT_ID} #component-accept-tems-check-box-all-form-${ this._COMPONENT_RANDOM_ID}{
             display: flow-root;
         }
     </style>
     
     <component-check-box id="component-accept-terms-check-box-all-${this._COMPONENT_RANDOM_ID}">  </component-check-box> 
             
</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    componentFn_render_formAll_checkBoxAll(partName) {

        const data = this.getPartProps(partName)

        if (data != null){

            const prop_size               =   data.hasOwnProperty("prop_size")                ?  data.prop_size                 :  null;
            const prop_titleAll           =   data.hasOwnProperty("prop_titleAll")            ?  data.prop_titleAll             : "";

            this._COMPONENT_CHECK_BOX_ALL = new window.ComponentCheckBox(
                `component-accept-terms-check-box-all-${this._COMPONENT_RANDOM_ID}` ,
                {
                    classList: "col-md-3 col-12 mt-2"  ,

                    prop_title: prop_titleAll ,
                    prop_size: prop_size ,
                    prop_isSelected:false ,
                    prop_labelShow:false ,
                    fn_callback: (event , status) =>{
                        this.fn_onCheckBoxAll(event , status)
                    }
                }
            )
        }

    }

    template_render_checkBoxesList(partName) {

        const data = this.getPartProps(partName)

        if (data != null){

            const prop_size               =   data.hasOwnProperty("prop_size")                ?  data.prop_size                 :  null;
            const prop_checkBoxes         =   data.hasOwnProperty("prop_checkBoxes")          ?  data.prop_checkBoxes           : [];
            const prop_heightForm         =   data.hasOwnProperty("prop_heightForm")          ?  data.prop_heightForm           : 150;

            let listCheckBoxesHtml = "";
            if (prop_checkBoxes != null && Array.isArray(prop_checkBoxes)){
                for (let i=0; i<prop_checkBoxes.length; i++) {
                    listCheckBoxesHtml += `    <component-check-box id="component-accept-tems-check-box-item-term-${this._COMPONENT_RANDOM_ID}-${i}">  </component-check-box> `
                }
            }


            return `
<section data-part-name="${partName}" 
         id="component-accept-terms-check-boxes-list-${ this._COMPONENT_RANDOM_ID}" 
         class="" >
         
     <style>
         #${this._COMPONENT_ID} #component-accept-terms-check-boxes-list-${ this._COMPONENT_RANDOM_ID}{
             overflow: auto;
             height: ${prop_heightForm}px;
         }
     </style>
     
      <component-draggable-orders
             id="component-accept-tems-check-boxes-list-terms-${ this._COMPONENT_RANDOM_ID}">
                    <component-body>
                        ${listCheckBoxesHtml}
                    </component-body>
      </component-draggable-orders>
             
</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    componentFn_render_checkBoxesList_checkBoxRender(partName) {

        const data = this.getPartProps(partName)

        if (data != null){

            const prop_size               =   data.hasOwnProperty("prop_size")                ?  data.prop_size                 :  null;
            const prop_checkBoxes         =   data.hasOwnProperty("prop_checkBoxes")          ?  data.prop_checkBoxes           : [];

            if (prop_checkBoxes != null && Array.isArray(prop_checkBoxes)){
                for (let i=0; i< prop_checkBoxes.length; i++) {

                    const componentItem = new window.ComponentCheckBox(
                        `component-accept-tems-check-box-item-term-${this._COMPONENT_RANDOM_ID}-${i}` ,
                        {
                            classList: " col-12 mx-2"  ,
                            styles: {
                                "display": "flow-root"
                            } ,

                            prop_name: prop_checkBoxes[i].name ,
                            prop_title: prop_checkBoxes[i].title ,
                            prop_size: prop_size ,
                            prop_isSelected:prop_checkBoxes[i].selected ,
                            prop_labelShow:false ,
                            fn_callback: (event , status) =>{
                                this.fn_onCheckBoxItem(event , status , false);
                            }
                        }
                    );

                    this._LIST_COMPONENT_CHECK_BOX_ITEMS.push(componentItem);

                }
            }
        }

    }

    componentFn_render_checkBoxesList_draggableRender(partName) {

        const data = this.getPartProps(partName)

        if (data != null){
            const prop_draggable               =   data.hasOwnProperty("prop_draggable")                ?  data.prop_draggable                 :  true;
            const prop_heightItems             =   data.hasOwnProperty("prop_heightItems")              ?  data.prop_heightItems               :  45;

            new window.ComponentDraggableOrders(
                `component-accept-tems-check-boxes-list-terms-${ this._COMPONENT_RANDOM_ID}`,
                {
                    classList: "col-md-3 col-12 mt-2"  ,
                    prop_height: prop_heightItems ,
                    prop_draggable: prop_draggable ,

                    fn_startComponent: (order) => {
                        this.fn_syncListCheckBoxes(order);
                    } ,
                    fn_callback: (order) =>{
                        this.fn_syncListCheckBoxes(order , false);
                    }
                }
            );
        }

    }






    /* ---------------------------------------------
      FUNCTIONs
     --------------------------------------------- */

    fn_syncListCheckBoxes(order , isfirst=true){
        let listExp = [];
        if (order != null && Array.isArray(order)){
            for (let i = 0; i < order.length ; i++) {
                const itemOrder = order[i];

                for (let j = 0; j < this._LIST_COMPONENT_CHECK_BOX_ITEMS.length ; j++) {
                    const itemComponent = this._LIST_COMPONENT_CHECK_BOX_ITEMS[j];

                    let itemSelector = null;
                    if (isfirst){
                        itemSelector = itemComponent._COMPONENT_SELECTOR;
                    }
                    else{
                        itemSelector = itemComponent.component._COMPONENT_SELECTOR;
                    }

                    const itemElement = document.querySelector(itemSelector)
                    const itemParent = itemElement.parentElement;

                    if (itemParent == itemOrder.el){
                        itemOrder.component = isfirst ? itemComponent : itemComponent.component;
                        break;
                    }
                }
                listExp.push(itemOrder)
            }
        }
        this._LIST_COMPONENT_CHECK_BOX_ITEMS = listExp;
        if (!isfirst){
            this.fn_callback();
        }
    }

    fn_onCheckBoxAll(event , status){
        for (let j = 0; j < this._LIST_COMPONENT_CHECK_BOX_ITEMS.length ; j++) {
            const itemComponent = this._LIST_COMPONENT_CHECK_BOX_ITEMS[j];
            itemComponent.component.call_setValue(status)
        }
        this.fn_callback();
    }

    fn_onCheckBoxItem(event , status , isfirst=true){
        let isCompleteTrue = true;
        for (let j = 0; j < this._LIST_COMPONENT_CHECK_BOX_ITEMS.length ; j++) {
            const itemComponent = this._LIST_COMPONENT_CHECK_BOX_ITEMS[j];
            const itemStatus = itemComponent.component.call_getValue();
            if (!itemStatus){
                isCompleteTrue = false;
                break;
            }
        }
        this._COMPONENT_CHECK_BOX_ALL.call_setValue(isCompleteTrue);

        if (!isfirst){
            this.fn_callback();
        }
    }

    fn_callback(event){
        let listExp = [];
        let isCompleteTrue = true;
        if (this._LIST_COMPONENT_CHECK_BOX_ITEMS != null && Array.isArray(this._LIST_COMPONENT_CHECK_BOX_ITEMS)){
            for (let j = 0; j < this._LIST_COMPONENT_CHECK_BOX_ITEMS.length ; j++) {
                const itemComponent = this._LIST_COMPONENT_CHECK_BOX_ITEMS[j];

                const itemName = itemComponent.component.get("prop_name");
                const itemIsSelected = itemComponent.component.call_getValue();

                if(itemIsSelected){
                    listExp.push(itemName)
                }
                else{
                    isCompleteTrue = false;
                }
            }
        }

        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("fn_callback") && typeof data.fn_callback != null){
            data.fn_callback(event , listExp , isCompleteTrue);
        }
    }


}


/*-------------------------------------
 012-02) Component check box
-------------------------------------*/
class ComponentSelectColumnsBase extends ComponentBase{

    /* ---------------------------------------------
         PROPERTYs Pattern
    --------------------------------------------- */
    _COMPONENT_PATTERN = {
        prop_title: {
            prop: "prop_title",
            default: "title"
        },
        prop_widthBody: {
            prop: "prop_widthBody",
            default: 300
        },
        prop_heightBody: {
            prop: "prop_heightBody",
            default: 300
        },
        prop_heightItems: {
            prop: "prop_heightItems",
            default: 45
        },
        prop_icon: {
            prop: "prop_icon",
            default: tools_icons.icon_select_columns
        },
        prop_size: {
            prop: "prop_size",
            default: tools_css.standardSizes.m.name,
        },
        prop_titleAll: {
            prop: "prop_titleAll",
            default: "select all",
        },
        prop_columns: {
            prop: "prop_columns",
            default: [],
        },

        prop_backgroundColorIcon: {
            prop: "prop_backgroundColorIcon",
            default: tools_const?.styles?.selectColumn?.backgroundColor_icon ?? ""
        },
        prop_colorIcon: {
            prop: "prop_colorIcon",
            default: tools_const?.styles?.selectColumn?.color_icon ?? ""
        },


        prop_draggable: {
            prop: "prop_draggable",
            default: true
        },
        prop_showListSelected: {
            prop: "prop_showListSelected",
            default: true
        } ,


        prop_langSelected: {
            prop: "prop_langSelected",
            default: component_props.directionRtl ? "fa" : "en"
        } ,
        prop_langs: {
            prop: "prop_langs",
            default: {
                fa: {
                    btn_accept: "تایید" ,
                    btn_cancel: "لغو" ,
                    select_all: "انتخاب همه" ,
                } ,
                en: {
                    btn_accept: "Accept" ,
                    btn_cnacel: "Cancel" ,
                    select_all: "Select All" ,
                }
            }
        },

    };

    /* ---------------------------------------------
           PROPERTYs Props
    --------------------------------------------- */
    _COMPONENT_PROPS = {
        part_structure: [],

        part_label: [

        ],

        part_icon: [
            this._COMPONENT_PATTERN.prop_size ,
            this._COMPONENT_PATTERN.prop_icon ,
            this._COMPONENT_PATTERN.prop_backgroundColorIcon ,
            this._COMPONENT_PATTERN.prop_colorIcon ,
            this._COMPONENT_PATTERN.prop_showListSelected ,
        ],

        part_positionElement: [
            this._COMPONENT_PATTERN.prop_size ,
            this._COMPONENT_PATTERN.prop_widthBody ,
            this._COMPONENT_PATTERN.prop_heightBody ,
            this._COMPONENT_PATTERN.prop_showListSelected ,
        ],

        part_positionElement_selector: [
            this._COMPONENT_PATTERN.prop_columns ,
            this._COMPONENT_PATTERN.prop_titleAll ,
            this._COMPONENT_PATTERN.prop_heightItems ,
            this._COMPONENT_PATTERN.prop_size ,
            this._COMPONENT_PATTERN.prop_heightBody ,
            this._COMPONENT_PATTERN.prop_langSelected ,
            this._COMPONENT_PATTERN.prop_langs ,
            this._COMPONENT_PATTERN.prop_draggable ,
        ],

        part_positionElement_btnAccept: [
            this._COMPONENT_PATTERN.prop_size ,
            this._COMPONENT_PATTERN.prop_langSelected ,
            this._COMPONENT_PATTERN.prop_langs ,
        ],

        part_positionElement_btnCancel: [
            this._COMPONENT_PATTERN.prop_size ,
            this._COMPONENT_PATTERN.prop_langSelected ,
            this._COMPONENT_PATTERN.prop_langs ,
        ],

        part_columnsSelected: [
            this._COMPONENT_PATTERN.prop_columns ,
            this._COMPONENT_PATTERN.prop_size ,
            this._COMPONENT_PATTERN.prop_showListSelected ,
        ]

    };



    /* ---------------------------------------------
   PROPERTYs Schema
   --------------------------------------------- */
    _COMPONENT_SCHEMA = {
        part_structure: {
            part_label: {} ,
            part_icon: {} ,
            part_positionElement: {
                part_positionElement_selector: {} ,
                part_positionElement_btnAccept: {} ,
                part_positionElement_btnCancel: {} ,
            } ,
            part_columnsSelected: {}
        }
    }

}
window.ComponentSelectColumns = class ComponentSelectColumns extends ComponentSelectColumnsBase {

    _SHOW_BODY = false;
    _TALBE_LIST_COLUMNS = [];
    _TALBE_LIST_COLUMNS_TEMPLATE = [];

    /* ---------------------------------------------
       SETUP
   --------------------------------------------- */
    constructor(elId , config) {
        super(
            listComponent[ComponentSelectColumns.name] ,
            elId
        );
        super.renderComponent(config);
    }


    /* ---------------------------------------------
      TEMPLATEs
    --------------------------------------------- */
    componentFn(screanWidthType){
        this.templateFn("part_label");

        this.templateFn("part_icon");

        this.templateFn("part_positionElement");
        this.templateFn("part_positionElement_btnAccept");
        this.templateFn("part_positionElement_btnCancel");

        this.templateFn("part_columnsSelected");

        this.onRegisterFinish().then(el => {
            this.readyListColumns();
        })
    }

    templateFn(partName = null){
        switch (partName){
            case "part_structure":
                return this.template_render_structure(partName);
            case "part_label":
                return this.componentFn_render_label(partName);
            case "part_icon":
                return this.componentFn_render_icon(partName);
            case "part_positionElement":
                return this.componentFn_render_positionElement(partName);
            case "part_positionElement_selector":
                return this.componentFn_render_positionElement_selector(partName);
            case "part_positionElement_btnAccept":
                return this.componentFn_render_positionElement_btnAccept(partName);
            case "part_positionElement_btnCancel":
                return this.componentFn_render_positionElement_btnCancel(partName);
            case "part_columnsSelected":
                return this.componentFn_render_positionElement_columnsSelected(partName);
            default:
                return this.templateBasic_render("");
        }
    }

    template_render_structure(partName ) {
        const content = `

<style>
    #component-component-select-columns-structure-${ this._COMPONENT_RANDOM_ID}{
       display: flow-root;
    }
</style>
             <component-label id="component-select-columns-label-${ this._COMPONENT_RANDOM_ID}"></component-label>
             
             <component-icon id="component-select-columns-icon-${ this._COMPONENT_RANDOM_ID}"></component-icon>
          
             <component-list-selected-scroller id="component-select-columns-list-selected-${ this._COMPONENT_RANDOM_ID}"></component-list-selected-scroller>
            
            
             <section class="position-relative">
                  <component-position-element id="component-select-columns-position-element-${ this._COMPONENT_RANDOM_ID}">
                       <component-body>
                       
                            <component-accept-terms id="component-select-columns-selector-${ this._COMPONENT_RANDOM_ID}"></component-accept-terms>
                                  
                            <section class="border-top mx-1 row">
                                 <component-button id="component-select-columns-btn-accept-${ this._COMPONENT_RANDOM_ID}"></component-button>
                                 <component-button id="component-select-columns-btn-cancel-${ this._COMPONENT_RANDOM_ID}"></component-button>
                            </section>
             
                       </component-body>
                  </component-position-element>
             </section>
             
            
        `;
        return this.templateBasic_render_structure(content , []);
    }

    componentFn_render_label(partName ) {
        this.componentFneBasic_render_structure(
            `component-select-columns-label-${ this._COMPONENT_RANDOM_ID}` ,
            {
                fn_callback: (event)=>{
                    this.fn_onClickIcon(event)
                }
            }
        );
    }

    componentFn_render_icon(partName){
        const data = this.getPartProps(partName)

        if (data != null){

            const prop_icon                    =   data.hasOwnProperty("prop_icon")                      ?  data.prop_icon                    :  null;
            const prop_size                    =   data.hasOwnProperty("prop_size")                      ?  data.prop_size                    :  null;
            const prop_backgroundColorIcon     =   data.hasOwnProperty("prop_backgroundColorIcon")       ?  data.prop_backgroundColorIcon     :  "";
            const prop_colorIcon               =   data.hasOwnProperty("prop_colorIcon")                 ?  data.prop_colorIcon               :  "";
            const directionRtl                 =   data.hasOwnProperty("directionRtl")                   ? data.directionRtl                  : (component_props != null && component_props.hasOwnProperty("directionRtl") ? component_props.directionRtl : false)
            const prop_showListSelected        =   data.hasOwnProperty("prop_showListSelected")          ?  data.prop_showListSelected        :  true;

            const elIconHeight = tools_css.getIconSize(prop_size);
            const elHeight = tools_css.getHeightSize(prop_size);

            let styles = {
                "cursor" : "pointer" ,
                "background-color": prop_backgroundColorIcon,
                "float" : directionRtl ? "right" : "left" ,
            };
            if (prop_showListSelected){
                styles["width"] = elHeight+15+"px";
                styles["height"] = elHeight+15+"px";
            }
            else{
                styles["width"] = elHeight+"px";
                styles["height"] = elHeight+"px";
            }


            if (prop_icon != null){
                new window.ComponentIcon(
                    `component-select-columns-icon-${ this._COMPONENT_RANDOM_ID}` ,
                    {
                        classList : [ "position-relative" , "border" , "shadow-sm" , "d-block"  ,  "rounded"] ,

                        prop_icon: prop_icon != null ? (typeof prop_icon == "function" ? prop_icon(elIconHeight , prop_colorIcon) : prop_icon) : "" ,


                        styles: styles,

                        prop_iconClass : [ "position-absolute" ] ,
                        prop_iconStyles : {
                            "top": "50%" ,
                            "left": "50%" ,
                            "transform": "translate(-50% , -50%)" ,
                            "color": prop_colorIcon,
                        } ,

                        fn_callback: (event)=>{
                            this.fn_onClickIcon(event)
                        } ,
                    }
                )
            }

        }
    }

    componentFn_render_positionElement(partName){

        const data = this.getPartProps(partName)

        if (data != null){
            const prop_size                    =   data.hasOwnProperty("prop_size")                      ?  data.prop_size                    :  null;
            const prop_heightBody              =   data.hasOwnProperty("prop_heightBody")                ?  data.prop_heightBody              :  250;
            const prop_widthBody               =   data.hasOwnProperty("prop_widthBody")                 ?  data.prop_widthBody               :  300;
            const prop_showListSelected        =   data.hasOwnProperty("prop_showListSelected")          ?  data.prop_showListSelected        :  true;

            const elHeight = tools_css.getHeightSize(prop_size);

            new window.ComponentPositionElement(
                `component-select-columns-position-element-${ this._COMPONENT_RANDOM_ID}` ,
                {
                    classList :             ["d-none" ] ,
                    prop_elementClass:      ["border", "shadow-sm", "bg-white", "px-2", "py-1", "rounded-0" , "overflow-hidden"] ,
                    prop_positionTop :      prop_showListSelected!=null ? elHeight+15+"px" : "5px" ,
                    prop_width :            prop_widthBody+"px",
                    prop_height :           prop_heightBody+"px" ,
                }
            )
        }
    }

    componentFn_render_positionElement_selector(partName){
        const data = this.getPartProps(partName)

        if (data != null){
            const prop_size                    =   data.hasOwnProperty("prop_size")                      ?  data.prop_size                    :  null;
            //const prop_columns                 =   data.hasOwnProperty("prop_columns")                   ?  data.prop_columns                 :  [];
            const prop_titleAll                =   data.hasOwnProperty("prop_titleAll")                  ?  data.prop_titleAll                :  "";
            const prop_heightItems             =   data.hasOwnProperty("prop_heightItems")               ?  data.prop_heightItems             :  45;
            const prop_heightBody              =   data.hasOwnProperty("prop_heightBody")                ?  data.prop_heightBody              :  250;
            const prop_langSelected            =   data.hasOwnProperty("prop_langSelected")              ?  data.prop_langSelected            :  "";
            const prop_langs                   =   data.hasOwnProperty("prop_langs")                     ?  data.prop_langs                   : {};
            const prop_draggable               =   data.hasOwnProperty("prop_draggable")                 ?  data.prop_draggable               : true;

            let titleSelectAll = "";
            if (prop_langSelected != null && prop_langs != null && prop_langs.hasOwnProperty(prop_langSelected)){
                const langs = prop_langs[prop_langSelected];
                titleSelectAll = langs?.select_all ?? "Select All";
            }
            const elHeight = tools_css.getHeightSize(prop_size);

            new window.ComponentAcceptTerms(
                `component-select-columns-selector-${ this._COMPONENT_RANDOM_ID}` ,
                {
                    prop_checkBoxes:    this._TALBE_LIST_COLUMNS,
                    prop_size:          prop_size,
                    prop_draggable:     prop_draggable,
                    prop_titleAll:      prop_titleAll,
                    prop_heightForm:    prop_heightBody - elHeight - 75,
                    prop_heightItems:   prop_heightItems,
                    prop_titleAll:      titleSelectAll ,

                    fn_callback: (event , order , isCompleteTrue)=>{
                        this._TALBE_LIST_COLUMNS_TEMPLATE = order;
                        // this.fn_callback(event , order )
                    }
                }
            )
        }
    }

    componentFn_render_positionElement_btnAccept(partName){

        const data = this.getPartProps(partName)

        if (data != null){
            const prop_size                    =   data.hasOwnProperty("prop_size")                      ?  data.prop_size                    :  null;
            const prop_langSelected            =   data.hasOwnProperty("prop_langSelected")              ?  data.prop_langSelected            :  "";
            const prop_langs                   =   data.hasOwnProperty("prop_langs")                     ?  data.prop_langs                   : {};

            const elHeight = tools_css.getHeightSize(prop_size);
            const elFontSize = tools_css.getFontSize(prop_size);

            let titleBtnAccept = "";
            if (prop_langSelected != null && prop_langs != null && prop_langs.hasOwnProperty(prop_langSelected)){
                const langs = prop_langs[prop_langSelected];
                titleBtnAccept = langs?.btn_accept ?? "Accept";
            }

            new window.ComponentButton(
                `component-select-columns-btn-accept-${ this._COMPONENT_RANDOM_ID}` ,
                {
                    classList:  ["col-6" , "px-2"] ,

                    prop_structureClass:  [] ,
                    prop_structureStyles: {

                    } ,

                    prop_btnClass: [

                    ],
                    prop_btnStyles: {
                        "margin-top": "10px" ,
                        "width": "100%" ,
                        "line-height": elHeight+"px" ,
                        "height": elHeight+"px" ,
                        "font-size": elFontSize+"px" ,
                    },

                    prop_title: `<b>${titleBtnAccept}</b>` ,

                    fn_callback: (event) => {
                        this.fn_onClickBtnAccept(event)
                    }
                }
            )

        }
    }

    componentFn_render_positionElement_btnCancel(partName){

        const data = this.getPartProps(partName)

        if (data != null){
            const prop_size                    =   data.hasOwnProperty("prop_size")                      ?  data.prop_size                    :  null;
            const prop_langSelected            =   data.hasOwnProperty("prop_langSelected")              ?  data.prop_langSelected            :  "";
            const prop_langs                   =   data.hasOwnProperty("prop_langs")                     ?  data.prop_langs                   : {};

            const elHeight = tools_css.getHeightSize(prop_size);
            const elFontSize = tools_css.getFontSize(prop_size);

            let titleBtnCancel = "";
            if (prop_langSelected != null && prop_langs != null && prop_langs.hasOwnProperty(prop_langSelected)){
                const langs = prop_langs[prop_langSelected];

                titleBtnCancel = langs?.btn_cancel ?? "Cancel";
            }

            new window.ComponentButton(
                `component-select-columns-btn-cancel-${ this._COMPONENT_RANDOM_ID}` ,
                {

                    classList:  ["col-6" , "px-2"] ,

                    prop_structureClass:  [] ,
                    prop_structureStyles: {

                    } ,

                    prop_btnClass: [

                    ],
                    prop_btnStyles: {
                        "margin-top": "10px" ,
                        "width": "100%" ,
                        "line-height": elHeight+"px" ,
                        "height": elHeight+"px" ,
                        "font-size": elFontSize+"px" ,
                    },

                    prop_type: "back",
                    prop_title: `<b>${titleBtnCancel}</b>` ,

                    fn_callback: (event) => {
                        this.fn_onClickBtnCancel(event)
                    }
                }
            )

        }
    }

    componentFn_render_positionElement_columnsSelected(partName){

        const data = this.getPartProps(partName)

        if (data != null){
            const prop_size                    =   data.hasOwnProperty("prop_size")                      ?  data.prop_size                    :  null;
            const prop_showListSelected        =   data.hasOwnProperty("prop_showListSelected")          ?  data.prop_showListSelected        :  true;
            const prop_columns                 =   data.hasOwnProperty("prop_columns")                   ?  data.prop_columns                 :  [];
            const directionRtl                 =   data.hasOwnProperty("directionRtl")                   ? data.directionRtl                  : (component_props != null && component_props.hasOwnProperty("directionRtl") ? component_props.directionRtl : false)

            const elHeight = tools_css.getHeightSize(prop_size);

            if (prop_showListSelected){

                let list = [];
                if (prop_columns != null && Array.isArray(prop_columns)){
                    for (let i = 0; i < prop_columns.length; i++) {
                        const item = prop_columns[i];
                        if (item != null && item.hasOwnProperty("name") && item.hasOwnProperty("title") && item.hasOwnProperty("selected") && item.selected){
                            list.push({
                                name: item.name ,
                                title: item.title
                            })
                        }
                    }
                }

                new window.ComponentListSelectedScroller(
                    `component-select-columns-list-selected-${ this._COMPONENT_RANDOM_ID}` ,
                    {
                        styles: {
                            "float" : directionRtl ? "right" : "left" ,
                            "width":  `calc(100% - ${elHeight+15}px)`
                        }  ,

                        prop_listSelected: list,

                        fn_onCallbackDeletedItem: (event , list)=>{
                            let listExp = [];
                            if (this._TALBE_LIST_COLUMNS != null && Array.isArray(this._TALBE_LIST_COLUMNS)){
                                for (let i = 0; i < this._TALBE_LIST_COLUMNS.length; i++) {
                                    const itemSelected = this._TALBE_LIST_COLUMNS[i];

                                    let selected = false;
                                    if (itemSelected.hasOwnProperty("name") && list != null && Array.isArray(list)){
                                        for (let x = 0; x < list.length; x++) {
                                            const item = list[x];
                                            if (item != null && item.hasOwnProperty("name") && item.name == itemSelected.name){
                                                selected = true;
                                                break;
                                            }
                                        }
                                    }

                                    itemSelected["selected"] = selected;
                                    listExp.push(itemSelected);
                                }
                            }

                            this._TALBE_LIST_COLUMNS = listExp;
                            this.fn_callback(event);
                        }
                    }
                );
            }

        }
    }


    /* ---------------------------------------------
      FUNCTIONs
     --------------------------------------------- */

    fn_getPositionElement(){
        return document.querySelector(`#component-select-columns-position-element-${ this._COMPONENT_RANDOM_ID}`)
    }

    readyListColumns(){
        const data = this._COMPONENT_CONFIG;
        const prop_columns                 =   data.hasOwnProperty("prop_columns")                   ?  data.prop_columns                 :  [];

        this._TALBE_LIST_COLUMNS = prop_columns;
    }

    fn_onClickIcon(event , show=null){
        if (show == null){
            this._SHOW_BODY = !this._SHOW_BODY;
        }
        else{
            this._SHOW_BODY = show;
        }

        const el = this.fn_getPositionElement();

        if(this._SHOW_BODY){
            el.classList.remove("d-none");

            let listOrder = [];
            if (this._TALBE_LIST_COLUMNS != null && Array.isArray(this._TALBE_LIST_COLUMNS)) {
                for (let i = 0; i < this._TALBE_LIST_COLUMNS.length; i++) {
                    const itemCol = this._TALBE_LIST_COLUMNS[i];

                    if (itemCol.hasOwnProperty("name") && itemCol.hasOwnProperty("selected") && itemCol.selected){
                        listOrder.push(itemCol.name);
                    }
                }
            }

            this._TALBE_LIST_COLUMNS_TEMPLATE = listOrder;
            this.templateFn("part_positionElement_selector");
        }
        else{
            el.classList.add("d-none");
        }
    }

    fn_onClickBtnAccept(event){
        let listOrder = [];
        if (this._TALBE_LIST_COLUMNS_TEMPLATE != null && Array.isArray(this._TALBE_LIST_COLUMNS_TEMPLATE)){
            for (let i = 0; i < this._TALBE_LIST_COLUMNS_TEMPLATE.length; i++) {
                const itemOrder = this._TALBE_LIST_COLUMNS_TEMPLATE[i];

                if (this._TALBE_LIST_COLUMNS != null && Array.isArray(this._TALBE_LIST_COLUMNS)){
                    for (let j = 0; j < this._TALBE_LIST_COLUMNS.length ; j++) {
                        const itemCol = this._TALBE_LIST_COLUMNS[j];

                        if (itemCol.hasOwnProperty("name") && itemCol.hasOwnProperty("title") && itemCol.name == itemOrder){
                            listOrder.push({
                                ...itemCol,
                                selected: true ,
                            });
                        }
                    }
                }
            }
        }

        if (this._TALBE_LIST_COLUMNS != null && Array.isArray(this._TALBE_LIST_COLUMNS)){
            for (let j = 0; j < this._TALBE_LIST_COLUMNS.length ; j++) {
                const itemCol = this._TALBE_LIST_COLUMNS[j];

                if (itemCol.hasOwnProperty("name") && itemCol.hasOwnProperty("title")){

                    let existOrder = false;
                    if (this._TALBE_LIST_COLUMNS_TEMPLATE != null && Array.isArray(this._TALBE_LIST_COLUMNS_TEMPLATE)) {
                        for (let i = 0; i < this._TALBE_LIST_COLUMNS_TEMPLATE.length; i++) {
                            const itemOrder = this._TALBE_LIST_COLUMNS_TEMPLATE[i];

                            if (itemCol.name == itemOrder){
                                existOrder = true;
                                break;
                            }
                        }
                    }

                    if (!existOrder){
                        listOrder.push({
                            ...itemCol ,
                            selected: false ,
                        })
                    }
                }
            }
        }



        this._TALBE_LIST_COLUMNS =  listOrder;

        this._TALBE_LIST_COLUMNS_TEMPLATE =  [];
        this.fn_callback(event);
        this.fn_onClickIcon(event , false );
    }

    fn_onClickBtnCancel(event){
        this.fn_onClickIcon(event , false );
    }

    fn_callback(event){
        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("fn_callback") && typeof data.fn_callback != null){
            data.fn_callback(event , this._TALBE_LIST_COLUMNS);
            data.prop_columns =  this._TALBE_LIST_COLUMNS
            super.renderComponent(data);
        }
    }


}


/*-------------------------------------
 012-03) Component Validate
-------------------------------------*/
class ComponentValidateBase extends ComponentBase{

    /* ---------------------------------------------
      PROPERTYs Pattern
    --------------------------------------------- */
    _COMPONENT_PATTERN = {
        prop_size: {
            prop: "prop_size",
            default: tools_css.standardSizes.m.name,
        },
        prop_listRules: {
            prop: "prop_listRules",
            default: []
        },
        prop_msgRules: {
            prop: "prop_msgRules",
            default: null
        },
        prop_isAbsolute: {
            prop: "prop_isAbsolute",
            default: false
        },
        prop_reference: {
            prop: "prop_reference",
            default: ""
        },
        var_htmlRules: {
            prop: "var_htmlRules",
            default: ""
        },
        prop_title: {
            prop: "prop_title",
            default: "---"
        },
        var_validation_msg: {
            prop: "var_validation_msg",
            default: {}
        },
    };

    /* ---------------------------------------------
           PROPERTYs Props
    --------------------------------------------- */
    _COMPONENT_PROPS = {
        part_structure: [
            this._COMPONENT_PATTERN.prop_listRules
        ],

        part_form: [
            this._COMPONENT_PATTERN.prop_isAbsolute
        ],

        part_form_html: [
            this._COMPONENT_PATTERN.prop_reference,
            this._COMPONENT_PATTERN.prop_listRules,
            this._COMPONENT_PATTERN.prop_msgRules,
            this._COMPONENT_PATTERN.var_htmlRules,
            this._COMPONENT_PATTERN.prop_size
        ],

        part_form_validates: [
            this._COMPONENT_PATTERN.prop_title,
            this._COMPONENT_PATTERN.prop_reference,
            this._COMPONENT_PATTERN.var_validation_msg ,

        ]
    };



    /* ---------------------------------------------
   PROPERTYs Schema
   --------------------------------------------- */
    _COMPONENT_SCHEMA = {
        part_structure: {
            part_form:{
                part_form_html:{} ,
                part_form_validates:{}
            }
        } ,
    }

}
window.ComponentValidate = class ComponentValidate extends ComponentValidateBase {

    var_showFormSelectOption = false;

    /* ---------------------------------------------
       SETUP
   --------------------------------------------- */
    constructor(elId , config) {
        super(
            listComponent[ComponentValidate.name] ,
            elId
        );
        super.renderComponent(config);
    }



    /* ---------------------------------------------
      TEMPLATEs
    --------------------------------------------- */
    componentFn(screanWidthType){
        this.templateFn("part_form");


        this.onRegisterFinish().then(el => {
            this.fn_connectToInputReference();
        })
    }


    templateFn(partName = null){

        switch (partName){
            case "part_structure":
                return this.template_render_structure(partName);
            case "part_form_html":
                return this.template_render_formHtml(partName);
            case "part_form_validates":
                return this.template_render_formValidates(partName);
            case "part_form":
                return this.componentFn_render_from(partName);
            default:
                return this.templateBasic_render();
        }
    }


    template_render_structure(partName ) {
        const data = this.getPartProps(partName)
        const prop_listRules      =  data != null && data.hasOwnProperty("prop_listRules")       ?  data.prop_listRules      :  [];

        const content = `
<div id="component-input-validate-position-form-rules-${this._COMPONENT_RANDOM_ID}" class="position-relative">
            <component-position-element id="component-input-validate-form-rules-${this._COMPONENT_RANDOM_ID}">
               <component-body>
                    ${this.templateFn("part_form_html") ?? ""}
                    ${this.templateFn("part_form_validates") ?? ""}
               </component-body>
            </component-position-element>
</div>
                `;

        if (prop_listRules != null && Array.isArray(prop_listRules) && prop_listRules.length > 0){
            return this.templateBasic_render_structure(content , ["position-relative"]);
        }
        else{
            return "";
        }
    }


    template_render_formHtml(partName ) {

        const data = this.getPartProps(partName)

        if (data != null){
            const prop_listRules      =   data.hasOwnProperty("prop_listRules")       ?  data.prop_listRules      :  [];
            const var_htmlRules       =   data.hasOwnProperty("var_htmlRules")        ?  data.var_htmlRules       :  "";

            return `
<section data-part-name="${partName}" 
         id="component-validate-list-${ this._COMPONENT_RANDOM_ID}" 
         class="" >
         
     <style>
         #${this._COMPONENT_ID} #component-validate-list-${ this._COMPONENT_RANDOM_ID}{
             
         }
     </style>
     
     ${var_htmlRules}
</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    template_render_formValidates(partName ) {

        const data = this.getPartProps(partName)

        if (data != null){
            const prop_title               =   data.hasOwnProperty("prop_title")                ?  data.prop_title               :  "";
            const var_validation_msg       =   data.hasOwnProperty("var_validation_msg")        ?  data.var_validation_msg       : [];

            const componentValidate = {
                title: prop_title ,
                validates: var_validation_msg
            };

            return `
<section data-part-name="${partName}" >
      <script type="application/json" class="component-validate">
           ${JSON.stringify(componentValidate)}
      </script>
</section>

        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    componentFn_render_from(partName) {

        const data = this.getPartProps(partName)

        if (data != null){
            const prop_isAbsolute      =   data.hasOwnProperty("prop_isAbsolute")       ?  data.prop_isAbsolute      :  false;

            if (prop_isAbsolute){
                new window.ComponentPositionElement(
                    `component-input-validate-form-rules-${this._COMPONENT_RANDOM_ID}` ,
                    {
                        classList : ["d-none"] ,
                        prop_positionTop : "0" ,
                        prop_width : "100%" ,
                        prop_height : "200px" ,
                    }
                )
            }
        }
    }


    /* ---------------------------------------------
      FUNCTIONs
     --------------------------------------------- */

    fn_getFormRulesElement(){
        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("prop_isAbsolute") && data.prop_isAbsolute ) {
            return document.querySelector(`#component-input-validate-form-rules-${this._COMPONENT_RANDOM_ID}`);
        }
        return null;
    }
    fn_setStatusVisibleFormRulesElement(status=true){
        const el = this.fn_getFormRulesElement();

        if (el != null){
            if (status){
                this.fn_getFormRulesElement().classList.remove("d-none");
            }
            else{
                this.fn_getFormRulesElement().classList.add("d-none");
            }
        }
    }


    fn_getInputElementReferenceId(){
        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("prop_reference") ) {
            return data.prop_reference;
        }
        return null;
    }
    fn_getInputElementReference(){
        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("prop_reference") ) {
            return document.querySelector("#" +this.fn_getInputElementReferenceId());
        }
        return null;
    }
    fn_getInputValueReference(){
        const inputEl = this.fn_getInputElementReference();
        if (inputEl != null ) {
            return inputEl.value;
        }
        return null;
    }


    fn_connectToInputReference_handle(refId){
        const inputId = this.fn_getInputElementReferenceId();

        if (refId === inputId) {
            const inputEl = this.fn_getInputElementReference();
            if (inputEl != null){
                inputEl.removeEventListener("input", this.fn_connectToInputReference_onHandleInput.bind(this));
                inputEl.removeEventListener("blur", this.fn_connectToInputReference_onFormatValue.bind(this));
                inputEl.removeEventListener("focus", this.fn_connectToInputReference_onUnFormatValue.bind(this));

                inputEl.addEventListener("input", this.fn_connectToInputReference_onHandleInput.bind(this));
                inputEl.addEventListener("blur", this.fn_connectToInputReference_onFormatValue.bind(this));
                inputEl.addEventListener("focus", this.fn_connectToInputReference_onUnFormatValue.bind(this));
            }
        }
    }


    fn_connectToInputReference(){

        const inputId = this.fn_getInputElementReferenceId();
        document.addEventListener("input" , this.fn_connectToInputReference_handle.bind(this, inputId));
        document.addEventListener("blur"  , this.fn_connectToInputReference_handle.bind(this, inputId));
        document.addEventListener("focus" , this.fn_connectToInputReference_handle.bind(this, inputId));

        this.fn_connectToInputReference_handle(inputId);

        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("prop_listRules") && typeof data.prop_listRules != null){
            this.fn_readyListRules(data.prop_listRules)
        }
    }


    fn_connectToInputReference_onHandleInput(event){
        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("prop_listRules") && typeof data.prop_listRules != null){
            this.fn_readyListRules(data.prop_listRules)
        }
    }


    fn_connectToInputReference_onFormatValue(event){
        this.fn_setStatusVisibleFormRulesElement(false);

        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("prop_listRules") && typeof data.prop_listRules != null){
            this.fn_readyListRules(data.prop_listRules)
        }
    }


    fn_connectToInputReference_onUnFormatValue(event){
        this.fn_setStatusVisibleFormRulesElement(true);

        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("prop_listRules") && typeof data.prop_listRules != null){
            this.fn_readyListRules(data.prop_listRules)
        }
    }


    fn_readyListRules(prop_listRules) {
        const data = this._COMPONENT_CONFIG;
        const prop_size           =   data.hasOwnProperty("prop_size")            ?  data.prop_size           :  null;
        const prop_msgRules       =   data.hasOwnProperty("prop_msgRules")        ?  data.prop_msgRules       :  null;
        const directionRtl        =   data.hasOwnProperty("directionRtl")         ? data.directionRtl         : (component_props != null && component_props.hasOwnProperty("directionRtl") ? component_props.directionRtl : false)

        const input = this.fn_getInputValueReference();

        let [messages=[] , messagesForm=[] , rulesHtml="" , isInputCurrect=true] = tools_validtor.validtor_checkList(input , prop_listRules , prop_msgRules , directionRtl , prop_size);

        this.set("var_htmlRules", rulesHtml);
        this.set("var_validation_msg", messagesForm);

        const inputEl = this.fn_getInputElementReference();
        inputEl?.classList.remove("border-danger", "border-success");
        inputEl?.classList.add(isInputCurrect ? "border-success" : "border-danger");
    }


}


/*-------------------------------------
 012-04) Component tooltips description
-------------------------------------*/
class ComponentTooltipDescriptionBase extends ComponentBase{


    /* ---------------------------------------------
       PROPERTYs Pattern
    --------------------------------------------- */
    _COMPONENT_PATTERN = {
        prop_icon: {
            prop: "prop_icon",
            default: tools_icons.icon_exclamation_square
        },
        prop_size: {
            prop: "prop_size",
            default: tools_css.standardSizes.m.name
        },
        prop_iconClass: {
            prop: "prop_iconClass",
            default: [/*"shadow-sm", "bg-dark", "text-white", "rounded", "d-inline-block", "text-center"*/]
        },
        prop_iconStyles: {
            prop: "prop_iconStyles",
            default: {"width": "15px", "height": "15px", "line-height": "15px", "cursor": "pointer"}
        },
        prop_descriptionBackground: {
            prop: "prop_descriptionBackground",
            default:  tools_const?.styles?.tooltipDescription?.backgroundColor_description ?? "black"
        },
        prop_descriptionColor: {
            prop: "prop_descriptionColor",
            default:  tools_const?.styles?.tooltipDescription?.color_description ?? "black"
        },
        prop_iconColor: {
            prop: "prop_iconColor",
            default:  tools_const?.styles?.tooltipDescription?.color_icon ?? ""
        },
        prop_description: {
            prop: "prop_description",
            default: null
        },
        prop_descriptionWidth: {
            prop: "prop_descriptionWidth",
            default: "300px"
        }
    };

    /* ---------------------------------------------
           PROPERTYs Props
    --------------------------------------------- */
    _COMPONENT_PROPS = {
        part_structure: [],

        part_form: [],

        part_icon: [
            this._COMPONENT_PATTERN.prop_icon,
            this._COMPONENT_PATTERN.prop_iconClass,
            this._COMPONENT_PATTERN.prop_size,
            this._COMPONENT_PATTERN.prop_iconColor,
            this._COMPONENT_PATTERN.prop_iconStyles
        ],

        part_description: [
            this._COMPONENT_PATTERN.prop_descriptionBackground,
            this._COMPONENT_PATTERN.prop_descriptionColor,
            this._COMPONENT_PATTERN.prop_description,
            this._COMPONENT_PATTERN.prop_descriptionWidth
        ]
    };


    /* ---------------------------------------------
   PROPERTYs Schema
   --------------------------------------------- */
    _COMPONENT_SCHEMA = {
        part_structure: {
            part_form: {
                part_icon:{},
                part_description:{},
            }
        },
    }

}
window.ComponentTooltipDescription = class ComponentTooltipDescription extends ComponentTooltipDescriptionBase {

    _COMPONENT_WINDOW_DELETE = null;


    /* ---------------------------------------------
       SETUP
   --------------------------------------------- */
    constructor(elId, config) {
        super(
            listComponent[ComponentTooltipDescription.name] ,
            elId
        );
        super.renderComponent(config);
    }


    /* ---------------------------------------------
   TEMPLATEs
 --------------------------------------------- */
    componentFn(){
        this.templateFn("part_icon")
    }

    templateFn(partName = null){
        switch (partName){
            case "part_structure":
                return this.template_render_structure(partName);
            case "part_form":
                return this.template_render_form(partName);
            case "part_icon":
                return this.componentFn_render_icon(partName);
            case "part_description":
                return this.template_render_description(partName);

            default:
                return this.templateBasic_render([]);
        }
    }

    template_render_structure(partName) {
        const content = `
    ${this.templateFn("part_form") ?? ""}
                `;
        return this.templateBasic_render_structure(content , []);
    }

    template_render_form(partName) {
        const data = this.getPartProps(partName)

        if (data != null) {

            return `
<section data-part-name="${partName}"
        id="component-tooltip-description-from-${this._COMPONENT_RANDOM_ID}"
         class="position-relative">
    <style>
       #${this._COMPONENT_ID} #component-tooltip-description-from-${this._COMPONENT_RANDOM_ID}{
         ;
       }
    </style>
     
    <component-icon id="component-tooltip-description-icon-${this._COMPONENT_RANDOM_ID}" ></component-icon>
          
    ${this.templateFn("part_description") ?? ""}
          
</section>
            `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    template_render_description(partName){

        const data = this.getPartProps(partName)

        if (data != null){

            const prop_description                 =   data.hasOwnProperty("prop_description")                ?  data.prop_description                   : this._COMPONENT_SLOTS?.body?.[0]?.html ?? "";
            const prop_descriptionColor            =   data.hasOwnProperty("prop_descriptionColor")           ?  data.prop_descriptionColor              :  "";
            const prop_descriptionBackground       =   data.hasOwnProperty("prop_descriptionBackground")      ?  data.prop_descriptionBackground         :  "";
            const prop_descriptionWidth            =   data.hasOwnProperty("prop_descriptionWidth")           ?  data.prop_descriptionWidth              :  "";
            const directionRtl                     = data.hasOwnProperty("directionRtl")                      ? data.directionRtl                        : (component_props != null && component_props.hasOwnProperty("directionRtl") ? component_props.directionRtl : false)
            const prop_size                        =   data.hasOwnProperty("prop_size")                       ?  data.prop_size                          :  null;

            const elFontSize = tools_css.getFontSize(prop_size);
            const elHeight = tools_css.getHeightSize(prop_size);

            return`
<section  data-part-name="${partName}"
          id="component-tooltip-description-description-${this._COMPONENT_RANDOM_ID}"  
          class="rounded position-absolute shadow-sm py-2 px-3 d-none" >
          
     <style>
         #${this._COMPONENT_ID} #component-tooltip-description-description-${this._COMPONENT_RANDOM_ID}{
             background-color: ${prop_descriptionBackground};
             color: ${prop_descriptionColor};
             width: calc(${prop_descriptionWidth} + 20px);
             border: white solid 1px;
             top: 35px;
             ${directionRtl ? "left" : "right"} : -20px;
             line-height: ${elHeight}px;
             font-size: ${elFontSize}px;
             z-index : ${tools_css.getZIndex(tools_css.standardZIndex.blur_popup.name, 11)}
         }
         #${this._COMPONENT_ID} #component-tooltip-description-description-${this._COMPONENT_RANDOM_ID}:after{
             content: "";
             width: 0px;
             height: 0px;
             border-style: solid;
             border-width: 0 7.5px 15px 7.5px;
             border-color: transparent transparent ${prop_descriptionBackground} transparent;
             transform: rotate(0deg);
             position:absolute;
             top: -15px;
             ${directionRtl ? "left" : "right"} : 20px;
         }
     </style>

     ${prop_description}

</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;

    }

    componentFn_render_icon(partName) {

        const data = this.getPartProps(partName)

        if (data != null){

            const prop_icon          =   data.hasOwnProperty("prop_icon")                ?  data.prop_icon               :  null;
            const prop_iconClass     =   data.hasOwnProperty("prop_iconClass")           ?  data.prop_iconClass          :  [];
            const prop_iconStyles    =   data.hasOwnProperty("prop_iconStyles")          ?  data.prop_iconStyles         :  {};
            const prop_size          =   data.hasOwnProperty("prop_size")                ?  data.prop_size               :  null;
            const prop_iconColor     =   data.hasOwnProperty("prop_iconColor")           ?  data.prop_iconColor          :  null;
            const directionRtl       = data.hasOwnProperty("directionRtl")               ? data.directionRtl             : (component_props != null && component_props.hasOwnProperty("directionRtl") ? component_props.directionRtl : false)

            prop_iconStyles["float"] = directionRtl ? "left" : "right";

            if (prop_icon != null){
                new window.ComponentIcon(
                    `component-tooltip-description-icon-${this._COMPONENT_RANDOM_ID}` ,
                    {
                        prop_icon: prop_icon != null ? (typeof prop_icon == "function" ? prop_icon(prop_size , prop_iconColor) : prop_icon) : "" ,

                        prop_iconClass : prop_iconClass ,
                        prop_iconStyles : prop_iconStyles ,

                        fn_onHoverIcon: ()=>{
                            this.showTooptipDescription();
                        } ,
                        fn_onBlurIcon: ()=>{
                            this.hideTooptipDescription();
                        }
                    }
                )
            }

        }
    }


    /* ---------------------------------------------
      FUNCTIONs
    --------------------------------------------- */
    fn_getElDescription(){
        return document.querySelector(`section#component-tooltip-description-description-${this._COMPONENT_RANDOM_ID}`);
    }
    showTooptipDescription(){
        const el = this.fn_getElDescription();
        if (el != null){
            el.classList.remove("d-none");
        }
    }
    hideTooptipDescription(){
        const el = this.fn_getElDescription();
        if (el != null){
            el.classList.add("d-none");
        }
    }
}





/*-------------------------------------
 013-01)   // [01] timer dwon
-------------------------------------*/
class ComponentComponentTimerDownBase extends ComponentBase{


    /* ---------------------------------------------
       PROPERTYs Pattern
    --------------------------------------------- */
    _COMPONENT_PATTERN = {
        prop_structureStyles: {
            prop: "prop_structureStyles",
            default: {
                "max-width" : "450px",
                "margin" : "auto",
                "display": "block"
            }
        },
        prop_size: {
            prop: "prop_size",
            default: tools_css.standardSizes.m.name
        },

        prop_backgroundColor_body: {
            prop: "prop_backgroundColor_body",
            default:  tools_const?.styles?.timerDown?.backgroundColor_body ?? ""
        },
        prop_backgroundColor_timer: {
            prop: "prop_backgroundColor_timer",
            default:  tools_const?.styles?.timerDown?.backgroundColor_timer ?? ""
        },
        prop_backgroundColor_timerEffect: {
            prop: "prop_backgroundColor_timerEffect",
            default:  tools_const?.styles?.timerDown?.backgroundColor_timerEffect ?? ""
        },
        prop_color_timer: {
            prop: "prop_color_timer",
            default:  tools_const?.styles?.timerDown?.color_timer ?? ""
        },
        prop_color_description: {
            prop: "prop_color_description",
            default:  tools_const?.styles?.timerDown?.color_description ?? ""
        },

        prop_description: {
            prop: "prop_description",
            default:  null
        },

        prop_show_options: {
            prop: "prop_show_options",
            default:  true
        },

        prop_tooltipIcon : {
            prop: "prop_tooltipIcon" ,
            default: tools_icons.icon_exclamation_square
        } ,

        prop_langSelected: {
            prop: "prop_langSelected",
            default: component_props.directionRtl ? "fa" : "en"
        } ,
        prop_langs: {
            prop: "prop_langs",
            default: {
                fa: {
                    on_progress_duration:  "تا ارسال مجدد کد" ,
                    on_end_duration:       "کد منقی شده است" ,
                    btn_resend:            "ارسال مجدد" ,
                } ,
                en: {
                    on_progress_duration:  "Until resend code" ,
                    on_end_duration:       "The code has been deprecated" ,
                    btn_resend:            "Retry" ,
                }
            }
        },
    };

    /* ---------------------------------------------
           PROPERTYs Props
    --------------------------------------------- */
    _COMPONENT_PROPS = {
        part_structure: [
            this._COMPONENT_PATTERN.prop_structureStyles,
        ],

        part_form: [
            this._COMPONENT_PATTERN.prop_backgroundColor_body,
            this._COMPONENT_PATTERN.prop_size,
        ],

        part_tooltip: [
            this._COMPONENT_PATTERN.prop_backgroundColor_body,
            this._COMPONENT_PATTERN.prop_size,
            this._COMPONENT_PATTERN.prop_tooltipIcon,
            this._COMPONENT_PATTERN.prop_description,
        ],

        part_timer: [
            this._COMPONENT_PATTERN.prop_size,
            this._COMPONENT_PATTERN.prop_backgroundColor_timer,
            this._COMPONENT_PATTERN.prop_backgroundColor_timerEffect,
            this._COMPONENT_PATTERN.prop_color_timer,
            this._COMPONENT_PATTERN.prop_show_options,
        ],

        part_text: [
            this._COMPONENT_PATTERN.prop_size,
            this._COMPONENT_PATTERN.prop_color_description,
            this._COMPONENT_PATTERN.prop_langSelected,
            this._COMPONENT_PATTERN.prop_langs,
            this._COMPONENT_PATTERN.prop_show_options,
        ],

        part_text_button: [
            this._COMPONENT_PATTERN.prop_size,
            this._COMPONENT_PATTERN.prop_langSelected,
            this._COMPONENT_PATTERN.prop_langs,
        ],

    };


    /* ---------------------------------------------
   PROPERTYs Schema
   --------------------------------------------- */
    _COMPONENT_SCHEMA = {
        part_structure: {
            part_form: {
                part_tooltip:{},
                part_timer:{},
                part_text:{
                    part_text_button: {}
                },
            }
        },
    }

}
window.ComponentTimerDown = class ComponentTimerDown extends ComponentComponentTimerDownBase {

    _COUNTER_TIMER_DOWN = null;


    /* ---------------------------------------------
       SETUP
    --------------------------------------------- */
    constructor(elId, config) {
        super(
            listComponent[ComponentTimerDown.name] ,
            elId
        );
        super.renderComponent(config);
    }

    /* ---------------------------------------------
       TEMPLATEs
    --------------------------------------------- */
    componentFn(){
        this.templateFn("part_tooltip")
    }

    templateFn(partName = null){
        switch (partName){
            case "part_structure":
                return this.template_render_structure(partName);
            case "part_form":
                return this.template_render_form(partName);
            case "part_timer":
                return this.template_render_form_timer(partName);
            case "part_text":
                return this.template_render_form_text(partName);
            case "part_text_button":
                return this.componentFn_render_form_text_button(partName);
            case "part_tooltip":
                return this.componentFn_render_form_tooltip(partName);

            default:
                return this.templateBasic_render([]);
        }
    }

    template_render_structure(partName) {
        const content = `
            ${this.templateFn("part_form") ?? ""}
                `;
        return this.templateBasic_render_structure(content , []);
    }

    template_render_form(partName) {
        const data = this.getPartProps(partName)

        if (data != null) {
            const prop_backgroundColor_body=         data.hasOwnProperty("prop_backgroundColor_body")            ?  data.prop_backgroundColor_body          : null;

            const directionRtl              =  this._COMPONENT_CONFIG.hasOwnProperty("directionRtl")  ? this._COMPONENT_CONFIG.directionRtl      : false;

            return `
<section id="component-timer-down-form-${ this._COMPONENT_RANDOM_ID}" 
         data-part-name="${partName}"
         class="row p-0 m-0 rounded shadow-sm py-2 position-relative">
    <style>
       #${this._COMPONENT_ID} #component-timer-down-form-${ this._COMPONENT_RANDOM_ID}{
             background-color:    ${prop_backgroundColor_body};
             direction:           ${directionRtl ? "ltr" : "rtl"}
       }
    </style>
    
     <component-tooltip-description id="component-timer-down-form-tooltip-${this._COMPONENT_RANDOM_ID}"></component-tooltip-description>
    
    ${this.templateFn("part_timer") ?? ""}
    
    ${this.templateFn("part_text") ?? ""}
    
</section>
            `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    template_render_form_timer(partName) {
        const data = this.getPartProps(partName)

        if (data != null) {

            const prop_backgroundColor_timer=         data.hasOwnProperty("prop_backgroundColor_timer")            ?  data.prop_backgroundColor_timer          : null;
            const prop_backgroundColor_timerEffect=   data.hasOwnProperty("prop_backgroundColor_timerEffect")      ?  data.prop_backgroundColor_timerEffect    : null;
            const prop_color_timer=                   data.hasOwnProperty("prop_color_timer")                      ?  data.prop_color_timer                    : null;
            const prop_size  =                        data.hasOwnProperty("prop_size")                             ?  data.prop_size                           : null;
            const prop_show_options  =                data.hasOwnProperty("prop_show_options")                     ?  data.prop_show_options                   : false;


            const elFontSize = tools_css.getFontSize(prop_size);
            const elHeight = tools_css.getHeightSize(prop_size);

            return `
<section id="component-timer-down-form-timer-${ this._COMPONENT_RANDOM_ID}" 
         data-part-name="${partName}"
         class="${prop_show_options ? 'col-md-5' : ''} col-12 ">
    <style>
       #${this._COMPONENT_ID} #component-timer-down-form-timer-${ this._COMPONENT_RANDOM_ID}{

       }
       
       #${this._COMPONENT_ID} #component-timer-down-form-timer-${ this._COMPONENT_RANDOM_ID}-parts{
           direction:         ltr !important;
           width:             100px;
           margin:            0 auto !important;
       }
       
       #${this._COMPONENT_ID} #component-timer-down-form-timer-${ this._COMPONENT_RANDOM_ID}-part-minute{
         
       }
       
       #${this._COMPONENT_ID} #component-timer-down-form-timer-${ this._COMPONENT_RANDOM_ID}-part-minute-one{
           background-color:  ${prop_backgroundColor_timer};
           color:             ${prop_color_timer};
           font-size:         ${elFontSize}px;
           line-height:       ${elHeight}px;
           position:          relative;
       }
       #${this._COMPONENT_ID} #component-timer-down-form-timer-${ this._COMPONENT_RANDOM_ID}-part-minute-one:after{
           content:           "" ;
           position:          absolute;
           left:              50%;
           top:               50%;
           transform:         translate(-50% , -50%);
           width:             75%;
           height:            0%;
           background-color:  ${prop_backgroundColor_timerEffect};
           border-radius:     5px;
           animation:         myTimerDownAnimation-${ this._COMPONENT_RANDOM_ID} 1000ms infinite;
       }
       
       #${this._COMPONENT_ID} #component-timer-down-form-timer-${ this._COMPONENT_RANDOM_ID}-part-minute-two{
           background-color:  ${prop_backgroundColor_timer};
           color:             ${prop_color_timer};
           font-size:         ${elFontSize}px;
           line-height:       ${elHeight}px;
           position:          relative;
       }
       #${this._COMPONENT_ID} #component-timer-down-form-timer-${ this._COMPONENT_RANDOM_ID}-part-minute-two:after{
           content:           "" ;
           position:          absolute;
           left:              50%;
           top:               50%;
           transform:         translate(-50% , -50%);
           width:             75%;
           height:            0%;
           background-color:  ${prop_backgroundColor_timerEffect};
           border-radius:     5px;
           animation:         myTimerDownAnimation-${ this._COMPONENT_RANDOM_ID} 1000ms infinite;
       }
       
       #${this._COMPONENT_ID} #component-timer-down-form-timer-${ this._COMPONENT_RANDOM_ID}-part-dot{
           color:             ${prop_color_timer};       
           font-size:         ${elFontSize}px;
           line-height:       ${elHeight}px;
       }
      
       
       #${this._COMPONENT_ID} #component-timer-down-form-timer-${ this._COMPONENT_RANDOM_ID}-part-second{

       }
       
       #${this._COMPONENT_ID} #component-timer-down-form-timer-${ this._COMPONENT_RANDOM_ID}-part-second-one{
           background-color:  ${prop_backgroundColor_timer};
           color:             ${prop_color_timer};
           font-size:         ${elFontSize}px;
           line-height:       ${elHeight}px;
           position:          relative;
       }
       #${this._COMPONENT_ID} #component-timer-down-form-timer-${ this._COMPONENT_RANDOM_ID}-part-second-one:after{
           content:           "" ;
           position:          absolute;
           left:              50%;
           top:               50%;
           transform:         translate(-50% , -50%);
           width:             75%;
           height:            0%;
           background-color:  ${prop_backgroundColor_timerEffect};
           border-radius:     5px;
           animation:         myTimerDownAnimation-${ this._COMPONENT_RANDOM_ID} 1000ms infinite;
       }
       
       #${this._COMPONENT_ID} #component-timer-down-form-timer-${ this._COMPONENT_RANDOM_ID}-part-second-two{
           background-color:  ${prop_backgroundColor_timer};
           color:             ${prop_color_timer};
           font-size:         ${elFontSize}px;
           line-height:       ${elHeight}px;
           position:          relative;
       }
       #${this._COMPONENT_ID} #component-timer-down-form-timer-${ this._COMPONENT_RANDOM_ID}-part-second-two:after{
           content:           "" ;
           position:          absolute;
           left:              50%;
           top:               50%;
           transform:         translate(-50% , -50%);
           width:             75%;
           height:            0%;
           background-color:  ${prop_backgroundColor_timerEffect};
           border-radius:     5px;
           animation:         myTimerDownAnimation-${ this._COMPONENT_RANDOM_ID} 1000ms infinite;
       }
       
       @keyframes myTimerDownAnimation-${ this._COMPONENT_RANDOM_ID} {
         0% {
           opacity: 0;
           height:   0;
         }
         50% {
           opacity: 1;
           height:   80%;
         }
         100% {
           opacity: 0;
           height:   0;
         }
       }
       
    </style>
    
    <div id="component-timer-down-form-timer-${ this._COMPONENT_RANDOM_ID}-parts" class="row  p-0">
            
         <div id="component-timer-down-form-timer-${ this._COMPONENT_RANDOM_ID}-part-minute" class="col-5 m-0 p-0 row">
            <b id="component-timer-down-form-timer-${ this._COMPONENT_RANDOM_ID}-part-minute-one" class="col-6 border rounded px-1 text-center border-white border-2"> -</b>
            <b id="component-timer-down-form-timer-${ this._COMPONENT_RANDOM_ID}-part-minute-two" class="col-6 border rounded px-1 text-center border-white border-2"> -</b>
         </div>
         
         <b id="component-timer-down-form-timer-${ this._COMPONENT_RANDOM_ID}-part-dot" class="col-2 m-0 p-0 text-center">
            :
         </b>
         
         <div id="component-timer-down-form-timer-${ this._COMPONENT_RANDOM_ID}-part-second" class="col-5 m-0 p-0 row">
            <b id="component-timer-down-form-timer-${ this._COMPONENT_RANDOM_ID}-part-second-one" class="col-6 border rounded px-1 text-center border-white border-2"> -</b>
            <b id="component-timer-down-form-timer-${ this._COMPONENT_RANDOM_ID}-part-second-two" class="col-6 border rounded px-1 text-center border-white border-2"> -</b>
         </div>
         
    </div>

</section>
            `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    template_render_form_text(partName) {
        const data = this.getPartProps(partName)

        if (data != null) {
           const prop_size  =                   data.hasOwnProperty("prop_size")                   ?  data.prop_size                  : null;
            const prop_color_description  =     data.hasOwnProperty("prop_color_description")      ?  data.prop_color_description     : null;
            const prop_show_options  =          data.hasOwnProperty("prop_show_options")           ?  data.prop_show_options          : false;
            const directionRtl              =  this._COMPONENT_CONFIG.hasOwnProperty("directionRtl")  ? this._COMPONENT_CONFIG.directionRtl      : false;

            if (prop_show_options){
                const elFontSize = tools_css.getFontSize(prop_size);
                const elHeight = tools_css.getHeightSize(prop_size);

                return `
<section id="component-timer-down-form-text-${ this._COMPONENT_RANDOM_ID}" 
         data-part-name="${partName}"
        class="col-md-7 col-12 py-1">
    <style>
       #${this._COMPONENT_ID} #component-timer-down-form-text-${ this._COMPONENT_RANDOM_ID}{
           color:             ${prop_color_description};
           direction:         ${directionRtl ? "ltr" : "rtl"};
       }
       #${this._COMPONENT_ID} #component-timer-down-form-text-${ this._COMPONENT_RANDOM_ID}-content{
           float:         ${directionRtl ? "left" : "right"};
       }
       #${this._COMPONENT_ID} #component-timer-down-form-text-${ this._COMPONENT_RANDOM_ID}-sp{
           float:         ${directionRtl ? "left" : "right"};
       }
    </style>
    
    <b id="component-timer-down-form-text-${ this._COMPONENT_RANDOM_ID}-content" class=""></b>
    
    <span id="component-timer-down-form-text-${ this._COMPONENT_RANDOM_ID}-sp"  class=" px-2">
       |
    </span>
    
    <component-button id="component-timer-down-form-text-button-${ this._COMPONENT_RANDOM_ID}"></component-button>
    
</section>
            `;
            }

        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    componentFn_render_form_text_button(partName) {
        const data = this.getPartProps(partName)

        if (data != null) {
            const prop_langSelected  =        data.hasOwnProperty("prop_langSelected")               ?  data.prop_langSelected                 : null;
            const prop_langs  =               data.hasOwnProperty("prop_langs")                      ?  data.prop_langs                        : null;
            const directionRtl  =             data.hasOwnProperty("directionRtl")                    ? data.directionRtl                       : (component_props != null && component_props.hasOwnProperty("directionRtl") ? component_props.directionRtl : false)

            let btn_resend = "";
            if (prop_langs != null && prop_langSelected != null && prop_langs.hasOwnProperty(prop_langSelected)){
                const langs = prop_langs[prop_langSelected];
                btn_resend = langs?.btn_resend ?? "";
            }

            new window.ComponentButton(
                `component-timer-down-form-text-button-${ this._COMPONENT_RANDOM_ID}` ,
                {
                    classList:  [] ,
                    styles: {
                        float:    directionRtl ? "left" : "right" ,
                    } ,

                    prop_btnClass: ["px-2"],
                    prop_btnStyles: {},

                    prop_title: btn_resend ,

                    fn_callback: (event) => {
                        this.#fn_onClickRetry(event);
                    }
                }
            )

        }
    }

    componentFn_render_form_tooltip(partName) {
        const data = this.getPartProps(partName)

        if (data != null) {
            const prop_description          =    data.hasOwnProperty("prop_description")                ?  data.prop_description                 : null;
            const prop_tooltipIcon          =    data.hasOwnProperty("prop_tooltipIcon")                ?  data.prop_tooltipIcon                 : null;
            const prop_backgroundColor_body =    data.hasOwnProperty("prop_backgroundColor_body")       ?  data.prop_backgroundColor_body        : null;
            const prop_size  =                   data.hasOwnProperty("prop_size")                       ?  data.prop_size                        : null;


            const directionRtl              =  this._COMPONENT_CONFIG.hasOwnProperty("directionRtl")  ? this._COMPONENT_CONFIG.directionRtl      : false;
            const prop_btnAddStatus         =  data.hasOwnProperty("prop_btnAddStatus")               ?  data.prop_btnAddStatus                  : false;
            const var_showFormSelectOption  =  data.hasOwnProperty("var_showFormSelectOption")        ?  data.var_showFormSelectOption           : false;

            let styles = {
                top:       "50%" ,
                transform: "translate(0px , -50%)"
            }
            if (directionRtl){
                styles["left"]=  "0px";
            }
            else {
                styles["right"]= "0px";
            }

            if (prop_description != null){
                new window.ComponentTooltipDescription(
                    `component-timer-down-form-tooltip-${this._COMPONENT_RANDOM_ID}` ,
                    {
                        classList:         "position-absolute"  ,
                        styles:            styles ,

                        prop_icon:         prop_tooltipIcon != null ? (typeof prop_tooltipIcon == "function" ? prop_tooltipIcon({size: prop_size , color:{primary: prop_backgroundColor_body}} ) : prop_tooltipIcon) : ""  ,
                        prop_description:  prop_description,
                    }
                )
            }

        }
    }


    /* ---------------------------------------------
      FUNCTIONs
    --------------------------------------------- */

    #fn_getElementButton(){
        return document.getElementById(`component-timer-down-form-text-button-${ this._COMPONENT_RANDOM_ID}`);
    }
    #fn_getElementText(){
        return document.getElementById(`component-timer-down-form-text-${ this._COMPONENT_RANDOM_ID}-content`);
    }

    #fn_getElementTextTimeDuration_minuteOne(){
        return document.getElementById(`component-timer-down-form-timer-${ this._COMPONENT_RANDOM_ID}-part-minute-one`);
    }
    #fn_getElementTextTimeDuration_minuteTwo(){
        return document.getElementById(`component-timer-down-form-timer-${ this._COMPONENT_RANDOM_ID}-part-minute-two`);
    }

    #fn_getElementTextTimeDuration_secondOne(){
        return document.getElementById(`component-timer-down-form-timer-${ this._COMPONENT_RANDOM_ID}-part-second-one`);
    }
    #fn_getElementTextTimeDuration_secondTwo(){
        return document.getElementById(`component-timer-down-form-timer-${ this._COMPONENT_RANDOM_ID}-part-second-two`);
    }



    #fn_progressTimerProgress(timer){
        const data = this._COMPONENT_CONFIG;
        const prop_langSelected  =        data.hasOwnProperty("prop_langSelected")               ?  data.prop_langSelected                 : null;
        const prop_langs  =               data.hasOwnProperty("prop_langs")                      ?  data.prop_langs                        : null;

        let on_progress_duration = "";
        if (prop_langs != null && prop_langSelected != null && prop_langs.hasOwnProperty(prop_langSelected)){
            const langs = prop_langs[prop_langSelected];
            on_progress_duration = langs?.on_progress_duration ?? "";
        }

        const elText = this.#fn_getElementText();
        if(elText != null) elText.innerText = on_progress_duration;



        const elButtn = this.#fn_getElementButton();
        if(elButtn != null)  elButtn.innerHtml = "";


        const elMinuteOne = this.#fn_getElementTextTimeDuration_minuteOne();
        const elMinuteTwo = this.#fn_getElementTextTimeDuration_minuteTwo();

        let minutes = Math.floor((timer % (1000 * 60 * 60)) / (1000 * 60));
        const minutes_digitOne = Math.floor(minutes/10);
        const minutes_digitTwo = minutes - (minutes_digitOne*10);

        if(elMinuteOne != null) elMinuteOne.innerText= minutes_digitOne ;
        if(elMinuteTwo != null) elMinuteTwo.innerText= minutes_digitTwo;



        const elSecondOne = this.#fn_getElementTextTimeDuration_secondOne();
        const elSecondTwo = this.#fn_getElementTextTimeDuration_secondTwo();

        let seconds = Math.floor((timer % (1000 * 60)) / 1000);
        const seconds_digitOne = Math.floor(seconds/10);
        const seconds_digitTwo = seconds - (seconds_digitOne*10);

        if(elSecondOne != null) elSecondOne.innerText= seconds_digitOne ;
        if(elSecondTwo != null) elSecondTwo.innerText= seconds_digitTwo;

    }
    #fn_endTimerProgress(){
        const data = this._COMPONENT_CONFIG;
        const prop_langSelected  =   data.hasOwnProperty("prop_langSelected")      ?  data.prop_langSelected    : null;
        const prop_langs  =          data.hasOwnProperty("prop_langs")             ?  data.prop_langs           : null;

        let on_end_duration = "";
        if (prop_langs != null && prop_langSelected != null && prop_langs.hasOwnProperty(prop_langSelected)){
            const langs = prop_langs[prop_langSelected];
            on_end_duration = langs?.on_end_duration ?? "";
        }

        const elText = this.#fn_getElementText();
        if(elText != null) elText.innerText=on_end_duration;

        this.templateFn("part_text_button")

        const elMinuteOne = this.#fn_getElementTextTimeDuration_minuteOne();
        const elMinuteTwo = this.#fn_getElementTextTimeDuration_minuteTwo();
        if(elMinuteOne != null) elMinuteOne.innerText="-" ;
        if(elMinuteTwo != null) elMinuteTwo.innerText="-" ;

        const elSecondOne = this.#fn_getElementTextTimeDuration_secondOne();
        const elSecondTwo = this.#fn_getElementTextTimeDuration_secondTwo();
        if(elSecondOne != null) elSecondOne.innerText="-" ;
        if(elSecondTwo != null) elSecondTwo.innerText="-" ;
    }



    #fn_calculateTimer(timeUnixEnd){
        return timeUnixEnd - new Date().getTime();
    }
    call_startCountdown(timeUnixEnd){

        this._COUNTER_TIMER_DOWN = setInterval(() => {
            const distance = this.#fn_calculateTimer(timeUnixEnd);

            if (distance < 0) {
                clearInterval(this._COUNTER_TIMER_DOWN);
                this.#fn_endTimerProgress();
                this.#fn_onFinishTimer();
                return;
            }

            this.#fn_progressTimerProgress(distance);
        }, 1000);
    }



    #fn_onClickRetry(event){
        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("fn_onBackClick") && typeof data.fn_onClickRetry != null){
            data.fn_onBackClick(event);
        }
    }

    #fn_onFinishTimer(event){
        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("fn_onFinishTimer") && typeof data.fn_onFinishTimer != null){
            data.fn_onFinishTimer();
        }
    }


}






//===============================================================================================================
// [20 - 29] tables and tab view  [020] Tables
//===============================================================================================================

/*-------------------------------------
 020-01) Component Table
-------------------------------------*/
class ComponentTableBase extends ComponentBase{


    /* ---------------------------------------------
     PROPERTYs Pattern
     --------------------------------------------- */
    _COMPONENT_PATTERN = {
        prop_size : {
            prop: "prop_size" ,
            default: tools_css.standardSizes.m.name
        } ,
        prop_hasColNumber : {
            prop: "prop_hasColNumber" ,
            default: true
        } ,
        prop_hasColSelector : {
            prop: "prop_hasColSelector" ,
            default: true
        } ,
        prop_doColSelector : {
            prop: "prop_doColSelector" ,
            default: true
        } ,
        prop_tableClass: {
            prop: "prop_tableClass",
            default: ["table"]
        },
        prop_tableStyles: {
            prop: "prop_tableStyles",
            default: {}
        },
        prop_tableType: {
            prop: "prop_tableType",
            default: 0
        },
        prop_tableBordered: {
            prop: "prop_tableBordered",
            default: 0
        },
        prop_tableStriped: {
            prop: "prop_tableStriped",
            default: false
        },
        prop_tableHover: {
            prop: "prop_tableHover",
            default: false
        },
        prop_tableBorderless: {
            prop: "prop_tableBorderless",
            default: false
        },
        prop_tableHeadClass: {
            prop: "prop_tableHeadClass",
            default: []
        },
        prop_tableHeadStyles: {
            prop: "prop_tableHeadStyles",
            default: {}
        },
        prop_tableItemHeadClass: {
            prop: "prop_tableItemHeadClass",
            default: []
        },
        prop_tableItemHeadStyles: {
            prop: "prop_tableItemHeadStyles",
            default: {}
        },
        prop_order: {
            prop: "prop_order",
            default: {}
        },
        prop_header: {
            prop: "prop_header",
            default: {}
        },
        prop_headerIconSize: {
            prop: "prop_headerIconSize",
            default: 20
        },
        prop_headerIconBackgroundColor: {
            prop: "prop_headerIconBackgroundColor",
            default: tools_const?.styles?.table?.backgroundColor_headerIcon
        },
        prop_headerIconBorderColor: {
            prop: "prop_headerIconBorderColor",
            default: tools_const?.styles?.table?.borderColor_headerIcon
        },
        prop_headerIconColor: {
            prop: "prop_headerIconColor",
            default: tools_const?.styles?.table?.color_headerIcon
        },
        prop_tableBodyClass: {
            prop: "prop_tableBodyClass",
            default: []
        },
        prop_tableBodyStyles: {
            prop: "prop_tableBodyStyles",
            default: {}
        },
        prop_tableItemBodyClass: {
            prop: "prop_tableItemBodyClass",
            default: []
        },
        prop_tableItemBodyStyles: {
            prop: "prop_tableItemBodyStyles",
            default: {}
        },
        prop_tableItemBodyHoverStyles: {
            prop: "prop_tableItemBodyHoverStyles",
            default: {}
        },
        prop_data: {
            prop: "prop_data",
            default: []
        },
        prop_valueType: {
            prop: "prop_valueType",
            default: 0
        },
        prop_valueRow_backgroundColor: {
            prop: "prop_valueRow_backgroundColor",
            default: tools_const?.styles?.table?.backgroundColor_rowSelected || ""
        },
        prop_valueCol_backgroundColor: {
            prop: "prop_valueCol_backgroundColor",
            default: tools_const?.styles?.table?.backgroundColor_columnSelected || ""
        },
        prop_valueCol_textColor: {
            prop: "prop_valueCol_textColor",
            default: tools_const?.styles?.table?.backgroundColor_textSelected || ""
        },

        prop_rowOptionsBackgroundColor: {
            prop: "prop_rowOptionsBackgroundColor",
            default: tools_const?.styles?.table?.bacKgroundColor_rowOptions || ""
        },
        prop_rowOptionsColor: {
            prop: "prop_rowOptionsColor",
            default: tools_const?.styles?.table?.color_rowOptions || ""
        },

        prop_rowOptionsItemBackgroundColor: {
            prop: "prop_rowOptionsItemBackgroundColor",
            default: tools_const?.styles?.table?.bacKgroundColor_rowOptionsItem || ""
        },
        prop_rowOptionsItemColor: {
            prop: "prop_rowOptionsItemColor",
            default: tools_const?.styles?.table?.color_rowOptionsItem || ""
        },

        prop_rowOptionsItemHoverBackgroundColor: {
            prop: "prop_rowOptionsItemHoverBackgroundColor",
            default: tools_const?.styles?.table?.bacKgroundColor_rowOptionsItemHover || ""
        },
        prop_rowOptionsItemHoverColor: {
            prop: "prop_rowOptionsItemHoverColor",
            default: tools_const?.styles?.table?.color_rowOptionsItemHover || ""
        },

        prop_rowOptionsOpacity: {
            prop: "prop_rowOptionsOpacity",
            default: 45
        } ,

        prop_rowOptions: {
            prop: "prop_rowOptions",
            default: []
        },

        prop_backgroundColorIconColumnSelector: {
            prop: "prop_backgroundColorIconColumnSelector",
            default: tools_const?.styles?.table?.backgroundColor_iconColumnSelector ?? ""
        },
        prop_colorIconColumnSelector: {
            prop: "prop_colorIconColumnSelector",
            default: tools_const?.styles?.table?.color_iconColumnSelector ?? ""
        },
    };


    /* ---------------------------------------------
           PROPERTYs Props
    --------------------------------------------- */
    _COMPONENT_PROPS = {
        part_structure: [

        ],

        part_table: [
            this._COMPONENT_PATTERN.prop_tableClass,
            this._COMPONENT_PATTERN.prop_tableStyles,
            this._COMPONENT_PATTERN.prop_tableType,
            this._COMPONENT_PATTERN.prop_tableBordered,
            this._COMPONENT_PATTERN.prop_tableStriped,
            this._COMPONENT_PATTERN.prop_tableHover,
            this._COMPONENT_PATTERN.prop_tableBorderless,
            this._COMPONENT_PATTERN.prop_headerIconSize,
            this._COMPONENT_PATTERN.prop_header,
        ],

        part_table_header: [
            this._COMPONENT_PATTERN.prop_tableHeadClass,
            this._COMPONENT_PATTERN.prop_tableHeadStyles,
            this._COMPONENT_PATTERN.prop_tableItemHeadClass,
            this._COMPONENT_PATTERN.prop_tableItemHeadStyles,
            this._COMPONENT_PATTERN.prop_order,
            this._COMPONENT_PATTERN.prop_header,
            this._COMPONENT_PATTERN.prop_size,
            this._COMPONENT_PATTERN.prop_hasColSelector,
            this._COMPONENT_PATTERN.prop_hasColNumber,
            this._COMPONENT_PATTERN.prop_headerIconSize,
            this._COMPONENT_PATTERN.prop_headerIconColor,
            this._COMPONENT_PATTERN.prop_headerIconBackgroundColor,
            this._COMPONENT_PATTERN.prop_headerIconBorderColor
        ],

        part_table_header_colSelector: [
            this._COMPONENT_PATTERN.prop_hasColSelector,
            this._COMPONENT_PATTERN.prop_doColSelector,
            this._COMPONENT_PATTERN.prop_header,
            this._COMPONENT_PATTERN.prop_order,
            this._COMPONENT_PATTERN.prop_backgroundColorIconColumnSelector,
            this._COMPONENT_PATTERN.prop_colorIconColumnSelector,
        ],

        part_table_body: [
            this._COMPONENT_PATTERN.prop_tableBodyClass,
            this._COMPONENT_PATTERN.prop_tableBodyStyles,
            this._COMPONENT_PATTERN.prop_tableItemBodyClass,
            this._COMPONENT_PATTERN.prop_tableItemBodyStyles,
            this._COMPONENT_PATTERN.prop_tableItemBodyHoverStyles,
            this._COMPONENT_PATTERN.prop_order,
            this._COMPONENT_PATTERN.prop_header,
            this._COMPONENT_PATTERN.prop_data,
            this._COMPONENT_PATTERN.prop_valueType,
            this._COMPONENT_PATTERN.prop_valueRow_backgroundColor,
            this._COMPONENT_PATTERN.prop_valueCol_backgroundColor,
            this._COMPONENT_PATTERN.prop_valueCol_textColor,
            this._COMPONENT_PATTERN.prop_size,
            this._COMPONENT_PATTERN.prop_hasColNumber,
            this._COMPONENT_PATTERN.prop_rowOptionsBackgroundColor,
            this._COMPONENT_PATTERN.prop_rowOptionsColor,
            this._COMPONENT_PATTERN.prop_rowOptionsOpacity,
            this._COMPONENT_PATTERN.prop_rowOptionsItemBackgroundColor,
            this._COMPONENT_PATTERN.prop_rowOptionsItemColor,
            this._COMPONENT_PATTERN.prop_rowOptionsItemHoverBackgroundColor,
            this._COMPONENT_PATTERN.prop_rowOptionsItemHoverColor,
            this._COMPONENT_PATTERN.prop_rowOptions
        ],

        part_table_footer: [
            this._COMPONENT_PATTERN.prop_size
        ]
    };



    /* ---------------------------------------------
   PROPERTYs Schema
   --------------------------------------------- */
    _COMPONENT_SCHEMA = {
        part_structure: {
            part_table : {
                part_table_header: {
                    part_table_header_colSelector: {},
                },
                part_table_columns: {},
            }
        }
    }

}
window.ComponentTable = class ComponentTable extends ComponentTableBase{

    TYPE_SELECTED_NONE = 0;
    TYPE_SELECTED_ROW  = 1;
    TYPE_SELECTED_COL  = 2;
    TYPE_SELECTED_BOTH = 3;

    /* ---------------------------------------------
       SETUP
    --------------------------------------------- */
    constructor(elId , config) {
        super(
            listComponent[ComponentTable.name] ,
            elId
        );
        super.renderComponent(config);
    }



    /* ---------------------------------------------
       TEMPLATEs
    --------------------------------------------- */
    componentFn(){
        this.templateFn("part_table_header_colSelector");
    }

    templateFn(partName = null){
        switch (partName){
            case "part_structure":
                return this.template_render_structure(partName);
            case "part_table":
                return this.template_render_table(partName);
            case "part_table_header":
                return this.template_render_tableHeader(partName);
            case "part_table_body":
                return this.template_render_tableBody(partName);
            case "part_table_footer":
                return this.template_render_tableFooter(partName);
            case "part_table_header_colSelector":
                return this.componentFn_render_tableHeader_colSelecter(partName);
            default:
                return this.templateBasic_render();
        }
    }

    template_render_structure(partName) {

        const content = `
            ${this.templateFn("part_table") ?? ""}
                `;
        return this.templateBasic_render_structure(content);

    }

    template_render_table(partName) {
        const data = this.getPartProps(partName)

        if (data != null) {
            const prop_tableClass          = data.hasOwnProperty("prop_tableClass")           ?  data.prop_tableClass                  : [ "table" ];
            const prop_tableStyles         = data.hasOwnProperty("prop_tableStyles")          ?  data.prop_tableStyles                 : {};

            const prop_tableType           = data.hasOwnProperty("prop_tableType")            ? data.prop_tableType                    : 0;
            const prop_tableBordered       = data.hasOwnProperty("prop_tableBordered")        ? data.prop_tableBordered                : 0;

            const prop_tableStriped        =   data.hasOwnProperty("prop_tableStriped")       ?  data.prop_tableStriped                : false;
            const prop_tableHover          =   data.hasOwnProperty("prop_tableHover")         ?  data.prop_tableHover                  : false;
            const prop_tableBorderless     =   data.hasOwnProperty("prop_tableBorderless")    ?  data.prop_tableBorderless             : false;
            const prop_headerIconSize      =   data.hasOwnProperty("prop_headerIconSize")     ?  data.prop_headerIconSize              : "";
            const prop_header              =   data.hasOwnProperty("prop_header")             ?  data.prop_header                      : [];

            let tableType = "";
            switch (prop_tableType){
                case 1: tableType = "table-dark"; break;
                case 2: tableType = "table-primary"; break;
                case 3: tableType = "table-secondary"; break;
                case 4: tableType = "table-success"; break;
                case 5: tableType = "table-danger"; break;
                case 6: tableType = "table-warning"; break;
                case 7: tableType = "table-info"; break;
                case 8: tableType = "table-light"; break;
            }

            let tableBordered = "";
            switch (prop_tableBordered){
                case 1: tableBordered += "table-bordered  border-dark"; break;
                case 2: tableBordered += "table-bordered  border-primary"; break;
                case 3: tableBordered += "table-bordered  border-secondary"; break;
                case 4: tableBordered += "table-bordered  border-success"; break;
                case 5: tableBordered += "table-bordered  border-danger"; break;
                case 6: tableBordered += "table-bordered  border-warning"; break;
                case 7: tableBordered += "table-bordered  border-info"; break;
                case 8: tableBordered += "table-bordered  border-light"; break;
            }


            let marginTable = 0;
            if (prop_header != null && Array.isArray(prop_header)){
                for (let i = 0; i < prop_header.length; i++) {
                    const itemHeader = prop_header[i];
                    if (itemHeader.hasOwnProperty("icon")){
                        marginTable = prop_headerIconSize;
                        break;
                    }
                }
            }

            return `
<section data-part-name="${partName}" class="row h-100">
    <style>
       #${this._COMPONENT_ID} .icon-false-table{
           font-size: 15pt;
       }
       #${this._COMPONENT_ID} .icon-true-table{
           font-size: 10pt;
       }
    
        #${this._COMPONENT_ID} #component-table-table-${this._COMPONENT_RANDOM_ID}{
            ${tools_public.renderListStyle(prop_tableStyles)};
            margin-top: ${marginTable}px;
       }
    </style>
    <table id="component-table-table-${this._COMPONENT_RANDOM_ID}"
           class=" ${tableType}  ${tableBordered} ${tools_public.renderListClass(prop_tableClass)}
                   ${ prop_tableStriped ?    'table-striped'    : ''}
                   ${ prop_tableHover ?      'table-hover'      : ''} 
                   ${ prop_tableBorderless ? 'table-borderless' : ''}
           ">
        ${this.templateFn("part_table_header") ?? ""}
         
        ${this.templateFn("part_table_body") ?? ""}
         
        ${this.templateFn("part_table_footer") ?? ""}
    </table>
</section>
            `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    template_render_tableHeader(partName) {
        const data = this.getPartProps(partName)

        if (data != null) {

            const prop_tableHeadClass             =   data.hasOwnProperty("prop_tableHeadClass")             ?  data.prop_tableHeadClass              : [];
            const prop_tableHeadStyles            =   data.hasOwnProperty("prop_tableHeadStyles")            ?  data.prop_tableHeadStyles             : null;

            const prop_tableItemHeadClass         =   data.hasOwnProperty("prop_tableItemHeadClass")         ?  data.prop_tableItemHeadClass           : [];
            const prop_tableItemHeadStyles        =   data.hasOwnProperty("prop_tableItemHeadStyles")        ?  data.prop_tableItemHeadStyles          : null;

            const prop_order                      =   data.hasOwnProperty("prop_order")                      ?  data.prop_order                       : [];
            const prop_header                     =   data.hasOwnProperty("prop_header")                     ?  data.prop_header                      : [];
            const prop_size                       =   data.hasOwnProperty("prop_size")                       ?  data.prop_size                        : null;

            const prop_hasColNumber               =   data.hasOwnProperty("prop_hasColNumber")               ?  data.prop_hasColNumber                : true;
            const prop_hasColSelector             =   data.hasOwnProperty("prop_hasColSelector")             ?  data.prop_hasColSelector              : true;

            const prop_headerIconSize             =   data.hasOwnProperty("prop_headerIconSize")             ?  data.prop_headerIconSize              : "";
            const prop_headerIconBackgroundColor  =   data.hasOwnProperty("prop_headerIconBackgroundColor")  ?  data.prop_headerIconBackgroundColor   : "";
            const prop_headerIconBorderColor      =   data.hasOwnProperty("prop_headerIconBorderColor")  ?  data.prop_headerIconBorderColor   : "";

            const elHeight = tools_css.getHeightSize(prop_size);
            const elFontSize = tools_css.getFontSize(prop_size);

            const htmlHeader = this.fn_onGetHtmlHeader();

            return `

<thead data-part-name="${partName}"  
       id="component-table-header-${this._COMPONENT_RANDOM_ID}" 
       class=" ${tools_public.renderListClass(prop_tableHeadClass)}">
     <style>
         #${this._COMPONENT_ID} #component-table-header-${this._COMPONENT_RANDOM_ID}{
             ${tools_public.renderListStyle(prop_tableHeadStyles)};
             height:  ${elHeight}px;
         }
         #${this._COMPONENT_ID} .component-table-header-item-${this._COMPONENT_RANDOM_ID}{
             ${tools_public.renderListStyle(prop_tableItemHeadStyles)};
             font-size:  ${elFontSize}px;
             line-height:  ${elHeight}px;
         }
         #${this._COMPONENT_ID} .component-table-header-item-icon-${this._COMPONENT_RANDOM_ID}{
             left: 50%;
             top: -${prop_headerIconSize/2}px;
             transform: translate(-50% , -50%);
             background-color: ${prop_headerIconBackgroundColor};
             border-radius: 100%;
             border: 3px solid ${prop_headerIconBorderColor};
             width:  ${prop_headerIconSize+10}px;
             height:  ${prop_headerIconSize+10}px;
         }
         #${this._COMPONENT_ID} .component-table-header-item-icon-${this._COMPONENT_RANDOM_ID} svg{
             position: absolute;
             top: 50%;
             left: 50%;
             transform: translate(-50%, -50%);
         }
     </style>
    <tr>
    ${htmlHeader}
    </tr>
</thead>
            `;
        }

        return `
<thead data-part-name="${partName}"></thead>
        `;
    }

    template_render_tableBody(partName) {

        const data = this.getPartProps(partName)

        if (data != null) {

            const prop_tableBodyClass             =   data.hasOwnProperty("prop_tableBodyClass")             ?  data.prop_tableBodyClass              : [];
            const prop_tableBodyStyles            =   data.hasOwnProperty("prop_tableBodyStyles")            ?  data.prop_tableBodyStyles             : null;

            const prop_tableItemBodyClass         =   data.hasOwnProperty("prop_tableItemBodyClass")         ?  data.prop_tableItemBodyClass           : [];
            const prop_tableItemBodyStyles        =   data.hasOwnProperty("prop_tableItemBodyStyles")        ?  data.prop_tableItemBodyStyles          : null;
            const prop_tableItemBodyHoverStyles   =   data.hasOwnProperty("prop_tableItemBodyHoverStyles")   ?  data.prop_tableItemBodyHoverStyles     : null;

            const prop_valueType                  =   data.hasOwnProperty("prop_valueType")                  ?  data.prop_valueType                    : this.TYPE_SELECTED_NONE;
            const prop_valueRow_backgroundColor   =   data.hasOwnProperty("prop_valueRow_backgroundColor")   ?  data.prop_valueRow_backgroundColor     : "" ;
            const prop_valueCol_backgroundColor   =   data.hasOwnProperty("prop_valueCol_backgroundColor")   ?  data.prop_valueCol_backgroundColor     : "" ;
            const prop_valueCol_textColor         =   data.hasOwnProperty("prop_valueCol_textColor")         ?  data.prop_valueCol_textColor           : ""  ;

            const prop_rowOptionsBackgroundColor           =   data.hasOwnProperty("prop_rowOptionsBackgroundColor")                ?  data.prop_rowOptionsBackgroundColor             : ""  ;
            const prop_rowOptionsColor                     =   data.hasOwnProperty("prop_rowOptionsColor")                          ?  data.prop_rowOptionsColor                       : ""  ;
            const prop_rowOptionsOpacity                   =   data.hasOwnProperty("prop_rowOptionsOpacity")                        ?  data.prop_rowOptionsOpacity                     : ""  ;
            const prop_rowOptionsItemBackgroundColor       =   data.hasOwnProperty("prop_rowOptionsItemBackgroundColor")            ?  data.prop_rowOptionsItemBackgroundColor         : ""  ;
            const prop_rowOptionsItemColor                 =   data.hasOwnProperty("prop_rowOptionsItemColor")                      ?  data.prop_rowOptionsItemColor                   : ""  ;
            const prop_rowOptionsItemHoverBackgroundColor  =   data.hasOwnProperty("prop_rowOptionsItemHoverBackgroundColor")       ?  data.prop_rowOptionsItemHoverBackgroundColor    : ""  ;
            const prop_rowOptionsItemHoverColor            =   data.hasOwnProperty("prop_rowOptionsItemHoverColor")                 ?  data.prop_rowOptionsItemHoverColor              : ""  ;


            const prop_data                       =   data.hasOwnProperty("prop_data")                       ?  data.prop_data                        : [];
            const prop_order                      =   data.hasOwnProperty("prop_order")                      ?  data.prop_order                       : [];
            const prop_header                     =   data.hasOwnProperty("prop_header")                     ?  data.prop_header                      : [];

            let   prop_valueRow                   =   data.hasOwnProperty("prop_valueRow")                   ?  data.prop_valueRow                    :  null;
            let   prop_valueCol                   =   data.hasOwnProperty("prop_valueCol")                   ?  data.prop_valueCol                    :  null;
            const prop_size                       =   data.hasOwnProperty("prop_size")                       ?  data.prop_size                        : null;

            const prop_hasColNumber               =   data.hasOwnProperty("prop_hasColNumber")               ?  data.prop_hasColNumber                : true;
            const directionRtl                    =   this._COMPONENT_CONFIG.hasOwnProperty("directionRtl")  ? this._COMPONENT_CONFIG.directionRtl    : false;

            const elHeight = tools_css.getHeightSize(prop_size);
            const elFontSize = tools_css.getFontSize(prop_size);

            const htmlBody = this.fn_onGetHtmlBody();

            return `
<tbody data-part-name="${partName}" 
       id="component-table-body-${this._COMPONENT_RANDOM_ID}" 
       class=" ${tools_public.renderListClass(prop_tableBodyClass)}">
       
     <style>
         #${this._COMPONENT_ID} #component-table-body-${this._COMPONENT_RANDOM_ID}{
             ${tools_public.renderListStyle(prop_tableBodyStyles)};
             direction: ${directionRtl? "ltr" : "rtl"};
     
         }
         #${this._COMPONENT_ID} .component-table-body-item-${this._COMPONENT_RANDOM_ID} {
             height:  ${elHeight}px;
             font-size:  ${elFontSize}px;
             line-height:  ${elHeight}px;
         }
         #${this._COMPONENT_ID} .component-table-body-item-${this._COMPONENT_RANDOM_ID} .component-table-body-item-span-${this._COMPONENT_RANDOM_ID}{
             cursor: pointer;
             ${tools_public.renderListStyle(prop_tableItemBodyStyles)};
         }
         #${this._COMPONENT_ID} .component-table-body-item-${this._COMPONENT_RANDOM_ID}:hover .component-table-body-item-span-${this._COMPONENT_RANDOM_ID}{
             position: relative;
             z-index: 1;
             ${tools_public.renderListStyle(prop_tableItemBodyHoverStyles)}
         }
         
         #${this._COMPONENT_ID} .selected_table_row{
             background-color: ${prop_valueRow_backgroundColor}!important;
          }
         #${this._COMPONENT_ID} .selected_table_col{
             background-color: ${prop_valueCol_backgroundColor}!important;
             color: ${prop_valueCol_textColor}!important;
         }
         
         .component-table-body-item-option-${this._COMPONENT_RANDOM_ID} {
             width: 0;
             border:    none;
             z-index:   ${tools_css.getZIndex(tools_css.standardZIndex.tools.name , 4)}
         }
         
         .component-table-body-item-option-col-${this._COMPONENT_RANDOM_ID} {
             opacity:      ${prop_rowOptionsOpacity/100};
             cursor:       pointer;
             top:          50%;
             ${directionRtl ? "left" : "right"} : 100%;
             transform:    translate(${directionRtl ? "0px" : "0px"}  , 0);
             background:   ${prop_rowOptionsBackgroundColor} !important;
             color:        ${prop_rowOptionsColor} !important;
             display:      inline-flex;
         }
         .component-table-body-item-option-row-${this._COMPONENT_RANDOM_ID}:hover .component-table-body-item-option-col-${this._COMPONENT_RANDOM_ID}  {
             opacity:       1;
         }
         
         .component-table-body-item-option-col-icons-${this._COMPONENT_RANDOM_ID} {
             display: none;
         }
         .component-table-body-item-option-row-${this._COMPONENT_RANDOM_ID}:hover .component-table-body-item-option-col-arrow-${this._COMPONENT_RANDOM_ID}  {
             display: none;
         }
         .component-table-body-item-option-row-${this._COMPONENT_RANDOM_ID}:hover .component-table-body-item-option-col-icons-${this._COMPONENT_RANDOM_ID}  {
             display: block;
         }
         
         
         .component-table-body-item-option-col-${this._COMPONENT_RANDOM_ID}-item {
             background:   ${prop_rowOptionsItemBackgroundColor} !important;
             color:        ${prop_rowOptionsItemColor} !important;
             width:        40px;
         }
         .component-table-body-item-option-col-${this._COMPONENT_RANDOM_ID}:hover .component-table-body-item-option-col-${this._COMPONENT_RANDOM_ID}-item{
             background:   ${prop_rowOptionsItemHoverBackgroundColor} !important;
             color:        ${prop_rowOptionsItemHoverColor} !important;
         }
     </style>
    
    ${htmlBody}
    
</tbody>

            `;
        }

        return `
<thead data-part-name="${partName}"></thead>
        `;
    }

    template_render_tableFooter(partName) {
        const data = this.getPartProps(partName)

        if (data != null) {

            return `
              
            `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    componentFn_render_tableHeader_colSelecter(partName) {
        const data = this.getPartProps(partName)

        if (data != null) {
            const prop_hasColSelector                                    =   data.hasOwnProperty("prop_hasColSelector")                                        ?  data.prop_hasColSelector                                         : true;
            const prop_doColSelector                                     =   data.hasOwnProperty("prop_doColSelector")                                         ?  data.prop_doColSelector                                          : true;
            const prop_order                                             =   data.hasOwnProperty("prop_order")                                                 ?  data.prop_order                                                  : [];
            const prop_header                                            =   data.hasOwnProperty("prop_header")                                                ?  data.prop_header                                                 : [];
            const prop_backgroundColorIconColumnSelector                 =   data.hasOwnProperty("prop_backgroundColorIconColumnSelector")                     ?  data.prop_backgroundColorIconColumnSelector                      : "";
            const prop_colorIconColumnSelector                           =   data.hasOwnProperty("prop_colorIconColumnSelector")                               ?  data.prop_colorIconColumnSelector                                : "";


            if (prop_hasColSelector){

                const ordersSelector  =this.fn_onGetColumnsSelector(prop_order , prop_header);

                new window.ComponentSelectColumns(
                    `component-table-header-select-columns-${this._COMPONENT_RANDOM_ID}` ,
                    {
                        classList: ["position-absolute" , /*"h-100"*/]  ,
                        prop_showListSelected: false ,
                        styles: {
                            "top":        "50%" ,
                            "left" :      "50%" ,
                            "transform" : "translate(-50% , -50%)" ,
                            "z-index" :    tools_css.getZIndex(tools_css.standardZIndex.tools.name , 4)
                        } ,

                        prop_labelShow: false ,
                        prop_backgroundColorIcon : prop_backgroundColorIconColumnSelector ,
                        prop_colorIcon : prop_colorIconColumnSelector ,

                        prop_columns: ordersSelector,
                        fn_callback: (event , order , isCompleteTrue)=>{
                            if (prop_doColSelector) this.fn_renderDataTable(order);
                            this.fn_onCallbackColSelector(order , isCompleteTrue);
                        }
                    }
                )

            }

        }

    }



    /* ---------------------------------------------
       FUNCTIONs
    --------------------------------------------- */

    fn_getElementHeader(){
        return document.querySelector(`#component-table-header-${this._COMPONENT_RANDOM_ID} `);
    }

    fn_getElementBody(){
        return document.querySelector(`#component-table-body-${this._COMPONENT_RANDOM_ID}`);
    }

    fn_getElementFooter(){
        return document.querySelector(`#component-table-footer-${this._COMPONENT_RANDOM_ID}`);
    }

    fn_renderDataTable(order){
        let listOrder = [];
        const data = this._COMPONENT_CONFIG;

        if (order!=null && Array.isArray(order)){
            for (let i = 0; i < order.length; i++) {
                let itemOrder = order[i];
                if (itemOrder.hasOwnProperty("name") && itemOrder.hasOwnProperty("selected") && itemOrder.selected){
                    listOrder.push(itemOrder.name);
                }
            }
        }
        data["prop_order"] = listOrder;
        this.renderComponent(data);
    }

    fn_onGetHtmlHeader(){
        const data = this._COMPONENT_CONFIG;
        const prop_order                      =   data.hasOwnProperty("prop_order")                      ?  data.prop_order                       : [];
        const prop_header                     =   data.hasOwnProperty("prop_header")                     ?  data.prop_header                      : [];
        const prop_tableItemHeadClass         =   data.hasOwnProperty("prop_tableItemHeadClass")         ?  data.prop_tableItemHeadClass           : [];
        const prop_hasColNumber               =   data.hasOwnProperty("prop_hasColNumber")               ?  data.prop_hasColNumber                : true;
        const prop_hasColSelector             =   data.hasOwnProperty("prop_hasColSelector")             ?  data.prop_hasColSelector              : true;
        const prop_headerIconSize             =   data.hasOwnProperty("prop_headerIconSize")             ?  data.prop_headerIconSize              : "";
        const prop_headerIconColor            =   data.hasOwnProperty("prop_headerIconColor")            ?  data.prop_headerIconColor             : "";

        let htmlHeader = "";
        if (prop_header != null && Array.isArray(prop_header)){

            if (prop_hasColNumber || prop_hasColSelector){
                htmlHeader += `
<th class="component-table-header-item-${this._COMPONENT_RANDOM_ID} ${tools_public.renderListClass(prop_tableItemHeadClass)} p-0 text-center position-relative" 
   scope="col" style="width: 40px">
     <component-select-columns id="component-table-header-select-columns-${this._COMPONENT_RANDOM_ID}"></component-select-columns>
</th>`
            }

            let orderHedar = [];
            for (const orderIndex in prop_order) {
                const orderKey = prop_order[orderIndex]
                for (const headerIndex in prop_header) {
                    const itemHeader = prop_header[headerIndex];
                    if (itemHeader != null && itemHeader.hasOwnProperty("id") && orderKey == itemHeader.id ){
                        orderHedar.push(itemHeader)
                    }
                }
            }
            for (const headerIndex in orderHedar) {
                const itemHeader = orderHedar[headerIndex];

                const icon = itemHeader.hasOwnProperty("icon") ? itemHeader.icon : null;

                let iconHtml = "";
                if (icon != null){
                    iconHtml = `
                         <span class="component-table-header-item-icon-${this._COMPONENT_RANDOM_ID}  position-absolute">
                            ${typeof icon == "function" ? icon(prop_headerIconSize , prop_headerIconColor) : icon}
                         </span>
                    `;
                }

                htmlHeader += `
<th class="component-table-header-item-${this._COMPONENT_RANDOM_ID} ${tools_public.renderListClass(prop_tableItemHeadClass)} p-0 text-center position-relative" 
   scope="col" style="${itemHeader.hasOwnProperty("width") ? "width: "+itemHeader.width+"%" :""}">
     ${itemHeader.hasOwnProperty("content") ? itemHeader.content : '#'}
     ${iconHtml}
</th>`
            }
        }

        return htmlHeader;
    }

    fn_onGetHtmlBody(){
        const data = this._COMPONENT_CONFIG;
        const prop_order                      =   data.hasOwnProperty("prop_order")                      ?  data.prop_order                       : [];
        const prop_header                     =   data.hasOwnProperty("prop_header")                     ?  data.prop_header                      : [];
        const prop_data                       =   data.hasOwnProperty("prop_data")                       ?  data.prop_data                        : [];
        const prop_valueType                  =   data.hasOwnProperty("prop_valueType")                  ?  data.prop_valueType                   : this.TYPE_SELECTED_NONE;
        let   prop_valueRow                   =   data.hasOwnProperty("prop_valueRow")                   ?  data.prop_valueRow                    :  null;
        let   prop_valueCol                   =   data.hasOwnProperty("prop_valueCol")                   ?  data.prop_valueCol                    :  null;
        const prop_tableItemBodyClass         =   data.hasOwnProperty("prop_tableItemBodyClass")         ?  data.prop_tableItemBodyClass          : [];
        const prop_hasColNumber               =   data.hasOwnProperty("prop_hasColNumber")               ?  data.prop_hasColNumber                : true;

        let htmlBody = "";

        const tableDataOreder = [];
        if (prop_data != null){
            for (const tableDataKey in prop_data) {
                const itemData = prop_data[tableDataKey];
                const itemDataOrder = {};
                for (const tableHeaderKey in prop_header) {
                    const itemHeader = prop_header[tableHeaderKey]
                    if (itemHeader.hasOwnProperty("id") && itemData.hasOwnProperty(itemHeader.id)){
                        const value = itemData[itemHeader.id];


                        if (value != null){
                            if (value.hasOwnProperty("content") ){
                                itemDataOrder[itemHeader.id] = value;
                            }
                            else {
                                itemDataOrder[itemHeader.id] = {content: value };
                            }
                        }
                        else {
                            itemDataOrder[itemHeader.id] = {content: "" };
                        }
                    }
                }
                tableDataOreder.push(itemDataOrder)
            }
        }

        if (prop_header != null && Array.isArray(prop_header)){
            let orderHedar = [];
            for (const orderIndex in prop_order) {
                const orderKey = prop_order[orderIndex]
                for (const headerIndex in prop_header) {
                    const itemHeader = prop_header[headerIndex];
                    if (itemHeader != null && itemHeader.hasOwnProperty("id") && orderKey == itemHeader.id ){
                        orderHedar.push(itemHeader)
                    }
                }
            }

            if (tableDataOreder != null && Array.isArray(tableDataOreder)){
                for (const bodyIndex in tableDataOreder) {
                    const itemBody = tableDataOreder[bodyIndex];

                    let classSelected = "";
                    if (prop_valueRow == bodyIndex &&  (prop_valueType == this.TYPE_SELECTED_ROW || prop_valueType == this.TYPE_SELECTED_BOTH)){
                        classSelected = "selected_table_row"
                    }


                    let hasRow = false;
                    let rowsHtml = "";
                    for (const headerIndex in orderHedar) {
                        const itemHeader = orderHedar[headerIndex];
                        if (itemHeader != null && itemHeader.hasOwnProperty("id") && itemBody.hasOwnProperty(itemHeader.id) && itemBody[itemHeader.id].hasOwnProperty("content")){
                            hasRow = true;
                            let colClassSelected = "";
                            if (prop_valueRow == bodyIndex && prop_valueCol == headerIndex && (prop_valueType == this.TYPE_SELECTED_COL || prop_valueType == this.TYPE_SELECTED_BOTH)){
                                colClassSelected = "selected_table_col"
                            }

                            rowsHtml += `
<td class="component-table-body-item-${this._COMPONENT_RANDOM_ID} p-0 text-center" >
    <span class="component-table-body-item-span-${this._COMPONENT_RANDOM_ID}  ${colClassSelected} ${tools_public.renderListClass(prop_tableItemBodyClass)}" onclick="${this.getFn('fn_onSelectCol' , "event" , `'${itemHeader.id }'`,  headerIndex , bodyIndex)}">
        ${itemBody[itemHeader.id].content}
    </span>
</td>
`;
                        }
                    }

                    if (hasRow){
                        let itemRow = rowsHtml;
                        if (prop_hasColNumber){
                            const itemRowOptions = this.fn_onGetHtmlBody_rowOption(itemBody);

                            itemRow = `
<td class="component-table-body-item-${this._COMPONENT_RANDOM_ID} p-0 text-center" >
    <span class="component-table-body-item-span-${this._COMPONENT_RANDOM_ID} ${tools_public.renderListClass(prop_tableItemBodyClass)}" >
        ${parseInt(bodyIndex)+1}
    </span>
</td>
${rowsHtml}
${itemRowOptions}
`
                        }

                        htmlBody += `<tr class="component-table-body-item-option-row-${this._COMPONENT_RANDOM_ID}  ${classSelected} rounded position-relative"> ${itemRow} </tr>`
                    }

                }
            }
        }

        return htmlBody;
    }

    fn_onGetHtmlBody_rowOption(itemBody){
        const data = this._COMPONENT_CONFIG;
        const prop_rowOptions             =   data.hasOwnProperty("prop_rowOptions")                     ?  data.prop_rowOptions                           : [];
        const directionRtl                =   this._COMPONENT_CONFIG.hasOwnProperty("directionRtl")      ? this._COMPONENT_CONFIG.directionRtl             : false;
        const prop_size                   =   data.hasOwnProperty("prop_size")                           ?  data.prop_size                                 : null;
        const prop_rowOptionsItemColor    =   data.hasOwnProperty("prop_rowOptionsItemColor")            ?  data.prop_rowOptionsItemColor                      : "";
        //const elHeight = tools_css.getHeightSize(prop_size);
        let html = "";

        if (prop_rowOptions != null && Array.isArray(prop_rowOptions) && prop_rowOptions.length){

            let htmlOptions = "";
            for (let i = 0; i < prop_rowOptions.length ; i++) {
                let itemOption = prop_rowOptions[i];

                if (itemOption.hasOwnProperty("html") &&
                    itemOption.hasOwnProperty("attrs") && itemOption.attrs.hasOwnProperty("id") && typeof itemBody[itemOption.attrs.id] !== "undefined"){

                    htmlOptions += `
               <div class="component-table-body-item-option-col-${this._COMPONENT_RANDOM_ID}-item rounded text-center float-start mx-1 " 
                    title="${itemOption?.attrs?.title ?? ""}" 
                    onclick="${this.getFn("fn_onclickOtiponCard" , "event" , `'${itemOption?.attrs?.name ?? ""}'` , `'${itemBody[itemOption.attrs.id]?.content ?? "" }'` )}">
                   ${typeof  itemOption.html == "function" ? itemOption.html(prop_size , prop_rowOptionsItemColor) : itemOption.html}
               </div>
            `
                }

            }

            html = `<td class="component-table-body-item-option-${this._COMPONENT_RANDOM_ID} position-absolute px-0 mx-0 ">

                    <div class="component-table-body-item-option-col-${this._COMPONENT_RANDOM_ID} rounded position-absolute py-1 px-2">
                    
                        <div class="component-table-body-item-option-col-arrow-${this._COMPONENT_RANDOM_ID} rounded text-center  mx-1 " >
                               ${directionRtl ? tools_icons.icon_arrow_right({size : prop_size /*, colors: {primary:prop_rowOptionsItemColor}*/} ) : tools_icons.icon_arrow_left({size : prop_size /*, colors: {primary:prop_rowOptionsItemColor}*/} )}
                        </div>
                        
                        <div class="component-table-body-item-option-col-icons-${this._COMPONENT_RANDOM_ID}" style="width: ${prop_rowOptions.length * 50}px" >
                               ${htmlOptions}
                        </div>
                        
                    </div>
                    
             </td>`

        }

        return html;
    }

    fn_onGetColumnsSelector(prop_order , prop_header){
        let listColSelector = [];

        if (prop_order != null && Array.isArray(prop_order)){
            for (let j = 0; j <prop_order.length; j++) {
                const itemOrder = prop_order[j];
                if (prop_header != null && Array.isArray(prop_header)){
                    for (let i = 0; i < prop_header.length; i++) {
                        const itemCol = prop_header[i];
                        if (itemOrder != null && itemOrder == itemCol.id){
                            listColSelector.push({
                                name: itemCol.id ,
                                title: itemCol.content ,
                                selected: true ,
                            });
                            break;
                        }
                    }
                }
            }
        }

        if (prop_header != null && Array.isArray(prop_header)){
            for (let i = 0; i < prop_header.length; i++) {
                const itemCol = prop_header[i];
                if (itemCol.hasOwnProperty("id") && itemCol.hasOwnProperty("content")){
                    let itemColSelector = {
                        name: itemCol.id ,
                        title: itemCol.content ,
                        selected: false ,
                    }

                    let exist =false
                    if (prop_order != null && Array.isArray(prop_order)){
                        for (let j = 0; j <prop_order.length; j++) {
                            const itemOrder = prop_order[j];
                            if (itemOrder != null && itemOrder == itemCol.id){
                                exist = true;
                            }
                        }
                    }

                    if (!exist){
                        listColSelector.push(itemColSelector);
                    }
                }
            }
        }
        return listColSelector;
    }

    fn_onSelectCol(event , key  , colIndex, rowIndex){
        const data = this._COMPONENT_CONFIG;

        const el = event.target;
        const value = el.innerHTML.trim();

        this.set("prop_valueRow" , rowIndex);
        this.set("prop_valueCol" , colIndex);

        if (data.hasOwnProperty("fn_callback") && typeof data.fn_callback != null){
            data.fn_callback(event , value , key , colIndex , rowIndex);
        }
    }

    fn_onclickOtiponCard(event , optionName , optionId){
        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("fn_callback") && typeof data.fn_callback != null){
            data.fn_callback(event , optionName , optionId != null && optionId != "" ? parseInt(optionId) : null );
        }
    }

    fn_onCallbackColSelector(event , order , isCompleteTrue){
        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("fn_onCallbackColSelector") && typeof data.fn_onCallbackColSelector != null){
            data.fn_onCallbackColSelector(event , order , isCompleteTrue);
        }
    }


}


/*-------------------------------------
 020-02) Component Table resposible
-------------------------------------*/
class ComponentTableResponsibleBase extends ComponentBase{


    /* ---------------------------------------------
     PROPERTYs Pattern
     --------------------------------------------- */
    _COMPONENT_PATTERN = {
        prop_size : {
            prop: "prop_size" ,
            default: tools_css.standardSizes.m.name
        } ,
        prop_formClass: {
            prop: "prop_formClass",
            default: []
        },
        prop_formtSyles: {
            prop: "prop_formtSyles",
            default: {}
        },
        prop_doColSelector : {
            prop: "prop_doColSelector" ,
            default: true
        } ,
        prop_backgroundcolorHeader: {
            prop: "prop_backgroundcolorHeader",
            default: tools_const?.styles?.tableResposible?.backgroundColor_header || ""
        },
        prop_colorHeader: {
            prop: "prop_colorHeader",
            default: tools_const?.styles?.tableResposible?.color_header || ""
        },
        prop_backgroundcolorBody: {
            prop: "prop_backgroundcolorBody",
            default: tools_const?.styles?.tableResposible?.backgroundColor_body || ""
        },
        prop_colorBody: {
            prop: "prop_colorBody",
            default: tools_const?.styles?.tableResposible?.color_body || ""
        },
        prop_backgroundcolorBodyHover: {
            prop: "prop_backgroundcolorBodyHover",
            default: tools_const?.styles?.tableResposible?.backgroundColor_bodyHover || ""
        },
        prop_colorBodyHover: {
            prop: "prop_colorBodyHover",
            default: tools_const?.styles?.tableResposible?.color_bodyHover || ""
        },
        prop_order: {
            prop: "prop_order",
            default: {}
        },
        prop_header: {
            prop: "prop_header",
            default: {}
        },
        prop_data: {
            prop: "prop_data",
            default: []
        },
        prop_options: {
            prop: "prop_options",
            default: null
        },
        prop_headerIconSize: {
            prop: "prop_headerIconSize",
            default: 20
        },

        prop_backgroundColorIconColumnSelector: {
            prop: "prop_backgroundColorIconColumnSelector",
            default: tools_const?.styles?.tableResposible?.backgroundColor_iconColumnSelector ?? ""
        },
        prop_colorIconColumnSelector: {
            prop: "prop_colorIconColumnSelector",
            default: tools_const?.styles?.tableResposible?.color_iconColumnSelector ?? ""
        },

        prop_colorIconCardvView: {
            prop: "prop_colorIconCardvView",
            default: tools_const?.styles?.tableResposible?.color_iconCardView ?? ""
        },
        prop_backgroundColorIconCardvView: {
            prop: "prop_backgroundColorIconCardvView",
            default: tools_const?.styles?.tableResposible?.backgroundColor_iconCardView ?? ""
        },
        prop_borderColorIconCardvView: {
            prop: "prop_borderColorIconCardvView",
            default: tools_const?.styles?.tableResposible?.borderColor_iconCardView ?? ""
        },
    };


    /* ---------------------------------------------
           PROPERTYs Props
    --------------------------------------------- */
    _COMPONENT_PROPS = {
        part_structure: [
            this._COMPONENT_PATTERN.prop_formtSyles,
        ],

        part_form: [
            this._COMPONENT_PATTERN.prop_size,
            this._COMPONENT_PATTERN.prop_formClass,
            this._COMPONENT_PATTERN.prop_order,
            this._COMPONENT_PATTERN.prop_header,
            this._COMPONENT_PATTERN.prop_data,
            this._COMPONENT_PATTERN.prop_backgroundcolorHeader,
            this._COMPONENT_PATTERN.prop_colorHeader,
            this._COMPONENT_PATTERN.prop_backgroundcolorBody,
            this._COMPONENT_PATTERN.prop_colorBody,
            this._COMPONENT_PATTERN.prop_backgroundcolorBodyHover,
            this._COMPONENT_PATTERN.prop_colorBodyHover,
            this._COMPONENT_PATTERN.prop_options,
            this._COMPONENT_PATTERN.prop_backgroundColorIconColumnSelector,
            this._COMPONENT_PATTERN.prop_colorIconColumnSelector,

            this._COMPONENT_PATTERN.prop_doColSelector,

            this._COMPONENT_PATTERN.prop_colorIconCardvView,
            this._COMPONENT_PATTERN.prop_backgroundColorIconCardvView,
            this._COMPONENT_PATTERN.prop_borderColorIconCardvView,

            this._COMPONENT_PATTERN.prop_headerIconSize,
        ],
    };



    /* ---------------------------------------------
   PROPERTYs Schema
   --------------------------------------------- */
    _COMPONENT_SCHEMA = {
        part_structure: {
            part_form:{}
        }
    }

}
window.ComponentTableResponsible = class ComponentTableResponsible extends ComponentTableResponsibleBase{

    _TODO_RESIZE_SCREEN = null;


    /* ---------------------------------------------
       SETUP
    --------------------------------------------- */
    constructor(elId , config) {
        super(
            listComponent[ComponentTableResponsible.name] ,
            elId
        );
        super.renderComponent(config);
    }



    /* ---------------------------------------------
       TEMPLATEs
    --------------------------------------------- */
    componentFn(){
        this.onRegisterFinish().then(el => {
            this.fn_renderTable();
        })
    }

    templateFn(partName = null){
        switch (partName){
            case "part_structure":
                return this.template_render_structure(partName);
            case "part_form":
                return this.template_render_form(partName);
            default:
                return this.templateBasic_render();
        }
    }

    template_render_structure(partName) {
        const data = this.getPartProps(partName)
        const prop_formtSyles             =   data.hasOwnProperty("prop_formtSyles")             ?  data.prop_formtSyles             : {};

        const content = `
        
           <style>
             #${this._COMPONENT_ID} #component-table-responsible-${ this._COMPONENT_RANDOM_ID}{
                 ${tools_public.renderListClass(prop_formtSyles)};
             }
           </style>
        
           ${this.templateFn("part_form")}
                `;
        return this.templateBasic_render_structure(content);

    }

    template_render_form(partName) {
        const data = this.getPartProps(partName)

        if (data != null){
            const prop_formClass             =   data.hasOwnProperty("prop_formClass")             ?  data.prop_formClass             : [];

            return `
<section data-part-name="${partName}" 
         id="component-table-responsible-${ this._COMPONENT_RANDOM_ID}" 
         class="${tools_public.renderListClass(prop_formClass)}" >
         
</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;

    }




    /* ---------------------------------------------
       FUNCTIONs
    --------------------------------------------- */

    fn_getElementForm(){
        return document.querySelector(`#${this._COMPONENT_ID} #component-table-responsible-${ this._COMPONENT_RANDOM_ID}`);
    }

    fn_renderTable(){
        window.addEventListener('resize', this.fn_renderTable_resize.bind(this));
        this.fn_renderTable_resize();
    }

    fn_renderTable_resize(event){
        if (this._TODO_RESIZE_SCREEN != null) clearTimeout(this._TODO_RESIZE_SCREEN)
        this._TODO_RESIZE_SCREEN = setTimeout(
            () => {
                const isWideScreen = tools_css.checkMoreThanScreanWidth(tools_css.standardScreanWidth.m.name);
                if (isWideScreen){
                    this.fn_renderTable_resize_isForPc();
                }
                else {
                    this.fn_renderTable_resize_isForMobile();
                }
                this.fn_onCallbackResizeTable(event)
            } ,
            200
        )
    }

    fn_renderTable_resize_isForPc(){
        const data = this._COMPONENT_CONFIG;

        const formEl = this.fn_getElementForm();
        if (formEl != null){
            const prop_order                     =   data.hasOwnProperty("prop_order")                              ?  data.prop_order                              : {};
            const prop_header                    =   data.hasOwnProperty("prop_header")                             ?  data.prop_header                             : {};
            const prop_data                      =   data.hasOwnProperty("prop_data")                               ?  data.prop_data                               : [];
            const prop_doColSelector             =   data.hasOwnProperty("prop_doColSelector")                      ?  data.prop_doColSelector                      : true;

            const prop_backgroundcolorHeader     =   data.hasOwnProperty("prop_backgroundcolorHeader")              ?  data.prop_backgroundcolorHeader              : "";
            const prop_colorHeader               =   data.hasOwnProperty("prop_colorHeader")                        ?  data.prop_colorHeader                        : "";

            const prop_backgroundcolorBody       =   data.hasOwnProperty("prop_backgroundcolorBody")                ?  data.prop_backgroundcolorBody                : "";
            const prop_colorBody                 =   data.hasOwnProperty("prop_colorBody")                          ?  data.prop_colorBody                          : "";

            const prop_backgroundcolorBodyHover      =   data.hasOwnProperty("prop_backgroundcolorBodyHover")           ?  data.prop_backgroundcolorBodyHover           : "";
            const prop_colorBodyHover                =   data.hasOwnProperty("prop_colorBodyHover")                     ?  data.prop_colorBodyHover                     : "";

            const prop_options                                  =   data.hasOwnProperty("prop_options")                                ?  data.prop_options                                      : [];
            const prop_colorIconColumnSelector                  =   data.hasOwnProperty("prop_colorIconColumnSelector")                ?  data.prop_colorIconColumnSelector                   : "";
            const prop_backgroundColorIconColumnSelector        =   data.hasOwnProperty("prop_backgroundColorIconColumnSelector")      ?  data.prop_backgroundColorIconColumnSelector            : "";

            const prop_headerIconSize                           =   data.hasOwnProperty("prop_headerIconSize")                         ?  data.prop_headerIconSize            : 20;

            formEl.innerHTML = `<component-table id="component-table-responsible-${ this._COMPONENT_RANDOM_ID}-table"></component-table>`

            const componentTable = new window.ComponentTable (
                `component-table-responsible-${ this._COMPONENT_RANDOM_ID}-table` ,
                {
                    prop_order , prop_header ,  prop_data ,
                    prop_backgroundColorIconColumnSelector ,  prop_colorIconColumnSelector ,
                    prop_doColSelector,
                    prop_headerIconSize ,
                    prop_tableItemHeadStyles: {
                        "background-color" : prop_backgroundcolorHeader ,
                        "color" : prop_colorHeader ,
                        "padding" : "5px 0 !important" ,
                        "border" : "2px solid white" ,
                        "border-radius" : "10px" ,
                    },
                    prop_tableItemHeadClass:[] ,
                    prop_tableItemBodyStyles: {
                        "background-color" : prop_backgroundcolorBody ,
                        "color" : prop_colorBody ,
                        "width" : "100%" ,
                        "height" : "100%" ,
                        "display" : "block" ,
                        "border" : "2px solid white" ,
                        "border-radius" : "10px" ,
                        "min-height" : "40px" ,
                    },
                    prop_tableItemBodyClass: [] ,
                    prop_tableItemBodyHoverStyles: {
                        "background-color" : prop_backgroundcolorBodyHover ,
                        "color" : prop_colorBodyHover ,
                    },
                    prop_tableType: 0 ,
                    prop_rowOptions: prop_options,
                    fn_callback: (event , optionName , optionId) => {
                        this.fn_onclickOtiponCard(event , optionName , optionId)
                    } ,
                    fn_onCallbackColSelector: (event , order , isCompleteTrue)=>{
                        this.fn_onCallbackColSelector(event , order , isCompleteTrue)
                    }
                }
            );

        }
    }

    fn_renderTable_resize_isForMobile(){
        const data = this._COMPONENT_CONFIG;

        const formEl = this.fn_getElementForm();
        if (formEl != null){

            formEl.innerHTML = `<component-recycler-view id="component-table-responsible-${ this._COMPONENT_RANDOM_ID}-recylect-view"></component-recycler-view>`

            const prop_order                     =   data.hasOwnProperty("prop_order")                              ?  data.prop_order                              : {};
            const prop_header                    =   data.hasOwnProperty("prop_header")                             ?  data.prop_header                             : {};
            const prop_data                      =   data.hasOwnProperty("prop_data")                               ?  data.prop_data                               : [];

            let props = [];
            if (prop_data != null && Array.isArray(prop_data)){
                for (let i = 0; i < prop_data.length ; i++) {
                    const itemData = prop_data[i];
                    let itempProp = {
                        prop_body: "" ,
                        prop_optionsOpacity: 100 ,
                        prop_backgroundHover: "" ,
                        prop_options: this.fn_getListOptions(itemData) ,
                        fn_callback:  (event , optionName , optionId) => {
                            this.fn_onclickOtiponCard(event , optionName , optionId)
                        } ,
                        prop_borderStyles: {
                            "display" : "flow-root"
                        }
                    };

                    if (itemData != null && prop_order != null && Array.isArray(prop_order)){

                        for (let j = 0; j < prop_order.length; j++) {
                            const itemOrder = prop_order[j];
                            if (typeof itemData[itemOrder] != "undefined"){

                                Object.keys(prop_header).forEach(keyHeader => {
                                    let itemHeader = prop_header[keyHeader];

                                    if (itemHeader!= null && itemHeader.hasOwnProperty("id") && itemHeader.id == itemOrder
                                        &&  itemHeader.hasOwnProperty("inMobile") && itemHeader.inMobile
                                        && itemHeader.hasOwnProperty("content") ) {

                                        itempProp.prop_body += this.fn_getCardInfoHtml(itemHeader, itemData , itemOrder );
                                    }

                                })

                            }
                        }
                    }

                    props.push(itempProp);
                }
            }

            let ComponentRecycleView = new window.ComponentRecyclerView(
                `component-table-responsible-${ this._COMPONENT_RANDOM_ID}-recylect-view` ,
                {
                    prop_componentsName : "component-card-info" ,
                    prop_componentsParams : props
                }
            );


        }
    }

    fn_getCardInfoHtml(itemHeader , itemData , itemOrder , hasIcon){
        const data = this._COMPONENT_CONFIG;
        const prop_colorIconCardvView              =   data.hasOwnProperty("prop_colorIconCardvView")                ?  data.prop_colorIconCardvView                  : "";
        const prop_backgroundColorIconCardvView    =   data.hasOwnProperty("prop_backgroundColorIconCardvView")      ?  data.prop_backgroundColorIconCardvView        : "";
        const prop_borderColorIconCardvView        =   data.hasOwnProperty("prop_borderColorIconCardvView")          ?  data.prop_borderColorIconCardvView            : "";
        const prop_size                            =   data.hasOwnProperty("prop_size")                              ?  data.prop_size                                : null;
        const directionRtl                         =   this._COMPONENT_CONFIG.hasOwnProperty("directionRtl")         ? this._COMPONENT_CONFIG.directionRtl            : false;
        const prop_headerIconSize                  =   data.hasOwnProperty("prop_headerIconSize")                    ?  data.prop_headerIconSize                      : 20;

        const elHeight = tools_css.getHeightSize(prop_size);
        const elFontSize = tools_css.getFontSize(prop_size);
        const elIconSize = tools_css.getIconSize(prop_size);


        let iconHtml="";
        if (itemHeader!= null && itemHeader.hasOwnProperty("icon") ){
            iconHtml = `
              <div class="component-table-responsible-card-view-form-icon-el-${ this._COMPONENT_RANDOM_ID}  position-absolute">
                   ${(typeof itemHeader.icon == "function" ? itemHeader.icon(prop_headerIconSize , prop_colorIconCardvView) : itemHeader.icon)}
              </div>
            `
        }

        let html = `
<div class="component-table-responsible-card-view-form-${ this._COMPONENT_RANDOM_ID} p-0 m-0 ">

     <style>
          .component-table-responsible-card-view-form-${ this._COMPONENT_RANDOM_ID}{
                height: ${elHeight+10}px;        
          }
          .component-table-responsible-card-view-form-icon-${ this._COMPONENT_RANDOM_ID}{
              float: ${directionRtl ? "right" : "left"};
              width: 200px;
          }
          .component-table-responsible-card-view-form-icon-el-${ this._COMPONENT_RANDOM_ID}{
               border-radius: 100%;
               width: ${elIconSize+15}px;
               height: ${elIconSize+15}px;
               padding: 5px;
               top: 50%;
               ${directionRtl ? "right" : "left"} : 0;
               transform: translate(0 , -50%);
          }
          .component-table-responsible-card-view-form-icon-${ this._COMPONENT_RANDOM_ID} span{
              color: ${prop_colorIconCardvView};
              font-size: ${elFontSize}px;
              height: ${elHeight}px;
              line-height: ${elHeight}px;
              display: block;
              ${directionRtl ? "margin-right" : "margin-left"} : ${elIconSize + 25}px;
          }
          .component-table-responsible-card-view-form-info-${ this._COMPONENT_RANDOM_ID}{
              width: calc(100% - 200px);
              float: ${directionRtl ? "right" : "left"};
              font-size: ${elFontSize}px;
              height: ${elHeight}px;
              line-height: ${elHeight}px;
              color: ${prop_colorIconCardvView};
          }
     </style>
     
     <div class="component-table-responsible-card-view-form-icon-${ this._COMPONENT_RANDOM_ID}  h-100 position-relative rounded">
         ${iconHtml}
         <span>${itemHeader.content} :</span>
     </div>
   
     <div class="component-table-responsible-card-view-form-info-${ this._COMPONENT_RANDOM_ID} px-2 h-100">
        <b>${itemData[itemOrder]}</b>
     </div>
      
     
</div>

`;
        return html;
    }

    fn_getListOptions(itemRow){

        let listOption = null;

        const data = this._COMPONENT_CONFIG;
        const prop_options                   =   data.hasOwnProperty("prop_options")                            ?  data.prop_options                            : [];

        if (prop_options != null && Array.isArray(prop_options)){
            listOption = [];
            for (let i = 0; i < prop_options.length; i++) {
                const itemOption = prop_options[i];
                if (itemOption.hasOwnProperty("html") && itemOption.hasOwnProperty("attrs") && itemOption.attrs.hasOwnProperty("id") && typeof itemRow[itemOption.attrs.id] !== "undefined"){
                    listOption.push({
                        html: itemOption.html ,
                        attrs: {
                            id: itemRow[itemOption.attrs.id] ,
                            name: itemOption?.attrs?.name ?? "" ,
                            title: itemOption?.attrs?.title ?? "" ,
                        }
                    })
                }
            }
        }

        return listOption;
    }

    fn_onclickOtiponCard(event , optionName , optionId){
        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("fn_callback") && typeof data.fn_callback != null){
            data.fn_callback(event , optionName , optionId != null && optionId != "" ? parseInt(optionId) : null );
        }
    }

    fn_onCallbackColSelector(event , order , isCompleteTrue){
        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("fn_onCallbackColSelector") && typeof data.fn_onCallbackColSelector != null){
            data.fn_onCallbackColSelector(event , order , isCompleteTrue);
        }
    }

    fn_onCallbackResizeTable(event){
        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("fn_onCallbackResizeTable") && typeof data.fn_onCallbackResizeTable != null){
            data.fn_onCallbackResizeTable(event);
        }
    }

}




//===============================================================================================================
// [20 - 29] tables and tab view  [021] page number
//===============================================================================================================

/*-------------------------------------
 021-01) Component page number
-------------------------------------*/
class ComponentPageNumberBase extends ComponentBase{


    /* ---------------------------------------------
     PROPERTYs Pattern
     --------------------------------------------- */
    _COMPONENT_PATTERN = {
        prop_size : {
            prop: "prop_size" ,
            default: tools_css.standardSizes.m.name
        } ,

        prop_backgroundColorForm : {
            prop: "prop_backgroundColorForm" ,
            default: tools_const?.styles?.pageNumber?.backgroundColor_form
        } ,
        prop_backgroundColorUnSelected2 : {
            prop: "prop_backgroundColorUnSelected2" ,
            default: tools_const?.styles?.pageNumber?.backgroundColor_unselected2
        } ,
        prop_backgroundColorUnSelected : {
            prop: "prop_backgroundColorUnSelected" ,
            default: tools_const?.styles?.pageNumber?.backgroundColor_unselected
        } ,
        prop_backgroundColorSelected : {
            prop: "prop_backgroundColorSelected" ,
            default: tools_const?.styles?.pageNumber?.backgroundColor_selected
        } ,
        prop_backgroundColorSelected2 : {
            prop: "prop_backgroundColorSelected2" ,
            default: tools_const?.styles?.pageNumber?.backgroundColor_selected2
        } ,
        prop_colorUnSelected : {
            prop: "prop_colorUnSelected" ,
            default: tools_const?.styles?.pageNumber?.color_unselected
        } ,
        prop_colorSelected : {
            prop: "prop_colorSelected" ,
            default: tools_const?.styles?.pageNumber?.color_selected
        } ,

        prop_colorIcon : {
            prop: "prop_colorIcon" ,
            default: tools_const?.styles?.pageNumber?.color_icon
        } ,
        prop_backgroundColorIcon : {
            prop: "prop_backgroundColorIcon" ,
            default: tools_const?.styles?.pageNumber?.backgroundColor_icon
        } ,
        prop_backgroundColorIcon2 : {
            prop: "prop_backgroundColorIcon2" ,
            default: tools_const?.styles?.pageNumber?.backgroundColor_icon2
        } ,

        prop_pageSelected: {
            prop: "prop_pageSelected" ,
            default: 0
        } ,
        prop_pageTotal: {
            prop: "prop_pageTotal" ,
            default: 0
        } ,
        prop_pageGap: {
            prop: "prop_pageGap" ,
            default: 2
        } ,

    };


    /* ---------------------------------------------
           PROPERTYs Props
    --------------------------------------------- */
    _COMPONENT_PROPS = {
        part_structure: [

        ],


        part_form: [
            this._COMPONENT_PATTERN.prop_size,
            this._COMPONENT_PATTERN.prop_backgroundColorForm,
        ],


        part_form_btn_prevous: [
            this._COMPONENT_PATTERN.prop_size,
            this._COMPONENT_PATTERN.prop_size,
        ],
        part_form_btn_prevous_icon: [
            this._COMPONENT_PATTERN.prop_size,
            this._COMPONENT_PATTERN.prop_pageSelected,
            this._COMPONENT_PATTERN.prop_pageTotal,
            this._COMPONENT_PATTERN.prop_colorIcon,
            this._COMPONENT_PATTERN.prop_backgroundColorIcon,
            this._COMPONENT_PATTERN.prop_backgroundColorIcon2,
        ],


        part_form_numbers: [
            this._COMPONENT_PATTERN.prop_size,
            this._COMPONENT_PATTERN.prop_pageSelected,
            this._COMPONENT_PATTERN.prop_pageTotal,
            this._COMPONENT_PATTERN.prop_pageGap,
            this._COMPONENT_PATTERN.prop_backgroundColorUnSelected,
            this._COMPONENT_PATTERN.prop_backgroundColorUnSelected2,
            this._COMPONENT_PATTERN.prop_backgroundColorSelected,
            this._COMPONENT_PATTERN.prop_backgroundColorSelected2,
            this._COMPONENT_PATTERN.prop_colorUnSelected,
            this._COMPONENT_PATTERN.prop_colorSelected,
        ],


        part_form_btn_next: [
            this._COMPONENT_PATTERN.prop_size,
        ],
        part_form_btn_next_icon: [
            this._COMPONENT_PATTERN.prop_size,
            this._COMPONENT_PATTERN.prop_pageSelected,
            this._COMPONENT_PATTERN.prop_pageTotal,
            this._COMPONENT_PATTERN.prop_colorIcon,
            this._COMPONENT_PATTERN.prop_backgroundColorIcon,
            this._COMPONENT_PATTERN.prop_backgroundColorIcon2,
        ],

    };



    /* ---------------------------------------------
   PROPERTYs Schema
   --------------------------------------------- */
    _COMPONENT_SCHEMA = {
        part_structure: {
            part_form:{
                part_form_btn_prevous:{
                    part_form_btn_prevous_icon: {}
                } ,
                part_form_numbers:{} ,
                part_form_btn_next:{
                    part_form_btn_next_icon: {}
                } ,
            }
        }
    }

}
window.ComponentPageNumber = class ComponentPageNumber extends ComponentPageNumberBase{


    /* ---------------------------------------------
       SETUP
    --------------------------------------------- */
    constructor(elId , config) {
        super(
            listComponent[ComponentPageNumber.name] ,
            elId
        );
        super.renderComponent(config);
    }



    /* ---------------------------------------------
       TEMPLATEs
    --------------------------------------------- */
    componentFn(){
        this.templateFn("part_form_btn_prevous_icon");
        this.templateFn("part_form_btn_next_icon");
    }

    templateFn(partName = null){
        switch (partName){
            case "part_structure":
                return this.template_render_structure(partName);
            case "part_form":
                return this.template_render_form(partName);
            case "part_form_btn_prevous":
                return this.template_render_form_btn_prevous(partName);
            case "part_form_numbers":
                return this.template_render_form_numbers(partName);
            case "part_form_btn_next":
                return this.template_render_form_btn_next(partName);
            case "part_form_btn_prevous_icon":
                return this.componentFn_render_form_btn_prevous_icon(partName);
            case "part_form_btn_next_icon":
                return this.componentFn_render_form_btn_next_icon(partName);

            default:
                return this.templateBasic_render();
        }
    }


    template_render_structure(partName) {
        const content = `
            ${this.templateFn("part_form") ?? ""}
        `;
        return this.templateBasic_render_structure(content);
    }


    template_render_form(partName) {
        const data = this.getPartProps(partName)

        if (data != null){
            const prop_size                 = data.hasOwnProperty("prop_size")                    ?  data.prop_size                    :  null;
            const prop_backgroundColorForm  = data.hasOwnProperty("prop_backgroundColorForm")     ?  data.prop_backgroundColorForm     :  null;

            const elHeight = tools_css.getHeightSize(prop_size);

            let {min , max} = this.fn_getMinAndMax();
            let length = max - min + 1;

            return `
<section data-part-name="${partName}" 
         id="component-page-number-from-${this._COMPONENT_RANDOM_ID}"
         class="shadow-sm mx-auto d-block overflow-hidden" >
         
    <style>
        #${this._COMPONENT_ID} #component-page-number-from-${this._COMPONENT_RANDOM_ID}{
            background-color: ${prop_backgroundColorForm};
            width:            ${this.fn_getWidthParts(length + 2) + this.fn_getWidthBorderNumber(length-2)}px;;
            height:           ${elHeight}px;
            border-radius:    5px;
       }
    </style>
    
       ${this.templateFn("part_form_btn_prevous") ?? ""}
       ${this.templateFn("part_form_numbers") ?? ""}
       ${this.templateFn("part_form_btn_next") ?? ""}

</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    template_render_form_btn_prevous(partName) {
        const data = this.getPartProps(partName)

        if (data != null){
            const prop_size                = data.hasOwnProperty("prop_size")                              ?  data.prop_size                                 :  null;
            const directionRtl             =   this._COMPONENT_CONFIG.hasOwnProperty("directionRtl")       ? this._COMPONENT_CONFIG.directionRtl             : false;

            const elHeight = tools_css.getHeightSize(prop_size);

            return `
<section data-part-name="${partName}" 
         id="component-page-number-form-btn-prevous-${this._COMPONENT_RANDOM_ID}"
         class="position-relative" >
         
    <style>
        #${this._COMPONENT_ID} #component-page-number-form-btn-prevous-${this._COMPONENT_RANDOM_ID}{
           width:                                             ${this.fn_getWidthParts()}px;  
           height:                                            ${elHeight}px;
           float:                                             ${directionRtl ? "right" : "left"};
           cursor:                                            pointer;
        }
    </style>
    
    <component-icon id="component-page-number-form-btn-prevous-icon-${this._COMPONENT_RANDOM_ID}"></component-icon>

</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    template_render_form_numbers(partName) {
        const data = this.getPartProps(partName)

        if (data != null){
            const prop_size                             = data.hasOwnProperty("prop_size")                             ?  data.prop_size                                 :  null;
            const prop_pageTotal                        =   data.hasOwnProperty("prop_pageTotal")                      ?  data.prop_pageTotal                            :  0;
            const prop_pageSelected                     =   data.hasOwnProperty("prop_pageSelected")                   ?  data.prop_pageSelected                         :  0;
            const prop_pageGap                          =   data.hasOwnProperty("prop_pageGap")                        ?  data.prop_pageGap                              :  0;
            const prop_backgroundColorUnSelected        =   data.hasOwnProperty("prop_backgroundColorUnSelected")      ?  data.prop_backgroundColorUnSelected            :  "";
            const prop_backgroundColorUnSelected2       =   data.hasOwnProperty("prop_backgroundColorUnSelected2")     ?  data.prop_backgroundColorUnSelected2           :  "";
            const prop_backgroundColorSelected          =   data.hasOwnProperty("prop_backgroundColorSelected")        ?  data.prop_backgroundColorSelected              :  "";
            const prop_backgroundColorSelected2         =   data.hasOwnProperty("prop_backgroundColorSelected2")       ?  data.prop_backgroundColorSelected2             :  "";
            const prop_colorUnSelected                  =   data.hasOwnProperty("prop_colorUnSelected")                ?  data.prop_colorUnSelected                      :  "";
            const prop_colorSelected                    =   data.hasOwnProperty("prop_colorSelected")                  ?  data.prop_colorSelected                        :  "";
            const directionRtl                          =   this._COMPONENT_CONFIG.hasOwnProperty("directionRtl")      ? this._COMPONENT_CONFIG.directionRtl             : false;

            let {min , max} = this.fn_getMinAndMax();
            let pagesHtml = "";
            for (let i = min; i <= max ; i++) {
                pagesHtml += `
                    <b class="component-page-number-form-numbers-items-${this._COMPONENT_RANDOM_ID} 
                              component-page-number-form-numbers-items-${this._COMPONENT_RANDOM_ID}-${ prop_pageSelected == i ? "selected" : "unselected"}" 
                       onclick="${this.getFn("fn_onClickPage" , "event" , i)}" >
                        ${i}
                    </b>
                `;
            }

            const elHeight = tools_css.getHeightSize(prop_size);
            const elFontSize = tools_css.getFontSize(prop_size);

            return `
<section data-part-name="${partName}" 
         id="component-page-number-form-numbers-${this._COMPONENT_RANDOM_ID}"
         class="" >
         
    <style>
        #${this._COMPONENT_ID} #component-page-number-form-numbers-${this._COMPONENT_RANDOM_ID}{
            width:               calc(100% - ${this.fn_getWidthParts(2)}px);
            height:              ${elHeight}px;
            float:               ${directionRtl ? "right" : "left"} ;
            border-right:  ${this.fn_getWidthBorder()}px solid white;
        }
        #${this._COMPONENT_ID} .component-page-number-form-numbers-items-${this._COMPONENT_RANDOM_ID}{
            width:               ${this.fn_getWidthParts()}px;
            font-size:           ${elFontSize}px;
            height:              ${elHeight}px;
            line-height:         ${elHeight}px;
            float:               ${directionRtl ? "right" : "left"} ;
            cursor:              pointer;
            border-left:  ${this.fn_getWidthBorder()}px solid white;
            text-align:          center;
        }
        
        #${this._COMPONENT_ID} .component-page-number-form-numbers-items-${this._COMPONENT_RANDOM_ID}-unselected{
            background-image:   linear-gradient(to bottom, ${prop_backgroundColorUnSelected}, ${prop_backgroundColorUnSelected2})   ;
            color:              ${prop_colorUnSelected};
        }
        #${this._COMPONENT_ID} .component-page-number-form-numbers-items-${this._COMPONENT_RANDOM_ID}-selected{
            background-image:   linear-gradient(to bottom, ${prop_backgroundColorSelected}, ${prop_backgroundColorSelected2})   ;
            color:              ${prop_colorSelected};
        }
    </style>
    
    ${pagesHtml}

</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    template_render_form_btn_next(partName) {
        const data = this.getPartProps(partName)

        if (data != null){
            const prop_size                 = data.hasOwnProperty("prop_size")                             ?  data.prop_size                                 :  null;
            const directionRtl              =   this._COMPONENT_CONFIG.hasOwnProperty("directionRtl")      ? this._COMPONENT_CONFIG.directionRtl             : false;

            const elHeight = tools_css.getHeightSize(prop_size);

            return `
<section data-part-name="${partName}" 
         id="component-page-number-form-btn-next-${this._COMPONENT_RANDOM_ID}"
         class="position-relative" >
         
    <style>
        #${this._COMPONENT_ID} #component-page-number-form-btn-next-${this._COMPONENT_RANDOM_ID}{
            width:                                             ${this.fn_getWidthParts()}px;
            height:                                            ${elHeight}px;
            float:                                             ${directionRtl ? "right" : "left"} ;
            cursor:                                            pointer;
        }
    </style>
    
    <component-icon id="component-page-number-form-btn-next-icon-${this._COMPONENT_RANDOM_ID}"></component-icon>

</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    componentFn_render_form_btn_prevous_icon(partName) {
        const data = this.getPartProps(partName)

        if (data != null){

            const prop_size                    =   data.hasOwnProperty("prop_size")                            ?  data.prop_size                                 :  null;
            const prop_colorIcon               =   data.hasOwnProperty("prop_colorIcon")                       ?  data.prop_colorIcon                            :  null;
            const prop_backgroundColorIcon     =   data.hasOwnProperty("prop_backgroundColorIcon")             ?  data.prop_backgroundColorIcon                  :  null;
            const prop_backgroundColorIcon2    =   data.hasOwnProperty("prop_backgroundColorIcon2")            ?  data.prop_backgroundColorIcon2                 :  null;
            const prop_pageTotal               =   data.hasOwnProperty("prop_pageTotal")                       ?  data.prop_pageTotal                            :  0;
            const prop_pageSelected            =   data.hasOwnProperty("prop_pageSelected")                    ?  data.prop_pageSelected                         :  0;
            const directionRtl                 =   this._COMPONENT_CONFIG.hasOwnProperty("directionRtl")       ? this._COMPONENT_CONFIG.directionRtl             : false;

            const elIconHeight = tools_css.getIconSize(prop_size);
            const elHeight = tools_css.getHeightSize(prop_size);

            if (prop_pageSelected  > 1 && prop_pageTotal > 1){
                new window.ComponentIcon(
                    `component-page-number-form-btn-prevous-icon-${this._COMPONENT_RANDOM_ID}` ,
                    {
                        prop_icon: directionRtl ?  tools_icons.icon_arrow_right({size : prop_size /*, colors: {primary:prop_colorIcon}*/})  :  tools_icons.icon_arrow_left({size : prop_size /*, colors: {primary:prop_colorIcon}*/})  ,

                        classList : [  , "d-block"  ] ,
                        styles: {
                            "cursor" :             "pointer" ,
                            "width" :              this.fn_getWidthParts() +"px" ,
                            "background-image" :   `linear-gradient(to bottom, ${prop_backgroundColorIcon}, ${prop_backgroundColorIcon2})`,
                            "height" :             elHeight+"px" ,
                        } ,

                        prop_iconClass : [ "position-absolute" ] ,
                        prop_iconStyles : {
                            "top": "50%" ,
                            "left": "50%" ,
                            "transform": "translate(-50% , -50%)" ,
                            "color": prop_colorIcon,
                        } ,

                        fn_callback: (event)=>{
                            this.fn_onClickPageIcon(event , false);
                        } ,
                    }
                )
            }

        }
    }

    componentFn_render_form_btn_next_icon(partName) {
        const data = this.getPartProps(partName)

        if (data != null){

            const prop_size                    =   data.hasOwnProperty("prop_size")                            ?  data.prop_size                                 :  null;
            const prop_backgroundColorIcon     =   data.hasOwnProperty("prop_backgroundColorIcon")             ?  data.prop_backgroundColorIcon                  :  null;
            const prop_backgroundColorIcon2    =   data.hasOwnProperty("prop_backgroundColorIcon2")            ?  data.prop_backgroundColorIcon2                 :  null;
            const prop_colorIcon               =   data.hasOwnProperty("prop_colorIcon")                       ?  data.prop_colorIcon                            :  null;
            const prop_pageTotal               =   data.hasOwnProperty("prop_pageTotal")                       ?  data.prop_pageTotal                            :  0;
            const prop_pageSelected            =   data.hasOwnProperty("prop_pageSelected")                    ?  data.prop_pageSelected                         :  0;
            const directionRtl              =   this._COMPONENT_CONFIG.hasOwnProperty("directionRtl")      ? this._COMPONENT_CONFIG.directionRtl             : false;

            const elIconHeight = tools_css.getIconSize(prop_size);
            const elHeight = tools_css.getHeightSize(prop_size);

            if (prop_pageSelected < prop_pageTotal ){
                new window.ComponentIcon(
                    `component-page-number-form-btn-next-icon-${this._COMPONENT_RANDOM_ID}` ,
                    {
                        prop_icon:  directionRtl ? tools_icons.icon_arrow_left({size : prop_size /*, colors: {primary:prop_colorIcon}*/} )  :  tools_icons.icon_arrow_right({size : prop_size/* , colors: {primary:prop_colorIcon}*/} )  ,

                        classList : [ "position-relative" , "d-block"  ] ,
                        styles: {
                            "cursor" :             "pointer" ,
                            "width" :              this.fn_getWidthParts()+"px" ,
                            "background-image" :   `linear-gradient(to bottom, ${prop_backgroundColorIcon}, ${prop_backgroundColorIcon2})`,
                            "height" :             elHeight+"px" ,
                        } ,

                        prop_iconClass : [ "position-absolute" ] ,
                        prop_iconStyles : {
                            "top": "50%" ,
                            "left": "50%" ,
                            "transform": "translate(-50% , -50%)" ,
                            "color": prop_colorIcon,
                        } ,

                        fn_callback: (event)=>{
                            this.fn_onClickPageIcon(event , true);
                        } ,
                    }
                )
            }

        }
    }

    /* ---------------------------------------------
       FUNCTIONs
    --------------------------------------------- */

    fn_getWidthParts(number=1){
        const data = this._COMPONENT_CONFIG;
        const prop_size  = data.hasOwnProperty("prop_size")      ?  data.prop_size      :  null;
        return (tools_css.getHeightSize(prop_size) + 10) * number;
    }
    fn_getWidthBorder(){
        return 1;
    }
    fn_getWidthBorderNumber(number=1){
        return number * this.fn_getWidthBorder();
    }
    fn_getMinAndMax(){
        const data = this._COMPONENT_CONFIG;
        const prop_pageTotal                        =   data.hasOwnProperty("prop_pageTotal")                      ?  data.prop_pageTotal                            :  0;
        const prop_pageSelected                     =   data.hasOwnProperty("prop_pageSelected")                   ?  data.prop_pageSelected                         :  0;
        const prop_pageGap                          =   data.hasOwnProperty("prop_pageGap")                        ?  data.prop_pageGap                              :  0;
        let min = prop_pageSelected - prop_pageGap   >= 1                   ? prop_pageSelected - prop_pageGap      : 1;
        let max = prop_pageSelected + prop_pageGap   <= prop_pageTotal      ? prop_pageSelected + prop_pageGap      : prop_pageTotal;

        return {min , max}
    }

    fn_onClickPageIcon(event , isNext=true){
        const data = this._COMPONENT_CONFIG;
        const prop_pageTotal                        =   data.hasOwnProperty("prop_pageTotal")                      ?  data.prop_pageTotal                            :  0;
        const prop_pageSelected                     =   data.hasOwnProperty("prop_pageSelected")                   ?  data.prop_pageSelected                         :  0;

        if ( (isNext && prop_pageSelected+1 <= prop_pageTotal) ||  (!isNext && prop_pageSelected-1 >= 1)){
            this.fn_onClickPage(event , (isNext && prop_pageSelected+1 <= prop_pageTotal) ? prop_pageSelected+1 : prop_pageSelected-1)
        }
    }

    fn_onClickPage(event , pageNumber){
        const data = this._COMPONENT_CONFIG;
        data.prop_pageSelected = pageNumber;
        this.renderComponent(data);
        if (data.hasOwnProperty("fn_onBackClick") && typeof data.fn_onBackClick != null){
            data.fn_onBackClick(event , pageNumber);
        }
    }

}


/*-------------------------------------
 021-02) Component page Data
-------------------------------------*/
class ComponentPageDataBase extends ComponentBase{


    /* ---------------------------------------------
     PROPERTYs Pattern
     --------------------------------------------- */
    _COMPONENT_PATTERN = {
        prop_size : {
            prop: "prop_size" ,
            default: tools_css.standardSizes.m.name
        } ,

        prop_fromData : {
            prop: "prop_fromData" ,
            default: 0
        } ,

        prop_toData : {
            prop: "prop_toData" ,
            default: 0
        } ,

        prop_totalData : {
            prop: "prop_totalData" ,
            default: 0
        } ,


        prop_colorDescription: {
            prop: "prop_colorDescription" ,
            default: tools_const?.styles?.pageData?.color_description
        } ,
        prop_colorData: {
            prop: "prop_colorData" ,
            default: tools_const?.styles?.pageData?.color_data
        } ,

        prop_langSelected: {
            prop: "prop_langSelected",
            default: component_props.directionRtl ? "fa" : "en"
        } ,
        prop_langs: {
            prop: "prop_langs",
            default: {
                fa: {
                    fromPage : " " ,
                    toPage : "تا " ,
                    totalPage : "از " ,
                } ,
                en: {
                    fromPage : "" ,
                    toPage : "To " ,
                    totalPage : "of" ,
                }
            }
        },

    };


    /* ---------------------------------------------
           PROPERTYs Props
    --------------------------------------------- */
    _COMPONENT_PROPS = {
        part_structure: [

        ],

        part_pageSelected: [
            this._COMPONENT_PATTERN.prop_size,
            this._COMPONENT_PATTERN.prop_fromData,
            this._COMPONENT_PATTERN.prop_toData,
            this._COMPONENT_PATTERN.prop_colorDescription,
            this._COMPONENT_PATTERN.prop_colorData,
            this._COMPONENT_PATTERN.prop_langSelected,
            this._COMPONENT_PATTERN.prop_langs,
        ],

        part_pageTotal: [
            this._COMPONENT_PATTERN.prop_size,
            this._COMPONENT_PATTERN.prop_totalData,
            this._COMPONENT_PATTERN.prop_colorDescription,
            this._COMPONENT_PATTERN.prop_colorData,
            this._COMPONENT_PATTERN.prop_langSelected,
            this._COMPONENT_PATTERN.prop_langs,
        ],

    };



    /* ---------------------------------------------
   PROPERTYs Schema
   --------------------------------------------- */
    _COMPONENT_SCHEMA = {
        part_structure: {
            part_pageSelected: {},
            part_pageTotal: {},
        }
    }

}
window.ComponentPageData = class ComponentPageData extends ComponentPageDataBase{


    /* ---------------------------------------------
       SETUP
    --------------------------------------------- */
    constructor(elId , config) {
        super(
            listComponent[ComponentPageData.name] ,
            elId
        );
        super.renderComponent(config);
    }



    /* ---------------------------------------------
       TEMPLATEs
    --------------------------------------------- */
    componentFn(){

    }


    templateFn(partName = null){
        switch (partName){
            case "part_structure":
                return this.template_render_structure(partName);
            case "part_pageSelected":
                return this.template_render_pageSelected(partName);
            case "part_pageTotal":
                return this.template_render_pageTotal(partName);

            default:
                return this.templateBasic_render();
        }
    }


    template_render_structure(partName) {
        const content = `
           ${this.templateFn("part_pageSelected")}
           ${this.templateFn("part_pageTotal")}
        `;
        return this.templateBasic_render_structure(content , ["row" , "p-0" , "m-0"]);
    }


    template_render_pageSelected(partName) {
        const data = this.getPartProps(partName)

        if (data != null){
            const prop_size              =     data.hasOwnProperty("prop_size")                ?  data.prop_size                    :  null;
            const directionRtl           =     data.hasOwnProperty("directionRtl")             ? data.directionRtl                  : (component_props != null && component_props.hasOwnProperty("directionRtl") ? component_props.directionRtl : false)
            const prop_langs             =     data.hasOwnProperty("prop_langs")               ?  data.prop_langs                   :  null;
            const prop_langSelected      =     data.hasOwnProperty("prop_langSelected")        ?  data.prop_langSelected            :  null;
            const prop_fromData          =     data.hasOwnProperty("prop_fromData")            ?  data.prop_fromData                :  null;
            const prop_toData            =     data.hasOwnProperty("prop_toData")              ?  data.prop_toData                  :  null;
            const prop_colorDescription  =     data.hasOwnProperty("prop_colorDescription")    ?  data.prop_colorDescription        :  null;
            const prop_colorData         =     data.hasOwnProperty("prop_colorData")           ?  data.prop_colorData               :  null;

            let fromPageLang = "";
            let toPageLang = "";
            if (prop_langs != null && prop_langSelected != null && prop_langs.hasOwnProperty(prop_langSelected)){
                const langs = prop_langs[prop_langSelected];
                fromPageLang = langs?.fromPage ?? "";
                toPageLang = langs?.toPage ?? "";
            }

            const elHeight = tools_css.getHeightSize(prop_size);
            const elFontSize = tools_css.getFontSize(prop_size);


            return `
<section data-part-name="${partName}" 
         id="component-page-data-page-selected-${this._COMPONENT_RANDOM_ID}"
         class="col-6" >
         
    <style>
        #${this._COMPONENT_ID} #component-page-data-page-selected-${this._COMPONENT_RANDOM_ID}{
            height:       ${elHeight}px;
            line-height:  ${elHeight}px;
            font-size:    ${elFontSize}px;
            text-align:   ${directionRtl ? "left" : "right"};
            color:        ${prop_colorDescription};
       }
        #${this._COMPONENT_ID} #component-page-data-page-selected-${this._COMPONENT_RANDOM_ID} b{
            color:           ${prop_colorData};
            border-bottom:   1px solid ${prop_colorData}
       }
    </style>
    
    ${fromPageLang}
    <b class="px-2">${prop_fromData}</b>
    ${toPageLang}
    <b class="px-2">${prop_toData}</b>
    
</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }


    template_render_pageTotal(partName) {
        const data = this.getPartProps(partName)

        if (data != null){
            const prop_size              =     data.hasOwnProperty("prop_size")                ?  data.prop_size                    :  null;
            const directionRtl           =     data.hasOwnProperty("directionRtl")             ? data.directionRtl                  : (component_props != null && component_props.hasOwnProperty("directionRtl") ? component_props.directionRtl : false)
            const prop_langs             =     data.hasOwnProperty("prop_langs")               ?  data.prop_langs                   :  null;
            const prop_langSelected      =     data.hasOwnProperty("prop_langSelected")        ?  data.prop_langSelected            :  null;
            const prop_totalData         =     data.hasOwnProperty("prop_totalData")           ?  data.prop_totalData               :  null;
            const prop_colorDescription  =     data.hasOwnProperty("prop_colorDescription")    ?  data.prop_colorDescription        :  null;
            const prop_colorData         =     data.hasOwnProperty("prop_colorData")           ?  data.prop_colorData               :  null;

            let totalPageLang = "";
            if (prop_langs != null && prop_langSelected != null && prop_langs.hasOwnProperty(prop_langSelected)){
                const langs = prop_langs[prop_langSelected];
                totalPageLang = langs?.totalPage ?? "";
            }

            const elHeight = tools_css.getHeightSize(prop_size);
            const elFontSize = tools_css.getFontSize(prop_size);

            return `
<section data-part-name="${partName}" 
         id="component-page-data-page-total-${this._COMPONENT_RANDOM_ID}"
         class="col-6" >
         
    <style>
       #${this._COMPONENT_ID} #component-page-data-page-total-${this._COMPONENT_RANDOM_ID}{
            height:       ${elHeight}px;
            line-height:  ${elHeight}px;
            font-size:    ${elFontSize}px;
            text-align:   ${directionRtl ? "right" : "left"};
            color:        ${prop_colorDescription};
            ${directionRtl ? "border-right" : "border-left"}: 1px solid ${prop_colorDescription}
       }
       #${this._COMPONENT_ID} #component-page-data-page-total-${this._COMPONENT_RANDOM_ID} b{
            color:           ${prop_colorData};
            border-bottom:   1px solid ${prop_colorData}
       }
    </style>
    
    ${totalPageLang}
    <b class="px-2">${prop_totalData}</b>
    
</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    /* ---------------------------------------------
       FUNCTIONs
    --------------------------------------------- */



}








//===============================================================================================================
// [20 - 29] tables and tab view  [022] Tabs
//===============================================================================================================

/*-------------------------------------
 022-01) Component Tabs
-------------------------------------*/
class ComponentTabsBase extends ComponentBase{


    /* ---------------------------------------------
           PROPERTYs Pattern
    --------------------------------------------- */
    _COMPONENT_PATTERN = {
        prop_size : {
            prop: "prop_size" ,
            default: tools_css.standardSizes.m.name
        } ,
        prop_type: {
            prop: "prop_type",
            default: 0
        },
        prop_tabs: {
            prop: "prop_tabs",
            default: []
        },

        prop_backgroundUnselected: {
            prop: "prop_backgroundUnselected" ,
            default: tools_const?.styles?.tabs?.backgroundColor_unselected ?? ""
        } ,
        prop_backgroundIterBefore: {
            prop: "prop_backgroundIterBefore" ,
            default: tools_const?.styles?.tabs?.backgroundColor_itemBefore ?? ""
        } ,
        prop_backgroundIterAfter: {
            prop: "prop_backgroundIterAfter" ,
            default: tools_const?.styles?.tabs?.backgroundColor_itemAfter ?? ""
        } ,
        prop_colorIterAfter: {
            prop: "prop_colorIterAfter" ,
            default: tools_const?.styles?.tabs?.color_itemAfter ?? ""
        } ,

        prop_tabSelected: {
            prop: "prop_tabSelected",
            default: null
        },
        prop_firstCallBack: {
            prop: "prop_firstCallBack",
            default: true
        }
    };

    /* ---------------------------------------------
           PROPERTYs Props
    --------------------------------------------- */
    _COMPONENT_PROPS = {
        part_structure: [],

        part_tabs: [
            this._COMPONENT_PATTERN.prop_type,
            this._COMPONENT_PATTERN.prop_tabs,
            this._COMPONENT_PATTERN.prop_tabSelected,
            this._COMPONENT_PATTERN.prop_size,
            this._COMPONENT_PATTERN.prop_backgroundUnselected,
            this._COMPONENT_PATTERN.prop_backgroundIterBefore,
            this._COMPONENT_PATTERN.prop_backgroundIterAfter,
            this._COMPONENT_PATTERN.prop_colorIterAfter,
            this._COMPONENT_PATTERN.prop_firstCallBack
        ]
    };



    /* ---------------------------------------------
   PROPERTYs Schema
   --------------------------------------------- */
    _COMPONENT_SCHEMA = {
        part_structure: {
            part_tabs: {} ,
        } ,
    }

}
window.ComponentTabs = class ComponentTabs extends ComponentTabsBase{

    /* ---------------------------------------------
       SETUP
   --------------------------------------------- */
    constructor(elId , config) {
        super(
            listComponent[ComponentTabs.name] ,
            elId
        );
        super.renderComponent(config);
    }


    /* ---------------------------------------------
      TEMPLATEs
    --------------------------------------------- */
    componentFn(){
        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("prop_firstCallBack") && data.prop_firstCallBack){
            this.fn_onSelectTab(event , data.hasOwnProperty("prop_tabSelected") ? data.prop_tabSelected : null , false)
        }
    }
    templateFn(partName = null){
        switch (partName){
            case "part_structure":
                return this.template_render_structure(partName);
            case "part_tabs":
                return this.template_render_tabs(partName);
            default:
                return this.templateBasic_render();
        }
    }

    template_render_structure(partName) {
        const content = `
      ${this.templateFn("part_tabs") ?? ""}
                `;
        return this.templateBasic_render_structure(content);
    }

    template_render_tabs(partName){

        const data = this.getPartProps(partName)

        if (data != null){

            const prop_type                       =   data.hasOwnProperty("prop_type")                            ?  data.prop_type                            :  0;
            const prop_tabs                       =   data.hasOwnProperty("prop_tabs")                            ?  data.prop_tabs                            :  [];
            const prop_tabSelected                =   data.hasOwnProperty("prop_tabSelected")                     ?  data.prop_tabSelected                     :  null;
            const prop_size                       =   data.hasOwnProperty("prop_size")                            ?  data.prop_size                            :  null;
            const prop_backgroundUnselected       =   data.hasOwnProperty("prop_backgroundUnselected")            ?  data.prop_backgroundUnselected            :  "";
            const prop_backgroundIterBefore       =   data.hasOwnProperty("prop_backgroundIterBefore")            ?  data.prop_backgroundIterBefore            :  "";
            const prop_backgroundIterAfter        =   data.hasOwnProperty("prop_backgroundIterAfter")             ?  data.prop_backgroundIterAfter             :  "";
            const prop_colorIterAfter             =   data.hasOwnProperty("prop_colorIterAfter")                  ?  data.prop_colorIterAfter                  :  "";
            const directionRtl                           =   this._COMPONENT_CONFIG.hasOwnProperty("directionRtl")           ? this._COMPONENT_CONFIG.directionRtl             : false;


            let tabHtml = "";
            let tabClass = "";
            let tabStyle = "";
            if (prop_type == 0){
                tabClass = "row m-0 mb-2";
                //tabStyle = "height: 60px;"
                if (prop_tabs != null){
                    let tabClassCol = "";
                    switch (prop_tabs.length){
                        case 4:
                            tabClassCol = "col-md-3";
                            break;
                        case 3:
                            tabClassCol = "col-md-4";
                            break;
                        case 2:
                            tabClassCol ="col-md-6";
                            break;
                        case 1:
                            tabClassCol = "col-md-12";
                            break;
                    }

                    for (let i = 0; i < prop_tabs.length; i++) {
                        const itemTab = prop_tabs[i];
                        if (itemTab.hasOwnProperty("title")){
                            let icon = itemTab.hasOwnProperty("icon") ? itemTab.icon : ``;
                            const tabId =  itemTab.hasOwnProperty("id")  ?  itemTab.id  :  i;
                            let classActive = prop_tabSelected != null && prop_tabSelected == tabId ? 'btn-tab-types-active' : '';

                            tabHtml += `
                      <div class="${tabClassCol} px-1 col-12 position-relative">
                          <div  onclick="${this.getFn("fn_onSelectTab" , "event" , tabId)}"
                                class="${classActive} btn-tab-types btn btn-light w-100 border shadow-sm ">
                                <div class="form-tab-icon">
                                   ${icon}
                                </div>
                                <b class="form-tab-title">
                                    ${itemTab.title}
                                </b>
                         </div>
                     </div>
                `;
                        }

                    }

                }

            }
            else if (prop_type == 1){
                tabClass = " p-1";
                tabStyle = "display: flow-root; maargin-bottom: 3px;";
                if (prop_tabs != null){
                    let tabClassCol = "float-start";

                    for (let i = 0; i < prop_tabs.length; i++) {
                        const itemTab = prop_tabs[i];
                        if (itemTab.hasOwnProperty("title")){
                            let icon = itemTab.hasOwnProperty("icon") ? itemTab.icon : ``;
                            const tabId =  itemTab.hasOwnProperty("id")  ?  itemTab.id  :  i;
                            let classActive = prop_tabSelected != null && prop_tabSelected == tabId ? 'btn-tab-types-active' : '';

                            tabHtml += `
                      <div class="${tabClassCol} px-1  position-relative">
                          <div  onclick="${this.getFn("fn_onSelectTab" , "event" , tabId)}"
                                class="${classActive} btn-tab-types btn btn-light w-100 border shadow-sm line-height-30px" 
                                title="${itemTab.title}">
                            ${icon}
                            ${itemTab.title}
                         </div>
                     </div>
                `;
                        }

                    }

                }

            }


            const elHeight =tools_css.getHeightSize(prop_size);
            const elFontSize =tools_css.getFontSize(prop_size);


            return `
<section data-part-name="${partName}" 
         id="component-tabs-tabs-${ this._COMPONENT_RANDOM_ID}" 
         class="" >
         
     <style>
         #${this._COMPONENT_ID} #component-tabs-tabs-${ this._COMPONENT_RANDOM_ID}{
            
         }
         
         
         #${this._COMPONENT_ID} #component-tabs-tabs-${ this._COMPONENT_RANDOM_ID} .btn-tab-types{
               /*height:            ${elHeight*1.25}px;*/
               line-height:       ${elHeight*(prop_type == 0 ? 1.25 : 1)}px;
               font-size:         ${elFontSize}px;
               padding:           5px 10px;
               background-color:  ${prop_backgroundUnselected} ;
               overflow:          hidden;
         }
         #${this._COMPONENT_ID} #component-tabs-tabs-${ this._COMPONENT_RANDOM_ID} .btn-tab-types:before{
               content: "";
               width: calc(100% - 10px);
               height: 115%;
               display: block;
               position: absolute;
               top: 0;
               left: 5px;
               background-color:  ${prop_backgroundIterBefore};
               clip-path: ellipse(75% 50% at 50% 0);
         }
         #${this._COMPONENT_ID} #component-tabs-tabs-${ this._COMPONENT_RANDOM_ID} .btn-tab-types-active{
               background-color: ${prop_backgroundIterAfter} !important;
               color :           ${prop_colorIterAfter} !important;
         }
         #${this._COMPONENT_ID} #component-tabs-tabs-${ this._COMPONENT_RANDOM_ID} .form-tab-icon{
               float: ${directionRtl ? "right" : "left"};
               width: 25%;
               ${directionRtl ? "margin-right" : "margin-left"} : 20%;
         }
         #${this._COMPONENT_ID} #component-tabs-tabs-${ this._COMPONENT_RANDOM_ID} .form-tab-title{
               position: absolute;
               left: 50%;
               top: 50%;
               transform: translate(${directionRtl ? "-75%" : "-25%"} , -50%);
         }
     </style>
     
     <section class="${tabClass}" style="${tabStyle}">
         ${tabHtml}
     </section>
     
</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }



    /* ---------------------------------------------
       FUNCTIONs
    --------------------------------------------- */
    fn_onSelectTab(event , tabId , setTabId = true){
        if (setTabId){
            this.set("prop_tabSelected" , tabId)
        }
        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("fn_callback") && typeof data.fn_callback != null){
            data.fn_callback(event , tabId);
        }
    }


}


/*-------------------------------------
 022-02) Component Tabs
-------------------------------------*/
class ComponentTreeBase extends ComponentBase{

    /* ---------------------------------------------
       PROPERTYs Pattern
       --------------------------------------------- */
    _COMPONENT_PATTERN = {
        prop_backgroundColor_unSelected: {
            prop: "prop_backgroundColor_unSelected",
            default: tools_const.hasOwnProperty("styles") && tools_const.styles.hasOwnProperty("tree") && tools_const.styles.tree.hasOwnProperty("backgroundColor_unSelected")
                ? tools_const.styles.tree.backgroundColor_unSelected
                : ""
        },
        prop_backgroundColor_selected: {
            prop: "prop_backgroundColor_selected",
            default: tools_const.hasOwnProperty("styles") && tools_const.styles.hasOwnProperty("tree") && tools_const.styles.tree.hasOwnProperty("backgroundColor_selected")
                ? tools_const.styles.tree.backgroundColor_selected
                : ""
        },
        prop_list: {
            prop: "prop_list",
            default: []
        },
        prop_itemSelected: {
            prop: "prop_itemSelected",
            default: null
        }
    };

    /* ---------------------------------------------
           PROPERTYs Props
    --------------------------------------------- */
    _COMPONENT_PROPS = {
        part_structure: [],

        part_tree: [
            this._COMPONENT_PATTERN.prop_backgroundColor_unSelected,
            this._COMPONENT_PATTERN.prop_backgroundColor_selected,
            this._COMPONENT_PATTERN.prop_list,
            this._COMPONENT_PATTERN.prop_itemSelected
        ]
    };



    /* ---------------------------------------------
   PROPERTYs Schema
   --------------------------------------------- */
    _COMPONENT_SCHEMA = {
        part_structure: {
            part_tree: {}
        } ,
    }

}
window.ComponentTree = class ComponentTree extends ComponentTreeBase{


    /* ---------------------------------------------
       SETUP
   --------------------------------------------- */
    constructor(elId , config) {
        super(
            listComponent[ComponentTree.name] ,
            elId
        );
        super.renderComponent(config);
    }






    /* ---------------------------------------------
      TEMPLATEs
    --------------------------------------------- */
    componentFn(){
        this.fn_checkExistSelected();
    }
    templateFn(partName = null){
        switch (partName){
            case "part_structure":
                return this.template_render_structure(partName);
            case "part_tree":
                return this.template_render_tree(partName);
            default:
                return this.templateBasic_render();
        }
    }

    template_render_structure(partName) {
        const content = `
            ${this.templateFn("part_tree") ?? ""}
        `;
        return this.templateBasic_render_structure(content);
    }

    template_render_tree(partName){

        const data = this.getPartProps(partName)

        if (data != null){

            const prop_backgroundColor_unSelected        =   data.hasOwnProperty("prop_backgroundColor_unSelected")          ?  data.prop_backgroundColor_unSelected           : "";
            const prop_backgroundColor_selected          =   data.hasOwnProperty("prop_backgroundColor_selected")            ?  data.prop_backgroundColor_selected             : "";
            const prop_list                              =   data.hasOwnProperty("prop_list")                                ?  data.prop_list                                 :  [];
            const prop_itemSelected                      =   data.hasOwnProperty("prop_itemSelected")                        ?  data.prop_itemSelected                         :  null;
            const directionRtl                           =   this._COMPONENT_CONFIG.hasOwnProperty("directionRtl")           ? this._COMPONENT_CONFIG.directionRtl             : false;

            let itemSelected = prop_itemSelected;
            if (Array.isArray(prop_itemSelected ) && typeof prop_itemSelected[0] != "undefined"){
                itemSelected = prop_itemSelected[0];
            }


            let treehtml = "";
            if (prop_list != null && Array.isArray(prop_list)){

                for (let i = 0; i < prop_list.length; i++) {
                    const itemTree = prop_list[i];

                    if (itemTree.hasOwnProperty("id") && itemTree.hasOwnProperty("name")){

                        let selected = false;
                        let componentTreeChildId = `${this._COMPONENT_ID}-child-${itemTree.id}`;
                        if (itemSelected == itemTree["id"]){
                            selected = true;
                        }

                        treehtml += `
                        <div class="item-tree row p-0 mx-0 my-1 " onclick="${this.getFn("fn_onSelectItem" , "event" , itemTree.id ,`'${componentTreeChildId}'` )}">
                            <span class=" ${selected ? 'icon-arrow-item-tree-active' : ''} icon-arrow-item-tree col-1"> ${selected ?  (directionRtl ? '&#x2BC7;' : '&#x2BC8;' )   :  (directionRtl ? '&#x2BC8;' : '&#x2BC7;' ) }  </span>
                            <span class=" ${selected ? 'title-item-tree-active' : ''} title-item-tree col-10  rounded">  ${itemTree.name} </span>
                            <div class=" ${directionRtl ? 'me-3 ms-0' : 'ms-3 me-0'}  p-0 my-0 ">
                                <div class="row px-2 py-0 ms-2 me-1 my-1 ">
                                     <component-tree id="${componentTreeChildId}"></component-tree>
                                </div>
                            </div>
                        </div>
                        `
                    }
                }

            }


            return `
<section data-part-name="${partName}" 
         id="component-tree-tree-${this._COMPONENT_RANDOM_ID}" 
         class="" >
         
     <style>
         #${this._COMPONENT_ID} #component-tree-tree-${this._COMPONENT_RANDOM_ID}{
         
         }
         #${this._COMPONENT_ID} #component-tree-tree-${this._COMPONENT_RANDOM_ID} .item-tree {
             cursor: pointer;
         }
         #${this._COMPONENT_ID} #component-tree-tree-${this._COMPONENT_RANDOM_ID} .item-tree .icon-arrow-item-tree{
             color: ${prop_backgroundColor_unSelected};
         }
         #${this._COMPONENT_ID} #component-tree-tree-${this._COMPONENT_RANDOM_ID} .item-tree .icon-arrow-item-tree-active{
             color: ${prop_backgroundColor_selected};
         }
         #${this._COMPONENT_ID} #component-tree-tree-${this._COMPONENT_RANDOM_ID} .item-tree .title-item-tree{
             background-color: ${prop_backgroundColor_unSelected};
         }
         #${this._COMPONENT_ID} #component-tree-tree-${this._COMPONENT_RANDOM_ID} .item-tree .title-item-tree-active{
             background-color: ${prop_backgroundColor_selected};
         }
         #${this._COMPONENT_ID} #component-tree-tree-${this._COMPONENT_RANDOM_ID} .item-tree .line-item-tree{
             background-color: ${prop_backgroundColor_unSelected};
             height: 2px;
             margin-top: 12.5px;
         }
         #${this._COMPONENT_ID} #component-tree-tree-${this._COMPONENT_RANDOM_ID} .item-tree .line-item-tree-active{
             background-color: ${prop_backgroundColor_selected};
         }
     </style>
     
     ${treehtml}
     
</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }



    /* ---------------------------------------------
       FUNCTIONs
    --------------------------------------------- */
    fn_onSelectItem(event , itemId , componentTreeChildId){
        event.stopPropagation();
        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("fn_callback") && data.fn_callback != null){

            this.set("prop_itemSelected" , itemId);

            const var_children = data.fn_callback(event , itemId);
            this.fn_readyItemSelected(componentTreeChildId , var_children);
        }
    }

    fn_checkExistSelected(){
        const data = this._COMPONENT_CONFIG;

        if (data.hasOwnProperty("prop_list") &&  data.prop_list != null &&
            data.hasOwnProperty("prop_itemSelected") &&  data.prop_itemSelected != null){

            let listSelected = data.prop_itemSelected;

            let itemSelected = listSelected;
            if (Array.isArray(listSelected ) && typeof listSelected[0] != "undefined"){
                itemSelected = listSelected[0];
            }


            let itemSelectedExist = false;
            const prop_list = data.prop_list;
            if (prop_list != null && Array.isArray(prop_list)){
                for (let i = 0; i < prop_list.length; i++) {
                    const itemTree = prop_list[i];
                    if (itemTree.hasOwnProperty("id") && itemTree.hasOwnProperty("name")) {
                        if (itemSelected == itemTree["id"]) {
                            itemSelectedExist= true;
                            break;
                        }
                    }
                }
            }


            if (itemSelectedExist){

                let childItemSelected = null;
                if (Array.isArray(listSelected ) && listSelected[0]){
                    listSelected.splice(0, 1);
                    childItemSelected = listSelected;
                }

                let componentTreeChildId = `${this._COMPONENT_ID}-child-${itemSelected}`;
                const var_children = data.fn_callback(event , itemSelected);
                this.fn_readyItemSelected(componentTreeChildId , var_children , childItemSelected);
            }

        }
    }

    fn_readyItemSelected(componentTreeChildId , var_children , childItemSelected =null){
        const data = this._COMPONENT_CONFIG;


        if ((var_children != null && var_children.length>0) &&
            data.hasOwnProperty("fn_callback") &&  data.fn_callback != null){
            new window.ComponentTree(
                componentTreeChildId ,
                {
                    prop_itemSelected: childItemSelected,
                    prop_list: var_children,
                    fn_callback: data.fn_callback
                }
            )
        }
    }


}








//===============================================================================================================
// [20 - 29] tables and tab view  [023] Charts
//===============================================================================================================

/*-------------------------------------
 023-01) Component Chart
-------------------------------------*/
class ComponentChartBase extends ComponentBase{

    /* ---------------------------------------------
         PROPERTYs Pattern
  --------------------------------------------- */
    _COMPONENT_PATTERN = {
        prop_type: {
            prop: "prop_type",
            default: 0
        },
        prop_TypeDirection: {
            prop: "prop_TypeDirection",
            default: 0
        },
        prop_height: {
            prop: "prop_height",
            default: null
        },
        prop_title_text: {
            prop: "prop_title_text",
            default: null
        },
        prop_title_align: {
            prop: "prop_title_align",
            default: "left"
        },
        prop_x_title_text: {
            prop: "prop_x_title_text",
            default: null
        },
        prop_x_title_align: {
            prop: "prop_x_title_align",
            default: "left"
        },
        prop_categories: {
            prop: "prop_categories",
            default: []
        },
        prop_series: {
            prop: "prop_series",
            default: []
        },
        prop_tooltip_header: {
            prop: "prop_tooltip_header",
            default: `<b>{series.name}</b><br />`
        },
        prop_tooltip_format: {
            prop: "prop_tooltip_format",
            default: `{point.y}`
        }
    };

    /* ---------------------------------------------
           PROPERTYs Props
    --------------------------------------------- */
    _COMPONENT_PROPS = {
        part_structure: [],
        part_chart_element: [],
        part_chart_view: [
            this._COMPONENT_PATTERN.prop_type,
            this._COMPONENT_PATTERN.prop_TypeDirection,
            this._COMPONENT_PATTERN.prop_height,
            this._COMPONENT_PATTERN.prop_title_text,
            this._COMPONENT_PATTERN.prop_title_align,
            this._COMPONENT_PATTERN.prop_x_title_text,
            this._COMPONENT_PATTERN.prop_x_title_align,
            this._COMPONENT_PATTERN.prop_categories,
            this._COMPONENT_PATTERN.prop_series,
            this._COMPONENT_PATTERN.prop_tooltip_header,
            this._COMPONENT_PATTERN.prop_tooltip_format
        ]
    };



    /* ---------------------------------------------
   PROPERTYs Schema
   --------------------------------------------- */
    _COMPONENT_SCHEMA = {
        part_structure: {
            part_chart_element: {
                part_chart_view: {}
            }
        } ,
    }

}
window.ComponentChart = class ComponentChart extends ComponentChartBase{

    /* ---------------------------------------------
       SETUP
    --------------------------------------------- */
    constructor(elId , config) {
        super(
            listComponent[ComponentChart.name] ,
            elId
        );
        super.renderComponent(config);
    }

    /* ---------------------------------------------
    TEMPLATEs
   --------------------------------------------- */
    componentFn(){
        this.templateFn("part_chart_view");
    }
    templateFn(partName = null){
        switch (partName){
            case "part_structure":
                return this.template_render_structure(partName);
            case "part_chart_element":
                return this.template_render_chartElement(partName);
            case "part_chart_view":
                return this.componentFn_render_chartView(partName);
            default:
                return this.templateBasic_render();
        }
    }

    template_render_structure(partName) {
        const content = `
  ${this.templateFn("part_chart_element") ?? ""}
                `;
        return this.templateBasic_render_structure(content );
    }

    template_render_chartElement(partName) {
        const data = this.getPartProps(partName)

        if (data != null){

            return `
<section data-part-name="${partName}" 
         id="component-chart-element-${this._COMPONENT_RANDOM_ID}"
         class="">
         
     <style>
         #${this._COMPONENT_ID} #component-chart-element-${this._COMPONENT_RANDOM_ID}{
        
         }
     </style>
     
     <div id="component-chart-view-${this._COMPONENT_RANDOM_ID}"></div>
      
</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    componentFn_render_chartView(partName) {
        const data = this.getPartProps(partName);

        if (data != null){

            const prop_type            =  data.hasOwnProperty("prop_type")            ?  data.prop_type           : 0;
            let typeStr = null;
            switch (prop_type){
                case 0: typeStr = "line";       break;
                case 1: typeStr = "column";     break;
                case 2: typeStr = "bar";        break;
                case 3: typeStr = "pie";        break;
                case 4: typeStr = "area";       break;
                case 5: typeStr = "spline";     break;
                case 6: typeStr = "scatter";    break;
                case 7: typeStr = "areaspline"; break;
                case 8: typeStr = "heatmap";    break;
            }

            const prop_TypeDirection   =  data.hasOwnProperty("prop_TypeDirection")   ?  data.prop_TypeDirection  : 0;
            const prop_height          =  data.hasOwnProperty("prop_height")          ?  data.prop_height         : null;

            const prop_title_text      =  data.hasOwnProperty("prop_title_text")      ?  data.prop_title_text     : null;
            const prop_title_align     =  data.hasOwnProperty("prop_title_align")     ?  data.prop_title_align    : "left";

            const prop_x_title_text    =  data.hasOwnProperty("prop_x_title_text")    ?  data.prop_x_title_text   : null;
            const prop_x_title_align   =  data.hasOwnProperty("prop_x_title_align")   ?  data.prop_x_title_align  : "left";

            const prop_y_title_text    =  data.hasOwnProperty("prop_y_title_text")    ?  data.prop_y_title_text   : null;
            const prop_y_title_align   =  data.hasOwnProperty("prop_y_title_align")   ?  data.prop_y_title_align  : "left";

            const prop_categories      =  data.hasOwnProperty("prop_categories")      ?  data.prop_categories     : [];
            const prop_series          =  data.hasOwnProperty("prop_series")          ?  data.prop_series         : [];

            const prop_tooltip_header  =  data.hasOwnProperty("prop_tooltip_header")  ?  data.prop_tooltip_header : '<b>{series.name}</b><br />';
            const prop_tooltip_format  =  data.hasOwnProperty("prop_tooltip_format")  ?  data.prop_tooltip_format : '{point.y}';



            const chartOptions = {
                chart: {
                    height: prop_height,
                },
                title: {
                    text: prop_title_text ,
                    align: prop_title_align ,
                },
                series: prop_series ,
                tooltip: {
                    headerFormat: prop_tooltip_header,
                    pointFormat: prop_tooltip_format
                },
            }



            if ( typeStr != null){
                chartOptions["chart"]["type"] =  typeStr
            }

            if ( prop_TypeDirection != null && prop_TypeDirection == 0){
                chartOptions["xAxis"] =  {
                    title: {
                        text: prop_x_title_text ,
                        align: prop_x_title_align ,
                    },
                    categories: prop_categories
                }
            }
            if ( prop_TypeDirection != null && prop_TypeDirection == 1){
                chartOptions["yAxis"] =  {
                    title: {
                        text: prop_y_title_text ,
                        align: prop_y_title_align ,
                    } ,
                    categories: prop_categories
                }
            }


            Highcharts.chart(`component-chart-view-${this._COMPONENT_RANDOM_ID}`, chartOptions );

        }

    }

}


/*-------------------------------------
 023-02) Component Chart Tree Y
-------------------------------------*/
class ComponentChartTreeYBase extends ComponentBase{

    /* ---------------------------------------------
         PROPERTYs Pattern
  --------------------------------------------- */
    _COMPONENT_PATTERN = {
        prop_formScrollerHeight: {
            prop: "prop_formScrollerHeight",
            default: "450px"
        },
        prop_svgWGap: {
            prop: "prop_svgWGap",
            default: 1000
        },
        prop_svgHGap: {
            prop: "prop_svgHGap",
            default: 1000
        },
        prop_objects: {
            prop: "prop_objects",
            default: []
        },
        prop_objectsLevelClose: {
            prop: "prop_objectsLevelClose",
            default: null
        },
        prop_template: {
            prop: "prop_template",
            default: ""
        },
        prop_templateWidth: {
            prop: "prop_templateWidth",
            default: 100
        },
        prop_templateHeight: {
            prop: "prop_templateHeight",
            default: 100
        },
        prop_templateHeightPoint: {
            prop: "prop_templateHeightPoint",
            default: 30
        },
        prop_templateHeightGap: {
            prop: "prop_templateHeightGap",
            default: 30
        },
        prop_lineHeightMin: {
            prop: "prop_lineHeightMin",
            default: 20
        },
        prop_lineWidth: {
            prop: "prop_lineWidth",
            default: 3
        },
        prop_lineDurationAnim: {
            prop: "prop_lineDurationAnim",
            default: 250
        },
        prop_lineColor: {
            prop: "prop_lineColor",
            default: "#c2c2c2"
        },
        prop_lineMarkerStart: {
            prop: "prop_lineMarkerStart",
            default: "circle"
        },
        prop_lineMarkerEnd: {
            prop: "prop_lineMarkerEnd",
            default: "arrow"
        },
    };

    /* ---------------------------------------------
           PROPERTYs Props
    --------------------------------------------- */
    _COMPONENT_PROPS = {
        part_structure: [],
        part_layout_mouse_scroller: [
            this._COMPONENT_PATTERN.prop_formScrollerHeight
        ],
        part_layout_svg: [
            this._COMPONENT_PATTERN.prop_svgWGap,
            this._COMPONENT_PATTERN.prop_svgHGap,
            this._COMPONENT_PATTERN.prop_objects,
            this._COMPONENT_PATTERN.prop_objectsLevelClose,
            this._COMPONENT_PATTERN.prop_template,
            this._COMPONENT_PATTERN.prop_templateWidth,
            this._COMPONENT_PATTERN.prop_templateHeight,
            this._COMPONENT_PATTERN.prop_templateHeightPoint,
            this._COMPONENT_PATTERN.prop_templateHeightGap,
            this._COMPONENT_PATTERN.prop_lineHeightMin,
            this._COMPONENT_PATTERN.prop_lineWidth,
            this._COMPONENT_PATTERN.prop_lineDurationAnim,
            this._COMPONENT_PATTERN.prop_lineColor,
            this._COMPONENT_PATTERN.prop_lineMarkerStart,
            this._COMPONENT_PATTERN.prop_lineMarkerEnd
        ]
    };



    /* ---------------------------------------------
   PROPERTYs Schema
   --------------------------------------------- */
    _COMPONENT_SCHEMA = {
        part_structure: {
            part_layout_mouse_scroller: {
                part_layout_svg: {}
            }
        } ,
    }

}
window.ComponentChartTreeY = class ComponentChartTreeY extends ComponentChartTreeYBase{

    _ZOOM_CENTER = true;
    _OBJECTS = null;

    _COMPONENT_MOUSE_SCROLLER = null;



    /* ---------------------------------------------
       SETUP
    --------------------------------------------- */
    constructor(elId , config) {
        super(
            listComponent[ComponentChartTreeY.name] ,
            elId
        );
        super.renderComponent(config);
    }

    /* ---------------------------------------------
    TEMPLATEs
   --------------------------------------------- */
    componentFn(){
        this.templateFn("part_layout_mouse_scroller");

        this.onRegisterFinish().then(el => {
            this.fn_chartInit();
        })
    }
    templateFn(partName = null){
        switch (partName){
            case "part_structure":
                return this.template_render_structure(partName);
            case "part_layout_svg":
                return this.template_render_layoutSvg(partName);
            case "part_layout_mouse_scroller":
                return this.componentFn_render_layoutMouseScroller(partName);
            default:
                return this.templateBasic_render();
        }
    }

    template_render_structure(partName) {
        const content = `
                  <component-mouse-scroller id="component-chart-tree-y-layout-mouse-scroller-${this._COMPONENT_RANDOM_ID}">
                      <component-body>
                            ${this.templateFn("part_layout_svg") ?? ""}
                      </component-body>
                  </component-mouse-scroller>
                `;
        return this.templateBasic_render_structure(content );
    }

    componentFn_render_layoutMouseScroller(partName) {
        const data = this.getPartProps(partName);

        if (data != null){
            const prop_formScrollerHeight     =  data.hasOwnProperty("prop_formScrollerHeight")      ?  data.prop_formScrollerHeight     : "";

            this._COMPONENT_MOUSE_SCROLLER = new window.ComponentMouseScroller(
                `component-chart-tree-y-layout-mouse-scroller-${this._COMPONENT_RANDOM_ID}` ,
                {
                    prop_scrollerHeight: prop_formScrollerHeight ,
                }
            )
        }

    }

    template_render_layoutSvg(partName) {
        const data = this.getPartProps(partName)

        if (data != null) {

            return `
<div data-part-name="${partName}" 
         id="component-chart-tree-y-layout-svg-${this._COMPONENT_RANDOM_ID}"
         class="">
         
     <style>
         #${this._COMPONENT_ID} #component-chart-tree-y-layout-svg-${this._COMPONENT_RANDOM_ID}{
            
         }
     </style>
     
     <svg id="component-chart-tree-y-svg-${this._COMPONENT_RANDOM_ID}" width="1000" height="1000" >
      <defs></defs>
    </svg>
      
</div>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }



    /* ---------------------------------------------
        FUNCTIONs
    --------------------------------------------- */

    fn_getElementSvg(){
        return document.querySelector(`#component-chart-tree-y-svg-${this._COMPONENT_RANDOM_ID}`);
    }

    fn_readyElementSvg(){
        const svg = this.fn_getElementSvg();
        svg.innerHTML = "<defs></defs>"
        svg.style.border = "none";
    }

    fn_buildTree(data, parentId = 0) {
        return data
            .filter(item => item.parent === parentId)
            .map(item => ({
                ...item,
                children: this.fn_buildTree(data, item.id)
            }));
    }

    fn_assignPositions(node, depth = 0, colCounter = { value: 1 }) {
        node.row = depth;

        if (node.children.length === 0) {
            node.col = colCounter.value;
            colCounter.value += 2;
        } else {
            node.children.forEach(child => this.fn_assignPositions(child, depth + 1, colCounter));
            const minCol = node.children[0].col;
            const maxCol = node.children[node.children.length - 1].col;
            node.col = Math.floor((minCol + maxCol) / 2);
        }
    }

    fn_flatten(tree, out = []) {
        tree.forEach(node => {
            out.push(node);
            this.fn_flatten(node.children, out);
        });
        return out;
    }

    fn_closeLevelDefault(objects){
        const data = this._COMPONENT_CONFIG;
        const prop_objectsLevelClose = data.hasOwnProperty("prop_objectsLevelClose") ? data.prop_objectsLevelClose : null;
        if (prop_objectsLevelClose != null){
            for (let i = 0; i < objects.length; i++) {
                const item = objects[i];

                if (item !=null && item.hasOwnProperty("row") && item.row == prop_objectsLevelClose-1 && item.hasOwnProperty("children") && item.children.length >0){
                    objects[i].isOpen = false;
                }
            }
        }
        return objects;
    }

    fn_getPosition(objects) {
        const data = this._COMPONENT_CONFIG;
        const Width =   data.hasOwnProperty("prop_templateWidth")  ? data.prop_templateWidth  : 100;
        const Height =  data.hasOwnProperty("prop_templateHeight")  ? data.prop_templateHeight  : 100;
        const h =       data.hasOwnProperty("prop_templateHeightPoint")  ? data.prop_templateHeightPoint  : 30;
        const dHeight = data.hasOwnProperty("prop_templateHeightGap") ? data.prop_templateHeightGap : 50;

        for (let i = 0; i < objects.length ; i++) {
            const itemObject = objects[i];
            if (itemObject.hasOwnProperty("row") && itemObject.hasOwnProperty("col")){
                objects[i].x = itemObject.col*(Width) + ((Width)/2);
                objects[i].y = (itemObject.row)*(Height+2*dHeight) + (dHeight + h);
            }
        }
        return objects;
    }

    fn_getTemplate(objects) {
        const data = this._COMPONENT_CONFIG;
        const template =   data.hasOwnProperty("prop_template")  ? data.prop_template  : "";

        for (let i = 0; i < objects.length ; i++) {
            const itemObject = objects[i];
            const tags = itemObject.hasOwnProperty("tags") ? itemObject.tags : {};
            tags["id"] = itemObject.id
            tags["parent"] = itemObject.parent;
            tags["elementShow"]= `
            <div style="border-radius: 100%; width:40px; height:40px; cursor: pointer; transform: translate(-50%, 0); bottom: -20px; left: 50%; line-height: 35px"
                 class="${itemObject.hasOwnProperty("children") && Array.isArray(itemObject.children) && itemObject.children.length > 0 ? "" : "d-none"}
                        item-arrow-chart-tree border border-2 border-dark  position-absolute p-0 text-center d-block bg-white"
                 onclick="${this.getFn("call_showOrHideChild" , itemObject.id)}">
                    ${(itemObject.hasOwnProperty("isOpen") && itemObject.isOpen) || (!itemObject.hasOwnProperty("isOpen"))  ? "&#x25BC;" : "&#x25B2;"}
           </div>
            `;

            objects[i].template = template.replace(/{{(.*?)}}/g, (match, key) => {
                return tags[key.trim()] ?? "";
            });

        }
        return objects;
    }

    fn_drawShape(objects) {
        const data = this._COMPONENT_CONFIG;
        const svg = this.fn_getElementSvg();
        const scroller = this._COMPONENT_MOUSE_SCROLLER.fn_getElementScroller();

        const Width = data.hasOwnProperty("prop_templateWidth") ? data.prop_templateWidth : 100;
        const Height = data.hasOwnProperty("prop_templateHeight") ? data.prop_templateHeight : 100;
        const marginX =  data.hasOwnProperty("prop_svgWGap") ? data.prop_svgWGap : 100;
        const marginY =  data.hasOwnProperty("prop_svgHGap") ? data.prop_svgHGap : 100;

        let objectStatus = this.fn_drawStatus(objects);
        for (let i = 0; i < objectStatus.length ; i++) {
            const itemObject = objectStatus[i];

            if (itemObject != null && ((itemObject.hasOwnProperty("isOpen") && itemObject.isOpen) || !itemObject.hasOwnProperty("isOpen"))){

                if (itemObject.hasOwnProperty("template") && itemObject.hasOwnProperty("x") && itemObject.hasOwnProperty("y")){
                    const template = itemObject.template;
                    const x = itemObject.x + marginX;
                    const y = itemObject.y + marginY;

                    tools_svg.createHtmlOnPoint(
                        svg,
                        template ,
                        { x: x-(Width/2) , y: y  , width:Width+5 , height:Height+5}
                    )

                    if (this._ZOOM_CENTER && i==0){
                        this._COMPONENT_MOUSE_SCROLLER._SCROLL_CENTER_X = x - scroller.clientWidth  / 2 ;
                        this._COMPONENT_MOUSE_SCROLLER._SCROLL_CENTER_Y = y - scroller.clientHeight / 2 + 200 ;
                        this._COMPONENT_MOUSE_SCROLLER.call_applyScroll() ;
                        this._ZOOM_CENTER = false;
                    }
                }

            }

        }
        return objects;
    }

    fn_drawLine(objects) {
        const data = this._COMPONENT_CONFIG;

        const Height =        data.hasOwnProperty("prop_templateHeight")            ? data.prop_templateHeight               : 100;
        const marginX =       data.hasOwnProperty("prop_svgWGap")                   ? data.prop_svgWGap                      : 100;
        const marginY =       data.hasOwnProperty("prop_svgHGap")                   ? data.prop_svgHGap                      : 100;
        const lYMin =         data.hasOwnProperty("prop_lineHeightMin")             ? data.prop_lineHeightMin                : 20;
        const lineWidth =     data.hasOwnProperty("prop_lineWidth")                 ? data.prop_lineWidth                    : 2;
        const animDuration =  data.hasOwnProperty("prop_lineDurationAnim")          ? data.prop_lineDurationAnim             : 250;
        const bgColor =       data.hasOwnProperty("prop_lineColor")                 ? data.prop_lineColor                    : "#9b9b9b";
        const markerEnd =     data.hasOwnProperty("prop_lineMarkerEnd")             ? data.prop_lineMarkerEnd                : "arrow";
        const markerStat =    data.hasOwnProperty("prop_lineMarkerStart")           ? data.prop_lineMarkerStart              : "circle";

        let objectStatus = this.fn_drawStatus(objects , true);
        for (let i = 0; i < objectStatus.length ; i++) {
            const itemObject = objectStatus[i];

            if (itemObject != null && ((itemObject.hasOwnProperty("isOpen") && itemObject.isOpen) || !itemObject.hasOwnProperty("isOpen"))){
                if (itemObject.hasOwnProperty("x") && itemObject.hasOwnProperty("y") && itemObject.hasOwnProperty("children")){
                    const children = itemObject.children;
                    const positionX1 = itemObject.x + marginX;
                    const positionY1 = itemObject.y + Height + marginY;

                    for (let j = 0; j < children.length; j++) {
                        const itemChild = children[j];
                        if (itemChild.hasOwnProperty("x") && itemChild.hasOwnProperty("y")){
                            const positionX2 = itemChild.x + marginX;
                            const positionY2 = itemChild.y - 10 + marginY;

                            this.fn_connectTwoPointWithTreeHierarchy(
                                {x: positionX1 , y:positionY1} ,
                                {x: positionX2 , y:positionY2} ,
                                lYMin , lineWidth , animDuration , bgColor ,
                                {
                                    start: markerStat , end:markerEnd
                                }
                            );
                        }

                    }

                }
            }

        }
        return objects;
    }

    fn_connectTwoPointWithTreeHierarchy(objectA , objectB , LYmin=20 , lineWidth=2 , animDuration=250 , bgColor="#9b9b9b"  , markers={ start:"" , end:"arrow"}   ){
        const svg = this.fn_getElementSvg();

        let points = null
        if (objectA.x  != objectB.x){

            if (objectB.y >= objectA.y + LYmin){
                const mid = ((objectB.y - objectA.y)/2);
                points = [
                    { x: objectA.x , y: objectA.y                   , markerStart:markers != null && markers.hasOwnProperty("start") ? markers.start: null} ,
                    { x: objectA.x , y: objectA.y + mid                } ,
                    { x: objectB.x , y: objectB.y - mid                } ,
                    { x: objectB.x , y: objectB.y                   , markerEnd:markers != null && markers.hasOwnProperty("end") ? markers.end: null} ,
                ]
            }
            else{
                const mid = ((objectB.x - objectA.x)/2);
                points = [
                    {x: objectA.x         , y: objectA.y            , markerStart:markers != null && markers.hasOwnProperty("start") ? markers.start: null} ,
                    { x: objectA.x        , y: objectA.y + LYmin                 },
                    { x: objectA.x + mid  , y: objectA.y + LYmin                 },
                    { x: objectB.x - mid  , y: objectB.y - LYmin                 },
                    { x: objectB.x        , y: objectB.y - LYmin                 },
                    { x: objectB.x        , y: objectB.y            , markerEnd:markers != null && markers.hasOwnProperty("end") ? markers.end: null} ,
                ]
            }
        }
        else {
            points = [
                { x: objectA.x , y: objectA.y                    , markerStart:markers != null && markers.hasOwnProperty("start") ? markers.start: null} ,
                { x: objectB.x , y: objectB.y                    , markerEnd:markers != null && markers.hasOwnProperty("end") ? markers.end: null} ,
            ]
        }

        tools_svg.connectDirectionPoint(svg , points , lineWidth ,animDuration , bgColor);
    }

    fn_drawStatus(objects, topDoClose = false) {
        // کپی سطحی از آبجکت‌ها (اگر نیاز به کپی عمیق‌تری داری،
        // از JSON.parse(JSON.stringify(objects)) یا روش دلخواه استفاده کن)
        const objectsCopy = objects.map(item => ({ ...item, tags: { ...item.tags } }));

        // نقشه id -> node برای دسترسی سریع
        const map = {};
        objectsCopy.forEach(item => map[item.id] = item);

        // نقشه parent -> [children]
        const childrenMap = {};
        objectsCopy.forEach(item => {
            if (!childrenMap[item.parent]) childrenMap[item.parent] = [];
            childrenMap[item.parent].push(item);
        });

        // تابعی برای بستن تمام فرزندان (بازگشتی)
        function closeChildren(node) {
            const children = childrenMap[node.id] || [];
            children.forEach(child => {
                child.isOpen = false;
                closeChildren(child);
            });
        }

        // همه نودهایی که فعلاً isOpen === false هستند
        const closedNodes = objectsCopy.filter(n => n.isOpen === false);

        // فیلتر کردن: فقط نودهایی که بالاترین نود بسته در شاخهٔ خود هستند
        // (یعنی هیچ یک از والدهایشان isOpen === false نباشد)
        const topClosedNodes = closedNodes.filter(node => {
            let p = map[node.parent];
            while (p) {
                if (p.isOpen === false) {
                    // اگر یک والد بسته پیدا شد، این node دیگر top-most نیست
                    return false;
                }
                p = map[p.parent];
            }
            return true; // هیچ والد بسته‌ای نبود => این top-most است
        });

        // حالا فقط همین top-most ها را پردازش کن
        topClosedNodes.forEach(topClosed => {
            // اگر بخواهیم بالاترین را باز/بسته کنیم:
            topClosed.isOpen = !topDoClose; // اگر topDoClose=false → باز شود (true)
            // و سپس همهٔ فرزندان آن را ببندیم
            closeChildren(topClosed);
        });

        return objectsCopy;
    }

    fn_setSizeChart(objects) {
        const data = this._COMPONENT_CONFIG;
        const svg = this.fn_getElementSvg();

        const Width =    data.hasOwnProperty("prop_templateWidth")       ? data.prop_templateWidth       : 100;
        const Height =   data.hasOwnProperty("prop_templateHeight")      ? data.prop_templateHeight      : 100;
        const dHeight =  data.hasOwnProperty("prop_templateHeightGap")   ? data.prop_templateHeightGap   : 50;
        const marginX =  data.hasOwnProperty("prop_svgWGap")             ? data.prop_svgWGap             : 100;
        const marginY =  data.hasOwnProperty("prop_svgHGap")             ? data.prop_svgHGap             : 100;

        let width = 0;
        let height = 0;
        for (let i = 0; i < objects.length ; i++) {
            const itemObject = objects[i];
            if (itemObject.hasOwnProperty("row") && itemObject.hasOwnProperty("col")){
                const itemWidth  = itemObject.col*(Width) + Width;
                const itemHeight = (itemObject.row)*(Height+2*dHeight) + (Height+2*dHeight);
                if (itemWidth > width ){
                    width = itemWidth
                }
                if (itemHeight > height ){
                    height = itemHeight
                }
            }
        }

        svg.setAttribute("width", width + 2*marginX);
        svg.setAttribute("height", height + 2*marginY);
    }

    fn_chartInit(isFirstRendder=true){

        const data = this._COMPONENT_CONFIG;
        if (isFirstRendder && data.hasOwnProperty("prop_objects")) this._OBJECTS = data.prop_objects;

        if (this._OBJECTS != null){
            this.fn_readyElementSvg();

            const tree = this.fn_buildTree(this._OBJECTS);
            this.fn_assignPositions(tree[0]);
            this._OBJECTS = this.fn_flatten(tree);
            this.fn_setSizeChart(this._OBJECTS);
            this._OBJECTS = this.fn_closeLevelDefault(this._OBJECTS);
            this._OBJECTS = this.fn_getPosition(this._OBJECTS);
            this._OBJECTS = this.fn_getTemplate(this._OBJECTS);
            this._OBJECTS = this.fn_drawShape(this._OBJECTS);
            this._OBJECTS = this.fn_drawLine( this._OBJECTS);
        }
    }

    call_showOrHideChild(id){
        for (let i = 0; i <this._OBJECTS.length ; i++) {
            const item = this._OBJECTS[i];
            if (item.hasOwnProperty("id") && item.id == id && item.hasOwnProperty("children") && item.children.length > 0){
                this._OBJECTS[i].isOpen = item.hasOwnProperty("isOpen")? !item.isOpen : false;
                const keysToKeep = ["id", "parent", "tags" , "isOpen"];

                this._OBJECTS = this._OBJECTS.map(obj =>
                    Object.fromEntries(
                        keysToKeep
                            .filter(key => key in obj) // ✅ شرط وجود کلید
                            .map(key => [key, obj[key]])
                    )
                );

                this.fn_chartInit(false);
                break;
            }
        }
    }

    call_hasChild(id){
        console.log(id)
    }

}







//===============================================================================================================
// [20 - 29] tables and tab view  [024] Steppers
//===============================================================================================================

/*-------------------------------------
 024-01) Component Stepper
-------------------------------------*/
class ComponentStepperBase extends ComponentBase{

    /* ---------------------------------------------
         PROPERTYs Pattern
  --------------------------------------------- */
    _COMPONENT_PATTERN = {
        prop_size : {
            prop: "prop_size" ,
            default: tools_css.standardSizes.m.name
        } ,
        prop_steps: {
            prop: "prop_steps",
            default: []
        },
        prop_params: {
            prop: "prop_params",
            default: []
        },
        prop_body: {
            prop: "prop_body",
            default: null
        },
        prop_unSelectedBackground: {
            prop: "prop_unSelectedBackground",
            default:  tools_const.styles?.stepper?.color_unSelected ?? "red"
        },
        prop_selectedBackground: {
            prop: "prop_selectedBackground",
            default:  tools_const.styles?.stepper?.color_selected ?? "green"
        },
    };

    /* ---------------------------------------------
           PROPERTYs Props
    --------------------------------------------- */
    _COMPONENT_PROPS = {
        part_structure: [],

        part_form: [
            this._COMPONENT_PATTERN.prop_size ,
            this._COMPONENT_PATTERN.prop_steps ,
            this._COMPONENT_PATTERN.prop_params ,
            this._COMPONENT_PATTERN.prop_unSelectedBackground ,
            this._COMPONENT_PATTERN.prop_selectedBackground ,
        ] ,
    };



    /* ---------------------------------------------
   PROPERTYs Schema
   --------------------------------------------- */
    _COMPONENT_SCHEMA = {
        part_structure: {
            part_form: {

            }
        } ,
    }

}
window.ComponentStepper = class ComponentStepper extends ComponentStepperBase{

    _LIST_STEPS_ACTIVE = {};
    _PARAMS = {};



    /* ---------------------------------------------
       SETUP
    --------------------------------------------- */
    constructor(elId , config) {
        super(
            listComponent[ComponentStepper.name] ,
            elId
        );
        super.renderComponent(config);
    }

    /* ---------------------------------------------
    TEMPLATEs
   --------------------------------------------- */
    componentFn(){

        this.onRegisterFinish().then(el => {
            this.fn_check();
        })
    }
    templateFn(partName = null){
        switch (partName){
            case "part_structure":
                return this.template_render_structure(partName);
            case "part_form":
                return this.template_render_form(partName);
            default:
                return this.templateBasic_render();
        }
    }

    template_render_structure(partName) {
        const content = `
                  ${this.templateFn("part_form")}
                `;
        return this.templateBasic_render_structure(content );
    }

    template_render_form(partName) {
        const data = this.getPartProps(partName)

        if (data != null) {
            const prop_size                     =   this._COMPONENT_CONFIG.hasOwnProperty("prop_size")           ? this._COMPONENT_CONFIG.prop_size       : null;
            const directionRtl                  =   this._COMPONENT_CONFIG.hasOwnProperty("directionRtl")        ? this._COMPONENT_CONFIG.directionRtl    : false;
            const prop_body                     =   data.hasOwnProperty("prop_body")  && data.prop_body != null  ?  data.prop_body                        : this._COMPONENT_SLOTS?.body ?? [];
            const prop_steps                    =   data.hasOwnProperty("prop_steps")                            ?  data.prop_steps                       :  []
            this._PARAMS                        =   data.hasOwnProperty("prop_params")                           ?  data.prop_params                      : {}
            const prop_unSelectedBackground     =   data.hasOwnProperty("prop_unSelectedBackground")             ?  data.prop_unSelectedBackground        :  ""
            const prop_selectedBackground       =   data.hasOwnProperty("prop_selectedBackground")               ?  data.prop_selectedBackground          :  ""

            const stepsHtml = this.#fn_renderSteps(prop_steps , prop_body );


            const elHeight =tools_css.getHeightSize(prop_size);
            const elFontSize =tools_css.getFontSize(prop_size);



            return `
<div data-part-name="${partName}" 
         id="component-steps-from-${this._COMPONENT_RANDOM_ID}"
         class="">
         
     <style>
         #${this._COMPONENT_ID} #component-steps-from-${this._COMPONENT_RANDOM_ID}{
            
         }
         
         
         
         #${this._COMPONENT_ID} #component-steps-from-${this._COMPONENT_RANDOM_ID} .step_bgColor_active{
                background-color: ${prop_selectedBackground} !important;
         }
         #${this._COMPONENT_ID} #component-steps-from-${this._COMPONENT_RANDOM_ID} .step_borderColor_active{
                border-bottom: 2px dotted ${prop_selectedBackground}  !important;
         }
         #${this._COMPONENT_ID} #component-steps-from-${this._COMPONENT_RANDOM_ID} .step_color_active{
                color: ${prop_selectedBackground} !important;
         }
         
         
       
         
         #${this._COMPONENT_ID} #component-steps-from-${this._COMPONENT_RANDOM_ID} .step_bgColor_diactive{
                background-color: ${prop_unSelectedBackground};
         }
         #${this._COMPONENT_ID} #component-steps-from-${this._COMPONENT_RANDOM_ID} .step_borderColor_diactive{
                border-bottom: 2px dotted ${prop_unSelectedBackground};
         }
         #${this._COMPONENT_ID} #component-steps-from-${this._COMPONENT_RANDOM_ID} .step_color_diactive{
                color: ${prop_unSelectedBackground} ;
         }
         
         
         
         
         
         #${this._COMPONENT_ID} #component-steps-from-${this._COMPONENT_RANDOM_ID} .component-steps-from-item-step-${this._COMPONENT_RANDOM_ID}{
             display:          flex;
         }
         
         
         #${this._COMPONENT_ID} #component-steps-from-${this._COMPONENT_RANDOM_ID} .component-steps-from-item-step-part-info-div-number-${this._COMPONENT_RANDOM_ID}{
             float:            ${directionRtl ? 'right' : 'left'};
             width:            60px;
             height:           ${elHeight + 10}px;
         }
         
       
         #${this._COMPONENT_ID} #component-steps-from-${this._COMPONENT_RANDOM_ID} .component-steps-from-item-step-section-number-${this._COMPONENT_RANDOM_ID}{
             float:            ${directionRtl ? 'right' : 'left'};
             width:            60px;
             position:         relative;
             flex: 1;
         }
         #${this._COMPONENT_ID} #component-steps-from-${this._COMPONENT_RANDOM_ID} .component-steps-from-item-step-section-number-line-${this._COMPONENT_RANDOM_ID}{
             position:         absolute;
             width:            2px;
             height:           calc(100%);
             left:             50%;
             top:              ${(elHeight + 10)/2}px;
             transform:        translate(-50% , 0);
         }
         #${this._COMPONENT_ID} #component-steps-from-${this._COMPONENT_RANDOM_ID} .component-steps-from-item-step-section-number-txt-${this._COMPONENT_RANDOM_ID}{
             position:         absolute;
             width:            ${elHeight}px;
             height:           ${elHeight}px;
             left:             50%;
             top:              5px;
             transform:        translate(-50% , 0);
             line-height:      ${elHeight-10}px;
             text-align:       center;
             color:            white;
             padding:          5px;
             border-radius:    100%;
         }
         
         
         
         #${this._COMPONENT_ID} #component-steps-from-${this._COMPONENT_RANDOM_ID} .component-steps-from-item-step-section-info-${this._COMPONENT_RANDOM_ID}{
             float:       ${directionRtl ? 'left' : 'right'};
             width:       calc(100% - 60px);
         }
         
         #${this._COMPONENT_ID} #component-steps-from-${this._COMPONENT_RANDOM_ID} .component-steps-from-item-step-part-info-${this._COMPONENT_RANDOM_ID}{
             display:     flow-root;
             height:      ${elHeight + 10}px;
         }
         
         #${this._COMPONENT_ID} #component-steps-from-${this._COMPONENT_RANDOM_ID} .component-steps-from-item-step-part-info-div-title-${this._COMPONENT_RANDOM_ID}{
             float:       ${directionRtl ? 'right' : 'left'};
             height:      ${elHeight + 10}px;
             background:  white;
             position:    relative;
             z-index:     1;
             ${directionRtl ? "padding-left" : "padding-right"} :  40px;
         }
         #${this._COMPONENT_ID} #component-steps-from-${this._COMPONENT_RANDOM_ID} .component-steps-from-item-step-part-info-div-title-inside-${this._COMPONENT_RANDOM_ID}{
         
            ${directionRtl ? "padding-right" : "padding-left"} :  10px;
            line-height:     ${elHeight + 10}px;
            height:          ${elHeight + 10}px;
            font-size:       ${elFontSize}px;
            display:         block;
            width:           100%;
         }
         
         
         #${this._COMPONENT_ID} #component-steps-from-${this._COMPONENT_RANDOM_ID} .component-steps-from-item-step-part-info-div-space-${this._COMPONENT_RANDOM_ID}{
             position:         relative;
             height:           ${elHeight + 10}px;
         }
         #${this._COMPONENT_ID} #component-steps-from-${this._COMPONENT_RANDOM_ID} .component-steps-from-item-step-part-info-div-space-inside-${this._COMPONENT_RANDOM_ID}{
             position:         absolute;
             width:            100%;
             height:           1px;
             left:             0;
             top:              50%;
             transform:        translate(0 , -50%);
             opacity:          0.5;
         }
  
         
         
         
         #${this._COMPONENT_ID} #component-steps-from-${this._COMPONENT_RANDOM_ID} .component-steps-from-item-step-part-body-${this._COMPONENT_RANDOM_ID}{
             display:     flow-root;
         }
         #${this._COMPONENT_ID} #component-steps-from-${this._COMPONENT_RANDOM_ID} .component-steps-from-item-step-part-body-div-body-${this._COMPONENT_RANDOM_ID}{
             float:       ${directionRtl ? 'left' : 'right'};
             width:       calc(100% - 60px);
         }
         #${this._COMPONENT_ID} #component-steps-from-${this._COMPONENT_RANDOM_ID} .component-steps-from-item-step-part-body-div-body-inside-${this._COMPONENT_RANDOM_ID}{
             ${directionRtl ? "padding-right" : "padding-left"} :  10px;
             display:         block;
             width:           100%;
         }
         
     </style>
     
     ${stepsHtml}
      
</div>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }


    /* ---------------------------------------------
        FUNCTIONs #PRIVATE
    --------------------------------------------- */

    #fn_getElStepSelected(stepName , index){
        return {
            step:                  `#${this._COMPONENT_ID} .component-steps-from-item-step-${this._COMPONENT_RANDOM_ID}[name=${stepName}]` ,
            lineVertical:           ` .component-steps-from-item-step-section-number-line-${this._COMPONENT_RANDOM_ID}` ,
            number:                 ` .component-steps-from-item-step-section-number-txt-${this._COMPONENT_RANDOM_ID}` ,
            title:                  ` .component-steps-from-item-step-part-info-div-title-inside-${this._COMPONENT_RANDOM_ID}` ,
            lineHorizontal:         ` .component-steps-from-item-step-part-info-div-space-inside-${this._COMPONENT_RANDOM_ID}` ,
            body:                   ` .component-steps-from-item-step-part-body-div-body-inside-${this._COMPONENT_RANDOM_ID}` ,
            msg:                    `component-steps-from-item-step-part-body-div-body-message-${this._COMPONENT_RANDOM_ID}-${index}` ,
        };
    }

    #fn_renderSteps(prop_steps , prop_body ){
        let html = "";

        if (prop_steps != null && Array.isArray(prop_steps)){
            for (let i = 0; i < prop_steps.length; i++) {
                const itemStep =  prop_steps[i];

                const stepBody =  this.#fn_getStepBody(itemStep , prop_body)  ;
                const stepName =  itemStep?.name ?? "";
                const stepTitle = itemStep?.title ?? "";
                const msg =       itemStep?.msg ?? null;
                const error =     itemStep?.error ?? null;

                this._LIST_STEPS_ACTIVE[stepName] = false;

                let lineHtml = "";
                if (i < prop_steps.length - 1){
                    lineHtml = `
                        <div class="component-steps-from-item-step-section-number-line-${this._COMPONENT_RANDOM_ID} step_bgColor_diactive"></div>
                    `;
                }

                html += `
<section class="component-steps-from-item-step-${this._COMPONENT_RANDOM_ID}" name="${stepName}">

     <div class="component-steps-from-item-step-section-number-${this._COMPONENT_RANDOM_ID}">
          ${lineHtml}
          <b class="component-steps-from-item-step-section-number-txt-${this._COMPONENT_RANDOM_ID}  step_bgColor_diactive">${i+1}</b>
     </div>

     <div class="component-steps-from-item-step-section-info-${this._COMPONENT_RANDOM_ID}">
          
          <div class="component-steps-from-item-step-part-info-${this._COMPONENT_RANDOM_ID}">
              <div class="component-steps-from-item-step-part-info-div-title-${this._COMPONENT_RANDOM_ID}">
                    <b class="component-steps-from-item-step-part-info-div-title-inside-${this._COMPONENT_RANDOM_ID} step_color_diactive ">
                       ${stepTitle}
                    </b>
               </div>
               <div class="component-steps-from-item-step-part-info-div-space-${this._COMPONENT_RANDOM_ID}">
                    <div class="component-steps-from-item-step-part-info-div-space-inside-${this._COMPONENT_RANDOM_ID} step_borderColor_diactive"></div>
               </div>
          </div>
          <div class="component-steps-from-item-step-part-body-${this._COMPONENT_RANDOM_ID} ">
              <component-messages id="component-steps-from-item-step-part-body-div-body-message-${this._COMPONENT_RANDOM_ID}-${i}">123</component-messages>
            
              <div class="component-steps-from-item-step-part-body-div-body-inside-${this._COMPONENT_RANDOM_ID} d-none">
                  ${stepBody}
              </div>
           </div>
     </div>

</section>
                `;
            }
        }

        return html;
    }

    #fn_getStepBody(itemStep , prop_body){
        let body = null;
        if (itemStep != null){
            if (itemStep.hasOwnProperty("body")){
                return itemStep.body;
            }
            else {
                if (itemStep.hasOwnProperty("name") && prop_body != null && Array.isArray(prop_body)){
                    const stepName = itemStep.name;
                    for (let i = 0; i < prop_body.length; i++) {
                        const itemBody = prop_body[i];
                        if (itemBody != null && itemBody.hasOwnProperty("html")  && itemBody.hasOwnProperty("attrs") && itemBody.attrs.hasOwnProperty("name") && itemBody.attrs.name == stepName){
                            body = itemBody.html;
                            break;
                        }
                    }
                }
            }
        }
        return body;
    }


    /* ---------------------------------------------
        FUNCTIONs
    --------------------------------------------- */

    fn_setParamValue(paramName , paramValue){
        if (this._PARAMS != null){
            Object.keys(this._PARAMS).forEach(key => {
                if (key == paramName){
                    this._PARAMS[paramName] = paramValue;
                    return
                }
            })
        }
    }

    fn_deleteStepHistory(stepName){
        if (this._LIST_STEPS_ACTIVE != null){
            Object.keys(this._LIST_STEPS_ACTIVE).forEach(key => {
                if (key == stepName){
                    this._LIST_STEPS_ACTIVE[stepName] = false;
                    return
                }
            })
        }
    }

    fn_check(){
        const data = this._COMPONENT_CONFIG;
        const prop_steps                    =   data.hasOwnProperty("prop_steps")                            ?  data.prop_steps                       :  [];
        const prop_size                     =   this._COMPONENT_CONFIG.hasOwnProperty("prop_size")           ? this._COMPONENT_CONFIG.prop_size       : null;

        const elHeight =tools_css.getHeightSize(prop_size);

        let isFinishCheck = false;
        if (prop_steps != null && Array.isArray(prop_steps)){
            for (let i = 0; i < prop_steps.length; i++) {
                const itemStep =  prop_steps[i];

                const msg =             itemStep?.msg ?? null;
                const error =           itemStep?.error ?? null;

                const stepName =        itemStep?.name ?? "";
                const stepElements =    this.#fn_getElStepSelected(stepName , i);

                if (stepElements.hasOwnProperty("step")){
                    const stepQuery = stepElements.step;
                    let stepActive =       (itemStep?.condition(this._PARAMS) ?? false);


                    const elStep =           document.querySelector(stepQuery);
                    const elLineVertical =   elStep?.querySelector(stepElements?.lineVertical);
                    const elNumber =         elStep?.querySelector(stepElements?.number);
                    const elTitle =          elStep?.querySelector(stepElements?.title);
                    const elLineHorizontal = elStep?.querySelector(stepElements?.lineHorizontal);
                    const elBody =           elStep?.querySelector(stepElements?.body);


                    const elMsg = document.querySelector("#"+stepElements?.msg)
                    if (elMsg != null){
                        elMsg.innerHTML = "";
                    }

                    if (stepActive){
                        elLineVertical?.classList?.add("step_bgColor_active")
                        elNumber?.classList?.add("step_bgColor_active")
                        elTitle?.classList?.add("step_color_active")
                        elLineHorizontal?.classList?.add("step_borderColor_active")
                        elBody?.classList?.remove("d-none");

                        elNumber.innerHTML = tools_icons.icon_is_true({size : elHeight-10 , colors: {primary: "#fff"}} )


                        if (msg != null){
                            new window.ComponentMessages(
                                stepElements?.msg ,
                                {
                                    prop_type: "warning" ,
                                    prop_messages: [ msg ]
                                }
                            );
                        }

                    }
                    else{
                        elLineVertical?.classList?.remove("step_bgColor_active")
                        elNumber?.classList?.remove("step_bgColor_active")
                        elTitle?.classList?.remove("step_color_active")
                        elLineHorizontal?.classList?.remove("step_borderColor_active")
                        elBody?.classList?.add("d-none")

                        elNumber.innerHTML = i+1;

                        if (!isFinishCheck && error != null){
                            new window.ComponentMessages(
                                stepElements?.msg ,
                                {
                                    prop_type: "error" ,
                                    prop_messages: [ error ]
                                }
                            );
                        }

                        isFinishCheck = true;
                    }


                    if (this._LIST_STEPS_ACTIVE != null && this._LIST_STEPS_ACTIVE.hasOwnProperty(stepName)){
                        let status = this._LIST_STEPS_ACTIVE[stepName];

                        if (status != stepActive && stepActive){
                            if (data.hasOwnProperty("fn_onStepCreated") && typeof data.fn_onStepCreated != null){
                                data.fn_onStepCreated(stepName , this._PARAMS);
                            }
                        }

                        this._LIST_STEPS_ACTIVE[stepName] = stepActive;
                    }
                }

            }
        }
    }
}








//===============================================================================================================
// [30 - 39] collapse and windows -> [030] Collapse
//===============================================================================================================

/*-------------------------------------
 030-01) Component Collapse
-------------------------------------*/
class ComponentCollapseBase extends ComponentBase{


    /* ---------------------------------------------
           PROPERTYs Pattern
    --------------------------------------------- */
    _COMPONENT_PATTERN = {
        prop_size : {
            prop: "prop_size" ,
            default: tools_css.standardSizes.m.name
        } ,
        prop_icon: {
            prop: "prop_icon",
            default: null
        },
        prop_title: {
            prop: "prop_title",
            default: "---"
        },
        prop_bodyShow: {
            prop: "prop_bodyShow",
            default: false
        },
        prop_titleBackgroundColor: {
            prop: "prop_titleBackgroundColor",
            default:  tools_const?.styles?.collapse?.backgroundColor_title ?? ""
        },
        prop_iconColor: {
            prop: "prop_iconColor",
            default:  tools_const?.styles?.collapse?.color_icon ?? ""
        },
        prop_titleColor: {
            prop: "prop_titleColor",
            default:  tools_const?.styles?.collapse?.color_title ?? ""
        },
        prop_bodyBackgroundColor: {
            prop: "prop_bodyBackgroundColor",
            default: tools_const?.styles?.collapse?.backgroundColor_body ?? ""
        },
        prop_body: {
            prop: "prop_body",
            default: null
        }
    };

    /* ---------------------------------------------
           PROPERTYs Props
    --------------------------------------------- */
    _COMPONENT_PROPS = {
        part_structure: [],

        part_collapse_header: [
            this._COMPONENT_PATTERN.prop_title ,
            this._COMPONENT_PATTERN.prop_size ,
        ],

        part_label: [
            this._COMPONENT_PATTERN.prop_titleBackgroundColor ,
            this._COMPONENT_PATTERN.prop_titleColor ,
            this._COMPONENT_PATTERN.prop_icon ,
        ],


        part_collapse_header_icon: [
            this._COMPONENT_PATTERN.prop_icon ,
            this._COMPONENT_PATTERN.prop_size ,
            this._COMPONENT_PATTERN.prop_iconColor ,
        ],

        part_collapse_body: [
            this._COMPONENT_PATTERN.prop_bodyBackgroundColor,
            this._COMPONENT_PATTERN.prop_body,
            this._COMPONENT_PATTERN.prop_bodyShow
        ],

        part_collapse_header_icon_arrow: [
            this._COMPONENT_PATTERN.prop_bodyShow ,
            this._COMPONENT_PATTERN.prop_size ,
            this._COMPONENT_PATTERN.prop_iconColor ,
        ],
    };


    /* ---------------------------------------------
   PROPERTYs Schema
   --------------------------------------------- */
    _COMPONENT_SCHEMA = {
        part_structure: {
            part_collapse_header: {
                part_collapse_header_icon: {},
                part_collapse_header_title: {},
                part_collapse_header_icon_arrow: {},
            } ,
            part_collapse_body: {} ,
        }
    }

}
window.ComponentCollapse = class ComponentCollapse extends ComponentCollapseBase{

    _BODY_SHOW=false;

    /* ---------------------------------------------
       SETUP
   --------------------------------------------- */
    constructor(elId , config) {
        super(
            listComponent[ComponentCollapse.name] ,
            elId
        );
        super.renderComponent(config);
    }


    /* ---------------------------------------------
       TEMPLATEs
    --------------------------------------------- */
    componentFn(){

        this.templateFn("part_collapse_header_icon_arrow")
        this.templateFn("part_label")
        this.templateFn("part_collapse_header_icon")
    }

    templateFn(partName = null){
        switch (partName){
            case "part_structure":
                return this.template_render_structure(partName);
            case "part_collapse_header":
                return this.template_render_collapseHeader(partName);
            case "part_label":
                return this.componentFn_render_label(partName);
            case "part_collapse_header_icon":
                return this.componentFn_render_icon(partName);
            case "part_collapse_header_icon_arrow":
                return this.componentFn_render_iconArrow(partName);
            case "part_collapse_body":
                return this.template_render_collapseBody(partName);
            default:
                return this.templateBasic_render();
        }
    }

    template_render_structure(partName) {
        const content = `
         ${this.templateFn("part_collapse_header") ?? ""}
         
         ${this.templateFn("part_collapse_body") ?? ""}
                `;
        return this.templateBasic_render_structure(content);
    }

    template_render_collapseHeader(partName) {
        const data = this.getPartProps(partName)

        if (data != null){
            const prop_title     = data.hasOwnProperty("prop_title")                                 ?  data.prop_title                         :  "---";
            const prop_size      = data.hasOwnProperty("prop_size")                                  ?  data.prop_size                          :  "---";
            const directionRtl   =   this._COMPONENT_CONFIG.hasOwnProperty("directionRtl")           ? this._COMPONENT_CONFIG.directionRtl      : false;

            const elHeight = tools_css.getHeightSize(prop_size)
            const elfontSize = tools_css.getFontSize(prop_size)

            return `
<section data-part-name="${partName}" 
         id="component-collapse-header-${this._COMPONENT_RANDOM_ID}"
         class="position-relative" >
         
    <style>
        #${this._COMPONENT_ID} #component-collapse-header-${this._COMPONENT_RANDOM_ID}{
            font-size: ${elfontSize}px;
            height: ${elHeight}px;
            line-height: ${elHeight}px;
       }
    </style>
    
    <component-icon id="component-collapse-header-label-icon-${this._COMPONENT_RANDOM_ID}"></component-icon>
    
    <component-label id="component-collapse-header-label-${this._COMPONENT_RANDOM_ID}"></component-label>
    
    <component-icon id="component-collapse-header-label-icon-arrow-${this._COMPONENT_RANDOM_ID}"></component-icon>

</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    template_render_collapseBody(partName) {
        const data = this.getPartProps(partName)

        if (data != null){

            const prop_bodyBackgroundColor  = data.hasOwnProperty("prop_bodyBackgroundColor")                     ?  data.prop_bodyBackgroundColor  : "";
            const prop_bodyShow             = data.hasOwnProperty("prop_bodyShow")                                ?  data.prop_bodyShow             : false;
            const prop_body                 = data.hasOwnProperty("prop_body") && data.prop_body != null          ?  data.prop_body                 : this._COMPONENT_SLOTS?.body?.[0]?.html ?? "";

            this._BODY_SHOW = prop_bodyShow;

            return `
<section data-part-name="${partName}"  
         data-show = "${prop_bodyShow}"
         id="component-collapse-body-${this._COMPONENT_RANDOM_ID}" 
         class="shadow-sm p-2 border ${prop_bodyShow ? "" : "d-none"}">
    <style>
        #${this._COMPONENT_ID} #component-collapse-body-${this._COMPONENT_RANDOM_ID}{
            background-color: ${prop_bodyBackgroundColor};
       }
    </style>
    
    ${prop_body}
    
</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    componentFn_render_label (partName) {
        const data = this.getPartProps(partName)
        const prop_titleBackgroundColor  = data.hasOwnProperty("prop_titleBackgroundColor")          ?  data.prop_titleBackgroundColor  : "";
        const prop_icon                  = data.hasOwnProperty("prop_icon")                          ?  data.prop_icon  : null;
        const prop_titleColor            = data.hasOwnProperty("prop_titleColor")                    ?  data.prop_titleColor  : "";
        const directionRtl               =   this._COMPONENT_CONFIG.hasOwnProperty("directionRtl")   ? this._COMPONENT_CONFIG.directionRtl      : false;

        let style = {};
        if (prop_icon != null){
            if(directionRtl) {
                style["padding-right"]= "40px!important;"
            }
            else {
                style["padding-left"]= "40px!important;"
            }
        }

        this.componentFneBasic_render_structure(
            `component-collapse-header-label-${this._COMPONENT_RANDOM_ID}` ,
            {
                prop_labelStyles: style ,
                fn_callback: (event)=>{
                    this.fn_onCLickHeaderCollapse(event)
                },
                prop_labelBackgroundColor: prop_titleBackgroundColor ,
                prop_labelColor: prop_titleColor
            }
        );
    }

    componentFn_render_icon (partName) {
        const data = this.getPartProps(partName)

        if (data != null){

            const prop_icon        = data.hasOwnProperty("prop_icon")                                         ?  data.prop_icon                          : null;
            const prop_size        = data.hasOwnProperty("prop_size")                                         ?  data.prop_size                          : null;
            const prop_iconColor   = data.hasOwnProperty("prop_iconColor")                                    ?  data.prop_iconColor                     : "";
            const directionRtl     =   this._COMPONENT_CONFIG.hasOwnProperty("directionRtl")                  ? this._COMPONENT_CONFIG.directionRtl      : false;

            if (prop_icon != null){

                const styles =  {
                    "top": "50%" ,
                    "z-index" : tools_css.getZIndex(tools_css.standardZIndex.icon_attach.name)
                }
                if (directionRtl){
                    styles["right"] = "0";
                    styles["transform"] = "translate(-10px , -50%)";
                }
                else {
                    styles["left"] = "0";
                    styles["transform"] = "translate(10px , -50%)";
                }

                new window.ComponentIcon(
                    `component-collapse-header-label-icon-${ this._COMPONENT_RANDOM_ID}` ,
                    {
                        prop_icon : typeof prop_icon == "function" ? prop_icon({size: prop_size , colors:{primary: prop_iconColor}}) : prop_icon ,
                        prop_iconClass : ["position-absolute"] ,
                        prop_iconStyles :styles,
                    }
                )

            }

        }
    }

    componentFn_render_iconArrow (partName) {
        const data = this.getPartProps(partName)

        if (data != null){

            const prop_size        = data.hasOwnProperty("prop_size")                                         ?  data.prop_size                          : null;
            const prop_iconColor   = data.hasOwnProperty("prop_iconColor")                                    ?  data.prop_iconColor                     : "";
            const directionRtl     =   this._COMPONENT_CONFIG.hasOwnProperty("directionRtl")                  ? this._COMPONENT_CONFIG.directionRtl      : false;

            const styles =  {
                "top": "50%" ,
            }
            if (directionRtl){
                styles["left"] = "0";
                styles["transform"] = "translate(10px , -50%)";
            }
            else {
                styles["right"] = "0";
                styles["transform"] = "translate(-10px , -50%)";
            }

            new window.ComponentIcon(
                `component-collapse-header-label-icon-arrow-${ this._COMPONENT_RANDOM_ID}` ,
                {
                    prop_icon : this._BODY_SHOW  ? tools_icons.icon_arrow_down({size : prop_size , colors: {primary: prop_iconColor}}) : tools_icons.icon_arrow_up({size : prop_size , colors: {primary: prop_iconColor}} ),
                    prop_iconClass : ["position-absolute"] ,
                    prop_iconStyles :styles,
                }
            )

        }
    }




    /* ---------------------------------------------
       FUNCTIONs
    --------------------------------------------- */
    fn_onCLickHeaderCollapse(event){
        const el = document.querySelector(`#component-collapse-body-${this._COMPONENT_RANDOM_ID}`);
        this._BODY_SHOW = !this._BODY_SHOW;

        if (this._BODY_SHOW){
            el.classList.remove("d-none");
        }
        else {
            el.classList.add("d-none");
        }

        this.templateFn("part_collapse_header_icon")
    }

}







//===============================================================================================================
// [30 - 39] collapse and windows-> [031] Window
//===============================================================================================================

/*-------------------------------------
 031-01) Component Window
-------------------------------------*/
class ComponentWindowBase extends ComponentBase{


    /* ---------------------------------------------
        PROPERTYs Pattern
    --------------------------------------------- */
    _COMPONENT_PATTERN = {
        prop_blurBackgroundColor: {
            prop: "prop_blurBackgroundColor",
            default: tools_const.hasOwnProperty("styles") && tools_const.styles.hasOwnProperty("window") && tools_const.styles.window.hasOwnProperty("backgroundColor_blur")
                ? tools_const.styles.window.backgroundColor_blur
                : ""
        },
        prop_windowBackgroundColor: {
            prop: "prop_windowBackgroundColor",
            default: tools_const.hasOwnProperty("styles") && tools_const.styles.hasOwnProperty("window") && tools_const.styles.window.hasOwnProperty("backgroundColor_window")
                ? tools_const.styles.window.backgroundColor_window
                : ""
        },
        prop_windowWidth: {
            prop: "prop_windowWidth",
            default: 700
        },
        prop_windowHeight: {
            prop: "prop_windowHeight",
            default: 400
        },
        prop_windowRound: {
            prop: "prop_windowRound",
            default: "0"
        },
        prop_header: {
            prop: "prop_header",
            default: null
        },
        prop_showBtnResize: {
            prop: "prop_showBtnResize",
            default: true
        },
        prop_body: {
            prop: "prop_body",
            default: null
        },
        prop_footer: {
            prop: "prop_footer",
            default: null
        }
    };

    /* ---------------------------------------------
           PROPERTYs Props
    --------------------------------------------- */
    _COMPONENT_PROPS = {
        part_structure: [],

        part_blur: [
            this._COMPONENT_PATTERN.prop_blurBackgroundColor
        ],

        part_window: [
            this._COMPONENT_PATTERN.prop_windowBackgroundColor,
            this._COMPONENT_PATTERN.prop_windowWidth,
            this._COMPONENT_PATTERN.prop_windowHeight,
            this._COMPONENT_PATTERN.prop_windowRound
        ],

        part_window_header: [],

        part_window_header_title: [
            this._COMPONENT_PATTERN.prop_header
        ],

        part_window_header_icons: [],

        part_window_header_icons_icon_close: [],

        part_window_header_icons_icon_resize: [
            this._COMPONENT_PATTERN.prop_showBtnResize
        ],

        part_window_body: [
            this._COMPONENT_PATTERN.prop_body
        ],

        part_window_footer: [
            this._COMPONENT_PATTERN.prop_footer
        ]
    };


    /* ---------------------------------------------
   PROPERTYs Schema
   --------------------------------------------- */
    _COMPONENT_SCHEMA = {
        part_structure: {
            part_blur:{
                part_window:{
                    part_window_header:{
                        part_window_header_title: {},
                        part_window_header_icons: {
                            part_window_header_icons_icon_close:{},
                            part_window_header_icons_icon_resize:{},
                        },
                    },
                    part_window_body:{},
                    part_window_footer:{}
                }
            }
        }
    }

}
window.ComponentWindow = class ComponentWindow extends ComponentWindowBase {

    _IS_FULL_SIZE = false;

    /* ---------------------------------------------
       SETUP
   --------------------------------------------- */
    constructor(elId, config) {
        super(
            listComponent[ComponentWindow.name] ,
            elId
        );
        super.renderComponent(config);
    }

    /* ---------------------------------------------
   TEMPLATEs
   --------------------------------------------- */
    componentFn(){
        this.templateFn("part_window_header_icons_icon_close");
        this.templateFn("part_window_header_icons_icon_resize");
        this.fn_setUnvisableWindow();
    }
    templateFn(partName = null){
        switch (partName){
            case "part_structure":
                return this.template_render_structure(partName);
            case "part_blur":
                return this.template_render_blur(partName);
            case "part_window":
                return this.template_render_window(partName);

            case "part_window_header":
                return this.template_render_windowHeader(partName);

            case "part_window_header_title":
                return this.template_render_windowHeaderTitle(partName);

            case "part_window_header_icons":
                return this.template_render_windowHeaderIcons(partName);
            case "part_window_header_icons_icon_close":
                return this.componentFn_render_windowHeaderIconClose(partName);
            case "part_window_header_icons_icon_resize":
                return this.componentFn_render_windowHeaderIconResize(partName);

            case "part_window_body":
                return this.template_render_windowBody(partName);
            case "part_window_footer":
                return this.template_render_windowFooter(partName);
            default:
                return this.templateBasic_render();
        }
    }

    template_render_structure(partName) {
        const content = `
         ${this.templateFn("part_blur") ?? ""}
                `;
        return this.templateBasic_render_structure(content);
    }

    template_render_blur(partName) {
        const data = this.getPartProps(partName)

        if (data != null){

            const prop_blurBackgroundColor       = data.hasOwnProperty("prop_blurBackgroundColor")          ?  data.prop_blurBackgroundColor     : "";

            return `
<section data-part-name="${partName}" 
         id="component-windwow-blur-${this._COMPONENT_RANDOM_ID}" 
         onclick="${this.getFn("fn_onCLicCloseWindow" , "event")}"
         class="position-fixed w-100 h-100" >
         
    <style>
        #${this._COMPONENT_ID} #component-windwow-blur-${this._COMPONENT_RANDOM_ID}{
            background-color: ${prop_blurBackgroundColor};
            top: 0;
            left: 0;
            z-index : ${tools_css.getZIndex(tools_css.standardZIndex.blur_popup.name, 11)};
       }
    </style>
    
     ${this.templateFn("part_window") ?? ""}
    
</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    template_render_window(partName) {
        const data = this.getPartProps(partName)

        if (data != null){

            const prop_windowBackgroundColor       = data.hasOwnProperty("prop_windowBackgroundColor")          ?  data.prop_windowBackgroundColor     : "";
            const prop_windowWidth                 = data.hasOwnProperty("prop_windowWidth")                    ?  data.prop_windowWidth               : "";
            const prop_windowHeight                = data.hasOwnProperty("prop_windowHeight")                   ?  data.prop_windowHeight              : "";
            const prop_windowRound                 = data.hasOwnProperty("prop_windowRound")                    ?  data.prop_windowRound               : "";




            return `
<section data-part-name="${partName}" 
         id="component-windwow-window-${this._COMPONENT_RANDOM_ID}" 
         onclick="${this.getFn("fn_onclickWindow" , "event")}"
         class="position-absolute shadow" >
         
    <style>
    
        #${this._COMPONENT_ID} #component-windwow-window-${this._COMPONENT_RANDOM_ID}{
            transition: width 250ms ease, height 250ms ease;
            background-color: ${prop_windowBackgroundColor};
            top: 50%;
            left: 50%;
            transform: translate(-50% , -50%);
            width: ${prop_windowWidth}px;
            height: ${prop_windowHeight}px;
            border-radius: ${prop_windowRound};
            max-height: calc(100vh - 30%) !important;
       }
       
       @media (max-width: ${prop_windowWidth}px) {
           #${this._COMPONENT_ID} #component-windwow-window-${this._COMPONENT_RANDOM_ID} {
              width: calc(90%) !important;
          }
       }
     
       @media (min-width: ${prop_windowWidth}px) {
            @keyframes window-visable-${this._COMPONENT_RANDOM_ID}{
                0% {
                   width: ${prop_windowWidth * 2 / 3}px;
                   height: ${prop_windowHeight * 2 / 3 }px;
                }
                50% {
                   width: ${prop_windowWidth * 4 / 3}px;
                   height: ${prop_windowHeight * 4 / 3 }px;
                }
                100% {
                   width: ${prop_windowWidth}px;
                   height: ${prop_windowHeight}px;
                }
            }

            @keyframes window-unvisable-${this._COMPONENT_RANDOM_ID} {
                 0% {
                    width: ${prop_windowWidth}px;
                    height: ${prop_windowHeight}px;
                 }
                 50% {
                    width: ${prop_windowWidth * 4 / 3}px;
                    height: ${prop_windowHeight * 4 / 3 }px;
                 }
                 100% {
                    width: ${prop_windowWidth * 2 / 3}px;
                    height: ${prop_windowHeight * 2 / 3 }px;
                 }
             }

             .window-visable-animation-${this._COMPONENT_RANDOM_ID} {
                animation: window-visable-${this._COMPONENT_RANDOM_ID} 0.15s forwards ease-in-out;
             }

             .window-unvisable-animation-${this._COMPONENT_RANDOM_ID} {
                animation: window-unvisable-${this._COMPONENT_RANDOM_ID} 0.15s forwards ease-in-out;
             }


             @keyframes window-full-size-${this._COMPONENT_RANDOM_ID}{
                0% {
                   width: ${prop_windowWidth}px;
                   height: ${prop_windowHeight}px;
                }
                100% {
                   width: calc(100% - 40px);
                   height: calc(100% - 40px);
                }
             }

            @keyframes window-real-size-${this._COMPONENT_RANDOM_ID} {
                0% {
                   width: calc(100% - 40px);
                   height: calc(100% - 40px);
                }
                100% {
                   width: ${prop_windowWidth}px;
                   height: ${prop_windowHeight}px;
                }
            }

            .window-full-size-animation-${this._COMPONENT_RANDOM_ID} {
                animation: window--full-size-${this._COMPONENT_RANDOM_ID} 0.15s forwards ease-in-out;
            }

           .window-real-size-animation-${this._COMPONENT_RANDOM_ID} {
                animation: window-real-size-${this._COMPONENT_RANDOM_ID} 0.15s forwards ease-in-out;
            }

            .window-full-size-${this._COMPONENT_RANDOM_ID} {
               width: calc(100% - 40px) !important;
               height: calc(100% - 40px) !important;
            }

            window-full-size-${this._COMPONENT_RANDOM_ID} {
               width: ${prop_windowWidth}px !important;
               height: ${prop_windowHeight}px !important;
            }
       }

    </style>
    
    ${this.templateFn("part_window_header") ?? ""}
    ${this.templateFn("part_window_body") ?? ""}
    ${this.templateFn("part_window_footer") ?? ""}
    
</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    template_render_windowHeader(partName) {
        const data = this.getPartProps(partName)

        if (data != null){

            return `
<section data-part-name="${partName}" 
         id="component-windwow-window-header-${this._COMPONENT_RANDOM_ID}" 
         class=" border-bottom row p-0 m-0" >
         
    <style>
        #${this._COMPONENT_ID} #component-windwow-window-header-${this._COMPONENT_RANDOM_ID}{
            height: 35px;
       }
    </style>
    
    ${this.templateFn("part_window_header_title") ?? ""}
    
    ${this.templateFn("part_window_header_icons") ?? ""}
    
</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    template_render_windowHeaderTitle(partName) {
        const data = this.getPartProps(partName)

        if (data != null){

            const prop_header        =   data.hasOwnProperty("prop_header") && data.prop_header !=null       ?  data.prop_header       : this._COMPONENT_SLOTS?.header?.[0]?.html ?? "";

            return `
<section data-part-name="${partName}" 
         id="component-windwow-window-header-title-${this._COMPONENT_RANDOM_ID}" 
         class=" col-8" >
         
    <style>
        #${this._COMPONENT_ID} #component-windwow-window-header-title-${this._COMPONENT_RANDOM_ID}{
            line-height: 35px;
       }
    </style>
   
    <b>${prop_header}</b>
    
</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    template_render_windowHeaderIcons(partName) {
        const data = this.getPartProps(partName)

        if (data != null){

            return `
<section data-part-name="${partName}" 
         id="component-windwow-window-header-title-${this._COMPONENT_RANDOM_ID}" 
         class="col-4 position-relative" >
         
    <style>
        #${this._COMPONENT_ID} #component-windwow-window-header-title-${this._COMPONENT_RANDOM_ID}{
            height: 35px;
       }
    </style>
   
    <component-button id="component-windwow-window-header-icon-close-${this._COMPONENT_RANDOM_ID}"></component-button>
    
    <component-button id="component-windwow-window-header-icon-resize-${this._COMPONENT_RANDOM_ID}"></component-button>
    
</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    template_render_windowBody(partName) {
        const data = this.getPartProps(partName)

        if (data != null){

            const prop_body        =   data.hasOwnProperty("prop_body") && data.prop_body !=null       ?  data.prop_body        : this._COMPONENT_SLOTS?.body?.[0]?.html ?? "";


            return `
<section data-part-name="${partName}" 
         id="component-windwow-window-body-${this._COMPONENT_RANDOM_ID}" 
         class="overflow-auto px-2" >
         
    <style>
        #${this._COMPONENT_ID} #component-windwow-window-body-${this._COMPONENT_RANDOM_ID}{
            height: calc(100% - 90px);
       }
    </style>
    
    ${prop_body}
    
</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    template_render_windowFooter(partName) {
        const data = this.getPartProps(partName)

        if (data != null){

            const prop_footer        =   data.hasOwnProperty("prop_footer") && data.prop_footer !=null       ?  data.prop_footer        :  this._COMPONENT_SLOTS?.footer?.[0]?.html ?? "";

            return `
<section data-part-name="${partName}" 
         id="component-windwow-window-footer-${this._COMPONENT_RANDOM_ID}" 
         class=" border-top" >
         
    <style>
        #${this._COMPONENT_ID} #component-windwow-window-footer-${this._COMPONENT_RANDOM_ID}{
            height: 55px;
       }
    </style>
    
    ${prop_footer}
    
</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    componentFn_render_windowHeaderIconClose(partName) {
        const data = this.getPartProps(partName)

        if (data != null){

            const directionRtl  =  this._COMPONENT_CONFIG.hasOwnProperty("directionRtl")  ? this._COMPONENT_CONFIG.directionRtl      : false;

            const styles = {
                "top" : "50%" ,
                "transform" : "translate(0, -50%)" ,
            }
            styles[directionRtl ? "left" : "right"] =  "10px";

            new window.ComponentButton(
                `component-windwow-window-header-icon-close-${this._COMPONENT_RANDOM_ID}` ,
                {
                    prop_structureClass:  ["position-absolute"] ,
                    prop_structureStyles: styles ,

                    prop_btnClass: [

                    ],
                    prop_btnStyles: {
                        "width" : "22px" ,
                        "height" : "22px" ,
                        "line-height" : "18px" ,
                        "padding" : "0 !important" ,
                    },

                    prop_title: `&#x00D7;` ,

                    fn_callback: (event) => {
                        this.fn_onCLicCloseWindow(event)
                    }
                }
            )

        }

    }

    componentFn_render_windowHeaderIconResize(partName) {
        const data = this.getPartProps(partName)

        if (data != null){
            const directionRtl  =  this._COMPONENT_CONFIG.hasOwnProperty("directionRtl")  ? this._COMPONENT_CONFIG.directionRtl      : false;

            const prop_showBtnResize  =   data.hasOwnProperty("prop_showBtnResize")       ? data.prop_showBtnResize                  : true;

            if (prop_showBtnResize){
                const styles = {
                    "top" : "50%" ,
                    "transform" : "translate(0, -50%)" ,
                }
                styles[directionRtl ? "left" : "right"] =  "40px";

                new window.ComponentButton(
                    `component-windwow-window-header-icon-resize-${this._COMPONENT_RANDOM_ID}` ,
                    {
                        prop_structureClass:  ["position-absolute"] ,
                        prop_structureStyles: styles ,

                        prop_btnClass: [

                        ],
                        prop_btnStyles: {
                            "width" : "22px" ,
                            "height" : "22px" ,
                            "line-height" : "18px" ,
                            "padding" : "0 !important" ,
                        },

                        prop_title: `🗗` ,

                        fn_callback: (event) => {
                            this.fn_onCLicResizeWindow(event)
                        }
                    }
                )
            }

        }

    }


    /* ---------------------------------------------
       FUNCTIONs
    --------------------------------------------- */
    fn_onGetStuctureElement(){
        return document.querySelector(`section#component-${this._COMPONENT_NAME}-structure-${this._COMPONENT_RANDOM_ID}`);
    }
    fn_onGetWindowElement(){
        return document.querySelector(`section#component-windwow-window-${this._COMPONENT_RANDOM_ID}`);
    }

    fn_setUnvisableWindow(){
        const el = this.fn_onGetStuctureElement();
        el.classList.add("d-none");
    }

    fn_onclickWindow(event){
        event.stopImmediatePropagation();
    }


    fn_onRemoveClass(event){
        const elWindow = this.fn_onGetWindowElement();

        elWindow.classList.remove(`window-full-size-${this._COMPONENT_RANDOM_ID}`);
        elWindow.classList.remove(`window-real-size-${this._COMPONENT_RANDOM_ID}`);

        elWindow.classList.remove(`window-full-size-animation-${this._COMPONENT_RANDOM_ID}`);
        elWindow.classList.remove(`window-real-size-animation-${this._COMPONENT_RANDOM_ID}`);

        elWindow.classList.remove(`window-visable-animation-${this._COMPONENT_RANDOM_ID}`);
        elWindow.classList.remove(`window-unvisable-animation-${this._COMPONENT_RANDOM_ID}`);
    }


    fn_onCLicOpenWindow(event){
        this.fn_onRemoveClass();

        const el = this.fn_onGetStuctureElement();
        el.classList.remove("d-none");

        const elWindow = this.fn_onGetWindowElement();
        elWindow.classList.add(`window-visable-animation-${this._COMPONENT_RANDOM_ID}`);

        this._IS_FULL_SIZE = false;
    }

    fn_onCLicCloseWindow(event){
        this.fn_onRemoveClass();

        const elWindow = this.fn_onGetWindowElement();
        elWindow.classList.add(`window-unvisable-animation-${this._COMPONENT_RANDOM_ID}`);

        const el = this.fn_onGetStuctureElement();
        setTimeout(() => {
            el.classList.add("d-none");
        } , 150)

        this._IS_FULL_SIZE = false;
    }

    fn_onCLicResizeWindow(event){
        this.fn_onRemoveClass();

        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("prop_windowWidth")   && data.hasOwnProperty("prop_windowHeight")  ){
            const prop_windowWidth   =  data.prop_windowWidth ;
            const prop_windowHeight  = data.prop_windowHeight ;

            const elWindow = this.fn_onGetWindowElement();
            if (this._IS_FULL_SIZE){
                elWindow.classList.add(`window-real-size-animation-${this._COMPONENT_RANDOM_ID}`);
                elWindow.classList.add(`window-real-size-${this._COMPONENT_RANDOM_ID}`);
                this._IS_FULL_SIZE = false;
            }
            else {
                elWindow.classList.add(`window-full-size-animation-${this._COMPONENT_RANDOM_ID}`);
                elWindow.classList.add(`window-full-size-${this._COMPONENT_RANDOM_ID}`);
                this._IS_FULL_SIZE = true;
            }
        }

    }

    fn_onCLicMinimizeWindow(event){

    }



    call_close(event){
        this.fn_onCLicCloseWindow(event);
    }
    call_open(event){
        this.fn_onCLicOpenWindow(event);
    }
    call_resize(event){
        this.fn_onCLicResizeWindow(event);
    }
    call_minimize(event){
        this.fn_onCLicMinimizeWindow(event);
    }


}


/*-------------------------------------
 031-02) Component Window Confirm
-------------------------------------*/
class ComponentWindowConfirmBase extends ComponentBase{

    /* ---------------------------------------------
       PROPERTYs Pattern
       --------------------------------------------- */
    _COMPONENT_PATTERN = {
        prop_showBtnResize: {
            prop: "prop_showBtnResize",
            default: true
        },
        prop_header: {
            prop: "prop_header",
            default: null
        },
        prop_body: {
            prop: "prop_body",
            default: null
        },
        prop_titleBtnCancel: {
            prop: "prop_titleBtnCancel",
            default: "لغو"
        },
        prop_titleBtnAccept: {
            prop: "prop_titleBtnAccept",
            default: "تایید"
        }
    };

    /* ---------------------------------------------
           PROPERTYs Props
    --------------------------------------------- */
    _COMPONENT_PROPS = {
        part_structure: [],

        part_window: [
            this._COMPONENT_PATTERN.prop_showBtnResize
        ],

        part_window_header: [
            this._COMPONENT_PATTERN.prop_header
        ],

        part_window_body: [
            this._COMPONENT_PATTERN.prop_body
        ],

        part_window_footer: [],

        part_window_footer_btn_candel: [
            this._COMPONENT_PATTERN.prop_titleBtnCancel
        ],

        part_window_footer_btn_accept: [
            this._COMPONENT_PATTERN.prop_titleBtnAccept
        ]
    };


    /* ---------------------------------------------
   PROPERTYs Schema
   --------------------------------------------- */
    _COMPONENT_SCHEMA = {
        part_structure: {
            part_window:{
                part_window_header: {} ,
                part_window_body: {} ,
                part_window_footer: {
                    part_window_footer_btn_candel:{},
                    part_window_footer_btn_accept:{},
                } ,
            }
        }
    }

}
window.ComponentWindowConfirm = class ComponentWindowConfirm extends ComponentWindowConfirmBase {

    _COMPONENT_WINDOW = null;
    _COMPONENT_DATA_CALLBACK = null;

    /* ---------------------------------------------
       SETUP
   --------------------------------------------- */
    constructor(elId, config) {
        super(
            listComponent[ComponentWindowConfirm.name] ,
            elId
        );
        super.renderComponent(config);
    }



    /* ---------------------------------------------
     TEMPLATEs
    --------------------------------------------- */
    componentFn(){
        this.templateFn("part_window");
        this.templateFn("part_window_footer_btn_candel");
        this.templateFn("part_window_footer_btn_accept");
    }
    templateFn(partName = null){
        switch (partName){
            case "part_structure":
                return this.template_render_structure(partName);
            case "part_window":
                return this.componentFn_render_window(partName);
            case "part_window_header":
                return this.template_render_windowHeader(partName);
            case "part_window_body":
                return this.template_render_windowBody(partName);
            case "part_window_footer":
                return this.template_render_windowFooter(partName);
            case "part_window_footer_btn_candel":
                return this.componentFn_render_windowFooterBtnCancel(partName);
            case "part_window_footer_btn_accept":
                return this.componentFn_render_windowFooterBtnAccept(partName);
            default:
                return this.templateBasic_render();
        }
    }

    template_render_structure(partName) {
        const content = `
<component-window id="component-windwow-confirm-winddow-${this._COMPONENT_RANDOM_ID}">

    <component-header>
          ${this.templateFn("part_window_header") ?? ""}
    </component-header> 
    
    <component-body>
          ${this.templateFn("part_window_body") ?? ""}
    </component-body> 
      
    <component-footer>
          ${this.templateFn("part_window_footer") ?? ""}
    </component-footer>
    
</component-window>
                `;
        return this.templateBasic_render_structure(content);
    }

    template_render_windowHeader(partName) {
        const data = this.getPartProps(partName)

        if (data != null) {

            const prop_header = data.hasOwnProperty("prop_header") && data.prop_header != null ? data.prop_header :  this._COMPONENT_SLOTS?.header?.[0]?.html ?? "";

            return `
<section data-part-name="${partName}" 
         id="component-windwow-confirm-winddow-header-${this._COMPONENT_RANDOM_ID}" 
         class="" >
         
    <style>
        #${this._COMPONENT_ID} #component-windwow-confirm-winddow-header-${this._COMPONENT_RANDOM_ID}{
            
       }
    </style>
    
    ${prop_header}
    
</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    template_render_windowBody(partName) {

        const data = this.getPartProps(partName)

        if (data != null) {

            const prop_body = data.hasOwnProperty("prop_body") && data.prop_body != null ? data.prop_body : this._COMPONENT_SLOTS?.body?.[0]?.html ?? "";

            return `
<section data-part-name="${partName}" 
         id="component-windwow-confirm-winddow-body-${this._COMPONENT_RANDOM_ID}" 
         class="m-2" >
         
    <style>
        #${this._COMPONENT_ID} #component-windwow-confirm-winddow-body-${this._COMPONENT_RANDOM_ID}{
            
       }
    </style>
    
    ${prop_body}
    
</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    template_render_windowFooter(partName) {

        const data = this.getPartProps(partName)

        if (data != null) {

            return `
<section data-part-name="${partName}" 
         id="component-windwow-confirm-winddow-footer-${this._COMPONENT_RANDOM_ID}" 
         class="row p-0 my-0 mx-2" >
         
    <style>
        #${this._COMPONENT_ID} #component-windwow-confirm-winddow-footer-${this._COMPONENT_RANDOM_ID}{
            
       }
    </style>
    
    <component-button id="component-windwow-confirm-winddow-footer-btn-cancel-${this._COMPONENT_RANDOM_ID}"></component-button>
    
    <component-button id="component-windwow-confirm-winddow-footer-btn-accept-${this._COMPONENT_RANDOM_ID}"></component-button>
    
</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }


    componentFn_render_window(partName){
        const data = this.getPartProps(partName)

        if (data != null){

            const prop_showBtnResize = data.hasOwnProperty("prop_showBtnResize") ? data.prop_showBtnResize : true;

            this._COMPONENT_WINDOW = new window.ComponentWindow(
                `component-windwow-confirm-winddow-${this._COMPONENT_RANDOM_ID}` ,
                {
                    prop_windowWidth: 500 ,
                    prop_windowHeight: 125 ,
                    prop_showBtnResize: prop_showBtnResize
                }
            )
        }
    }

    componentFn_render_windowFooterBtnCancel(partName){
        const data = this.getPartProps(partName)

        if (data != null){

            const prop_titleBtnCancel = data.hasOwnProperty("prop_titleBtnCancel")  ? data.prop_titleBtnCancel : "";

            new window.ComponentButton(
                `component-windwow-confirm-winddow-footer-btn-cancel-${this._COMPONENT_RANDOM_ID}` ,
                {
                    classList: "col-6 mt-2"  ,

                    prop_type:"cancel" ,

                    prop_title: prop_titleBtnCancel ,
                    fn_callback: (event) => {
                        this.call_close(event);
                    }
                }
            )
        }
    }

    componentFn_render_windowFooterBtnAccept(partName){
        const data = this.getPartProps(partName)

        if (data != null){

            const prop_titleBtnAccept = data.hasOwnProperty("prop_titleBtnAccept")  ? data.prop_titleBtnAccept : "";

            new window.ComponentButton(
                `component-windwow-confirm-winddow-footer-btn-accept-${this._COMPONENT_RANDOM_ID}` ,
                {
                    classList: "col-6 mt-2"  ,

                    prop_type:"submit" ,

                    prop_title: prop_titleBtnAccept ,
                    fn_callback: (event) => {
                        this.fn_callback(event)
                    }
                }
            )
        }
    }






    /* ---------------------------------------------
      FUNCTIONs
    --------------------------------------------- */
    fn_callback(event){
        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("fn_callback") && typeof data.fn_callback != null){
            data.fn_callback(event , this._COMPONENT_DATA_CALLBACK);
        }

        this.call_close(event);
    }

    call_close(event){
        this._COMPONENT_WINDOW.fn_onCLicCloseWindow(event);
    }
    call_open(event , data=null){
        this._COMPONENT_WINDOW.fn_onCLicOpenWindow(event);

        this._COMPONENT_DATA_CALLBACK = data;
    }
    call_resize(event){
        this._COMPONENT_WINDOW.fn_onCLicResizeWindow(event);
    }
    call_minimize(event){
        this._COMPONENT_WINDOW.fn_onCLicMinimizeWindow(event);
    }

}






//===============================================================================================================
// [30 - 39] collapse and windows->  [032] Slider Shows
//===============================================================================================================

/*-------------------------------------
 032-01) Slider Show Overlapping
--------------------------------------*/
class ComponentSliderShowOverlappingBase extends ComponentBase{


    /* ---------------------------------------------
         PROPERTYs Pattern
    --------------------------------------------- */
    _COMPONENT_PATTERN = {
        prop_borderClass: {
            prop: "prop_borderClass",
            default: ["border", "shadow-sm", "my-2", "mx-auto", "d-block", "p-1"]
        },
        prop_borderStyles: {
            prop: "prop_borderStyles",
            default: {}
        },
        prop_imageDuration: {
            prop: "prop_imageDuration",
            default: 3000
        },
        prop_imageSelected: {
            prop: "prop_imageSelected",
            default: 0
        },
        prop_images: {
            prop: "prop_images",
            default: []
        },
        prop_imageMaxWidth: {
            prop: "prop_imageMaxWidth",
            default: null
        }
    };



    /* ---------------------------------------------
           PROPERTYs Props
    --------------------------------------------- */
    _COMPONENT_PROPS = {
        part_structure: [],

        part_label: [

        ],

        part_border: [
            this._COMPONENT_PATTERN.prop_borderClass,
            this._COMPONENT_PATTERN.prop_borderStyles
        ],

        part_btn_next: [],

        part_btn_previous: [],

        part_bottom_selector: [
            this._COMPONENT_PATTERN.prop_imageDuration,
            this._COMPONENT_PATTERN.prop_imageSelected,
            this._COMPONENT_PATTERN.prop_images
        ],

        part_images: [
            this._COMPONENT_PATTERN.prop_imageMaxWidth,
            this._COMPONENT_PATTERN.prop_imageSelected,
            this._COMPONENT_PATTERN.prop_images
        ]
    };



    /* ---------------------------------------------
   PROPERTYs Schema
   --------------------------------------------- */
    _COMPONENT_SCHEMA = {
        part_structure: {
            part_label: {} ,
            part_border: {
                part_btn_next : {} ,
                part_btn_previous : {} ,
                part_bottom_selector : {} ,
                part_images : {} ,
            }
        }
    }

}
window.ComponentSliderShowOverlapping = class ComponentSliderShowOverlapping extends ComponentSliderShowOverlappingBase {

    _TILE_INTERVAL = null;

    /* ---------------------------------------------
       SETUP
   --------------------------------------------- */
    constructor(elId, config) {
        super(
            listComponent[ComponentSliderShowOverlapping.name] ,
            elId
        );
        super.renderComponent(config);
    }


    /* ---------------------------------------------
     TEMPLATEs
    --------------------------------------------- */
    componentFn() {
        this.templateFn("part_label");
        this.templateFn("part_border");
        this.templateFn("part_btn_next");
        this.templateFn("part_btn_previous");

        this.fn_defineTimeInterval();
    }

    templateFn(partName = null) {
        switch (partName) {
            case "part_structure":
                return this.template_render_structure(partName);
            case "part_label":
                return this.componentFn_render_label(partName);
            case "part_border":
                return this.componentFn_render_border(partName);
            case "part_btn_next":
                return this.componentFn_render_iconBtnNext(partName);
            case "part_btn_previous":
                return this.componentFn_render_iconBtnPrevious(partName);
            case "part_bottom_selector":
                return this.template_render_bottomSelector(partName);
            case "part_images":
                return this.template_render_images(partName);
            default:
                return this.templateBasic_render();
        }
    }

    template_render_structure(partName) {
        const content = `
<component-label id="component-slider-show-overlapping-label-${this._COMPONENT_RANDOM_ID}"></component-label>

<component-border id="component-slider-show-overlapping-border-${this._COMPONENT_RANDOM_ID}">
    <component-body>
        
        <style>
        
          #${this._COMPONENT_ID} #component-slider-show-overlapping-btn-pervious-${this._COMPONENT_RANDOM_ID}{
              transition: opacity 250ms ease;
              opacity:0.4;
          }
          #${this._COMPONENT_ID} #component-slider-show-overlapping-btn-next-${this._COMPONENT_RANDOM_ID}{
              transition: opacity 250ms ease;
              opacity:0.4;
          }
        
          #${this._COMPONENT_ID} #component-slider-show-overlapping-border-${this._COMPONENT_RANDOM_ID}:hover #component-slider-show-overlapping-btn-pervious-${this._COMPONENT_RANDOM_ID}{
              opacity:1;
          }
          #${this._COMPONENT_ID} #component-slider-show-overlapping-border-${this._COMPONENT_RANDOM_ID}:hover #component-slider-show-overlapping-btn-next-${this._COMPONENT_RANDOM_ID}{
             opacity:1;
          }
          
       </style>
   
       <component-icon id="component-slider-show-overlapping-btn-pervious-${this._COMPONENT_RANDOM_ID}"></component-icon>
       
       <component-icon id="component-slider-show-overlapping-btn-next-${this._COMPONENT_RANDOM_ID}"></component-icon>
       
       ${this.templateFn("part_bottom_selector") ?? ""}
       
       ${this.templateFn("part_images") ?? ""}
       
   </component-body>
</component-border>
                `;
        return this.templateBasic_render_structure(content);
    }

    template_render_bottomSelector(partName) {

        const data = this.getPartProps(partName)

        if (data != null) {

            const prop_imageSelected   =  data.hasOwnProperty("prop_imageSelected")      ?  data.prop_imageSelected     : 0;
            const prop_images          =  data.hasOwnProperty("prop_images")                ?  data.prop_images            : [];
            let htmlSelector = "";
            if (prop_images != null && Array.isArray(prop_images)){
                for (let i = 0; i < prop_images.length ; i++) {
                    htmlSelector += `<div class="item-for-selected mx-1 float-start ${ prop_imageSelected == i ? 'item-selected' : ''}" onclick="${this.getFn('fn_selectItemImage' , 'event' , i)}"></div>`
                }
            }


            return `
<section data-part-name="${partName}" 
         id="component-slider-show-overlapping-bottom-selector-${this._COMPONENT_RANDOM_ID}" 
         class="position-absolute" >
         
    <style>
        #${this._COMPONENT_ID} #component-slider-show-overlapping-bottom-selector-${this._COMPONENT_RANDOM_ID}{
            bottom: 0%;
            left: 50%;
            transform: translate(-50% , -50%);
            z-index : ${tools_css.getZIndex(tools_css.standardZIndex.tools_btn.name, 2)};
       }
       #${this._COMPONENT_ID} #component-slider-show-overlapping-bottom-selector-${this._COMPONENT_RANDOM_ID} .item-for-selected{
            width:10px;
            height: 10px;
            border-radius: 100%;
            cursor: pointer;
            border: #9b9b9b 2px solid;
       }
       #${this._COMPONENT_ID} #component-slider-show-overlapping-bottom-selector-${this._COMPONENT_RANDOM_ID} .item-selected{
            width:20px !important;
            border-radius: 25px !important;
            background-color: white;
       }
    </style>
    
    ${htmlSelector}
    
</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    template_render_images(partName) {

        const data = this.getPartProps(partName)

        if (data != null) {
            const prop_imageMaxWidth   =  data.hasOwnProperty("prop_imageMaxWidth")      ?  data.prop_imageMaxWidth     : null;
            const prop_imageSelected   =  data.hasOwnProperty("prop_imageSelected")      ?  data.prop_imageSelected     : 0;
            const prop_images          =  data.hasOwnProperty("prop_images")             ?  data.prop_images            : [];

            let htmlImg = "";
            if (prop_images != null && Array.isArray(prop_images)){
                for (let i = 0; i < prop_images.length ; i++) {
                    if (prop_imageSelected == i){
                        htmlImg += `<img src="${prop_images[i]}" alt="" class="d-block"/>`
                        break;
                    }
                }
            }

            return `
<section data-part-name="${partName}" 
         id="component-slider-show-overlapping-images-${this._COMPONENT_RANDOM_ID}" 
         class="" >
         
    <style>
        #${this._COMPONENT_ID} #component-slider-show-overlapping-images-${this._COMPONENT_RANDOM_ID}{
            
        }
        #${this._COMPONENT_ID} #component-slider-show-overlapping-images-${this._COMPONENT_RANDOM_ID} img{
            margin: auto;
            display: block;
            max-width: ${prop_imageMaxWidth != null ? prop_imageMaxWidth+"px" : "100%"} !important;
            z-index : ${tools_css.getZIndex(tools_css.standardZIndex.menu_main.name, 1)};
       }
       
       @media (max-width: ${prop_imageMaxWidth != null ? prop_imageMaxWidth + 100 + "px" : ""}) {
          #${this._COMPONENT_ID} #component-slider-show-overlapping-images-${this._COMPONENT_RANDOM_ID} img{
            max-width: 100% !important ;
          }
       }
       
    </style>
    
    ${htmlImg}
    
</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    componentFn_render_label(partName) {
        this.componentFneBasic_render_structure(
            `component-slider-show-overlapping-label-${this._COMPONENT_RANDOM_ID}` ,
            {
                prop_for:  `component-input-input-${ this._COMPONENT_RANDOM_ID}`
            }
        );
    }

    componentFn_render_border(partName) {
        const data = this.getPartProps(partName);

        if (data != null){
            const prop_borderClass       =  data.hasOwnProperty("prop_borderClass")             ?  data.prop_borderClass         : [];
            const prop_borderStyles      =  data.hasOwnProperty("prop_borderStyles")            ?  data.prop_borderStyles        : {};

            //---------------
            prop_borderStyles["position"] = "relative";


            new window.ComponentBorder(
                `component-slider-show-overlapping-border-${this._COMPONENT_RANDOM_ID}` ,
                {
                    prop_structureClass:  prop_borderClass ,
                    prop_structureStyles: prop_borderStyles ,
                }
            )
        }

    }

    componentFn_render_iconBtnNext(partName) {
        const data = this.getPartProps(partName);

        if (data != null){
            let styles = {
                "width" : "45px" ,
                "height" : "45px" ,
                "border-radius" : "100%" ,
                "line-height" : "40px" ,
                "top" : "50%" ,
                "transform" : "translate(-50%, -50%)" ,
                "z-index" : `${tools_css.getZIndex(tools_css.standardZIndex.tools_btn.name, 2)}` ,
            }
            if (this._COMPONENT_CONFIG.hasOwnProperty("directionRtl") && this._COMPONENT_CONFIG.directionRtl){
                styles[ "left"] = "0";
            }
            else{
                styles[ "right"] = "-45px";
            }

            new window.ComponentIcon(
                `component-slider-show-overlapping-btn-next-${this._COMPONENT_RANDOM_ID}` ,
                {
                    classList:     [ "position-absolute" , "border" , 'shadow-sm' , "bg-white" , "text-center"] ,
                    styles:     styles,
                    prop_icon:     "&gt;"  ,

                    prop_iconClass : ["d-block" , "text-center" ] ,
                    prop_iconStyles : {
                        "cursor" : "pointer" ,
                        "font-size" : "20pt" ,
                        "color" : "#cecece" ,
                    } ,

                    fn_callback: (event) =>{
                        this.fn_gotoNextImage(event);
                    }
                }
            )

        }
    }

    componentFn_render_iconBtnPrevious(partName) {
        const data = this.getPartProps(partName);

        if (data != null){
            let styles = {
                "width" : "45px" ,
                "height" : "45px" ,
                "border-radius" : "100%" ,
                "line-height" : "40px" ,
                "top" : "50%" ,
                "right" : "0%" ,
                "transform" : "translate(-50%, -50%)" ,
                "z-index" : `${tools_css.getZIndex(tools_css.standardZIndex.tools_btn.name, 2)}` ,
            }
            if (this._COMPONENT_CONFIG.hasOwnProperty("directionRtl") && this._COMPONENT_CONFIG.directionRtl){
                styles[ "right"] = "-45px";
            }
            else{
                styles[ "left"] = "0";
            }

            new window.ComponentIcon(
                `component-slider-show-overlapping-btn-pervious-${this._COMPONENT_RANDOM_ID}` ,
                {
                    classList:     [ "position-absolute" , "border" , 'shadow-sm' , "bg-white" , "text-center"] ,
                    styles:       styles,
                    prop_icon:     "&lt;"  ,

                    prop_iconClass : ["d-block" , "text-center" ] ,
                    prop_iconStyles : {
                        "cursor" : "pointer" ,
                        "font-size" : "20pt" ,
                        "color" : "#cecece" ,
                    } ,

                    fn_callback: (event) =>{
                        this.fn_gotoPreviousImage(event);
                    }
                }
            )

        }
    }


    /* ---------------------------------------------
       FUNCTIONs
    --------------------------------------------- */
    fn_gotoNextImage(event){
        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("prop_imageSelected")){
            this.fn_selectItemImage(event , data.prop_imageSelected + 1 );
        }
    }
    fn_gotoPreviousImage(event, timeInterval=true){
        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("prop_imageSelected")){
            this.fn_selectItemImage(event , data.prop_imageSelected - 1 );
        }
    }

    fn_selectItemImage(event , indexImage ){

        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("prop_images")){
            const length = data.prop_images.length;
            if (indexImage >= 0 && indexImage <= length-1){
                this.fn_defineTimeInterval(indexImage);
            }
            else if (indexImage > length-1){
                this.fn_defineTimeInterval(0);
            }
            else if (indexImage < 0){
                this.fn_defineTimeInterval( length-1);
            }
        }
    }

    fn_defineTimeInterval(indexImage = null){

        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("prop_imageDuration")){

            if (indexImage != null){
                this.set("prop_imageSelected" , indexImage);
            }

            if (this._TILE_INTERVAL != null){
                clearInterval(this._TILE_INTERVAL)
            }

            this._TILE_INTERVAL = setInterval(() => {
                this.fn_gotoNextImage();
            } , data.prop_imageDuration);

        }
    }

}




//===============================================================================================================
// [30 - 39] collapse and windows -> [033] Breadcrumb
//===============================================================================================================

/*-------------------------------------
 033-01) Breadcrumb
-------------------------------------*/
class ComponentBreadcrumbBase extends ComponentBase{

    /* ---------------------------------------------
       PROPERTYs Pattern
--------------------------------------------- */
    _COMPONENT_PATTERN = {
        prop_showBtn: {
            prop: "prop_showBtn",
            default: true
        },
        prop_unactiveBreadcrumb: {
            prop: "prop_unactiveBreadcrumb",
            default: tools_const.hasOwnProperty("styles") && tools_const.styles.hasOwnProperty("breadcrumb") && tools_const.styles.breadcrumb.hasOwnProperty("backgroundColor_unactive") ? tools_const.styles.breadcrumb.backgroundColor_unactive : ""
        },
        prop_colorUnactive: {
            prop: "prop_colorUnactive",
            default: tools_const.hasOwnProperty("styles") && tools_const.styles.hasOwnProperty("breadcrumb") && tools_const.styles.breadcrumb.hasOwnProperty("color_unactive") ? tools_const.styles.breadcrumb.color_unactive : ""
        },
        prop_activeBreadcrumb: {
            prop: "prop_activeBreadcrumb",
            default: tools_const.hasOwnProperty("styles") && tools_const.styles.hasOwnProperty("breadcrumb") && tools_const.styles.breadcrumb.hasOwnProperty("backgroundColor_active") ? tools_const.styles.breadcrumb.backgroundColor_active : ""
        },
        prop_colorActive: {
            prop: "prop_colorActive",
            default: tools_const.hasOwnProperty("styles") && tools_const.styles.hasOwnProperty("breadcrumb") && tools_const.styles.breadcrumb.hasOwnProperty("color_active") ? tools_const.styles.breadcrumb.color_active : ""
        },
        prop_breadcrumbs: {
            prop: "prop_breadcrumbs",
            default: []
        },
        prop_stepSelected: {
            prop: "prop_stepSelected",
            default: 1
        }
    };

    /* ---------------------------------------------
           PROPERTYs Props
    --------------------------------------------- */
    _COMPONENT_PROPS = {
        part_structure: [],
        part_scroller: [],
        part_btnBack: [
            this._COMPONENT_PATTERN.prop_showBtn
        ],
        part_breadcrumbs: [
            this._COMPONENT_PATTERN.prop_unactiveBreadcrumb,
            this._COMPONENT_PATTERN.prop_colorUnactive,
            this._COMPONENT_PATTERN.prop_activeBreadcrumb,
            this._COMPONENT_PATTERN.prop_colorActive,
            this._COMPONENT_PATTERN.prop_breadcrumbs,
            this._COMPONENT_PATTERN.prop_stepSelected
        ]
    };



    /* ---------------------------------------------
   PROPERTYs Schema
   --------------------------------------------- */
    _COMPONENT_SCHEMA = {
        part_structure: {
            part_scroller:{
                part_btnBack:{} ,
                part_breadcrumbs:{}
            }
        }
    }

}
window.ComponentBreadcrumb = class ComponentBreadcrumb extends ComponentBreadcrumbBase {

    _TILE_INTERVAL = null;

    /* ---------------------------------------------
       SETUP
   --------------------------------------------- */
    constructor(elId, config) {
        super(
            listComponent[ComponentBreadcrumb.name] ,
            elId
        );
        super.renderComponent(config);
    }


    /* ---------------------------------------------
     TEMPLATEs
    --------------------------------------------- */
    componentFn() {
    }

    templateFn(partName = null) {
        switch (partName) {
            case "part_structure":
                return this.template_render_structure(partName);

            case "part_btnBack":
                return this.template_render_btnBack(partName);

            case "part_scroller":
                return this.template_render_scroller(partName);

            case "part_breadcrumbs":
                return this.template_render_breadcrumbs(partName);

            default:
                return this.templateBasic_render();
        }
    }

    template_render_structure(partName) {
        const content = `
       ${this.templateFn("part_scroller") ?? ""}
                `;
        return this.templateBasic_render_structure(content);
    }



    template_render_scroller(partName) {
        const data = this.getPartProps(partName)

        if (data != null) {

            return `
<section data-part-name="${partName}" 
         id="component-breadcrumb-scroller-${this._COMPONENT_RANDOM_ID}" 
         class="w-100 position-relative" >
         
    <style>
        #${this._COMPONENT_ID} #component-breadcrumb-scroller-${this._COMPONENT_RANDOM_ID}{

        }
    </style>
    
     ${this.templateFn("part_btnBack") ?? ""}
     ${this.templateFn("part_breadcrumbs") ?? ""}
    
</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }


    template_render_btnBack(partName) {
        const data = this.getPartProps(partName)

        if (data != null) {
            const directionRtl               =  this._COMPONENT_CONFIG.hasOwnProperty("directionRtl")  ? this._COMPONENT_CONFIG.directionRtl      : false;
            const prop_showBtn               =  data.hasOwnProperty("prop_showBtn")                    ?  data.prop_showBtn                       : true;

            if (prop_showBtn){

                return `
<section data-part-name="${partName}" 
         id="component-breadcrumb-btn-back-${this._COMPONENT_RANDOM_ID}" 
         class="position-absolute border shadow-sm bg-white text-center rounded" onclick="${this.getFn('fn_onBackClick' , 'event')}">
         
    <style>
        #${this._COMPONENT_ID} #component-breadcrumb-btn-back-${this._COMPONENT_RANDOM_ID}{
             ${directionRtl ? 'right' : 'left'} : 0;
             top: 0;
             transform: translate(0 , 0);
             width: 30px;
             height: 30px;
             z-index : ${tools_css.getZIndex(tools_css.standardZIndex.tools_btn.name, 10)} ,
             cursor: pointer;
             font-size: 20pt;
             line-height: 30px;
        }
    </style>
    
     ${directionRtl ? "&#129170" : "&#129168"}
    
</section>
        `;
            }

        }
    }


    template_render_breadcrumbs(partName) {
        const data = this.getPartProps(partName)

        if (data != null) {

            const directionRtl               =  this._COMPONENT_CONFIG.hasOwnProperty("directionRtl")  ? this._COMPONENT_CONFIG.directionRtl      : false;

            const prop_unactiveBreadcrumb    =  data.hasOwnProperty("prop_unactiveBreadcrumb")         ?  data.prop_unactiveBreadcrumb            : "";
            const prop_colorUnactive         =  data.hasOwnProperty("prop_colorUnactive")              ?  data.prop_colorUnactive                 : "";
            const prop_activeBreadcrumb      =  data.hasOwnProperty("prop_activeBreadcrumb")           ?  data.prop_activeBreadcrumb              : "";
            const prop_colorActive           =  data.hasOwnProperty("prop_colorActive")                ?  data.prop_colorActive                   : "";
            const prop_breadcrumbs           =  data.hasOwnProperty("prop_breadcrumbs")                ?  data.prop_breadcrumbs                   : [];
            const prop_stepSelected          =  data.hasOwnProperty("prop_stepSelected")               ?  data.prop_stepSelected                  : 1;

            const {style , html} = this.fn_readyListBreadCrumb(prop_breadcrumbs , prop_activeBreadcrumb , prop_colorActive , prop_unactiveBreadcrumb , prop_colorUnactive , prop_stepSelected , directionRtl);

            return `
<section data-part-name="${partName}" 
         id="component-breadcrumb-breadcrumbs-${this._COMPONENT_RANDOM_ID}" 
         class="" >
         
    <style>
    
        #${this._COMPONENT_ID} #component-breadcrumb-breadcrumbs-${this._COMPONENT_RANDOM_ID}{
              display: flex;
              white-space: nowrap;
              overflow-x: auto;
        } 
       
        ${style}
 
    </style>
    
    ${html}
    
</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }





    /* ---------------------------------------------
       FUNCTIONs
    --------------------------------------------- */
    fn_readyListBreadCrumb(prop_breadcrumbs , prop_activeBreadcrumb , color_active , prop_unactiveBreadcrumb , color_unactive , prop_stepSelected , directionRtl){
        let reusltExp = {
            html: "" ,
            style: ""
        }


        if(prop_breadcrumbs != null && Array.isArray(prop_breadcrumbs)){
            for (let i = 0; i < prop_breadcrumbs.length; i++) {
                const item = prop_breadcrumbs[i];
                const itemId = item!= null && item.hasOwnProperty("id") ? item.id : null;

                reusltExp.html += `<div class="item-breadcrumb-${i} position-relative" onclick="${this.getFn("fn_onSelectBreadcrumb" , 'event' , itemId)}"> ${item != null && item.hasOwnProperty("title") ? item.title : "---"} </div>`;

                if (i == 0){
                    reusltExp.style += `
#${this._COMPONENT_ID} #component-breadcrumb-breadcrumbs-${this._COMPONENT_RANDOM_ID} .item-breadcrumb-${i}{
            height: 30px;
            line-height: 30px;
            padding-left: ${directionRtl ? "30px": "45px"} ;
            padding-right: ${directionRtl ? "45px": "30px"} ;
            background-color: ${item != null && item.hasOwnProperty("id") && item.id == prop_stepSelected ? prop_activeBreadcrumb : prop_unactiveBreadcrumb};
            color: ${item != null && item.hasOwnProperty("id") && item.id == prop_stepSelected ? color_active : color_unactive};
            float: left;
            cursor: pointer;  
        
            z-index: ${prop_breadcrumbs.length - i};
        
            border-radius:  ${directionRtl ? "0 5px 5px 0": "5px 0 0 5px"} ;
        }  
 #${this._COMPONENT_ID} #component-breadcrumb-breadcrumbs-${this._COMPONENT_RANDOM_ID} .item-breadcrumb-${i}:after{
           content: "";
           ${directionRtl ? "left": "right"} :  -30px;
           top: 0;
           position: absolute;
           width: 0px;
           height: 0px;
           border-style: solid;
           border-width: ${directionRtl ? " 15px 30px 15px 0": " 15px 0 15px 30px"};
           border-color: ${directionRtl ? `transparent ${item != null && item.hasOwnProperty("id") && item.id == prop_stepSelected ? prop_activeBreadcrumb : prop_unactiveBreadcrumb}  transparent transparent;`: `transparent transparent transparent ${item != null && item.hasOwnProperty("id") && item.id == prop_stepSelected ? prop_activeBreadcrumb : prop_unactiveBreadcrumb}`}; 
           transform: rotate(0deg);
        } 
#${this._COMPONENT_ID} #component-breadcrumb-breadcrumbs-${this._COMPONENT_RANDOM_ID} .item-breadcrumb-${i}:before{
           content: "";
           ${directionRtl ? "left": "right"} :  -36px;
           top: 0;
           position: absolute;
           width: 0px;
           height: 0px;
           border-style: solid;
           border-width: ${directionRtl ? " 15px 30px 15px 0": " 15px 0 15px 30px"};
           border-color: ${directionRtl ? "  transparent #fff transparent transparent ": "  transparent transparent transparent #fff "};
           transform: rotate(0deg);
        } 
                    `;

                }
                else if (i > 0 && i<prop_breadcrumbs.length - 1){

                    reusltExp.style += `
#${this._COMPONENT_ID} #component-breadcrumb-breadcrumbs-${this._COMPONENT_RANDOM_ID} .item-breadcrumb-${i}{
            height: 30px;
            line-height: 30px;
            padding-left: ${directionRtl ? "30px": "45px"} ;
            padding-right: ${directionRtl ? "45px": "30px"} ;
            background-color: ${item != null && item.hasOwnProperty("id") && item.id == prop_stepSelected ? prop_activeBreadcrumb : prop_unactiveBreadcrumb};
            color: ${item != null && item.hasOwnProperty("id") && item.id == prop_stepSelected ? color_active : color_unactive};
            float: left;
            cursor: pointer;  
        
            z-index: ${prop_breadcrumbs.length - i};
        }  
 #${this._COMPONENT_ID} #component-breadcrumb-breadcrumbs-${this._COMPONENT_RANDOM_ID} .item-breadcrumb-${i}:after{
           content: "";
            ${directionRtl ? "left": "right"} :  -30px;
           top: 0;
           position: absolute;
           width: 0px;
           height: 0px;
           border-style: solid;
           border-width: ${directionRtl ? " 15px 30px 15px 0": " 15px 0 15px 30px"};
           border-color: ${directionRtl ? `transparent ${item != null && item.hasOwnProperty("id") && item.id == prop_stepSelected ? prop_activeBreadcrumb : prop_unactiveBreadcrumb}  transparent transparent;`: `transparent transparent transparent ${item != null && item.hasOwnProperty("id") && item.id == prop_stepSelected ? prop_activeBreadcrumb : prop_unactiveBreadcrumb}`}; 
           transform: rotate(0deg);
        } 
#${this._COMPONENT_ID} #component-breadcrumb-breadcrumbs-${this._COMPONENT_RANDOM_ID} .item-breadcrumb-${i}:before{
           content: "";
           ${directionRtl ? "left": "right"} :  -36px;
           top: 0;
           position: absolute;
           width: 0px;
           height: 0px;
           border-style: solid;
           border-width: ${directionRtl ? " 15px 30px 15px 0": " 15px 0 15px 30px"};
           border-color: ${directionRtl ? "  transparent #fff transparent transparent ": "  transparent transparent transparent #fff "};
           transform: rotate(0deg);
        } 
                    `;

                }
                else if ( i == prop_breadcrumbs.length - 1){
                    reusltExp.style += `
#${this._COMPONENT_ID} #component-breadcrumb-breadcrumbs-${this._COMPONENT_RANDOM_ID} .item-breadcrumb-${i}{
            height: 30px;
            line-height: 30px;
            padding-left: ${directionRtl ? "30px": "45px"} ;
            padding-right: ${directionRtl ? "45px": "30px"} ;
            background-color: ${item != null && item.hasOwnProperty("id") && item.id == prop_stepSelected ? prop_activeBreadcrumb : prop_unactiveBreadcrumb};
            color: ${item != null && item.hasOwnProperty("id") && item.id == prop_stepSelected ? color_active : color_unactive};
            float: left;
            cursor: pointer;  
        
            z-index: ${prop_breadcrumbs.length - i};
            
            border-radius:  ${directionRtl ? "5px 0 0 5px": " 0 5px 5px 0"} ;
        }  
                    `;
                }

            }
        }

        return reusltExp;
    }


    fn_onSelectBreadcrumb(event , itemId){
        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("fn_callback") && typeof data.fn_callback != null){
            const prop_breadcrumbs = data.hasOwnProperty("prop_breadcrumbs") ? data.prop_breadcrumbs : [];

            let itemData = null;
            if (prop_breadcrumbs != null && Array.isArray(prop_breadcrumbs)){
                for (let i = 0; i < prop_breadcrumbs.length; i++) {
                    const item = prop_breadcrumbs[i];
                    if (item.hasOwnProperty("id") && item.id == itemId){
                        itemData = item;
                        break;
                    }
                }
            }

            data.fn_callback(event , itemData);
        }
    }


    fn_onBackClick(event){
        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("fn_onBackClick") && typeof data.fn_onBackClick != null){
            const prop_stepSelected = data.hasOwnProperty("prop_stepSelected") ? data.prop_stepSelected : null;

            data.fn_onBackClick(event , prop_stepSelected);
        }
    }

}


/*-------------------------------------
 033-02) Breadcrumb wuth arrow
-------------------------------------*/
class ComponentBreadcrumbWithArrowBase extends ComponentBase{

    /* ---------------------------------------------
       PROPERTYs Pattern
    --------------------------------------------- */
    _COMPONENT_PATTERN = {
        prop_side: {
            prop: "prop_side",
            default: 20
        },
        prop_length: {
            prop: "prop_length",
            default: 120
        },
        prop_gap: {
            prop: "prop_gap",
            default: 6
        },
        prop_height: {
            prop: "prop_height",
            default: 25
        },
        prop_breadcrumbs: {
            prop: "prop_breadcrumbs",
            default: []
        },
        prop_stepSelected: {
            prop: "prop_stepSelected",
            default: 1
        },
        prop_marginMinPerent: {
            prop: "prop_marginMinPerent",
            default: 10
        },

        prop_unactiveBreadcrumb: {
            prop: "prop_unactiveBreadcrumb",
            default: tools_const.hasOwnProperty("styles") && tools_const.styles.hasOwnProperty("breadcrumbWithArrow") && tools_const.styles.breadcrumbWithArrow.hasOwnProperty("backgroundColor_unactive") ? tools_const.styles.breadcrumbWithArrow.backgroundColor_unactive : ""
        },
        prop_colorUnactive: {
            prop: "prop_colorUnactive",
            default: tools_const.hasOwnProperty("styles") && tools_const.styles.hasOwnProperty("breadcrumbWithArrow") && tools_const.styles.breadcrumbWithArrow.hasOwnProperty("color_unactive") ? tools_const.styles.breadcrumbWithArrow.color_unactive : ""
        },
        prop_activeBreadcrumb: {
            prop: "prop_activeBreadcrumb",
            default: tools_const.hasOwnProperty("styles") && tools_const.styles.hasOwnProperty("breadcrumbWithArrow") && tools_const.styles.breadcrumbWithArrow.hasOwnProperty("backgroundColor_active") ? tools_const.styles.breadcrumbWithArrow.backgroundColor_active : ""
        },
        prop_colorActive: {
            prop: "prop_colorActive",
            default: tools_const.hasOwnProperty("styles") && tools_const.styles.hasOwnProperty("breadcrumbWithArrow") && tools_const.styles.breadcrumbWithArrow.hasOwnProperty("color_active") ? tools_const.styles.breadcrumbWithArrow.color_active : ""
        },
        prop_colorShadow: {
            prop: "prop_colorShadow",
            default: tools_const.hasOwnProperty("styles") && tools_const.styles.hasOwnProperty("breadcrumbWithArrow") && tools_const.styles.breadcrumbWithArrow.hasOwnProperty("color_shadow") ? tools_const.styles.breadcrumbWithArrow.color_shadow : ""
        },
    };

    /* ---------------------------------------------
           PROPERTYs Props
    --------------------------------------------- */
    _COMPONENT_PROPS = {
        part_structure: [],
        part_breadcrumbs: [
            this._COMPONENT_PATTERN.prop_side,
            this._COMPONENT_PATTERN.prop_length,
            this._COMPONENT_PATTERN.prop_gap,
            this._COMPONENT_PATTERN.prop_height,
            this._COMPONENT_PATTERN.prop_breadcrumbs,
            this._COMPONENT_PATTERN.prop_stepSelected,
            this._COMPONENT_PATTERN.prop_marginMinPerent,
            this._COMPONENT_PATTERN.prop_unactiveBreadcrumb,
            this._COMPONENT_PATTERN.prop_colorUnactive,
            this._COMPONENT_PATTERN.prop_activeBreadcrumb,
            this._COMPONENT_PATTERN.prop_colorActive ,
            this._COMPONENT_PATTERN.prop_colorShadow ,
        ]
    };



    /* ---------------------------------------------
   PROPERTYs Schema
   --------------------------------------------- */
    _COMPONENT_SCHEMA = {
        part_structure: {
            part_breadcrumbs:{}
        }
    }

}
window.ComponentBreadcrumbWithArrow = class ComponentBreadcrumbWithArrow extends ComponentBreadcrumbWithArrowBase {
    _TODO_RESIZE_SCREEN = null;

    /* ---------------------------------------------
       SETUP
   --------------------------------------------- */
    constructor(elId, config) {
        super(
            listComponent[ComponentBreadcrumbWithArrow.name] ,
            elId
        );
        super.renderComponent(config);
    }


    /* ---------------------------------------------
     TEMPLATEs
    --------------------------------------------- */
    componentFn() {
        this.onRegisterFinish().then(el => {
            this.fn_renderBreadCrumb();
        })
    }

    templateFn(partName = null) {

        switch (partName) {
            case "part_structure":
                return this.template_render_structure(partName);

            case "part_breadcrumbs":
                return this.template_render_breadcrumbs(partName);

            default:
                return this.templateBasic_render();
        }
    }

    template_render_structure(partName) {
        const content = `
            ${this.templateFn("part_breadcrumbs") ?? ""}
        `;
        return this.templateBasic_render_structure(content);
    }

    template_render_breadcrumbs(partName) {
        const data = this.getPartProps(partName)

        if (data != null) {
            let prop_height          = data.hasOwnProperty("prop_height")           ?  data.prop_height             : 25;

            return `
<section data-part-name="${partName}" 
         id="component-breadcrumb-breadcrumbs-with-arrow-${this._COMPONENT_RANDOM_ID}" 
         class="" >
         
    <style>
    
        #${this._COMPONENT_ID} #component-breadcrumb-breadcrumbs-with-arrow-${this._COMPONENT_RANDOM_ID}{
              
        } 

    </style>
    
    <svg id="component-breadcrumb-breadcrumbs-with-arrow-${this._COMPONENT_RANDOM_ID}-svg" width="100%" height="${prop_height*2.5}" ></defs>
</svg>
    
</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }



    /* ---------------------------------------------
       FUNCTIONs
    --------------------------------------------- */
    fn_getElementSvg(){
        return document.querySelector(`#${this._COMPONENT_ID} #component-breadcrumb-breadcrumbs-with-arrow-${this._COMPONENT_RANDOM_ID}-svg`);
    }

    fn_renderBreadCrumb(){
        window.addEventListener('resize', this.fn_renderBreadCrumb_resize.bind(this));
        this.fn_renderBreadCrumb_resize();
    }

    fn_renderBreadCrumb_resize(){
        if (this._TODO_RESIZE_SCREEN != null) clearTimeout(this._TODO_RESIZE_SCREEN)

        this._TODO_RESIZE_SCREEN = setTimeout(
            () => {
                const data = this._COMPONENT_CONFIG;
                if (data.hasOwnProperty("prop_breadcrumbs")){
                    const prop_breadcrumbs         =  data.prop_breadcrumbs;
                    const prop_stepSelected        =  data.hasOwnProperty("prop_stepSelected")         ? data.prop_stepSelected           : 0;
                    const prop_unactiveBreadcrumb  =  data.hasOwnProperty("prop_unactiveBreadcrumb")   ? data.prop_unactiveBreadcrumb     : "";
                    const  prop_colorUnactive      =  data.hasOwnProperty("prop_colorUnactive")        ? data.prop_colorUnactive          : "";
                    const prop_activeBreadcrumb    =  data.hasOwnProperty("prop_activeBreadcrumb")     ? data.prop_activeBreadcrumb       : "";
                    const  prop_colorActive        =  data.hasOwnProperty("prop_colorActive")          ? data.prop_colorActive            : "";
                    const  prop_colorShadow        =  data.hasOwnProperty("prop_colorShadow")          ? data.prop_colorShadow            : "";

                    const isWideScreen = tools_css.checkMoreThanScreanWidth(tools_css.standardScreanWidth.m.name);
                    if (isWideScreen){
                        this.fn_renderBreadCrumb_resize_isForPc(prop_breadcrumbs , prop_stepSelected , prop_unactiveBreadcrumb , prop_colorUnactive , prop_activeBreadcrumb , prop_colorActive , prop_colorShadow);
                    }
                    else {
                        this.fn_renderBreadCrumb_resize_isForMobile(prop_breadcrumbs , prop_stepSelected, prop_unactiveBreadcrumb , prop_colorUnactive , prop_activeBreadcrumb , prop_colorActive , prop_colorShadow);
                    }
                }
            } ,
            200
        )
    }


    fn_renderBreadCrumb_resize_isForMobile(prop_breadcrumbs , prop_stepSelected, prop_unactiveBreadcrumb , prop_colorUnactive , prop_activeBreadcrumb , prop_colorActive , prop_colorShadow){
        const data = this._COMPONENT_CONFIG;
        const svg = this.fn_getElementSvg();
        svg.innerHTML = "";
        const shadowMarker = tools_svg.addMarker(svg , "shadow" , prop_colorShadow);

        const directionRtl       = data.hasOwnProperty("directionRtl")          ? data.directionRtl : (component_props != null && component_props.hasOwnProperty("directionRtl") ? component_props.directionRtl : false)

        let prop_height          = data.hasOwnProperty("prop_height")           ?  data.prop_height             : 25;
        let prop_marginMinPerent = data.hasOwnProperty("prop_marginMinPerent")  ?  data.prop_marginMinPerent    : 10;

        const stepLength = prop_breadcrumbs.length;
        const svgWidth   = svg.width.baseVal.value;
        const marginMin  = (prop_marginMinPerent/10)*svgWidth;
        const margin     = marginMin
        const partWidth  = (svgWidth - 2*margin)/stepLength;

        for (let number = 0; number < stepLength ; number++) {
            const step = prop_breadcrumbs[number];

            const xStart =  directionRtl ?  margin + ( number )*partWidth :  margin + (stepLength - number - 1)*partWidth;
            const eventListiner = (e) =>{
                this.fn_onBackClick(e , step)
            }

            if (number < stepLength-1 ){
                const linePoints = [
                    {x: directionRtl ? xStart +  partWidth/2    :  xStart +  partWidth/2        , y:  ((3*prop_height/2) - 2)} ,
                    {x: directionRtl ? xStart +  3*partWidth/2  :  xStart -  partWidth/2        , y:  ((3*prop_height/2) - 2)} ,
                    {x: directionRtl ? xStart +  3*partWidth/2  :  xStart -  partWidth/2        , y:  ((3*prop_height/2) + 2)} ,
                    {x: directionRtl ? xStart +  partWidth/2    :  xStart +  partWidth/2        , y:  ((3*prop_height/2) + 2)} ,
                    {x: directionRtl ? xStart +  partWidth/2    :  xStart +  partWidth/2        , y:  ((3*prop_height/2) - 2)} ,
                ]

                const line = tools_svg.craeteSvgPolygon(svg , linePoints ,
                    {
                        "fill" :  number <= prop_stepSelected-1 ? prop_activeBreadcrumb : prop_unactiveBreadcrumb ,
                        "filter" : `url(#${shadowMarker})`
                    },
                    {
                        "click" : eventListiner
                    },
                    {
                        "cursor" : "pointer"
                    });
            }



            const shapeCircle = tools_svg.craeteSvgCircle(svg , xStart+(partWidth/2) , (3*prop_height/2) , prop_height/2  ,
                {
                    "fill" :  number <= prop_stepSelected ? prop_activeBreadcrumb : prop_unactiveBreadcrumb ,
                    "stroke" : number <= prop_stepSelected ? prop_activeBreadcrumb : prop_unactiveBreadcrumb ,
                    "stroke-width" : "2" ,
                    "filter" : `url(#${shadowMarker})`
                },
                {
                    "click" : eventListiner
                },
                {
                    "cursor" : "pointer"
                });


            const shapeText = tools_svg.craeteSvgTextToCenterCircleElement(svg , shapeCircle , 0 , -prop_height , step.title  ,
                {
                    "text-anchor" : "middle" ,
                    "dominant-baseline" : "middle" ,
                    "font-size" : "12" ,
                    "fill" : number <= prop_stepSelected ? prop_activeBreadcrumb : prop_unactiveBreadcrumb ,
                },
                {
                    "click" : eventListiner
                },
                {
                    "cursor" : "pointer"
                });

            if(  number <= prop_stepSelected){
                const shapeTik = tools_svg.craeteSvgPathToCenterCircleElement(svg , shapeCircle , 0  , 0 ,  "M-4,0 L-1,3 L4,-4" ,
                    {
                        "fill" : "none" ,
                        "stroke" :  number <= prop_stepSelected ? prop_colorUnactive : prop_colorActive  ,
                        "stroke-width" : "2" ,
                        "filter" : `url(#${shadowMarker})`
                    },
                    {
                        "click" : eventListiner
                    },
                    {
                        "cursor" : "pointer"
                    });
            }
            else{
                const shapenumber = tools_svg.craeteSvgTextToCenterCircleElement(svg , shapeCircle , 0  , 0 ,  number+1 ,
                    {
                        "text-anchor" : "middle" ,
                        "dominant-baseline" : "middle" ,
                        "font-size" : "12" ,
                        "fill" : number <= prop_stepSelected ? prop_colorUnactive : prop_colorActive  ,
                    },
                    {
                        "click" : eventListiner
                    },
                    {
                        "cursor" : "pointer"
                    });
            }


        }

    }



    fn_renderBreadCrumb_resize_isForPc(prop_breadcrumbs , prop_stepSelected, prop_unactiveBreadcrumb , prop_colorUnactive , prop_activeBreadcrumb , prop_colorActive , prop_colorShadow){
        const data = this._COMPONENT_CONFIG;
        const svg = this.fn_getElementSvg();
        svg.innerHTML = "";
        const shadowMarker = tools_svg.addMarker(svg , "shadow" , prop_colorShadow);

        const directionRtl       = data.hasOwnProperty("directionRtl")          ? data.directionRtl : (component_props != null && component_props.hasOwnProperty("directionRtl") ? component_props.directionRtl : false)

        let prop_side            = data.hasOwnProperty("prop_side")             ?  data.prop_side               : 20;
        let prop_length          = data.hasOwnProperty("prop_length")           ?  data.prop_length             : 120;
        let prop_gap             = data.hasOwnProperty("prop_gap")              ?  data.prop_gap                : 6;
        let prop_height          = data.hasOwnProperty("prop_height")           ?  data.prop_height             : 25;
        let prop_marginMinPerent = data.hasOwnProperty("prop_marginMinPerent")  ?  data.prop_marginMinPerent    : 10;

        const stepLength = prop_breadcrumbs.length;
        const svgWidth   = svg.width.baseVal.value;
        const partWidth  = 3*prop_side +prop_length;
        const marginMin = (prop_marginMinPerent/10)*svgWidth;
        const margin = (svgWidth - stepLength*partWidth)/2 > marginMin/100 ? (svgWidth - stepLength*partWidth)/2  : marginMin/100;

        for (let number = 0; number < stepLength ; number++) {
            const step = prop_breadcrumbs[number];

            const xStart =  directionRtl ?  margin + (stepLength - number - 1)*partWidth : margin + ( number )*partWidth ;
            const eventListiner = (e) =>{
                this.fn_onBackClick(e , step)
            }

            const gapBetween = (directionRtl ? 1 : -1)*5* ( number);


            /// SHAPE A
            let shapeAPoints = [];

            if (directionRtl){

                if (number == stepLength-1 ){
                    shapeAPoints.push({x: xStart + prop_side + gapBetween                              , y: 0})
                }
                else {
                    shapeAPoints.push({x: xStart + 2*prop_side + gapBetween                             , y: 0})
                }

                shapeAPoints.push({x: xStart + 3*prop_side+prop_length + gapBetween                     , y: 0})

                if (number == 0){
                    shapeAPoints.push({x: xStart + 3*prop_side+prop_length + gapBetween                , y: prop_height})
                }
                else {
                    shapeAPoints.push({x: xStart + 2*prop_side+prop_length + gapBetween                , y: prop_height})
                }

                shapeAPoints.push({x: xStart + 3*prop_side+prop_length + gapBetween                    , y: 2*prop_height})

                if (number == stepLength-1 ){
                    shapeAPoints.push({x: xStart + prop_side + gapBetween                              , y: 2*prop_height})
                }
                else {
                    shapeAPoints.push({x: xStart + 2*prop_side + gapBetween                            , y: 2*prop_height})
                }

                shapeAPoints.push({x: xStart + prop_side + gapBetween                                , y: prop_height})

                if (number == stepLength-1 ){
                    shapeAPoints.push({x: xStart + prop_side + gapBetween                              , y: 0})
                }
                else {
                    shapeAPoints.push({x: xStart + 2*prop_side + gapBetween                            , y: 0})
                }

            }
            else{
                shapeAPoints.push({x: xStart+ gapBetween                                              , y: 0})

                if (number == stepLength-1 ){
                    shapeAPoints.push({x: xStart + 2*prop_side+prop_length+ gapBetween                , y: 0})
                }
                else {
                    shapeAPoints.push({x: xStart + prop_side+prop_length+ gapBetween                , y: 0})
                }

                shapeAPoints.push({x: xStart + 2*prop_side+prop_length+ gapBetween                    , y: prop_height})

                if (number == stepLength-1 ){
                    shapeAPoints.push({x: xStart + 2*prop_side+prop_length+ gapBetween                , y: 2*prop_height})
                }
                else {
                    shapeAPoints.push({x: xStart + prop_side+prop_length+ gapBetween                , y: 2*prop_height})
                }

                shapeAPoints.push({x: xStart+ gapBetween                                              , y: 2*prop_height})

                if (number == 0){
                    shapeAPoints.push({x: xStart+ gapBetween                                          , y: prop_height})
                }
                else {
                    shapeAPoints.push({x: xStart + prop_side+ gapBetween                              , y: prop_height})
                }

                shapeAPoints.push({x: xStart+ gapBetween                                              , y: 0})

            }

            /// SHAPE B
            if (number < stepLength - 1 ){
                let shapeBPoints = [];
                if (directionRtl){
                    shapeBPoints = [
                        {x: xStart +prop_side+gapBetween               -prop_gap   , y: 0} ,
                        {x: xStart +2*prop_side-prop_gap+gapBetween    -prop_gap   , y: 0} ,
                        {x: xStart +prop_side-prop_gap+gapBetween      -prop_gap   , y: prop_height} ,
                        {x: xStart +2*prop_side-prop_gap+gapBetween    -prop_gap   , y: 2*prop_height} ,
                        {x: xStart +prop_side+gapBetween               -prop_gap   , y: 2*prop_height} ,
                        {x: xStart+gapBetween                          -prop_gap   , y: prop_height} ,
                        {x: xStart +prop_side+gapBetween               -prop_gap   , y: 0} ,
                    ]
                }
                else{
                    shapeBPoints = [
                        {x: xStart+gapBetween                              + 2*prop_side+prop_length   -prop_gap   , y: 0} ,
                        {x: xStart + prop_side-prop_gap+gapBetween         + 2*prop_side+prop_length   -prop_gap    , y: 0} ,
                        {x: xStart + 2*prop_side-prop_gap+gapBetween       + 2*prop_side+prop_length   -prop_gap    , y: prop_height} ,
                        {x: xStart + prop_side-prop_gap+gapBetween         + 2*prop_side+prop_length   -prop_gap    , y: 2*prop_height} ,
                        {x: xStart+gapBetween                              + 2*prop_side+prop_length   -prop_gap    , y: 2*prop_height} ,
                        {x: xStart + prop_side+gapBetween                  + 2*prop_side+prop_length   -prop_gap    , y: prop_height} ,
                        {x: xStart+gapBetween                              + 2*prop_side+prop_length   -prop_gap    , y: 0} ,
                    ];
                }

                const shapeB = tools_svg.craeteSvgPolygon(svg , shapeBPoints ,
                    {
                        "fill" :  number <= prop_stepSelected ? prop_activeBreadcrumb : prop_unactiveBreadcrumb ,
                        "filter" : `url(#${shadowMarker})`
                    },
                    {
                        "click" : eventListiner
                    },
                    {
                        "cursor" : "pointer"
                    });

                const shapeBShadow = tools_svg.createShadowInsidePolygonElement(svg , shapeB , 2 , 4 ,
                    {
                        "fill" : "rgba(255,255,255,0.2)"
                    },
                    {
                        "click" : eventListiner
                    },
                    {
                        "cursor" : "pointer"
                    });

            }

            const shapeA = tools_svg.craeteSvgPolygon(svg , shapeAPoints ,
                {
                    "fill" :  number <= prop_stepSelected ? prop_activeBreadcrumb : prop_unactiveBreadcrumb ,
                    "filter" : `url(#${shadowMarker})`
                },
                {
                    "click" : eventListiner
                },
                {
                    "cursor" : "pointer"
                });



            const shapeAShadow = tools_svg.createShadowInsidePolygonElement(svg , shapeA , 2 , 4 ,
                {
                    "fill" : "rgba(255,255,255,0.2)"
                },
                {
                    "click" : eventListiner
                },
                {
                    "cursor" : "pointer"
                });

            const shapeText = tools_svg.craeteSvgTextToCenterPolygonElement(svg , shapeA ,  directionRtl?  0 : 0.25*prop_length , 0.15*prop_height , step.title ,
                {
                    "text-anchor" : "middle" ,
                    "dominant-baseline" : "middle" ,
                    "font-size" : "16" ,
                    "fill" : number <= prop_stepSelected ? prop_colorUnactive : prop_colorActive ,
                },
                {
                    "click" : eventListiner
                },
                {
                    "cursor" : "pointer"
                });

            const shapeCircleTik = tools_svg.craeteSvgCircleToCenterPolygonElement(svg , shapeA , directionRtl? 0.40*prop_length : -0.25*prop_length  , 0.10*prop_height  , prop_height/2 ,
                {
                    "fill" : "#ff000000" ,
                    "stroke" : number <= prop_stepSelected ? prop_colorUnactive : prop_colorActive ,
                    "stroke-width" : "2" ,
                    "filter" : `url(#${shadowMarker})` ,
                },
                {
                    "click" : eventListiner
                },
                {
                    "cursor" : "pointer"
                });

            if(  number <= prop_stepSelected){
                const shapeTik = tools_svg.craeteSvgPathToCenterCircleElement(svg , shapeCircleTik , 0 , 0 ,  "M-4,0 L-1,3 L4,-4" ,
                    {
                        "fill" : "none" ,
                        "stroke" : number <= prop_stepSelected ? prop_colorUnactive : prop_colorActive ,
                        "stroke-width" : "2" ,
                        "filter" : `url(#${shadowMarker})` ,
                    },
                    {
                        "click" : eventListiner
                    },
                    {
                        "cursor" : "pointer"
                    });
            }
            else{
                const shapenumber = tools_svg.craeteSvgTextToCenterCircleElement(svg , shapeCircleTik , 0 , 2.5,  number+1 ,
                    {
                        "text-anchor" : "middle" ,
                        "dominant-baseline" : "middle" ,
                        "font-size" : "16" ,
                        "fill" : number <= prop_stepSelected ? prop_colorUnactive : prop_colorActive ,
                    },
                    {
                        "click" : eventListiner
                    },
                    {
                        "cursor" : "pointer"
                    });
            }
        }


    }



    fn_onBackClick(event , stepData){
        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("fn_callback") && typeof data.fn_callback != null){
            data.fn_callback(event , stepData);
        }
    }

}







//===============================================================================================================
// [80 - 89] views tools ->  [080] elements page
//===============================================================================================================

/*-------------------------------------
 080-01) change page
-------------------------------------*/
class ComponentChangePageBase extends ComponentBase{

    _EFFECT_TOP =       0;
    _EFFECT_RIGHT =     1;
    _EFFECT_BOTTOM =    2;
    _EFFECT_LEFT=       3;


    /* ---------------------------------------------
        PROPERTYs Pattern
     --------------------------------------------- */
    _COMPONENT_PATTERN = {

        prop_effect: {
            prop: "prop_effect",
            default: null
        },
        prop_duration: {
            prop: "prop_duration",
            default: 500
        },
        prop_backgroundColorShadow: {
            prop: "prop_backgroundColorShadow",
            default: tools_const?.styles?.changePage?.backgroundColor_shadow ?? ""
        },
        prop_size: {
            prop: "prop_size",
            default: tools_css.standardSizes.m.name
        },

        prop_formWidth: {
            prop: "prop_formWidth",
            default: "100%"
        },
        prop_formHeight: {
            prop: "prop_formHeight",
            default: "100%"
        },
        prop_formClass: {
            prop: "prop_formClass",
            default: []
        },
        prop_formtSyles: {
            prop: "prop_formtSyles",
            default: {}
        },
        prop_body: {
            prop: "prop_body",
            default: null
        },
        prop_pages: {
            prop: "prop_pages",
            default: null
        },


        prop_backgroundColorPage: {
            prop: "prop_backgroundColorPage",
            default: tools_const?.styles?.changePage?.backgroundColor_page ?? ""
        },

        var_openAnyPage: {
            prop: "var_openAnyPage",
            default: false
        },

    }


    /* ---------------------------------------------
           PROPERTYs Props
    --------------------------------------------- */
    _COMPONENT_PROPS = {
        part_structure: [

        ],

        part_form: [
            this._COMPONENT_PATTERN.prop_formWidth,
            this._COMPONENT_PATTERN.prop_formHeight,
            this._COMPONENT_PATTERN.prop_formClass,
            this._COMPONENT_PATTERN.prop_formtSyles,
        ],

        part_form_body: [
            this._COMPONENT_PATTERN.prop_backgroundColorPage,
            this._COMPONENT_PATTERN.prop_body,
        ],

        part_form_shadow: [
            this._COMPONENT_PATTERN.var_openAnyPage,
            this._COMPONENT_PATTERN.prop_backgroundColorShadow,
        ],

        part_form_pages: [
            this._COMPONENT_PATTERN.prop_backgroundColorPage,
            this._COMPONENT_PATTERN.prop_pages,
            this._COMPONENT_PATTERN.prop_effect,
            this._COMPONENT_PATTERN.prop_duration,
        ],
    };


    /* ---------------------------------------------
   PROPERTYs Schema
   --------------------------------------------- */
    _COMPONENT_SCHEMA = {
        part_structure: {
            part_form:{
                part_form_body:{} ,
                part_form_shadow:{} ,
                part_form_pages:{} ,
            } ,
        }
    }

}
window.ComponentChangePage  = class ComponentChangePage extends ComponentChangePageBase{


    /* ---------------------------------------------
       SETUP
    --------------------------------------------- */
    constructor(elId , config) {
        super(
            listComponent[ComponentChangePage.name] ,
            elId
        );
        super.renderComponent(config);
    }


    /* ---------------------------------------------
       TEMPLATEs
    --------------------------------------------- */
    componentFn(){
    }

    templateFn(partName = null){
        switch (partName){
            case "part_structure":
                return this.template_render_structure( partName );
            case "part_form":
                return this.template_render_form( partName );
            case "part_form_body":
                return this.template_render_form_body( partName );
            case "part_form_shadow":
                return this.template_render_form_shadow( partName );
            case "part_form_pages":
                return this.template_render_form_pages( partName );
            default:
                return this.templateBasic_render([ "h-100" , "d-block"]);
        }
    }

    template_render_structure(partName) {
        const content = `
       ${this.templateFn("part_form") ?? ""}
                `;
        return this.templateBasic_render_structure(content , [ "h-100" , "d-block"]);
    }

    template_render_form(partName) {
        const data = this.getPartProps(partName)

        if (data != null){
            const prop_formWidth        =   data.hasOwnProperty("prop_formWidth")        ?  data.prop_formWidth                :  "";
            const prop_formHeight       =   data.hasOwnProperty("prop_formHeight")       ?  data.prop_formHeight               :  "";
            const prop_formClass        =   data.hasOwnProperty("prop_formClass")        ?  data.prop_formClass                :  [];
            const prop_formtSyles       =   data.hasOwnProperty("prop_formtSyles")       ?  data.prop_formtSyles               : {};

            return `
<section data-part-name="${partName}" 
         id="component-change-page-form-${this._COMPONENT_RANDOM_ID}"
         class="overflow-hidden position-relative ${tools_public.renderListClass(prop_formClass)}">
         
     <style>
         #${this._COMPONENT_ID} #component-change-page-form-${this._COMPONENT_RANDOM_ID}{
             width: ${prop_formWidth};
             height: ${prop_formHeight};
             ${tools_public.renderListStyle(prop_formtSyles)}
         }
     </style>
     
       ${this.templateFn("part_form_body") ?? ""}
       ${this.templateFn("part_form_shadow") ?? ""}
       ${this.templateFn("part_form_pages") ?? ""}
</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    template_render_form_body(partName) {
        const data = this.getPartProps(partName)

        if (data != null){
            const prop_backgroundColorPage     =   data.hasOwnProperty("prop_backgroundColorPage")                 ?  data.prop_backgroundColorPage      :   "";
            const prop_body                    =   data.hasOwnProperty("prop_body") && data.prop_body !=null       ?  data.prop_body                     :   this._COMPONENT_SLOTS?.body?.[0]?.html ?? "";

            return `
<section data-part-name="${partName}" 
         id="component-change-page-form-body-${this._COMPONENT_RANDOM_ID}"
         class="w-100 h-100">
         
     <style>
         #${this._COMPONENT_ID} #component-change-page-form-body-${this._COMPONENT_RANDOM_ID}{
              background-color: ${prop_backgroundColorPage};
         }
     </style>
     
     ${prop_body}
     
</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    template_render_form_pages(partName) {
        const data = this.getPartProps(partName)

        if (data != null){
            const prop_pages                   =   data.hasOwnProperty("prop_pages") && data.prop_pages !=null      ?  data.prop_pages                      :  this._COMPONENT_SLOTS?.pages ?? [];

            const directionRtl                 = data.hasOwnProperty("directionRtl")                                ? data.directionRtl                     : (component_props != null && component_props.hasOwnProperty("directionRtl") ? component_props.directionRtl : false)
            const prop_effect                  = data.hasOwnProperty("prop_effect")                                 ?  data.prop_effect                     :  null;
            const prop_duration                = data.hasOwnProperty("prop_duration")                               ?  data.prop_duration                   :  100;

            const prop_backgroundColorPage     =   data.hasOwnProperty("prop_backgroundColorPage")                  ?  data.prop_backgroundColorPage        :   "";


            let styleStr = "";
            switch (prop_effect){
                case this._EFFECT_TOP:
                    if (directionRtl){
                        styleStr= "right: 0; top: -100%;"
                    }
                    else{
                        styleStr= "left: 0;  top: -100%;"
                    }
                    break;
                case this._EFFECT_BOTTOM:
                    if (directionRtl){
                        styleStr= "right: 0; bottom: -100%;"
                    }
                    else{
                        styleStr= "left: 0;  bottom: -100%;"
                    }
                    break;
                case this._EFFECT_LEFT:
                    styleStr= "top: 0; left: -100%;"
                    break;
                case this._EFFECT_RIGHT:
                    styleStr= "top: 0; right: -100%;"
                    break;
                default:
                    if (directionRtl){
                        styleStr= "top: 0; right: -100%;"
                    }
                    else{
                        styleStr= "top: 0; left: -100%;"
                    }
                    break;
            }

            const html = this.fn_getTemplatePages(prop_pages)

            return `
<section data-part-name="${partName}" 
         id="ccomponent-change-page-form-pages-${this._COMPONENT_RANDOM_ID}"
         class="w-100 h-100 ">
         
     <style>
         #${this._COMPONENT_ID} #ccomponent-change-page-form-pages-${this._COMPONENT_RANDOM_ID}{
            
         }
         #${this._COMPONENT_ID} .ccomponent-change-page-form-pages-${this._COMPONENT_RANDOM_ID}-page{
             transition: left ease ${prop_duration}ms ,  right ease ${prop_duration}ms ,  top ease ${prop_duration}ms ,  bottom ease ${prop_duration}ms;
             width: 100%;
             height: 100%;
             overflow-y: auto;
             overflow-x: hidden;
             ${styleStr};
             z-index: ${tools_css.getZIndex(tools_css.standardZIndex.new_page.name , 10)};
             background-color: ${prop_backgroundColorPage};
         }
         
::-webkit-scrollbar {
  width: 4px;
}
::-webkit-scrollbar-thumb {
  background: rgba(0,0,0,0.4);
  border-radius: 20px;
}
     </style>
     
     ${html}
</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    template_render_form_shadow(partName) {
        const data = this.getPartProps(partName)

        if (data != null){
            const var_openAnyPage  =            data.hasOwnProperty("var_openAnyPage")                         ?  data.var_openAnyPage                   :  false;
            const prop_backgroundColorShadow  = data.hasOwnProperty("prop_backgroundColorShadow")              ?  data.prop_backgroundColorShadow        :  "";

            if (var_openAnyPage){
                return `
<section data-part-name="${partName}" 
         id="ccomponent-change-page-form-shadow-${this._COMPONENT_RANDOM_ID}"
         class="w-100 h-100 position-absolute">
         
     <style>
         #${this._COMPONENT_ID} #ccomponent-change-page-form-shadow-${this._COMPONENT_RANDOM_ID}{
             background-color: ${prop_backgroundColorShadow};
             top: 0 ;
             left: 0;
         }
     </style>
     
</section>
        `;
            }

        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }



    /* ---------------------------------------------
       FUNCTIONs
    --------------------------------------------- */

    fn_getPageSelected(pageName){
        return document.querySelector(` #${this._COMPONENT_ID} .ccomponent-change-page-form-pages-${this._COMPONENT_RANDOM_ID}-page[data-page-name="${pageName}"]`);
    }
    fn_getAllPage(pageName){
        return document.querySelectorAll(` #${this._COMPONENT_ID} .ccomponent-change-page-form-pages-${this._COMPONENT_RANDOM_ID}-page`);
    }


    fn_getTemplatePages(prop_pages){
        let html = "";
        if(prop_pages != null ){
            for (let i = 0; i < prop_pages.length; i++) {
                const itemPage = prop_pages[i];
                html += `
                <section class="ccomponent-change-page-form-pages-${this._COMPONENT_RANDOM_ID}-page position-absolute" data-page-name="${itemPage?.attrs?.name ?? ""}" data-page-status="0">
                   ${itemPage?.html ?? ""}
                </section>
                `
            }
        }

        return html;
    }

    fn_setStatusPageSelected(pageEl , status){
        const data = this._COMPONENT_CONFIG;
        const prop_effect    = data.hasOwnProperty("prop_effect")                                 ?  data.prop_effect                     :  null;
        const directionRtl   = data.hasOwnProperty("directionRtl")                                ? data.directionRtl                     : (component_props != null && component_props.hasOwnProperty("directionRtl") ? component_props.directionRtl : false)

        switch (prop_effect){
            case this._EFFECT_TOP:
                pageEl.style.setProperty("top", status ? "0" : "-100%", "important");
                break;
            case this._EFFECT_RIGHT:
                pageEl.style.setProperty("right", status ? "0" : "-100%", "important");
                break;
            case this._EFFECT_BOTTOM:
                pageEl.style.setProperty("bottom", status ? "0" : "-100%", "important");
                break;
            case this._EFFECT_LEFT:
                pageEl.style.setProperty("left", status ? "0" : "-100%", "important");
                break;
            default:
                if (directionRtl){
                    pageEl.style.setProperty("right", status ? "0" : "-100%", "important");
                }
                else{
                    pageEl.style.setProperty("left", status ? "0" : "-100%", "important");
                }
                break;
        }

        pageEl.setAttribute("data-page-status" , status ? 1 : 0);
        this.fn_setStatusFormShadow();
    }


    fn_setStatusFormShadow(){
        let status = false;
        const pages = this.fn_getAllPage();
        if (pages != null){
            for (let i = 0; i < pages.length; i++) {
                const itemPage = pages[i];
                let pageStatusNumber = itemPage.getAttribute("data-page-status");
                if (parseInt(pageStatusNumber) == 1){
                    status = true;
                    break;
                }
            }
        }

        this.set("var_openAnyPage" , status)
    }

    call_openOrClosePage(pageName , status = null){
        const pageEl = this.fn_getPageSelected(pageName);

        if (pageEl != null){
            let pageStatusNumber = pageEl.getAttribute("data-page-status");
            let pageStatus = false;
            if (status == null){
                if (parseInt(pageStatusNumber) == 1){
                    pageStatus = false;
                }
                else if (parseInt(pageStatusNumber) == 0){
                    pageStatus = true;
                }
            }
            else{
                pageStatus = status;
            }

            this.fn_setStatusPageSelected(pageEl , pageStatus);
        }
    }
}


/*-------------------------------------
 080-02) page header
-------------------------------------*/
class ComponentPageHeaderBase extends ComponentBase{

    /* ---------------------------------------------
        PROPERTYs Pattern
     --------------------------------------------- */
    _COMPONENT_PATTERN = {
        prop_size: {
            prop: "prop_size",
            default: tools_css.standardSizes.xl.name
        },
        prop_backgroundForm: {
            prop: "prop_backgroundForm",
            default: tools_const?.styles?.pageHeader?.backgroundColor_form ?? ""
        },
        prop_formClass: {
            prop: "prop_formClass",
            default: []
        },
        prop_formStyles: {
            prop: "prop_formStyles",
            default: {}
        },

        prop_colorIcon_primary: {
            prop: "prop_colorIcon_primary",
            default: tools_const?.styles?.pageHeader?.colorPrimary_icon ?? ""
        },
        prop_colorIcon_secondary: {
            prop: "prop_colorIcon_secondary",
            default: tools_const?.styles?.pageHeader?.colorSecondary_icon ?? ""
        },
        prop_hasIconBack: {
            prop: "prop_hasIconBack",
            default: true
        },

        prop_pageTitle: {
            prop: "prop_pageTitle",
            default: null
        },
        prop_pageNav: {
            prop: "prop_pageNav",
            default: null
        },
        prop_colorNav: {
            prop: "prop_colorNav",
            default: tools_const?.styles?.pageHeader?.color_nav ?? ""
        },
        prop_backgroundColorNav: {
            prop: "prop_backgroundColorNav",
            default: tools_const?.styles?.pageHeader?.backgroundColor_nav ?? ""
        },
        prop_colorHeader: {
            prop: "prop_colorHeader",
            default: tools_const?.styles?.pageHeader?.color_header ?? ""
        },

        prop_optionsList: {
            prop: "prop_optionsList",
            default: []
        },
    };

    /* ---------------------------------------------
           PROPERTYs Props
    --------------------------------------------- */
    _COMPONENT_PROPS = {
        part_structure: [],

        part_form: [
            this._COMPONENT_PATTERN.prop_size,
            this._COMPONENT_PATTERN.prop_backgroundForm,
            this._COMPONENT_PATTERN.prop_formClass,
            this._COMPONENT_PATTERN.prop_formStyles,
        ] ,

        part_form_back: [
            this._COMPONENT_PATTERN.prop_size,
        ] ,

        part_form_back_icon: [
            this._COMPONENT_PATTERN.prop_size,
            this._COMPONENT_PATTERN.prop_colorIcon_primary,
            this._COMPONENT_PATTERN.prop_colorIcon_secondary,
            this._COMPONENT_PATTERN.prop_hasIconBack,
        ],

        part_form_title: [
            this._COMPONENT_PATTERN.prop_hasIconBack,
        ],

        part_form_title_nav: [
            this._COMPONENT_PATTERN.prop_size,
            this._COMPONENT_PATTERN.prop_pageNav,
            this._COMPONENT_PATTERN.prop_colorNav,
            this._COMPONENT_PATTERN.prop_backgroundColorNav,
        ],

        part_form_title_txt: [
            this._COMPONENT_PATTERN.prop_size,
            this._COMPONENT_PATTERN.prop_pageTitle,
            this._COMPONENT_PATTERN.prop_colorHeader,
            this._COMPONENT_PATTERN.prop_pageNav,
        ],

        part_form_options: [
            this._COMPONENT_PATTERN.prop_size,
        ],

        part_form_options_render: [
            this._COMPONENT_PATTERN.prop_size,
            this._COMPONENT_PATTERN.prop_colorIcon_primary,
            this._COMPONENT_PATTERN.prop_colorIcon_secondary,
            this._COMPONENT_PATTERN.prop_optionsList,
        ]

    };

    /* ---------------------------------------------
     PROPERTYs Schema
     --------------------------------------------- */
    _COMPONENT_SCHEMA = {
        part_structure: {
            part_form: {
                part_form_back:{
                    part_form_back_icon: {}
                } ,
                part_form_title:{
                    part_form_title_nav: {} ,
                    part_form_title_txt: {} ,
                } ,
                part_form_options:{
                    part_form_options_render: {}
                } ,
            }
        },
    }

}
window.ComponentPageHeader = class ComponentPageHeader extends ComponentPageHeaderBase {

    /* ---------------------------------------------
       SETUP
    --------------------------------------------- */
    constructor(elId, config) {
        super(
            listComponent[ComponentPageHeader.name] ,
            elId
        );
        super.renderComponent(config);
    }


    /* ---------------------------------------------
    TEMPLATEs
    --------------------------------------------- */
    componentFn() {
        this.templateFn("part_form_back_icon");
        this.templateFn("part_form_options_render");
    }

    templateFn(partName = null) {
        switch (partName) {
            case "part_structure":
                return this.template_render_structure(partName);
            case "part_form":
                return this.template_render_form(partName);
            case "part_form_back":
                return this.template_render_formBack(partName);
            case "part_form_title":
                return this.template_render_formTitle(partName);
            case "part_form_title_nav":
                return this.template_render_formTitle_nav(partName);
            case "part_form_title_txt":
                return this.template_render_formTitle_txt(partName);
            case "part_form_options":
                return this.template_render_formOptions(partName);
            case "part_form_back_icon":
                return this.componentFn_render_formBackIcon(partName);
            case "part_form_options_render":
                return this.componentFn_render_formBackIconRender(partName);

            default:
                return this.templateBasic_render([]);
        }
    }

    template_render_structure(partName) {
        const content = `
        
        ${this.templateFn("part_form")}
        
                `;
        return this.templateBasic_render_structure(content);
    }

    template_render_form(partName) {
        const data = this.getPartProps(partName)

        if (data != null) {

            const prop_size             = data.hasOwnProperty("prop_size")              ? data.prop_size              : null;
            const prop_backgroundForm   = data.hasOwnProperty("prop_backgroundForm")    ? data.prop_backgroundForm    : "";
            const prop_formClass        = data.hasOwnProperty("prop_formClass")         ? data.prop_formClass         : [];
            const prop_formStyles       = data.hasOwnProperty("prop_formStyles")        ? data.prop_formStyles        : {};

            let elHeight = tools_css.getHeightSize(prop_size);

            return `
<section data-part-name="${partName}" 
         id="component-header-page-form-${this._COMPONENT_RANDOM_ID}"
         class=" ${tools_public.renderListClass(prop_formClass)}">
         
     <style>
         #${this._COMPONENT_ID} #component-header-page-form-${this._COMPONENT_RANDOM_ID}{
             ${tools_public.renderListStyle(prop_formStyles)};
             height:           ${elHeight+4}px;
             padding-top:      2px;
             padding-bottom:   2px;
             background-color: ${prop_backgroundForm};
         }
     </style>
     
       ${this.templateFn("part_form_back")}
       ${this.templateFn("part_form_title")}
       ${this.templateFn("part_form_options")}
       
</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    template_render_formBack(partName) {
        const data = this.getPartProps(partName)

        if (data != null) {

            const prop_size             = data.hasOwnProperty("prop_size")                       ? data.prop_size                           : null;
            const directionRtl          =  this._COMPONENT_CONFIG.hasOwnProperty("directionRtl") ? this._COMPONENT_CONFIG.directionRtl      : false;

            let elHeight = tools_css.getHeightSize(prop_size);

            return `
<section data-part-name="${partName}" 
         id="component-header-page-form-back-${this._COMPONENT_RANDOM_ID}"
         class="position-relative ">
         
     <style>
         #${this._COMPONENT_ID} #component-header-page-form-back-${this._COMPONENT_RANDOM_ID}{
             height:           ${elHeight}px;
             width:            ${elHeight+10}px;
             float:            ${directionRtl ? "right" : "left"};
         }
     </style>
     
     <component-icon id="component-header-page-icon-${this._COMPONENT_RANDOM_ID}"></component-icon>
       
</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    template_render_formTitle(partName) {
        const data = this.getPartProps(partName)

        if (data != null) {
            const directionRtl          =  this._COMPONENT_CONFIG.hasOwnProperty("directionRtl")                      ? this._COMPONENT_CONFIG.directionRtl      : false;
            const prop_hasIconBack      = data.hasOwnProperty("prop_hasIconBack")                                     ? data.prop_hasIconBack                    : null;

            return `
<b data-part-name="${partName}" 
         id="component-header-page-form-title-${this._COMPONENT_RANDOM_ID}"
         class="position-relative ">
         
     <style>
         #${this._COMPONENT_ID} #component-header-page-form-title-${this._COMPONENT_RANDOM_ID}{
             width:            60%;
             float:            ${directionRtl ? "right" : "left"};
             ${prop_hasIconBack ? (directionRtl ? "border-right" : "border-left") : ""}:    1px solid white;
         }
     </style>
     
        ${this.templateFn("part_form_title_nav")}
        ${this.templateFn("part_form_title_txt")}
       
</b>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    template_render_formTitle_nav(partName) {
        const data = this.getPartProps(partName)

        if (data != null) {

            const directionRtl                  =  this._COMPONENT_CONFIG.hasOwnProperty("directionRtl")                   ? this._COMPONENT_CONFIG.directionRtl       : false;
            const prop_size                     = data.hasOwnProperty("prop_size")                                         ? data.prop_size                            : null;
            const prop_colorNav                 = data.hasOwnProperty("prop_colorNav")                                     ? data.prop_colorNav                        : null;
            const prop_backgroundColorNav       = data.hasOwnProperty("prop_backgroundColorNav")                           ? data.prop_backgroundColorNav              : null;
            const prop_pageNav                  = data.hasOwnProperty("prop_pageNav")  && data.prop_pageNav != null        ? data.prop_pageNav                         : this._COMPONENT_SLOTS?.nav ?? "";

            if (prop_pageNav != null){

                const elHeight = tools_css.getHeightSize(prop_size);
                const elFontSize = tools_css.getFontSize(prop_size);

                let navHtml = "";
                for (let i = prop_pageNav.length ; i >= 0 ; i--) {
                    const itemNav = prop_pageNav[i];
                    if (itemNav != null && itemNav.hasOwnProperty("html")){
                        navHtml += `
<div class="component-header-page-form-title-nav-item-${this._COMPONENT_RANDOM_ID} " onclick="${this.getFn("fn_onclickItemNav" , "event" ,  `'${itemNav?.attrs?.name ?? ""}'` )}">
     ${itemNav.html}
</div>
                        `
                    }
                }

                return `
<b data-part-name="${partName}" 
         id="component-header-page-form-title-nav-${this._COMPONENT_RANDOM_ID}"
         class="position-relative ">
         
     <style>
         @media (max-width: 768px) { 
              #${this._COMPONENT_ID} #component-header-page-form-title-nav-${this._COMPONENT_RANDOM_ID}{
                  display: none;
              }
         }
    
     
         #${this._COMPONENT_ID} #component-header-page-form-title-nav-${this._COMPONENT_RANDOM_ID}{
              float:            ${directionRtl ? "right" : "left"};
         }
         #${this._COMPONENT_ID} .component-header-page-form-title-nav-item-${this._COMPONENT_RANDOM_ID}{
              float:             ${directionRtl ? "left" : "right"};
              color:             ${prop_colorNav};
              background-color:  ${prop_backgroundColorNav};
              cursor:            pointer;
              position:          relative;
              height:            ${elHeight}px;
              line-height:       ${elHeight}px;
              font-size:         ${elFontSize}px;
               ${directionRtl? "padding-right" : "padding-left"} :     ${elHeight+15}px;
               ${directionRtl? "padding-left" : "padding-right"} :     10px;
         }
         #${this._COMPONENT_ID} .component-header-page-form-title-nav-item-${this._COMPONENT_RANDOM_ID}:before{
              content:                                "";
              position:                               absolute;
              top:                                    50%;
              ${directionRtl? "left" : "right"} :     -${elHeight+10}px;
              transform:                              translate( 0 , -50%)  rotate(0deg);
              width:                                  0px;
              height:                                 0px;
              border-style:                           solid;
              border-width:                           ${elHeight/2}px ${directionRtl ? elHeight+10 : 0}px ${elHeight/2}px ${directionRtl ? 0 : elHeight+10}px;  
              border-color:                           transparent ${directionRtl ? prop_colorNav : "transparent"} transparent ${directionRtl ? "transparent" : prop_colorNav} ;                 

         }
         #${this._COMPONENT_ID} .component-header-page-form-title-nav-item-${this._COMPONENT_RANDOM_ID}:after{
              content:                                "";
              position:                               absolute;
              top:                                    50%;
              ${directionRtl? "left" : "right"} :    -${elHeight}px;
              transform:                              translate( 0 , -50%)  rotate(0deg);
              width:                                  0px;
              height:                                 0px;
              border-style:                           solid;
              border-width:                           ${elHeight/2}px ${directionRtl ? elHeight : 0}px ${elHeight/2}px ${directionRtl ? 0 : elHeight}px;
              border-color:                           transparent ${directionRtl ? prop_backgroundColorNav : "transparent"} transparent ${directionRtl ? "transparent" : prop_backgroundColorNav} ;                 
         }
     </style>
     
     ${navHtml}
       
</b>
        `;
            }
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    template_render_formTitle_txt(partName) {
        const data = this.getPartProps(partName)

        if (data != null) {

            const prop_size             = data.hasOwnProperty("prop_size")                                            ? data.prop_size                           : null;
            const prop_pageTitle        = data.hasOwnProperty("prop_pageTitle")  && data.prop_pageTitle != null       ? data.prop_pageTitle                      : this._COMPONENT_SLOTS?.body?.[0]?.html ?? "";
            const prop_colorHeader      = data.hasOwnProperty("prop_colorHeader")                                     ? data.prop_colorHeader                    : null;
            const directionRtl          =  this._COMPONENT_CONFIG.hasOwnProperty("directionRtl")                      ? this._COMPONENT_CONFIG.directionRtl      : false;
            const prop_pageNav          = data.hasOwnProperty("prop_pageNav")  && data.prop_pageNav != null           ? data.prop_pageNav                        : this._COMPONENT_SLOTS?.nav ?? "";

            let elHeight = tools_css.getHeightSize(prop_size);
            let elFontSize = tools_css.getFontSize(prop_size);

            return `
<b data-part-name="${partName}" 
         id="component-header-page-form-title-txt-${this._COMPONENT_RANDOM_ID}"
         class="position-relative px-2">
         
     <style>
         #${this._COMPONENT_ID} #component-header-page-form-title-txt-${this._COMPONENT_RANDOM_ID}{
             height:           ${elHeight}px;
             line-height:      ${elHeight}px;
             float:            ${directionRtl ? "right" : "left"};
             font-size:        ${elFontSize}px;
             color:            ${prop_colorHeader};
             ${directionRtl ? "margin-right" : "margin-left"} : ${prop_pageNav != null ? elHeight+10 : 0}px;
         }
     </style>
     
     ${prop_pageTitle}
       
</b>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    template_render_formOptions(partName) {
        const data = this.getPartProps(partName)

        if (data != null) {

            const prop_size             = data.hasOwnProperty("prop_size")                       ? data.prop_size                           : null;
            const directionRtl          =  this._COMPONENT_CONFIG.hasOwnProperty("directionRtl") ? this._COMPONENT_CONFIG.directionRtl      : false;

            let elHeight = tools_css.getHeightSize(prop_size);

            return `
<div data-part-name="${partName}" 
         id="component-header-page-form-options-${this._COMPONENT_RANDOM_ID}"
         class="position-relative px-2">
         
     <style>
         #${this._COMPONENT_ID} #component-header-page-form-options-${this._COMPONENT_RANDOM_ID}{
             height:           ${elHeight}px;
             width:            calc(100% - ${elHeight+10}px - 60% - 2px);
             float:            ${directionRtl ? "right" : "left"};
         }
         #${this._COMPONENT_ID} .component-header-page-form-option-icon-forms-${this._COMPONENT_RANDOM_ID}{
             height:           ${elHeight}px;
             width:            ${elHeight+10}px;
             float:            ${directionRtl ? "left" : "right"};
         }
     </style>
     
     
</div>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    componentFn_render_formBackIcon(partName) {
        const data = this.getPartProps(partName)

        if (data != null) {

            const prop_size                       = data.hasOwnProperty("prop_size")                           ? data.prop_size                           : null;
            const prop_colorIcon_primary          = data.hasOwnProperty("prop_colorIcon_primary")              ? data.prop_colorIcon_primary              : "";
            const prop_colorIcon_secondary        = data.hasOwnProperty("prop_colorIcon_secondary")            ? data.prop_colorIcon_secondary            : "";
            const prop_hasIconBack                = data.hasOwnProperty("prop_hasIconBack")                    ? data.prop_hasIconBack                    : true;
            const directionRtl                    =  this._COMPONENT_CONFIG.hasOwnProperty("directionRtl")     ? this._COMPONENT_CONFIG.directionRtl      : false;

            if (prop_hasIconBack){

                let styles = {
                    "top" :       "50%",
                    "left" :      "50%",
                    "transform" : "translate(-50% , -50%)" ,
                    "cursor" :    "pointer" ,
                }

                new window.ComponentIcon(
                    `component-header-page-icon-${this._COMPONENT_RANDOM_ID}` ,
                    {
                        prop_icon : directionRtl ? tools_icons.icon_back_right({size : prop_size ,  colors: {primary: prop_colorIcon_primary , secondary: prop_colorIcon_secondary }}) : tools_icons.icon_back_left({size : prop_size ,  colors: {primary: prop_colorIcon_primary , secondary: prop_colorIcon_secondary }} )  ,

                        prop_iconClass : ["position-absolute"] ,
                        prop_iconStyles : styles ,

                        fn_callback: (event)=>{
                            this.fn_onBackClick(event);
                        }
                    }
                )
            }
        }
    }

    componentFn_render_formBackIconRender(partName) {
        const data = this.getPartProps(partName)

        if (data != null) {

            const prop_size                       = data.hasOwnProperty("prop_size")                       ? data.prop_size                           : null;
            const prop_colorIcon_primary          = data.hasOwnProperty("prop_colorIcon_primary")          ? data.prop_colorIcon_primary              : "";
            const prop_colorIcon_secondary        = data.hasOwnProperty("prop_colorIcon_secondary")        ? data.prop_colorIcon_secondary            : "";
            const prop_optionsList                = data.hasOwnProperty("prop_optionsList")                ? data.prop_optionsList                    : [];

            if (prop_optionsList != null && Array.isArray(prop_optionsList)){
                const el = this.fn_getElFormOptions();

                for (let i = 0; i < prop_optionsList.length; i++) {
                    const itemOptions = prop_optionsList[i];

                    if (itemOptions != null && itemOptions.hasOwnProperty("html")){
                        const icon = itemOptions.html;

                        let styles = {
                            "top" :       "50%",
                            "left" :      "50%",
                            "transform" : "translate(-50% , -50%)" ,
                            "cursor" :    "pointer" ,
                        }

                        el.innerHTML = el.innerHTML + `
<div class="component-header-page-form-option-icon-forms-${this._COMPONENT_RANDOM_ID} position-relative">
    <component-icon id="component-header-page-form-option-icon-${this._COMPONENT_RANDOM_ID}-${i}"></component-icon>
</div>
`

                        new window.ComponentIcon(
                            `component-header-page-form-option-icon-${this._COMPONENT_RANDOM_ID}-${i}` ,
                            {
                                prop_icon : typeof icon == "function" ? icon({size: prop_size , colors: {primary: prop_colorIcon_primary , secondary: prop_colorIcon_secondary }}) : icon ,
                                prop_title: itemOptions?.attrs?.title ?? "" ,

                                prop_iconClass : ["position-absolute"] ,
                                prop_iconStyles : styles ,

                                fn_callback: (event)=>{
                                    this.fn_onOptionClick(event , itemOptions?.attrs?.name ?? "" );
                                }
                            }
                        )

                    }

                }
            }

        }
    }




    /* ---------------------------------------------
      FUNCTIONs
    --------------------------------------------- */
    fn_getElFormOptions(){
        return document.querySelector(`#${this._COMPONENT_ID} #component-header-page-form-options-${this._COMPONENT_RANDOM_ID}`)
    }

    fn_onBackClick(event){
        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("fn_onBackClick") && typeof data.fn_onBackClick != null){
            data.fn_onBackClick(event);
        }
    }

    fn_onOptionClick(event , optionName){
        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("fn_onOptionClick") && typeof data.fn_onOptionClick != null){
            data.fn_onOptionClick(event , optionName);
        }
    }

    fn_onclickItemNav(event , navName){
        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("fn_onclickItemNav") && typeof data.fn_onclickItemNav != null){
            data.fn_onclickItemNav(event , navName);
        }
    }

}


/*-------------------------------------
 080-03) page card info
-------------------------------------*/
class ComponentPageCardInfoBase extends ComponentBase{

    /* ---------------------------------------------
        PROPERTYs Pattern
     --------------------------------------------- */
    _COMPONENT_PATTERN = {
        prop_size: {
            prop: "prop_size",
            default: tools_css.standardSizes.xl.name
        },
        prop_formClass: {
            prop: "prop_formClass",
            default: ["bg-white" , "py-2" , "py-lg-5" , "px-3" , "mx-2" , "mt-2" ]
        },
        prop_formStyles: {
            prop: "prop_formStyles",
            default: {}
        },
        prop_description: {
            prop: "prop_description",
            default: ""
        },


        prop_iconColor: {
            prop: "prop_iconColor",
            default: tools_const?.styles?.pageCardInfo?.color_iconPage ?? ""
        },
        prop_iconSize: {
            prop: "prop_iconSize",
            default: 120
        },
        prop_icon: {
            prop: "prop_icon",
            default: ""
        },


        prop_hasBtn: {
            prop: "prop_hasBtn",
            default: true
        },
        prop_titleBtn: {
            prop: "prop_titleBtn",
            default: "New Order"
        },
        prop_iconBtn: {
            prop: "prop_iconBtn",
            default: tools_icons.icon_plus_badge
        },
        prop_colorIconBtn: {
            prop: "prop_colorIconBtn",
            default: tools_const?.styles?.pageCardInfo?.color_iconBtn ?? ""
        },

    };

    /* ---------------------------------------------
           PROPERTYs Props
    --------------------------------------------- */
    _COMPONENT_PROPS = {
        part_structure: [

        ],

        part_border: [
            this._COMPONENT_PATTERN.prop_formClass,
            this._COMPONENT_PATTERN.prop_formStyles,
        ] ,

        part_border_icon: [
            this._COMPONENT_PATTERN.prop_iconColor,
            this._COMPONENT_PATTERN.prop_iconSize,
            this._COMPONENT_PATTERN.prop_icon,
        ] ,

        part_border_description: [
            this._COMPONENT_PATTERN.prop_size,
            this._COMPONENT_PATTERN.prop_description,
        ] ,

        part_border_btn: [
            this._COMPONENT_PATTERN.prop_size,
            this._COMPONENT_PATTERN.prop_hasBtn,
            this._COMPONENT_PATTERN.prop_titleBtn,
            this._COMPONENT_PATTERN.prop_iconBtn,
            this._COMPONENT_PATTERN.prop_colorIconBtn,
        ] ,

    };

    /* ---------------------------------------------
     PROPERTYs Schema
     --------------------------------------------- */
    _COMPONENT_SCHEMA = {
        part_structure: {
            part_border: {
                part_border_icon: {} ,
                part_border_description: {} ,
                part_border_btn: {} ,
            }
        },
    }

}
window.ComponentPageCardInfo = class ComponentPageCardInfo extends ComponentPageCardInfoBase {

    /* ---------------------------------------------
       SETUP
    --------------------------------------------- */
    constructor(elId, config) {
        super(
            listComponent[ComponentPageCardInfo.name] ,
            elId
        );
        super.renderComponent(config);
    }


    /* ---------------------------------------------
    TEMPLATEs
    --------------------------------------------- */
    componentFn() {
        this.templateFn("part_border");
        this.templateFn("part_border_icon");
        this.templateFn("part_border_btn");
    }

    templateFn(partName = null) {
        switch (partName) {
            case "part_structure":
                return this.template_render_structure(partName);
            case "part_border_description":
                return this.templateFn_render_borderDescription(partName);
            case "part_border":
                return this.componentFn_render_border(partName);
            case "part_border_icon":
                return this.componentFn_render_borderIcon(partName);
            case "part_border_btn":
                return this.componentFn_render_borderButton(partName);
            default:
                return this.templateBasic_render([]);
        }
    }

    template_render_structure(partName) {

        const content = `
        
        <component-border id="component-page-card-info-border-${this._COMPONENT_RANDOM_ID}">
            <component-body>
                <section class="row" >

                    <div class="col-md-3 col-12"> 
                        <component-icon id="component-page-card-info-border-icon-${this._COMPONENT_RANDOM_ID}"></component-icon>
                    </div>
     
                    <div class="col-md-6 col-12 py-md-3"> 
          
                        ${this.templateFn("part_border_description")}
                      
                        <component-button id="component-page-card-info-border-btn-${this._COMPONENT_RANDOM_ID}"></component-button>
                    </div>
     
                 </section>
            </component-body>
        </component-border>
        
                `;
        return this.templateBasic_render_structure(content);
    }

    templateFn_render_borderDescription(partName){
        const data = this.getPartProps(partName)

        if (data != null){
            const prop_description         =  data.hasOwnProperty("prop_description")       ?  data.prop_description            : "";
            const prop_size                =  data.hasOwnProperty("prop_size")              ?  data.prop_size                   : "";

            const elFontSize = tools_css.getFontSize(prop_size);
            const elHeight = tools_css.getHeightSize(prop_size);

            return `
<section data-part-name="${partName}" 
         id="component-page-card-info-border-description-${this._COMPONENT_RANDOM_ID}"
         class="text-center mt-2 d-block" 
         >
         
     <style>
         #${this._COMPONENT_ID} #component-page-card-info-border-description-${this._COMPONENT_RANDOM_ID}{
            font-size:    ${elFontSize}px;
            line-height:  ${elHeight}px;
         }
         
     </style>
     
     <b>${prop_description} </b>
     
</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    componentFn_render_border(partName) {

        const data = this.getPartProps(partName);

        if (data != null){
            const prop_formClass      =  data.hasOwnProperty("prop_formClass")        ?  data.prop_formClass            :   [];
            const prop_formStyles     =  data.hasOwnProperty("prop_formStyles")       ?  data.prop_formStyles           : {};


            new window.ComponentBorder(
                `component-page-card-info-border-${this._COMPONENT_RANDOM_ID}` ,
                {

                    prop_borderColor :    null,
                    prop_structureClass:  prop_formClass ,
                    prop_structureStyles: prop_formStyles ,
                }
            )
        }

    }

    componentFn_render_borderIcon(partName) {

        const data = this.getPartProps(partName);

        if (data != null){
            const prop_iconSize         =  data.hasOwnProperty("prop_iconSize")            ?  data.prop_iconSize         : "";
            const prop_icon             =  data.hasOwnProperty("prop_icon")                ?  data.prop_icon             : "";
            const prop_iconColor        =  data.hasOwnProperty("prop_iconColor")           ?  data.prop_iconColor        : "";

            if (prop_icon != null){

                new window.ComponentIcon(
                    `component-page-card-info-border-icon-${this._COMPONENT_RANDOM_ID}` ,
                    {
                        classList: [ ] ,
                        prop_icon: typeof  prop_icon == "function" ? prop_icon({size: prop_iconSize , colors: {primary: prop_iconColor}} ) : prop_icon ,

                        prop_iconClass : [  ] ,
                        prop_iconStyles : {
                            "margin" :      "auto" ,
                            "text-align":   "center",
                            "width":        prop_iconSize+"px",
                            "height":       prop_iconSize+"px",
                            "color":        prop_iconColor,
                            "display":      "block",
                        } ,
                    }
                );
            }
        }
    }

    componentFn_render_borderButton(partName){
        const data = this.getPartProps(partName)

        if (data != null){

            const prop_size                =  data.hasOwnProperty("prop_size")             ?  data.prop_size                : "";
            const prop_hasBtn              =  data.hasOwnProperty("prop_hasBtn")           ?  data.prop_hasBtn              : true;
            const prop_titleBtn            =  data.hasOwnProperty("prop_titleBtn")         ?  data.prop_titleBtn            : "";
            const prop_iconBtn             =  data.hasOwnProperty("prop_iconBtn")          ?  data.prop_iconBtn             : "";
            const prop_colorIconBtn        =  data.hasOwnProperty("prop_colorIconBtn")     ?  data.prop_colorIconBtn        : "";

            if (prop_hasBtn){

                new window.ComponentButton(
                    `component-page-card-info-border-btn-${this._COMPONENT_RANDOM_ID}` ,
                    {
                        classList: [] ,
                        styles: {

                        },

                        prop_size ,
                        prop_btnClass: ["d-block" , "m-auto" , "mb-1" , "mt-2" ] ,
                        prop_btnStyles: {
                            "width" : "300px" ,
                            "height" : "40px" ,
                            "line-height" : "40px" ,
                        } ,
                        prop_title: `
<b>${prop_titleBtn}</b>
${ typeof prop_iconBtn == "function" ? prop_iconBtn({size: prop_size , colors: {primary: prop_colorIconBtn }} ) : prop_iconBtn}
                    ` ,

                        fn_callback: (event)=>{
                            this.fn_callback(event)
                        }
                    }
                );
            }

        }
    }






    /* ---------------------------------------------
      FUNCTIONs
    --------------------------------------------- */
    fn_callback(event){
        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("fn_callback") && typeof data.fn_callback != null){
            data.fn_callback(event);
        }
    }


}




//===============================================================================================================
// [80 - 89] views tools -> [081] elements spicals
//===============================================================================================================

/*-------------------------------------
 081-01) draggable order
-------------------------------------*/
class ComponentDraggableOrdersBase extends ComponentBase{

    /* ---------------------------------------------
        PROPERTYs Pattern
     --------------------------------------------- */
    _COMPONENT_PATTERN = {
        prop_size: {
            prop: "prop_size",
            default: tools_css.standardSizes.m.name
        },
        prop_height: {
            prop: "prop_height",
            default: 80
        },
        prop_draggable: {
            prop: "prop_draggable",
            default: true
        },
        prop_boderColor: {
            prop: "prop_boderColor",
            default: tools_const?.styles?.draggableOrder?.color_border ?? ""
        },
        prop_boderColorHover: {
            prop: "prop_boderColorHover",
            default: tools_const?.styles?.draggableOrder?.color_borderHover ?? ""
        },
        prop_colorIcon: {
            prop: "prop_colorIcon",
            default: tools_const?.styles?.draggableOrder?.color_icon ?? ""
        },
        prop_items: {
            prop: "prop_items",
            default: null
        },
        prop_itemClass: {
            prop: "prop_itemClass",
            default: []
        },
        prop_itemStyles: {
            prop: "prop_itemStyles",
            default: {}
        },
    };


    /* ---------------------------------------------
           PROPERTYs Props
    --------------------------------------------- */
    _COMPONENT_PROPS = {
        part_structure: [
            this._COMPONENT_PATTERN.prop_height,
            this._COMPONENT_PATTERN.prop_itemStyles,
            this._COMPONENT_PATTERN.prop_boderColor,
            this._COMPONENT_PATTERN.prop_boderColorHover,
            this._COMPONENT_PATTERN.prop_draggable,
        ],

        part_items: [
            this._COMPONENT_PATTERN.prop_items,
            this._COMPONENT_PATTERN.prop_itemClass,
            this._COMPONENT_PATTERN.prop_draggable,
            this._COMPONENT_PATTERN.prop_size,
            this._COMPONENT_PATTERN.prop_colorIcon,
        ],

    };


    /* ---------------------------------------------
   PROPERTYs Schema
   --------------------------------------------- */
    _COMPONENT_SCHEMA = {
        part_structure: {
            part_items: {

            }
        }
    }

}
window.ComponentDraggableOrders  = class ComponentDraggableOrders extends ComponentDraggableOrdersBase{

    _DRAGED_ITEM = null;
    _OFFSET_Y = 0;
    _ITEM_ORDERS = [];

    /* ---------------------------------------------
       SETUP
   --------------------------------------------- */
    constructor(elId , config) {
        super(
            listComponent[ComponentDraggableOrders.name] ,
            elId
        );
        super.renderComponent(config);
    }


    /* ---------------------------------------------
       TEMPLATEs
    --------------------------------------------- */
    componentFn(){
        this.onRegisterFinish().then(el => {
            this.fn_readyTemplateItems();
        })
    }

    templateFn(partName = null){
        switch (partName){
            case "part_structure":
                return this.template_render_structure( partName );
            case "part_items":
                return this.template_render_items( partName );
            default:
                return this.templateBasic_render([]);
        }
    }

    template_render_structure(partName) {
        const data = this.getPartProps(partName)
        const prop_itemStyles           =  data.hasOwnProperty("prop_itemStyles")         ?  data.prop_itemStyles           : {} ;
        const prop_height               =  data.hasOwnProperty("prop_height")             ?  data.prop_height               : 50 ;
        const prop_boderColor           =  data.hasOwnProperty("prop_boderColor")         ?  data.prop_boderColor           : "" ;
        const prop_boderColorHover      =  data.hasOwnProperty("prop_boderColorHover")    ?  data.prop_boderColorHover      : "" ;
        const prop_draggable            =  data.hasOwnProperty("prop_draggable")          ?  data.prop_draggable            : false ;
        const directionRtl              = data.hasOwnProperty("directionRtl")             ? data.directionRtl               : (component_props != null && component_props.hasOwnProperty("directionRtl") ? component_props.directionRtl : false)

        const content = `
              
     <style>
         #${this._COMPONENT_ID} #component-draggable-orders-${this._COMPONENT_RANDOM_ID}{
             overflow: hidden;
         }
         #${this._COMPONENT_ID} #item-daragble-orders-${this._COMPONENT_RANDOM_ID}{
            ${tools_public.renderListStyle(prop_itemStyles)}
         }
        
         #${this._COMPONENT_ID} .item-daragble-orders-${this._COMPONENT_RANDOM_ID} {
            height: ${prop_height}px;
            width: 100%;
            position: absolute;
            cursor: pointer;
            user-select: none;
            width: 100%;
         }
         #${this._COMPONENT_ID} .item-daragble-orders-${this._COMPONENT_RANDOM_ID}:hover{
            ${prop_draggable ? `border: 1px dashed ${prop_boderColorHover}`: ""};
         }
         .dragging {
            cursor: move !important;
            border-radius: 5px;
            border: 1px dashed ${prop_boderColor} !important;
         }
         
         
          #${this._COMPONENT_ID} .item-daragble-orders-icon-${this._COMPONENT_RANDOM_ID}{
            position:absolute;
            display: none;
            top: 10px;
            ${directionRtl ? "left" : "right"} : 10px;
         }

         #${this._COMPONENT_ID} .item-daragble-orders-${this._COMPONENT_RANDOM_ID}:hover .item-daragble-orders-icon-${this._COMPONENT_RANDOM_ID}{
            display: block;
        }
         #${this._COMPONENT_ID} .item-daragble-orders-icon-${this._COMPONENT_RANDOM_ID}-active{
            display: block!important;
        }
         
     </style>
        
           ${this.templateFn("part_items") ?? ""}
                `;
        return this.templateBasic_render_structure(content);
    }

    template_render_items(partName) {
        const data = this.getPartProps(partName)

        if (data != null){

            let prop_items = [];
            if (data.hasOwnProperty("prop_items") && data.prop_items != null ){
                prop_items = data.prop_items
            }
            else{
                const listItems =  this._COMPONENT_SLOTS?.body?.[0]?.html ?? "";
                const parser = new DOMParser();
                const doc = parser.parseFromString(listItems, "text/html");
                prop_items = Array.from(doc.body.children).map(el => el.outerHTML);
            }

            for (const propItem of prop_items) {
                this._ITEM_ORDERS.push({
                    content: propItem
                }) ;
            }

            return `
<section data-part-name="${partName}" 
         id="component-draggable-orders-${this._COMPONENT_RANDOM_ID}"
         class="position-relative">
      
</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }



    /* ---------------------------------------------
       FUNCTIONs
    --------------------------------------------- */

    fn_getFormOrder(){
        return document.querySelector(`#${this._COMPONENT_ID} #component-draggable-orders-${this._COMPONENT_RANDOM_ID}`)
    }
    fn_getElementsOrder(){
        return document.querySelectorAll(`#${this._COMPONENT_ID} .item-daragble-orders-${this._COMPONENT_RANDOM_ID}`)
    }


    fn_readyTemplateItems(){
        const data = this._COMPONENT_CONFIG;
        const prop_itemClass            =  data.hasOwnProperty("prop_itemClass")     ?  data.prop_itemClass        : [] ;
        const prop_height               =  data.hasOwnProperty("prop_height")        ?  data.prop_height           : 50 ;
        const prop_draggable            =  data.hasOwnProperty("prop_draggable")     ?  data.prop_draggable        : false ;
        const prop_size                 =  data.hasOwnProperty("prop_size")          ?  data.prop_size             : null ;
        const prop_colorIcon            =  data.hasOwnProperty("prop_colorIcon")     ?  data.prop_colorIcon        : "" ;
        const form = this.fn_getFormOrder();

        if (this._ITEM_ORDERS != null && Array.isArray(this._ITEM_ORDERS)){
            for (let i=0; i<this._ITEM_ORDERS.length; i++){
                const item = this._ITEM_ORDERS[i];
                if (item != null && item.hasOwnProperty("content")){

                    const section = document.createElement('section');
                    section.innerHTML = item.content;
                    section.setAttribute("class" , `item-daragble-orders-${this._COMPONENT_RANDOM_ID}`);
                    section.setAttribute("data-order" , i);
                    section.setAttribute("style" , `top:${i*prop_height}px`);
                    if (prop_draggable){
                        section.addEventListener('mousedown', this.fn_onElementMouseDown.bind(this , section));

                        const icon = document.createElement('span');
                        icon.setAttribute("class" , `item-daragble-orders-icon-${this._COMPONENT_RANDOM_ID}`);
                        icon.innerHTML = tools_icons.icon_pin_open({size : prop_size /*, colors: {primary: prop_colorIcon}*/} );
                        icon.addEventListener('click', this.fn_onClickPinDraggable.bind(this , icon));
                        section.appendChild(icon);
                    }
                    form.appendChild(section);

                    this._ITEM_ORDERS[i].el = section;
                    this._ITEM_ORDERS[i].isPin = false;
                }
            }
            form.style.height = prop_height * this._ITEM_ORDERS.length+10 + "px";
        }

        if (data.hasOwnProperty("fn_startComponent") && typeof data.fn_startComponent != null){
            data.fn_startComponent(this._ITEM_ORDERS );
        }

    }



    fn_onElementMouseDown(section , e){
        const ref = parseInt(section.getAttribute("data-order"));
        if (this._ITEM_ORDERS != null && Array.isArray(this._ITEM_ORDERS)) {
            const item = this._ITEM_ORDERS[ref];
            if (item.hasOwnProperty("isPin") && item.isPin){
                return;
            }
        }

        this._DRAGED_ITEM = section;
        this._DRAGED_ITEM.classList.add('dragging');
        const rect = this._DRAGED_ITEM.getBoundingClientRect();
        this._OFFSET_Y = e.clientY - rect.top;

        document.addEventListener('mousemove', this.fn_onElementMouseMove.bind(this));
        document.addEventListener('mouseup', this.fn_onElementMouseUp.bind(this));
    }

    fn_onElementMouseMove(e){
        if (!this._DRAGED_ITEM) return;

        const componentRect = this.fn_getFormOrder().getBoundingClientRect();
        const min = 0;
        const max = componentRect.height - this._DRAGED_ITEM.getBoundingClientRect().height;
        let newY = e.clientY - componentRect.top  ;

        if (newY < min){
            newY = min
        }
        else if (newY > max){
            newY = max
        }

        this._DRAGED_ITEM.style.top = newY + 'px';

        this.fn_onChangeOrderElement(newY)
    }

    fn_onElementMouseUp(event){
        if (!this._DRAGED_ITEM) return;

        this._DRAGED_ITEM.classList.remove('dragging');
        this._DRAGED_ITEM = null;
        this._OFFSET_Y = 0;
        document.removeEventListener('mousemove',  this.fn_onElementMouseMove.bind(this));
        document.removeEventListener('mouseup', this.fn_onElementMouseUp.bind(this));
        this.fn_setPositinOrder();
    }




    fn_onChangeOrderElement(newY){
        const ref = parseInt(this._DRAGED_ITEM.getAttribute("data-order"));
        const itemBefore = ref > 0 ? this._ITEM_ORDERS[ref-1] : null;
        const itemAfter = ref < this._ITEM_ORDERS.length-1 ? this._ITEM_ORDERS[ref+1] : null;

        if (itemBefore != null && itemBefore.hasOwnProperty("el")){
            const itemBeforeRectTop =  parseInt(itemBefore.el.style.top);
            if (newY <= itemBeforeRectTop ){
                this.fn_setChangeOrder(this._DRAGED_ITEM , itemBefore.el , false);
            }
        }

        if (itemAfter != null  && itemAfter.hasOwnProperty("el")){
            const itemAfterRect = itemAfter.el.getBoundingClientRect();
            const itemAfterRectBottom = parseInt(itemAfter.el.style.top) /////- itemAfterRect.height/2
            if (newY >= itemAfterRectBottom){
                this.fn_setChangeOrder(this._DRAGED_ITEM , itemAfter.el , true);
            }
        }
    }

    fn_setChangeOrder(elReference , elDestination , isBefore=true){
        const ref = parseInt(elReference.getAttribute("data-order"));
        const des = parseInt(elDestination.getAttribute("data-order"));

        if(isBefore){
            [this._ITEM_ORDERS[ref], this._ITEM_ORDERS[des]] = [this._ITEM_ORDERS[des], this._ITEM_ORDERS[ref]];
        }
        else{
            [this._ITEM_ORDERS[des], this._ITEM_ORDERS[ref]] = [this._ITEM_ORDERS[ref], this._ITEM_ORDERS[des]];
        }

        this.fn_setPositinOrder();
    }

    fn_setPositinOrder(){
        const data = this._COMPONENT_CONFIG;
        const prop_height               =  data.hasOwnProperty("prop_height")        ?  data.prop_height           : 50 ;

        if (this._ITEM_ORDERS != null && Array.isArray(this._ITEM_ORDERS)) {
            for (let i = 0; i < this._ITEM_ORDERS.length; i++) {
                const item = this._ITEM_ORDERS[i];
                if (item.hasOwnProperty("el")){
                    item.el.style.top = i*prop_height
                    item.el.setAttribute("data-order" , i);
                }
            }
        }

        this.fn_onCLickOrder();
    }

    fn_onClickPinDraggable(element , e ){
        e.stopPropagation();

        const data = this._COMPONENT_CONFIG;
        const prop_size                 =  data.hasOwnProperty("prop_size")          ?  data.prop_size             : null ;
        const prop_colorIcon            =  data.hasOwnProperty("prop_colorIcon")     ?  data.prop_colorIcon        : "" ;

        const ref = parseInt(element.parentElement.getAttribute("data-order"));

        if (this._ITEM_ORDERS != null && Array.isArray(this._ITEM_ORDERS)) {
            const item = this._ITEM_ORDERS[ref];

            const isPin = item.hasOwnProperty("isPin") ? !item.isPin : true;
            this._ITEM_ORDERS[ref].isPin = isPin;

            element.innerHTML = isPin ? tools_icons.icon_pin_close({size : prop_size /*, colors: {primary: prop_colorIcon}*/} ) : tools_icons.icon_pin_open({size : prop_size /*, colors: {primary: prop_colorIcon}*/} ) ;

            if (!isPin){
                element.classList.remove(`item-daragble-orders-icon-${this._COMPONENT_RANDOM_ID}-active`)
            }
            else{
                element.classList.add(`item-daragble-orders-icon-${this._COMPONENT_RANDOM_ID}-active`)
            }
        }
    }

    fn_onCLickOrder(){
        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("fn_callback") && typeof data.fn_callback != null){
            data.fn_callback(this._ITEM_ORDERS);
        }
    }
}


/*-------------------------------------
 081-01) recycler view
-------------------------------------*/
class ComponentRecyclerViewBase extends ComponentBase{


    /* ---------------------------------------------
        PROPERTYs Pattern
     --------------------------------------------- */
    _COMPONENT_PATTERN = {
        prop_formClass: {
            prop: "prop_formClass",
            default: []
        },
        prop_formtSyles: {
            prop: "prop_formtSyles",
            default: {}
        },
        prop_componentsName: {
            prop: "prop_componentsName",
            default: ""
        },
        prop_componentsParams: {
            prop: "prop_componentsParams",
            default: ""
        },
    }


    /* ---------------------------------------------
           PROPERTYs Props
    --------------------------------------------- */
    _COMPONENT_PROPS = {
        part_structure: [
            this._COMPONENT_PATTERN.prop_formtSyles,
        ],

        part_form: [
            this._COMPONENT_PATTERN.prop_formClass,
            this._COMPONENT_PATTERN.prop_componentsName,
            this._COMPONENT_PATTERN.prop_componentsParams,
        ],
    };


    /* ---------------------------------------------
   PROPERTYs Schema
   --------------------------------------------- */
    _COMPONENT_SCHEMA = {
        part_structure: {
            part_form:{

            } ,
        }
    }

}
window.ComponentRecyclerView  = class ComponentRecyclerView extends ComponentRecyclerViewBase{


    /* ---------------------------------------------
       SETUP
    --------------------------------------------- */
    constructor(elId , config) {
        super(
            listComponent[ComponentRecyclerView.name] ,
            elId
        );
        super.renderComponent(config);
    }



    /* ---------------------------------------------
       TEMPLATEs
    --------------------------------------------- */
    componentFn(){
        this.onRegisterFinish().then(el => {
            this.fn_readyItemsRecyclerView();
        })
    }

    templateFn(partName = null){
        switch (partName){
            case "part_structure":
                return this.template_render_structure( partName );
            case "part_form":
                return this.template_render_form( partName );
            default:
                return this.templateBasic_render([]);
        }
    }

    template_render_structure(partName) {
        const data = this.getPartProps(partName)
        const prop_formtSyles       =   data.hasOwnProperty("prop_formtSyles")       ?  data.prop_formtSyles               : {};

        const content = `
        
        <style>
             #${this._COMPONENT_ID} #component-recycler-view-form-${this._COMPONENT_RANDOM_ID}{
                  ${tools_public.renderListStyle(prop_formtSyles)};
             }
        </style>
       ${this.templateFn("part_form") ?? ""}
                `;
        return this.templateBasic_render_structure(content);
    }

    template_render_form(partName) {
        const data = this.getPartProps(partName)

        if (data != null){

            const prop_formClass       =   data.hasOwnProperty("prop_formClass")       ?  data.prop_formClass               : [];

            return `
<section data-part-name="${partName}" 
         id="component-recycler-view-form-${this._COMPONENT_RANDOM_ID}"
         class="${tools_public.renderListClass(prop_formClass)}">
         
         Hello World
    
</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }





    /* ---------------------------------------------
       FUNCTIONs
    --------------------------------------------- */

    fn_getFormElement(){
        return document.querySelector(`#${this._COMPONENT_ID} #component-recycler-view-form-${this._COMPONENT_RANDOM_ID}`)
    }

    fn_readyItemsRecyclerView(){
        const formEl = this.fn_getFormElement();

        if (formEl != null){
            formEl.innerHTML = "";
            const data = this._COMPONENT_CONFIG;
            const prop_componentsName       =   data.hasOwnProperty("prop_componentsName")       ?  data.prop_componentsName               : "";
            const prop_componentsParams     =   data.hasOwnProperty("prop_componentsParams")     ?  data.prop_componentsParams             : [];

            if (prop_componentsParams != null && Array.isArray(prop_componentsParams)){
                let componentSelected = null;
                Object.keys(listComponent).forEach(key=> {
                    const itemComponent = listComponent[key];
                    if (itemComponent == prop_componentsName){
                        componentSelected = key;
                        return
                    }
                });

                if(componentSelected != null){
                    for (let i = 0; i < prop_componentsParams.length; i++) {
                        const itemView = prop_componentsParams[i];
                        const itemViewId = `component-recycler-view-form-${this._COMPONENT_RANDOM_ID}-${i}`;
                        formEl.innerHTML = formEl.innerHTML +`
                        <${prop_componentsName} id="${itemViewId}"> </${prop_componentsName}>
                        `;

                        const itemViewComponent = new  window[componentSelected](
                            itemViewId ,
                            itemView
                        )
                    }
                }
            }
        }

    }

}





//===============================================================================================================
// [80 - 89] views tools -> [082] elements tools
//===============================================================================================================

/*-------------------------------------
 082-01) Component tools Table config
-------------------------------------*/
class ComponentToolsTableConfigBase extends ComponentBase{

    _DATA_TYPE_REAL = 0;
    _DATA_TYPE_TEXT = 1;
    _DATA_TYPE_NUMBER = 2;
    _DATA_TYPE_DATE = 3;
    _DATA_TYPE_DATE_TIME = 4;
    _DATA_TYPE_TIME = 5;
    _DATA_TYPE_HTML = 6;

    _ACTION_NONE = 0;
    _ACTION_SUM = 1;
    _ACTION_AVG = 2;
    _ACTION_MIN = 3;
    _ACTION_MAX = 4;
    _ACTION_COUNT_ALL = 5;
    _ACTION_COUNT_DISTINCT = 6;
    _ACTION_NUMBERS = 7;

    /* ---------------------------------------------
     PROPERTYs Pattern
     --------------------------------------------- */
    _COMPONENT_PATTERN = {
        prop_size : {
            prop: "prop_size" ,
            default: tools_css.standardSizes.m.name
        } ,
        prop_langSelected: {
            prop: "prop_langSelected",
            default: component_props.directionRtl ? "fa" : "en"
        } ,
        prop_langs: {
            prop: "prop_langs",
            default: {
                fa: {
                    titleSelectColumns:                   "انتخاب ستون ها" ,
                    toolstipSelectColumns:                "با کمک فیلد زیر، ستونهایی که نیاز می باشد که در خروجی باشند، را انتخاب نمایید" ,

                    headerCol_id:                         "شناسه" ,
                    headerCol_headerName:                 "برچسب" ,
                    headerCol_headerTitle:                "عنوان" ,
                    headerCol_headerBackgroundColor:      "پس زمینه عنوان" ,
                    headerCol_headerColor:                "زنگ عنوان" ,
                    headerCol_headerDataType:             "نوع داده عنوان" ,
                    headerCol_footerBackgroundColor:      "پس زمینه پاورقی" ,
                    headerCol_footerColor:                "رنگ پاورقی" ,
                    headerCol_footerAction:               "عملیات پاورقی" ,

                    dataType_real:                        "اصلی" ,
                    dataType_text:                        "متنی" ,
                    dataType_number:                      "عدد" ,
                    dataType_date:                        "تاریخ" ,
                    dataType_date_time:                   "تاریخ - ساعت" ,
                    dataType_time:                        "ساعت" ,
                    dataType_html:                        "html" ,

                    action_none:                          "بدون عملیات" ,
                    action_sum:                           "جمع" ,
                    action_avg:                           "میانگین" ,
                    action_min:                           "حداقل" ,
                    action_max:                           "حداکثر" ,
                    action_countAll:                      "جمع کل" ,
                    action_countDistinct:                 "جمع کل متمایز" ,
                    action_numbers:                       "اعداد" ,
                } ,
                en: {
                    titleSelectColumns:                   "Select Columns" ,
                    toolstipSelectColumns:                "Use the field below to select the columns that need to be in the output" ,

                    headerCol_id:                         "Id" ,
                    headerCol_headerName:                 "Header Name" ,
                    headerCol_headerTitle:                "Header Title" ,
                    headerCol_headerBackgroundColor:      "Header BgColor" ,
                    headerCol_headerColor:                "Header Color" ,
                    headerCol_headerDataType:             "Header DataType" ,
                    headerCol_footerBackgroundColor:      "Footer BgColor" ,
                    headerCol_footerColor:                "Footer Color" ,
                    headerCol_footerAction:               "Footer Color" ,

                    dataType_real:                        "Real" ,
                    dataType_text:                        "Text" ,
                    dataType_number:                      "Numbers" ,
                    dataType_date:                        "Date" ,
                    dataType_date_time:                   "Date - Time" ,
                    dataType_time:                        "Time" ,
                    dataType_html:                        "Html" ,

                    action_none:                          "None" ,
                    action_sum:                           "Sum" ,
                    action_avg:                           "Avg" ,
                    action_min:                           "Min" ,
                    action_max:                           "Max" ,
                    action_countAll:                      "Count All" ,
                    action_countDistinct:                 "Count Distinct" ,
                    action_numbers:                       "Numbers" ,

                }
            }
        },

        prop_columns: {
            prop: "prop_columns",
            default: []
        },
    };


    /* ---------------------------------------------
           PROPERTYs Props
    --------------------------------------------- */
    _COMPONENT_PROPS = {
        part_structure: [

        ],

        part_selectColumns: [
            this._COMPONENT_PATTERN.prop_size,
            this._COMPONENT_PATTERN.prop_langSelected,
            this._COMPONENT_PATTERN.prop_langs,
            this._COMPONENT_PATTERN.prop_columns,
        ],

        part_tableConfig: [
            this._COMPONENT_PATTERN.prop_size,
            this._COMPONENT_PATTERN.prop_langSelected,
            this._COMPONENT_PATTERN.prop_langs,
            this._COMPONENT_PATTERN.prop_columns,
        ],

        part_tableConfig_headerTitle: [
            this._COMPONENT_PATTERN.prop_size,
            this._COMPONENT_PATTERN.prop_langSelected,
            this._COMPONENT_PATTERN.prop_langs,
        ],

        part_tableConfig_headerBackgroundColor: [
            this._COMPONENT_PATTERN.prop_size,
        ],

        part_tableConfig_headerColor: [
            this._COMPONENT_PATTERN.prop_size,
        ],

        part_tableConfig_headerDataType: [
            this._COMPONENT_PATTERN.prop_size,
            this._COMPONENT_PATTERN.prop_langSelected,
            this._COMPONENT_PATTERN.prop_langs,
        ],

        part_tableConfig_footerBackgroundColor: [
            this._COMPONENT_PATTERN.prop_size,
        ],

        part_tableConfig_footerColor: [
            this._COMPONENT_PATTERN.prop_size,
        ],

        part_tableConfig_footerAction: [
            this._COMPONENT_PATTERN.prop_size,
            this._COMPONENT_PATTERN.prop_langSelected,
            this._COMPONENT_PATTERN.prop_langs,
        ],
    };



    /* ---------------------------------------------
   PROPERTYs Schema
   --------------------------------------------- */
    _COMPONENT_SCHEMA = {
        part_structure: {
            part_selectColumns:{} ,
            part_tableConfig:{
                part_tableConfig_headerTitle: {},
                part_tableConfig_headerBackgroundColor: {},
                part_tableConfig_headerColor: {},
                part_tableConfig_headerDataType: {},
                part_tableConfig_footerBackgroundColor: {},
                part_tableConfig_footerColor: {},
                part_tableConfig_footerAction: {},
            } ,
        }
    }

}
window.ComponentToolsTableConfig = class ComponentToolsTableConfig extends ComponentToolsTableConfigBase{

    _COLOMNS_SELECTED = [];
    _COLOMNS_OREDER = [];

    /* ---------------------------------------------
       SETUP
    --------------------------------------------- */
    constructor(elId , config) {
        super(
            listComponent[ComponentToolsTableConfig.name] ,
            elId
        );
        super.renderComponent(config);
    }



    /* ---------------------------------------------
       TEMPLATEs
    --------------------------------------------- */
    componentFn(){
        this.templateFn("part_selectColumns");
        this.templateFn("part_tableConfig");

        this.renderTableOptions();

    }

    templateFn(partName = null){
        switch (partName){
            case "part_structure":
                return this.template_render_structure(partName);
            case "part_selectColumns":
                return this.componentFn_render_selectColumns(partName);
            case "part_tableConfig":
                return this.componentFn_render_tableConfig(partName);
            case "part_tableConfig_headerTitle":
                return this.componentFn_render_tableConfig_headerTitle(partName);
            case "part_tableConfig_headerBackgroundColor":
                return this.componentFn_render_tableConfig_headerBackgroundColor(partName);
            case "part_tableConfig_headerColor":
                return this.componentFn_render_tableConfig_headerColor(partName);
            case "part_tableConfig_headerDataType":
                return this.componentFn_render_tableConfig_headerDataType(partName);
            case "part_tableConfig_footerBackgroundColor":
                return this.componentFn_render_tableConfig_footerBackgroundColor(partName);
            case "part_tableConfig_footerColor":
                return this.componentFn_render_tableConfig_footerColor(partName);
            case "part_tableConfig_footerAction":
                return this.componentFn_render_tableConfig_footerAction(partName);
            default:
                return this.templateBasic_render();
        }
    }

    template_render_structure(partName) {
        const data = this.getPartProps(partName)

        const content = `
        
           <component-select-columns id="component-tools-table-config-select-columns-${this._COMPONENT_RANDOM_ID}"> </component-select-columns>
           
           <component-table-responsible id="component-tools-table-config-table-responsible-${this._COMPONENT_RANDOM_ID}"> </component-table-responsible>
           
                `;
        return this.templateBasic_render_structure(content);

    }

    componentFn_render_selectColumns(partName) {
        const data = this.getPartProps(partName)

        if (data != null){
            const prop_size             =  data.hasOwnProperty("prop_size")                   ?  data.prop_size              : "";
            const prop_langSelected     =  data.hasOwnProperty("prop_langSelected")           ?  data.prop_langSelected      : "";
            const prop_langs            =  data.hasOwnProperty("prop_langs")                  ?  data.prop_langs             : {};
            const prop_columns          =  data.hasOwnProperty("prop_columns")                ?  data.prop_columns           : [];

            let langTitleSelectColumns = "";
            let langToolstipSelectColumns = "";
            if (prop_langs != null && prop_langSelected != null && prop_langs.hasOwnProperty(prop_langSelected)){
                const langs= prop_langs[prop_langSelected];
                langTitleSelectColumns = langs?.titleSelectColumns ?? "Select Columns";
                langToolstipSelectColumns = langs?.toolstipSelectColumns ?? "";
            }

            if (prop_columns != null && Array.isArray(prop_columns)){
                for (let i = 0; i < prop_columns.length; i++) {
                    const itemCol = prop_columns[i];
                    if (itemCol != null && itemCol.hasOwnProperty("name") && itemCol.hasOwnProperty("title"))
                    {
                        this._COLOMNS_SELECTED.push({
                            name: itemCol.name ,
                            title: itemCol.title ,
                            selected: true ,

                            id:                  "1" ,
                            header_name:         `<b>${itemCol.name}</b>`,

                            value: {
                                header_title:        itemCol.title,
                                header_background:   component_props.primaryColor1,
                                header_color:        component_props.shanColor1,
                                header_dataType:     0,
                                footer_background:   component_props.primaryColor1,
                                footer_color:         component_props.shanColor1,
                                footer_action:       0,
                            }
                        })
                    }
                }
            }
            this._COLOMNS_SELECTED  = tools_public.addExcelKeys(this._COLOMNS_SELECTED , "id");
            this._COLOMNS_OREDER = this._COLOMNS_SELECTED

            for (let i = 0; i < this._COLOMNS_SELECTED.length; i++) {
                const item = this._COLOMNS_SELECTED[i];
                const itemRow = item.id;

                this._COLOMNS_SELECTED[i].header_title =      `<component-input id="component-tools-table-config-row-${this._COMPONENT_RANDOM_ID}-col-header-title-${itemRow}-${i}"></component-input>`
                this._COLOMNS_SELECTED[i].header_background = `<component-input-color id="component-tools-table-config-row-${this._COMPONENT_RANDOM_ID}-col-header-background-${itemRow}-${i}"></component-input-color>`
                this._COLOMNS_SELECTED[i].header_color =      `<component-input-color id="component-tools-table-config-row-${this._COMPONENT_RANDOM_ID}-col-header-color-${itemRow}-${i}"></component-input-color>`
                this._COLOMNS_SELECTED[i].header_dataType =   `<component-select-option id="component-tools-table-config-row-${this._COMPONENT_RANDOM_ID}-col-header-data-type-${itemRow}-${i}"></component-select-option>`

                this._COLOMNS_SELECTED[i].footer_background =  `<component-input-color id="component-tools-table-config-row-${this._COMPONENT_RANDOM_ID}-col-footer-background-${itemRow}-${i}"></component-input-color>`
                this._COLOMNS_SELECTED[i].footer_color =       `<component-input-color id="component-tools-table-config-row-${this._COMPONENT_RANDOM_ID}-col-footer-color-${itemRow}-${i}"></component-input-color>`
                this._COLOMNS_SELECTED[i].footer_action =      `<component-select-option id="component-tools-table-config-row-${this._COMPONENT_RANDOM_ID}-col-footer-action-${itemRow}-${i}"></component-select-option>`

            }

            new window.ComponentSelectColumns(
                `component-tools-table-config-select-columns-${this._COMPONENT_RANDOM_ID}` ,
                {
                    classList: "mt-2"  ,
                    prop_size ,
                    prop_title:                    langTitleSelectColumns  ,
                    prop_labelTooltipDescription:  langToolstipSelectColumns  ,
                    prop_columns:                  this._COLOMNS_SELECTED   ,
                    prop_draggable:                true  ,
                    fn_callback: (event , order)=>{

                        if (this._COLOMNS_SELECTED != null && Array.isArray(this._COLOMNS_SELECTED)){
                            for (let i = 0; i < this._COLOMNS_SELECTED.length; i++) {
                                const itemCol = this._COLOMNS_SELECTED[i];

                                let selected = false;
                                if (itemCol != null && itemCol.hasOwnProperty("id") && order != null && Array.isArray(order) )
                                {
                                    for (let x = 0; x < order.length; x++) {
                                        const item = order[x];

                                        if (item != null && item.hasOwnProperty("id") && item.hasOwnProperty("selected") && item.id == itemCol.id){
                                            selected = item.selected;
                                            break;
                                        }
                                    }
                                }

                                this._COLOMNS_SELECTED[i].selected = selected;
                            }
                        }
                        this._COLOMNS_OREDER = order;
                        this.templateFn("part_tableConfig");
                        this.renderTableOptions();
                        this.fn_callback();
                    }
                }
            )
        }
    }

    componentFn_render_tableConfig(partName) {
        const data = this.getPartProps(partName)

        if (data != null){
            const prop_size             =  data.hasOwnProperty("prop_size")               ?  data.prop_size              : "";
            const prop_langs            =  data.hasOwnProperty("prop_langs")              ?  data.prop_langs             : [];
            const prop_langSelected     =  data.hasOwnProperty("prop_langSelected")       ?  data.prop_langSelected      : "";
            const directionRtl          = data.hasOwnProperty("directionRtl")             ? data.directionRtl            : (component_props != null && component_props.hasOwnProperty("directionRtl") ? component_props.directionRtl : false)

            let columnsSelected = [];
            if (this._COLOMNS_SELECTED != null && Array.isArray(this._COLOMNS_SELECTED)){
                for (let i = 0; i < this._COLOMNS_SELECTED.length; i++) {
                    const itemCol = this._COLOMNS_SELECTED[i];

                    if (itemCol != null && itemCol.hasOwnProperty("selected") && itemCol.selected)
                    {
                        columnsSelected.push(itemCol)
                    }
                }
            }

            let headerCol_id = "";
            let headerCol_headerName = "";
            let headerCol_headertitle = "";
            let headerCol_headerBackgroundColor = "";
            let headerCol_headerColor = "";
            let headerCol_headerDataType = "";
            let headerCol_footerBackgroundColor = "";
            let headerCol_footerColor = "";
            let headerCol_footerAction = "";
            if (prop_langs != null && prop_langSelected != null && prop_langs.hasOwnProperty(prop_langSelected)){
                const langs= prop_langs[prop_langSelected];
                headerCol_id =                    langs?.headerCol_id                    ?? "Id";
                headerCol_headerName =            langs?.headerCol_headerName            ??  "Header Name" ;
                headerCol_headertitle =           langs?.headerCol_headerTitle           ?? "Header Title" ;
                headerCol_headerBackgroundColor = langs?.headerCol_headerBackgroundColor ?? "Header BgColor";
                headerCol_headerColor =           langs?.headerCol_headerColor           ?? "Header Color";
                headerCol_headerDataType =        langs?.headerCol_headerDataType        ?? "Header DataType";
                headerCol_footerBackgroundColor = langs?.headerCol_footerBackgroundColor ?? "Footer BgColor";
                headerCol_footerColor =           langs?.headerCol_footerColor           ?? "Footer Color";
                headerCol_footerAction =          langs?.headerCol_footerAction          ?? "Footer Color";
            }



            new window.ComponentTableResponsible(
                `component-tools-table-config-table-responsible-${this._COMPONENT_RANDOM_ID}` ,
                {
                    classList: [" col-12" ," row" , "mt-2" , "p-0" , "m-0"/*, directionRtl ? "me-0 ms-4" : "ms-0 me-4"*/]   ,
                    prop_size ,

                    prop_order : ["id" , "header_name" , "header_title" , "header_background" , "header_color"  , "header_dataType" , "footer_background" , "footer_color" , "footer_action"] ,
                    prop_header : [
                        {id:"id"                    , content: headerCol_id                                                                   ,  inMobile: true  },
                        {id:"header_name"           , content: headerCol_headerName                                                          ,  inMobile: true  },
                        {id:"header_title"          , content: headerCol_headertitle            , icon: tools_icons.icon_inputText           ,  inMobile: true  },
                        {id:"header_background"     , content: headerCol_headerBackgroundColor  , icon: tools_icons.icon_inputColor          ,  inMobile: true  },
                        {id:"header_color"          , content: headerCol_headerColor            , icon: tools_icons.icon_inputColor          ,  inMobile: true  },
                        {id:"header_dataType"       , content: headerCol_headerDataType         , icon: tools_icons.icon_selectOption        ,  inMobile: true  },
                        {id:"footer_background"     , content: headerCol_footerBackgroundColor  , icon: tools_icons.icon_inputColor          ,  inMobile: true  },
                        {id:"footer_color"          , content: headerCol_footerColor            , icon: tools_icons.icon_inputColor          ,  inMobile: true  },
                        {id:"footer_action"         , content: headerCol_footerAction           , icon: tools_icons.icon_math                ,  inMobile: true  },
                    ] ,
                    prop_data : columnsSelected,
                    prop_options: null ,
                    fn_onCallbackColSelector: (event , order , isCompleteTrue) =>{
                        this.renderTableOptions();
                    },
                    fn_onCallbackResizeTable: (event) =>{
                        this.renderTableOptions();
                    }
                }
            )
        }
    }



    componentFn_render_tableConfig_headerTitle(partName) {
        const data = this.getPartProps(partName)

        if (data != null){
            const prop_size             =  data.hasOwnProperty("prop_size")        ?  data.prop_size              : "";

            if (this._COLOMNS_SELECTED != null && Array.isArray(this._COLOMNS_SELECTED)){
                for (let i = 0; i < this._COLOMNS_SELECTED.length; i++) {
                    const item = this._COLOMNS_SELECTED[i];
                    const itemRow = item.id;

                    new window.ComponentInput(
                        `component-tools-table-config-row-${this._COMPONENT_RANDOM_ID}-col-header-title-${itemRow}-${i}` ,
                        {
                            prop_structureClass: ["mx-2"]  ,
                            prop_structureStyles: {
                                //"margin-top" : "45px"
                            } ,
                            prop_labelShow: false ,
                            prop_size: prop_size ,
                            prop_value: item?.value?.header_title ?? "" ,
                            fn_oninput: (event , value) => {
                                this._COLOMNS_SELECTED[i].value.header_title = value;
                                this.fn_callback();
                            } ,
                        }
                    )
                }
            }
        }
    }

    componentFn_render_tableConfig_headerBackgroundColor(partName) {
        const data = this.getPartProps(partName)

        if (data != null){
            const prop_size             =  data.hasOwnProperty("prop_size")        ?  data.prop_size              : "";

            if (this._COLOMNS_SELECTED != null && Array.isArray(this._COLOMNS_SELECTED)){
                for (let i = 0; i < this._COLOMNS_SELECTED.length; i++) {
                    const item = this._COLOMNS_SELECTED[i];
                    const itemRow = item.id;

                    new window.ComponentInputColor(
                        `component-tools-table-config-row-${this._COMPONENT_RANDOM_ID}-col-header-background-${itemRow}-${i}` ,
                        {
                            prop_structureClass:     ["mx-2"]  ,
                            prop_labelShow:          false ,
                            prop_size:               prop_size ,
                            prop_colorSelected:      item?.value?.header_background ?? null ,
                            fn_onChangeColor:        (color) => {
                                this._COLOMNS_SELECTED[i].value.header_background = color;
                                this.fn_callback();
                            } ,
                        }
                    )
                }
            }
        }
    }

    componentFn_render_tableConfig_headerColor(partName) {
        const data = this.getPartProps(partName)

        if (data != null){
            const prop_size             =  data.hasOwnProperty("prop_size")        ?  data.prop_size              : "";

            if (this._COLOMNS_SELECTED != null && Array.isArray(this._COLOMNS_SELECTED)){
                for (let i = 0; i < this._COLOMNS_SELECTED.length; i++) {
                    const item = this._COLOMNS_SELECTED[i];
                    const itemRow = item.id;

                    new window.ComponentInputColor(
                        `component-tools-table-config-row-${this._COMPONENT_RANDOM_ID}-col-header-color-${itemRow}-${i}` ,
                        {
                            prop_structureClass:     ["mx-2"]  ,
                            prop_labelShow:          false ,
                            prop_size:               prop_size ,
                            prop_colorSelected:      item?.value?.header_color ?? null ,
                            fn_onChangeColor:        (color) => {
                                this._COLOMNS_SELECTED[i].value.header_color = color;
                                this.fn_callback();
                            } ,
                        }
                    )
                }
            }
        }
    }

    componentFn_render_tableConfig_headerDataType(partName) {
        const data = this.getPartProps(partName)

        if (data != null){
            const prop_size             =  data.hasOwnProperty("prop_size")               ?  data.prop_size              : "";
            const prop_langs            =  data.hasOwnProperty("prop_langs")              ?  data.prop_langs             : [];
            const prop_langSelected     =  data.hasOwnProperty("prop_langSelected")       ?  data.prop_langSelected      : "";

            let dataType_real = "";
            let dataType_text = "";
            let dataType_number = "";
            let dataType_date = "";
            let dataType_date_time = "";
            let dataType_time = "";
            let dataType_html = "";
            if (prop_langs != null && prop_langSelected != null && prop_langs.hasOwnProperty(prop_langSelected)){
                const langs= prop_langs[prop_langSelected];
                dataType_real =           langs?.dataType_real      ?? "Real";
                dataType_text =           langs?.dataType_text      ??  "Text" ;
                dataType_number =         langs?.dataType_number    ?? "Numbers";
                dataType_date =           langs?.dataType_date      ?? "Date";
                dataType_date_time =      langs?.dataType_date_time ?? "Date - Time";
                dataType_time =           langs?.dataType_time      ?? "Time";
                dataType_html =           langs?.dataType_html      ?? "Html";
            }

            if (this._COLOMNS_SELECTED != null && Array.isArray(this._COLOMNS_SELECTED)){
                for (let i = 0; i < this._COLOMNS_SELECTED.length; i++) {
                    const item = this._COLOMNS_SELECTED[i];
                    const itemRow = item.id;

                    new window.ComponentSelectOption(
                        `component-tools-table-config-row-${this._COMPONENT_RANDOM_ID}-col-header-data-type-${itemRow}-${i}` ,
                        {
                            prop_structureClass:     ["mx-2"]  ,
                            prop_labelShow:          false ,
                            prop_size:               prop_size ,
                            prop_itemSelected:       item?.value?.header_dataType ?? 0 ,

                            prop_options: [
                                {id:this._DATA_TYPE_REAL       , name: dataType_real} ,
                                {id:this._DATA_TYPE_TEXT       , name: dataType_text} ,
                                {id:this._DATA_TYPE_NUMBER     , name: dataType_number} ,
                                {id:this._DATA_TYPE_DATE       , name: dataType_date} ,
                                {id:this._DATA_TYPE_DATE_TIME  , name: dataType_date_time} ,
                                {id:this._DATA_TYPE_TIME       , name: dataType_time} ,
                                {id:this._DATA_TYPE_HTML       , name: dataType_html} ,
                            ] ,

                            fn_callback:  (event , index)=>{
                                this._COLOMNS_SELECTED[i].value.header_dataType = index;
                                this.fn_callback();
                            } ,


                        }
                    )
                }
            }
        }
    }


    componentFn_render_tableConfig_footerBackgroundColor(partName) {
        const data = this.getPartProps(partName)

        if (data != null){
            const prop_size             =  data.hasOwnProperty("prop_size")        ?  data.prop_size              : "";

            if (this._COLOMNS_SELECTED != null && Array.isArray(this._COLOMNS_SELECTED)){
                for (let i = 0; i < this._COLOMNS_SELECTED.length; i++) {
                    const item = this._COLOMNS_SELECTED[i];
                    const itemRow = item.id;

                    new window.ComponentInputColor(
                        `component-tools-table-config-row-${this._COMPONENT_RANDOM_ID}-col-footer-background-${itemRow}-${i}` ,
                        {
                            prop_structureClass:     ["mx-2"]  ,
                            prop_labelShow:          false ,
                            prop_size:               prop_size ,
                            prop_colorSelected:      item?.value?.footer_background ?? null ,
                            fn_onChangeColor:        (color) => {
                                this._COLOMNS_SELECTED[i].value.footer_background = color;
                                this.fn_callback();
                            } ,
                        }
                    )
                }
            }
        }
    }

    componentFn_render_tableConfig_footerColor(partName) {
        const data = this.getPartProps(partName)

        if (data != null){
            const prop_size             =  data.hasOwnProperty("prop_size")        ?  data.prop_size              : "";

            if (this._COLOMNS_SELECTED != null && Array.isArray(this._COLOMNS_SELECTED)){
                for (let i = 0; i < this._COLOMNS_SELECTED.length; i++) {
                    const item = this._COLOMNS_SELECTED[i];
                    const itemRow = item.id;

                    new window.ComponentInputColor(
                        `component-tools-table-config-row-${this._COMPONENT_RANDOM_ID}-col-footer-color-${itemRow}-${i}` ,
                        {
                            prop_structureClass:     ["mx-2"]  ,
                            prop_labelShow:          false ,
                            prop_size:               prop_size ,
                            prop_colorSelected:      item?.value?.footer_color ?? null ,
                            fn_onChangeColor:        (color) => {
                                this._COLOMNS_SELECTED[i].value.footer_color = color;
                                this.fn_callback();
                            } ,
                        }
                    )
                }
            }
        }
    }

    componentFn_render_tableConfig_footerAction(partName) {
        const data = this.getPartProps(partName)

        if (data != null){
            const prop_size             =  data.hasOwnProperty("prop_size")        ?  data.prop_size              : "";
            const prop_langs            =  data.hasOwnProperty("prop_langs")              ?  data.prop_langs             : [];
            const prop_langSelected     =  data.hasOwnProperty("prop_langSelected")       ?  data.prop_langSelected      : "";

            let action_none = "";
            let action_sum = "";
            let action_avg = "";
            let action_min = "";
            let action_max = "";
            let action_countAll = "";
            let action_countDistinct = "";
            let action_numbers = "";
            if (prop_langs != null && prop_langSelected != null && prop_langs.hasOwnProperty(prop_langSelected)){
                const langs= prop_langs[prop_langSelected];
                action_none =                langs?.action_none            ?? "None";
                action_sum =                 langs?.action_sum             ?? "Sum";
                action_avg =                 langs?.action_avg             ?? "Avg";
                action_min =                 langs?.action_min             ?? "Min";
                action_max =                 langs?.action_max             ?? "Max";
                action_countAll =            langs?.action_countAll        ?? "Count All";
                action_countDistinct =       langs?.action_countDistinct   ?? "Count Distinct";
                action_numbers =             langs?.action_numbers         ?? "Numbers";
            }


            if (this._COLOMNS_SELECTED != null && Array.isArray(this._COLOMNS_SELECTED)){
                for (let i = 0; i < this._COLOMNS_SELECTED.length; i++) {
                    const item = this._COLOMNS_SELECTED[i];
                    const itemRow = item.id;

                    new window.ComponentSelectOption(
                        `component-tools-table-config-row-${this._COMPONENT_RANDOM_ID}-col-footer-action-${itemRow}-${i}` ,
                        {
                            prop_structureClass:     ["mx-2"]  ,
                            prop_labelShow:          false ,
                            prop_size:               prop_size ,
                            prop_itemSelected:       item?.value?.footer_action ?? 0 ,

                            prop_options: [
                                {id:this._ACTION_NONE              , name: action_none} ,
                                {id:this._ACTION_SUM               , name: action_sum} ,
                                {id:this._ACTION_AVG               , name: action_avg} ,
                                {id:this._ACTION_MIN               , name: action_min} ,
                                {id:this._ACTION_MAX               , name: action_max} ,
                                {id:this._ACTION_COUNT_ALL         , name: action_countAll} ,
                                {id:this._ACTION_COUNT_DISTINCT    , name: action_countDistinct} ,
                                {id:this._ACTION_NUMBERS           , name: action_numbers} ,
                            ] ,

                            fn_callback:  (event , index)=>{
                                this._COLOMNS_SELECTED[i].value.footer_action = index;
                                this.fn_callback();
                            } ,


                        }
                    )
                }
            }
        }
    }



    /* ---------------------------------------------
       FUNCTIONs
    --------------------------------------------- */
    renderTableOptions(){
        setTimeout(() => {
            this.templateFn("part_tableConfig_headerTitle");
            this.templateFn("part_tableConfig_headerBackgroundColor");
            this.templateFn("part_tableConfig_headerColor");
            this.templateFn("part_tableConfig_headerDataType");
            this.templateFn("part_tableConfig_footerBackgroundColor");
            this.templateFn("part_tableConfig_footerColor");
            this.templateFn("part_tableConfig_footerAction");
        }, 0);
    }


    fn_callback(){
        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("fn_callback") && typeof data.fn_callback != null){
            data.fn_callback(this._COLOMNS_OREDER , this._COLOMNS_SELECTED);
        }
    }

}


/*-------------------------------------
 082-02) Component tools Table to excel
-------------------------------------*/
class ComponentToolsTableToExcelBase extends ComponentBase{


    /* ---------------------------------------------
        PROPERTYs Pattern
     --------------------------------------------- */
    _COMPONENT_PATTERN = {
        prop_size: {
            prop: "prop_size",
            default: tools_css.standardSizes.m.name
        },

        prop_langSelected: {
            prop: "prop_langSelected",
            default: component_props.directionRtl ? "fa" : "en"
        } ,
        prop_langs: {
            prop: "prop_langs",
            default: {
                fa: {
                    stepTitleColumns:   "ستون ها" ,
                    stepTitleInfo:      "اطلاعات اکسل" ,
                    stepTitleCreation:  "ایجاد" ,

                    errorForContinue:  "در حال حاضر استفاده از سرویس مد نظر امکان پذیر نمی باشد" ,
                } ,
                en: {
                    stepTitleColumns:   "Columns" ,
                    stepTitleInfo:      "Excel Info" ,
                    stepTitleCreation:  "Creation" ,

                    errorForContinue: "The requested service is currently unavailable"
                }
            }
        },

        prop_stepClass: {
            prop: "prop_stepClass",
            default: ["bg-white" , "mx-2" , "border" , "shadow-sm"]
        },
        prop_stepStyles: {
            prop: "prop_stepStyles",
            default: {}
        },

        prop_columns: {
            prop: "prop_columns",
            default: []
        },


        var_stepSelected: {
            prop: "var_stepSelected",
            default: 0
        },
    }


    /* ---------------------------------------------
           PROPERTYs Props
    --------------------------------------------- */
    _COMPONENT_PROPS = {
        part_structure: [

        ],

        part_breadcrumb: [
            this._COMPONENT_PATTERN.prop_size,
            this._COMPONENT_PATTERN.prop_langSelected,
            this._COMPONENT_PATTERN.prop_langs,
            this._COMPONENT_PATTERN.var_stepSelected,
        ],

        part_steps: [
            this._COMPONENT_PATTERN.prop_stepClass,
            this._COMPONENT_PATTERN.prop_stepStyles,
            this._COMPONENT_PATTERN.var_stepSelected,
            this._COMPONENT_PATTERN.prop_langSelected,
            this._COMPONENT_PATTERN.prop_langs,
        ],

        part_step_columns: [
        ],

        part_step_columns_selector: [
            this._COMPONENT_PATTERN.prop_size,
            this._COMPONENT_PATTERN.prop_columns,
        ],
    };


    /* ---------------------------------------------
   PROPERTYs Schema
   --------------------------------------------- */
    _COMPONENT_SCHEMA = {
        part_structure: {
            part_breadcrumb: {} ,
            part_steps:{
                part_step_columns: {
                    part_step_columns_selector:{}
                }
            }
        }
    }

}
window.ComponentToolsTableToExcel  = class ComponentToolsTableToExcel extends ComponentToolsTableToExcelBase{

    _COLUMNS_ORDERS= [];
    _COLUMNS_SELECTED= [];

    /* ---------------------------------------------
       SETUP
    --------------------------------------------- */
    constructor(elId , config) {
        super(
            listComponent[ComponentToolsTableToExcel.name] ,
            elId
        );
        super.renderComponent(config);
    }



    /* ---------------------------------------------
       TEMPLATEs
    --------------------------------------------- */
    componentFn(){
        this.templateFn("part_breadcrumb");
        this.templateFn("part_step_columns_selector");
    }

    templateFn(partName = null){
        switch (partName){
            case "part_structure":
                return this.template_render_structure( partName );
            case "part_steps":
                return this.template_render_steps( partName );
            case "part_step_columns":
                return this.template_render_stepColumns( partName );
            case "part_breadcrumb":
                return this.componentFn_render_breadcrumb( partName );
            case "part_step_columns_selector":
                return this.componentFn_render_columnsSelector( partName );
            default:
                return this.templateBasic_render([]);
        }
    }

    template_render_structure(partName) {
        const content = `
        
       <component-breadcrumb-with-arrow id="component-tools-table-to-excel-breadcrumb-${this._COMPONENT_RANDOM_ID}"></component-breadcrumb-with-arrow>
       
       ${this.templateFn("part_steps")}
                `;
        return this.templateBasic_render_structure(content);
    }

    template_render_steps(partName){

        const data = this.getPartProps(partName)

        if (data != null){
            const prop_stepClass        =   data.hasOwnProperty("prop_stepClass")              ?  data.prop_stepClass        :  [];
            const prop_stepStyles       =   data.hasOwnProperty("prop_stepStyles")             ?  data.prop_stepStyles       :  {};
            const var_stepSelected      =  data.hasOwnProperty("var_stepSelected")             ?  data.var_stepSelected      : 0;
            const prop_langs            =  data.hasOwnProperty("prop_langs")                   ?  data.prop_langs             : {};
            const prop_langSelected     =  data.hasOwnProperty("prop_langSelected")            ?  data.prop_langSelected      : "";


            let errorForContinue = "";
            if (prop_langs != null && prop_langSelected != null && prop_langs.hasOwnProperty(prop_langSelected)){
                const langs= prop_langs[prop_langSelected];
                errorForContinue    = langs?.errorForContinue ??  "The requested service is currently unavailable";
            }

            let stepName = ""
            switch (var_stepSelected){
                case 0:
                    stepName = "part_step_columns";
                    break;
            }


            return `
<section data-part-name="${partName}" 
         id="component-tools-table-to-excel-steps-${this._COMPONENT_RANDOM_ID}"
         class=" ${tools_public.renderListClass(prop_stepClass)}">
         
     <style>
         #${this._COMPONENT_ID} #component-tools-table-to-excel-steps-${this._COMPONENT_RANDOM_ID}{
             ${tools_public.renderListStyle(prop_stepStyles)}
         }
     </style>
     
     ${this.templateFn(stepName)}
     
     <b class="border border-danger m-2 p-2 rounded shadow-sm text-center text-danger d-block">
        ${errorForContinue}
     </b>
</section>
`;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    template_render_stepColumns(partName){

        const data = this.getPartProps(partName)

        if (data != null){

            return `
<section data-part-name="${partName}" 
         id="component-tools-table-to-excel-step-columns-${this._COMPONENT_RANDOM_ID}"
         class="p-2">
         
     <style>
         #${this._COMPONENT_ID} #omponent-tools-table-to-excel-step-columns-${this._COMPONENT_RANDOM_ID}{
              
         }
     </style>
     
     <component-tools-table-config id="omponent-tools-table-to-excel-step-column-columns-selector-${this._COMPONENT_RANDOM_ID}"></component-tools-table-config>
     
</section>
`;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }


    componentFn_render_breadcrumb(partName) {
        const data = this.getPartProps(partName)

        if (data != null){
            const prop_size             =  data.hasOwnProperty("prop_size")                    ?  data.prop_size              : "";
            const prop_langSelected     =  data.hasOwnProperty("prop_langSelected")            ?  data.prop_langSelected      : "";
            const prop_langs            =  data.hasOwnProperty("prop_langs")                   ?  data.prop_langs             : {};
            const var_stepSelected      =  data.hasOwnProperty("var_stepSelected")             ?  data.var_stepSelected       : 0;

            let stepTitleColumns = "";
            let stepTitleInfo = "";
            let stepTitleCreation = "";
            if (prop_langs != null && prop_langSelected != null && prop_langs.hasOwnProperty(prop_langSelected)){
                const langs= prop_langs[prop_langSelected];
                stepTitleColumns     = langs?.stepTitleColumns  ??   "Columns";
                stepTitleInfo        = langs?.stepTitleInfo     ??  "Excel Info";
                stepTitleCreation    = langs?.stepTitleCreation ??  "Creation";
            }


            new window.ComponentBreadcrumbWithArrow(
                `component-tools-table-to-excel-breadcrumb-${this._COMPONENT_RANDOM_ID}` ,
                {
                    classList: "mt-2"  ,
                    prop_size ,
                    prop_stepSelected : var_stepSelected ,
                    prop_breadcrumbs: [
                        {
                            id: 0 ,
                            title: stepTitleColumns
                        } ,
                        {
                            id: 1 ,
                            title: stepTitleInfo
                        } ,
                        {
                            id: 2 ,
                            title: stepTitleCreation
                        }
                    ],

                    fn_callback: (event , itemData)=>{

                    } ,

                    fn_onBackClick: (event)=>{

                    }
                }
            )
        }
    }

    componentFn_render_columnsSelector(partName) {
        const data = this.getPartProps(partName)

        if (data != null){
            const prop_size             =  data.hasOwnProperty("prop_size")                    ?  data.prop_size              : "";
            const prop_columns          =  data.hasOwnProperty("prop_columns")                 ?  data.prop_columns           : [];

            new window.ComponentToolsTableConfig(
                `omponent-tools-table-to-excel-step-column-columns-selector-${this._COMPONENT_RANDOM_ID}` ,
                {
                    classList: " "  ,
                    prop_columns
                }
            )
        }
    }


    /* ---------------------------------------------
       FUNCTIONs
    --------------------------------------------- */


}


/*-------------------------------------
 082-02) Component tools Table to print
-------------------------------------*/
class ComponentToolsTableToPrintBase extends ComponentBase{


    /* ---------------------------------------------
        PROPERTYs Pattern
     --------------------------------------------- */
    _COMPONENT_PATTERN = {
        prop_size: {
            prop: "prop_size",
            default: tools_css.standardSizes.m.name
        },

        prop_langSelected: {
            prop: "prop_langSelected",
            default: component_props.directionRtl ? "fa" : "en"
        } ,
        prop_langs: {
            prop: "prop_langs",
            default: {
                fa: {
                    stepTitleColumns:   "ستون ها" ,
                    stepTitleInfo:      "اطلاعات پرینت" ,
                    stepTitleSample:    "نمونه" ,
                    stepTitleCreation:  "ایجاد" ,

                    errorForContinue:  "در حال حاضر استفاده از سرویس مد نظر امکان پذیر نمی باشد" ,
                } ,
                en: {
                    stepTitleColumns:   "Columns" ,
                    stepTitleInfo:      "Print Info" ,
                    stepTitleSample:    "Sample" ,
                    stepTitleCreation:  "Creation" ,

                    errorForContinue: "The requested service is currently unavailable"
                }
            }
        },

        prop_stepClass: {
            prop: "prop_stepClass",
            default: ["bg-white" , "mx-2" , "border" , "shadow-sm"]
        },
        prop_stepStyles: {
            prop: "prop_stepStyles",
            default: {}
        },

        prop_columns: {
            prop: "prop_columns",
            default: []
        },


        var_stepSelected: {
            prop: "var_stepSelected",
            default: 0
        },
    }


    /* ---------------------------------------------
           PROPERTYs Props
    --------------------------------------------- */
    _COMPONENT_PROPS = {
        part_structure: [

        ],

        part_breadcrumb: [
            this._COMPONENT_PATTERN.prop_size,
            this._COMPONENT_PATTERN.prop_langSelected,
            this._COMPONENT_PATTERN.prop_langs,
            this._COMPONENT_PATTERN.var_stepSelected,
        ],

        part_steps: [
            this._COMPONENT_PATTERN.prop_stepClass,
            this._COMPONENT_PATTERN.prop_stepStyles,
            this._COMPONENT_PATTERN.var_stepSelected,
            this._COMPONENT_PATTERN.prop_langSelected,
            this._COMPONENT_PATTERN.prop_langs,
        ],

        part_step_columns: [
        ],

        part_step_columns_selector: [
            this._COMPONENT_PATTERN.prop_size,
            this._COMPONENT_PATTERN.prop_columns,
        ],
    };


    /* ---------------------------------------------
   PROPERTYs Schema
   --------------------------------------------- */
    _COMPONENT_SCHEMA = {
        part_structure: {
            part_breadcrumb: {} ,
            part_steps:{
                part_step_columns: {
                    part_step_columns_selector:{}
                }
            }
        }
    }

}
window.ComponentToolsTableToPrint  = class ComponentToolsTableToPrint extends ComponentToolsTableToPrintBase{

    _COLUMNS_ORDERS= [];
    _COLUMNS_SELECTED= [];

    /* ---------------------------------------------
       SETUP
    --------------------------------------------- */
    constructor(elId , config) {
        super(
            listComponent[ComponentToolsTableToPrint.name] ,
            elId
        );
        super.renderComponent(config);
    }



    /* ---------------------------------------------
       TEMPLATEs
    --------------------------------------------- */
    componentFn(){
        this.templateFn("part_breadcrumb");
        this.templateFn("part_step_columns_selector");
    }

    templateFn(partName = null){
        switch (partName){
            case "part_structure":
                return this.template_render_structure( partName );
            case "part_steps":
                return this.template_render_steps( partName );
            case "part_step_columns":
                return this.template_render_stepColumns( partName );
            case "part_breadcrumb":
                return this.componentFn_render_breadcrumb( partName );
            case "part_step_columns_selector":
                return this.componentFn_render_columnsSelector( partName );
            default:
                return this.templateBasic_render([]);
        }
    }

    template_render_structure(partName) {
        const content = `
        
       <component-breadcrumb-with-arrow id="component-tools-table-to-print-breadcrumb-${this._COMPONENT_RANDOM_ID}"></component-breadcrumb-with-arrow>
       
       ${this.templateFn("part_steps")}
                `;
        return this.templateBasic_render_structure(content);
    }

    template_render_steps(partName){

        const data = this.getPartProps(partName)

        if (data != null){
            const prop_stepClass        =   data.hasOwnProperty("prop_stepClass")              ?  data.prop_stepClass        :  [];
            const prop_stepStyles       =   data.hasOwnProperty("prop_stepStyles")             ?  data.prop_stepStyles       :  {};
            const var_stepSelected      =  data.hasOwnProperty("var_stepSelected")             ?  data.var_stepSelected      : 0;
            const prop_langs            =  data.hasOwnProperty("prop_langs")                   ?  data.prop_langs             : {};
            const prop_langSelected     =  data.hasOwnProperty("prop_langSelected")            ?  data.prop_langSelected      : "";


            let errorForContinue = "";
            if (prop_langs != null && prop_langSelected != null && prop_langs.hasOwnProperty(prop_langSelected)){
                const langs= prop_langs[prop_langSelected];
                errorForContinue    = langs?.errorForContinue ??  "The requested service is currently unavailable";
            }

            let stepName = ""
            switch (var_stepSelected){
                case 0:
                    stepName = "part_step_columns";
                    break;
            }


            return `
<section data-part-name="${partName}" 
         id="component-tools-table-to-print-steps-${this._COMPONENT_RANDOM_ID}"
         class=" ${tools_public.renderListClass(prop_stepClass)}">
         
     <style>
         #${this._COMPONENT_ID} #component-tools-table-to-print-steps-${this._COMPONENT_RANDOM_ID}{
             ${tools_public.renderListStyle(prop_stepStyles)}
         }
     </style>
     
     ${this.templateFn(stepName)}
     
     <b class="border border-danger m-2 p-2 rounded shadow-sm text-center text-danger d-block">
        ${errorForContinue}
     </b>
</section>
`;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    template_render_stepColumns(partName){

        const data = this.getPartProps(partName)

        if (data != null){

            return `
<section data-part-name="${partName}" 
         id="component-tools-table-to-print-step-columns-${this._COMPONENT_RANDOM_ID}"
         class="p-2">
         
     <style>
         #${this._COMPONENT_ID} #component-tools-table-to-print-step-columns-${this._COMPONENT_RANDOM_ID}{
              
         }
     </style>
     
     <component-tools-table-config id="component-tools-table-to-print-step-columns-selector-${this._COMPONENT_RANDOM_ID}"></component-tools-table-config>
     
</section>
`;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }


    componentFn_render_breadcrumb(partName) {
        const data = this.getPartProps(partName)

        if (data != null){
            const prop_size             =  data.hasOwnProperty("prop_size")                    ?  data.prop_size              : "";
            const prop_langSelected     =  data.hasOwnProperty("prop_langSelected")            ?  data.prop_langSelected      : "";
            const prop_langs            =  data.hasOwnProperty("prop_langs")                   ?  data.prop_langs             : {};
            const var_stepSelected      =  data.hasOwnProperty("var_stepSelected")             ?  data.var_stepSelected       : 0;

            let stepTitleColumns = "";
            let stepTitleInfo = "";
            let stepTitleSample = "";
            let stepTitleCreation = "";
            if (prop_langs != null && prop_langSelected != null && prop_langs.hasOwnProperty(prop_langSelected)){
                const langs= prop_langs[prop_langSelected];
                stepTitleColumns     = langs?.stepTitleColumns    ??   "Columns";
                stepTitleInfo        = langs?.stepTitleInfo       ??  "Print Info";
                stepTitleSample      = langs?.stepTitleSample     ??  "Sample";
                stepTitleCreation    = langs?.stepTitleCreation   ??  "Creation";
            }


            new window.ComponentBreadcrumbWithArrow(
                `component-tools-table-to-print-breadcrumb-${this._COMPONENT_RANDOM_ID}` ,
                {
                    classList: "mt-2"  ,
                    prop_size ,
                    prop_stepSelected : var_stepSelected ,
                    prop_breadcrumbs: [
                        {
                            id: 0 ,
                            title: stepTitleColumns
                        } ,
                        {
                            id: 1 ,
                            title: stepTitleInfo
                        } ,
                        {
                            id: 2 ,
                            title: stepTitleSample
                        } ,
                        {
                            id: 3 ,
                            title: stepTitleCreation
                        }
                    ],

                    fn_callback: (event , itemData)=>{

                    } ,

                    fn_onBackClick: (event)=>{

                    }
                }
            )
        }
    }

    componentFn_render_columnsSelector(partName) {
        const data = this.getPartProps(partName)

        if (data != null){
            const prop_size             =  data.hasOwnProperty("prop_size")                    ?  data.prop_size              : "";
            const prop_columns          =  data.hasOwnProperty("prop_columns")                 ?  data.prop_columns           : [];

            new window.ComponentToolsTableConfig(
                `component-tools-table-to-print-step-columns-selector-${this._COMPONENT_RANDOM_ID}` ,
                {
                    classList: " "  ,
                    prop_columns
                }
            )
        }
    }


    /* ---------------------------------------------
       FUNCTIONs
    --------------------------------------------- */


}








//===============================================================================================================
// [99] Others
//===============================================================================================================

/*-------------------------------------
 99-01) Component Icon
-------------------------------------*/
class ComponentIconBase extends ComponentBase{

    /* ---------------------------------------------
        PROPERTYs Pattern
     --------------------------------------------- */
    _COMPONENT_PATTERN = {
        prop_icon: {
            prop: "prop_icon",
            default: ""
        },
        prop_title: {
            prop: "prop_title",
            default: ""
        },
        prop_isItalik: {
            prop: "prop_isItalik",
            default: false
        },
        prop_iconClass: {
            prop: "prop_iconClass",
            default: []
        },
        prop_iconStyles: {
            prop: "prop_iconStyles",
            default: {}
        },
        fn_callback: {
            prop: "fn_callback",
            default: null
        }
    };

    /* ---------------------------------------------
           PROPERTYs Props
    --------------------------------------------- */
    _COMPONENT_PROPS = {
        part_structure: [],
        part_icon: [
            this._COMPONENT_PATTERN.prop_icon,
            this._COMPONENT_PATTERN.prop_title,
            this._COMPONENT_PATTERN.prop_isItalik,
            this._COMPONENT_PATTERN.prop_iconClass,
            this._COMPONENT_PATTERN.prop_iconStyles,
            this._COMPONENT_PATTERN.fn_callback
        ]
    };



    /* ---------------------------------------------
   PROPERTYs Schema
   --------------------------------------------- */
    _COMPONENT_SCHEMA = {
        part_structure: {
            part_icon: {} ,
        }
    }

}
window.ComponentIcon  = class ComponentIcon extends ComponentIconBase{

    /* ---------------------------------------------
       SETUP
   --------------------------------------------- */
    constructor(elId , config) {
        super(
            listComponent[ComponentIcon.name] ,
            elId
        );
        super.renderComponent(config);
    }


    /* ---------------------------------------------
       TEMPLATEs
    --------------------------------------------- */
    componentFn(){

    }

    templateFn(partName = null){
        switch (partName){
            case "part_structure":
                return this.template_render_structure( partName );
            case "part_icon":
                return this.template_render_label(partName);
            default:
                return this.templateBasic_render([]);
        }
    }

    template_render_structure(partName) {
        const content = `
           ${this.templateFn_render_icon("part_icon")} 
        `;
        return this.templateBasic_render_structure(content);
    }

    templateFn_render_icon(partName){

        const data = this.getPartProps(partName)

        if (data != null){
            const prop_title                =  data.hasOwnProperty("prop_title")         ?  data.prop_title            : "" ;

            const prop_icon                =  data.hasOwnProperty("prop_icon")           ?  data.prop_icon             :  "";
            const prop_isItalik            =  data.hasOwnProperty("prop_isItalik")       ?  data.prop_isItalik         :  false;

            const prop_iconClass           =   data.hasOwnProperty("prop_iconClass")     ?  data.prop_iconClass        :  [];
            const prop_iconStyles          =   data.hasOwnProperty("prop_iconStyles")    ?  data.prop_iconStyles       :  {};

            return `
<${prop_isItalik ? "i" : "span"} 
       id="component-icon-icon-${this._COMPONENT_RANDOM_ID}"
       class="${tools_public.renderListClass(prop_iconClass)}" 
       onclick="${this.getFn('fn_onCLickIcon' , "event")}"
       onmouseenter="${this.getFn('fn_onHoverIcon' , "event")}"
       onmouseleave="${this.getFn('fn_onBlurIcon' , "event")}"
       title="${prop_title}"
       >
    
      <style>
         #${this._COMPONENT_ID} #component-icon-icon-${this._COMPONENT_RANDOM_ID}{
             ${tools_public.renderListStyle(prop_iconStyles)}
         }
      </style>

      ${prop_icon}
       
</${prop_isItalik ? "i" : "span"}>
`;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }


    /* ---------------------------------------------
       FUNCTIONs
    --------------------------------------------- */
    fn_onCLickIcon(event){
        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("fn_callback") && typeof data.fn_callback != null){
            data.fn_callback(event);
        }
    }
    fn_onHoverIcon(event){
        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("fn_onHoverIcon") && typeof data.fn_onHoverIcon != null){
            data.fn_onHoverIcon(event);
        }
    }
    fn_onBlurIcon(event){
        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("fn_onBlurIcon") && typeof data.fn_onBlurIcon != null){
            data.fn_onBlurIcon(event);
        }
    }

}


/*-------------------------------------
 99-02) Component Position Element
-------------------------------------*/
class ComponentPositionElementBase extends ComponentBase{

    /* ---------------------------------------------
       PROPERTYs Pattern
    --------------------------------------------- */
    _COMPONENT_PATTERN = {
        prop_elementClass: {
            prop: "prop_elementClass",
            default: ["border", "shadow-sm", "bg-white", "px-2", "py-1", "rounded-0"]
        },
        prop_elementStyles: {
            prop: "prop_elementStyles",
            default: {}
        },
        prop_positionType: {
            prop: "prop_positionType",
            default: "absolute"
        },
        prop_positionTop: {
            prop: "prop_positionTop",
            default: null
        },
        prop_positionLeft: {
            prop: "prop_positionLeft",
            default: null
        },
        prop_positionBottom: {
            prop: "prop_positionBottom",
            default: null
        },
        prop_positionRight: {
            prop: "prop_positionRight",
            default: null
        },
        prop_width: {
            prop: "prop_width",
            default: "100%"
        },
        prop_minWidth: {
            prop: "prop_minWidth",
            default: 100
        },
        prop_height: {
            prop: "prop_height",
            default: "200px"
        },
        prop_content: {
            prop: "prop_content",
            default: null
        }
    };

    /* ---------------------------------------------
           PROPERTYs Props
    --------------------------------------------- */
    _COMPONENT_PROPS = {
        part_structure: [],
        part_border: [
            this._COMPONENT_PATTERN.prop_elementClass,
            this._COMPONENT_PATTERN.prop_elementStyles,
            this._COMPONENT_PATTERN.prop_positionType,
            this._COMPONENT_PATTERN.prop_positionTop,
            this._COMPONENT_PATTERN.prop_positionLeft,
            this._COMPONENT_PATTERN.prop_positionBottom,
            this._COMPONENT_PATTERN.prop_positionRight,
            this._COMPONENT_PATTERN.prop_width,
            this._COMPONENT_PATTERN.prop_minWidth,
            this._COMPONENT_PATTERN.prop_height
        ],
        part_content: [
            this._COMPONENT_PATTERN.prop_content
        ]
    };



    /* ---------------------------------------------
   PROPERTYs Schema
   --------------------------------------------- */
    _COMPONENT_SCHEMA = {
        part_structure: {
            part_border: {
                part_content: {}
            }
        } ,
    }

}
window.ComponentPositionElement  = class ComponentPositionElement extends ComponentPositionElementBase{

    /* ---------------------------------------------
       SETUP
    --------------------------------------------- */
    constructor(elId , config) {
        super(
            listComponent[ComponentPositionElement.name] ,
            elId
        );
        super.renderComponent(config);
    }




    /* ---------------------------------------------
      TEMPLATEs
    --------------------------------------------- */
    componentFn(){
        this.templateFn("part_border");
    }
    templateFn(partName = null){
        switch (partName){
            case "part_structure":
                return this.template_render_structure(partName);
            case "part_border":
                return this.componentFn_render_border(partName);
            case "part_content":
                return this.template_render_content(partName);
            default:
                return this.templateBasic_render();
        }
    }

    template_render_structure(partName) {
        const content = `
   <component-border id="component-position-element-border-${this._COMPONENT_RANDOM_ID}">
      <component-body>
         ${this.templateFn("part_content") ?? ""}
      </component-body>
   </component-border>
                `;
        return this.templateBasic_render_structure(content , ["overflow-hidden"]);
    }

    componentFn_render_border(partName) {

        const data = this.getPartProps(partName);

        if (data != null){
            const prop_elementClass       =  data.hasOwnProperty("prop_elementClass")  && data.prop_elementClass != null               ?  data.prop_elementClass         :  [];
            const prop_elementStyles      =  data.hasOwnProperty("prop_elementStyles") && data.prop_elementStyles != null              ?  data.prop_elementStyles        : {};
            const prop_positionType       =  data.hasOwnProperty("prop_positionType")                                                  ?  data.prop_positionType         :  "absolute";
            const prop_positionTop        =  data.hasOwnProperty("prop_positionTop")                                                   ?  data.prop_positionTop          :  null;
            const prop_positionLeft       =  data.hasOwnProperty("prop_positionLeft")                                                  ?  data.prop_positionLeft         :  null;
            const prop_positionBottom     =  data.hasOwnProperty("prop_positionBottom")                                                ?  data.prop_positionBottom       :  null;
            const prop_positionRight      =  data.hasOwnProperty("prop_positionRight")                                                 ?  data.prop_positionRight        :  null;
            const prop_width              =  data.hasOwnProperty("prop_width")                                                         ?  data.prop_width                :  "100%";
            const prop_minWidth           =  data.hasOwnProperty("prop_minWidth")                                                      ?  data.prop_minWidth             :  null;
            const prop_height             =  data.hasOwnProperty("prop_height")                                                        ?  data.prop_height               :   "200px";
            const directionRtl            = data.hasOwnProperty("directionRtl")                                                        ? data.directionRtl               : (component_props != null && component_props.hasOwnProperty("directionRtl") ? component_props.directionRtl : false)


            //---------------
            prop_elementStyles["z-index"] =  tools_css.getZIndex(tools_css.standardZIndex.popup.name , 20);
            if (prop_positionType != null){
                prop_elementStyles["position"] = prop_positionType;
            }
            if (prop_positionTop != null){
                prop_elementStyles["top"] = prop_positionTop;
            }
            if (prop_positionLeft != null){
                prop_elementStyles["left"] = prop_positionLeft;
            }
            else{
                if (!directionRtl){
                    prop_elementStyles["left"] = 0;
                }
            }
            if (prop_positionBottom != null){
                prop_elementStyles["bottom"] = prop_positionBottom;
            }
            if (prop_positionRight != null){
                prop_elementStyles["right"] = prop_positionRight;
            }
            else{
                if (directionRtl){
                    prop_elementStyles["right"] = 0;
                }
            }
            if (prop_width != null){
                prop_elementStyles["width"] = prop_width;
            }
            if (prop_minWidth != null){
                prop_elementStyles["min-width"] = prop_minWidth+"px";
            }
            if (prop_height != null){
                prop_elementStyles["height"] = prop_height;
            }

            new window.ComponentBorder(
                `component-position-element-border-${this._COMPONENT_RANDOM_ID}` ,
                {
                    prop_borderClass:  ["h-100"] ,
                    prop_structureStyles: prop_elementStyles ,
                    // prop_minWidth: 160 ,

                    prop_structureClass:  prop_elementClass ,
                    //prop_borderStyles: prop_elementStyles ,


                    prop_borderColor : null,
                }
            )
        }

    }

    template_render_content(partName) {

        const data = this.getPartProps(partName)

        if (data != null){
            const prop_content  =  data.hasOwnProperty("prop_content")  && data.prop_content != null     ?  data.prop_content     : this._COMPONENT_SLOTS?.body?.[0]?.html ?? "";

            return `
<section data-part-name="${partName}" 
         id="component-position-element-content-${this._COMPONENT_RANDOM_ID}" 
         class=" h-100">
     <style>
         #${this._COMPONENT_ID} #component-position-element-content-${this._COMPONENT_RANDOM_ID}{
            
         }
     </style>
       
       ${prop_content}
       
</section>
            `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }


}


/*-------------------------------------
 99-03) Component border
-------------------------------------*/
class ComponentBorderBase extends ComponentBase{

    _BORDER_ARROW_TOP =    0
    _BORDER_ARROW_RIGHT =  1
    _BORDER_ARROW_BOTTOM = 2
    _BORDER_ARROW_LEFT =   3

    /* ---------------------------------------------
         PROPERTYs Pattern
    --------------------------------------------- */
    _COMPONENT_PATTERN = {
        prop_structureClass: {
            prop: "prop_structureClass",
            default: [ /*"py-1", "px-2",*/ ]
        },
        prop_structureStyles: {
            prop: "prop_structureStyles",
            default: { }
        },
        prop_borderClass: {
            prop: "prop_borderClass",
            default: [ "shadow-sm", "rounded" , "position-relative" , "position-relative"]
        },
        prop_borderStyles: {
            prop: "prop_borderStyles",
            default: {
                "display" : "flow-root"
            }
        },
        prop_borderArrowType: {
            prop: "prop_borderArrowType",
            default: null
        },
        prop_borderColor: {
            prop: "prop_borderColor",
            default: tools_const?.styles?.border?.color_border ?? ""
        },
        prop_borderArrowWidth: {
            prop: "prop_borderArrowWidth",
            default: 15
        },
        prop_content: {
            prop: "prop_content",
            default: null
        },
        prop_btnMore_icon: {
            prop: "prop_btnMore_icon",
            default: ""
        },
        prop_btnMore_show: {
            prop: "prop_btnMore_show",
            default: false
        },
        prop_btnMore_link: {
            prop: "prop_btnMore_link",
            default: null
        } ,
        prop_minWidth: {
            prop: "prop_minWidth",
            default: null
        }
    };

    /* ---------------------------------------------
           PROPERTYs Props
    --------------------------------------------- */
    _COMPONENT_PROPS = {
        part_structure: [
            this._COMPONENT_PATTERN.prop_structureClass,
            this._COMPONENT_PATTERN.prop_structureStyles
        ],
        part_border: [
            this._COMPONENT_PATTERN.prop_borderArrowType ,
            this._COMPONENT_PATTERN.prop_borderArrowWidth ,
            this._COMPONENT_PATTERN.prop_borderColor,
            this._COMPONENT_PATTERN.prop_borderClass,
            this._COMPONENT_PATTERN.prop_borderStyles,
            this._COMPONENT_PATTERN.prop_content ,
            this._COMPONENT_PATTERN.prop_minWidth ,
        ],
        part_icon_more: [
            this._COMPONENT_PATTERN.prop_btnMore_icon,
            this._COMPONENT_PATTERN.prop_btnMore_show,
            this._COMPONENT_PATTERN.prop_btnMore_link
        ]
    };



    /* ---------------------------------------------
   PROPERTYs Schema
   --------------------------------------------- */
    _COMPONENT_SCHEMA = {
        part_structure: {
            part_border: {} ,
            part_icon_more: {} ,
        } ,
    }

}
window.ComponentBorder = class ComponentBorder extends ComponentBorderBase{

    /* ---------------------------------------------
       SETUP
    --------------------------------------------- */
    constructor(elId , config) {
        super(
            listComponent[ComponentBorder.name] ,
            elId
        );
        super.renderComponent(config);
    }



    /* ---------------------------------------------
      TEMPLATEs
     --------------------------------------------- */
    componentFn(){
        this.templateFn("part_icon_more");
    }
    templateFn(partName = null){
        switch (partName){
            case "part_structure":
                return this.template_render_structure(partName);
            case "part_border":
                return this.template_render_border(partName);
            case "part_icon_more":
                return this.componentFn_render_iconMore(partName);
            default:
                return this.templateBasic_render();
        }
    }

    template_render_structure(partName) {
        const content = `
     ${this.templateFn("part_border") ?? ""}
                `;
        return this.templateBasic_render_structure(content );
    }

    template_render_border(partName) {
        const data = this.getPartProps(partName)

        if (data != null){
            const directionRtl             =  this._COMPONENT_CONFIG.hasOwnProperty("directionRtl")                 ? this._COMPONENT_CONFIG.directionRtl          : false;

            const prop_borderArrowType     =  data.hasOwnProperty("prop_borderArrowType")                           ?  data.prop_borderArrowType                   : null;
            const prop_borderArrowWidth    =  data.hasOwnProperty("prop_borderArrowWidth")                          ?  data.prop_borderArrowWidth                  : null;
            const prop_borderColor         =  data.hasOwnProperty("prop_borderColor")                               ?  data.prop_borderColor                       : null;
            const prop_borderClass         =  data.hasOwnProperty("prop_borderClass")                               ?  data.prop_borderClass                       : [];
            const prop_borderStyles        =  data.hasOwnProperty("prop_borderStyles")                              ?  data.prop_borderStyles                      : {};
            const prop_minWidth            =  data.hasOwnProperty("prop_minWidth")                                  ?  data.prop_minWidth                          : null;
            const prop_content             =  data.hasOwnProperty("prop_content")  && data.prop_content != null     ?  data.prop_content                           : this._COMPONENT_SLOTS?.body?.[0]?.html ?? "";

            let borderArrow = "";
            switch (prop_borderArrowType){
                case this._BORDER_ARROW_TOP:
                    borderArrow = `
#${this._COMPONENT_ID} #component-border-border-${this._COMPONENT_RANDOM_ID}:after{
   content:                                    "";
   position:                                   absolute;
   top:                                        -${prop_borderArrowWidth}px;
   ${directionRtl? "right" : "left"}:          10px;
   width:                                      0px;
   height:                                     0px;
   border-style:                               solid;
   border-width:                               0 ${(2/3)*prop_borderArrowWidth}px ${prop_borderArrowWidth}px ${(2/3)*prop_borderArrowWidth}px;
   border-color:                               transparent transparent ${prop_borderColor} transparent;
   transform:                                  rotate(0deg);
}
                    `
                    break;
                case this._BORDER_ARROW_RIGHT:
                    break;
                case this._BORDER_ARROW_BOTTOM:
                    break;
                case this._BORDER_ARROW_LEFT:
                    break;
            }

            prop_content
            return `
<section data-part-name="${partName}" 
         id="component-border-border-${this._COMPONENT_RANDOM_ID}"
         class="${tools_public.renderListClass(prop_borderClass)}"
         onclick="${this.getFn("fn_callback" , "event")}">
         
     <style>
         #${this._COMPONENT_ID} #component-border-icon-more-${this._COMPONENT_RANDOM_ID}{
             opacity: 0.25;
         }
         #${this._COMPONENT_ID}:hover #component-border-icon-more-${this._COMPONENT_RANDOM_ID}{
             transition: opacity 200ms ease;
             opacity: 0.75;
         }
     
         #${this._COMPONENT_ID} #component-border-border-${this._COMPONENT_RANDOM_ID}{
             ${tools_public.renderListStyle(prop_borderStyles)}
             ${prop_minWidth ? `min-width: ${prop_minWidth}`: ""};
             border: solid 2px ${prop_borderColor}  !important;
             position: relative;
         }
         
         ${borderArrow}
     </style>
     
     ${prop_content}
     
      <component-icon id="component-border-icon-more-${this._COMPONENT_RANDOM_ID}"></component-icon>
</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    componentFn_render_iconMore(partName) {
        const data = this.getPartProps(partName)

        if (data != null){
            const prop_btnMore_icon  =  data.hasOwnProperty("prop_btnMore_icon")         ?  data.prop_btnMore_icon      : "";
            const prop_btnMore_show  =  data.hasOwnProperty("prop_btnMore_show")         ?  data.prop_btnMore_show      : false;
            const prop_btnMore_link  =  data.hasOwnProperty("prop_btnMore_link")         ?  data.prop_btnMore_link      : null;

            if (prop_btnMore_show){
                new window.ComponentIcon(
                    `component-border-icon-more-${this._COMPONENT_RANDOM_ID}` ,
                    {
                        prop_icon: prop_btnMore_icon ,

                        prop_iconClass: ["position-absolute" , "border-dark" , "rounded"  , "shadow-sm" , "p-1"] ,
                        prop_iconStyles: {
                            "top" : "10px" ,
                            "left" : "10px" ,
                            "background-color" : tools_const.hasOwnProperty("styles") && tools_const.styles.hasOwnProperty("elementBorder") && tools_const.styles.elementBorder.hasOwnProperty("btnMore_backgroundColor")  ? tools_const.styles.elementBorder.btnMore_backgroundColor : "" ,
                            "color" : tools_const.hasOwnProperty("styles") && tools_const.styles.hasOwnProperty("elementBorder") && tools_const.styles.elementBorder.hasOwnProperty("btnMore_color")  ? tools_const.styles.elementBorder.btnMore_color : "" ,
                            "cursor" : "pointer" ,
                            "z-index": `${tools_css.getZIndex(tools_css.standardZIndex.tools_btn.name, 9)}` ,
                        } ,

                        fn_callback: (event)=>{
                            this.fn_onCLickIconMore(event , prop_btnMore_link);
                        }
                    }
                )
            }

        }

    }



    /* ---------------------------------------------
       FUNCTIONs
    --------------------------------------------- */
    fn_onCLickIconMore(event , prop_btnMore_link){
        if (prop_btnMore_link != null){
            window.open(prop_btnMore_link,'_blank');
        }
    }

    fn_callback(event){
        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("fn_callback") && typeof data.fn_callback != null){
            data.fn_callback(event);
        }
    }

}


/*-------------------------------------
 99-04) Component image
-------------------------------------*/
class ComponentImageBase extends ComponentBase{

    /* ---------------------------------------------
           PROPERTYs Pattern
    --------------------------------------------- */
    _COMPONENT_PATTERN = {
        prop_structureClass: {
            prop: "prop_structureClass",
            default: ["border", "shadow-sm", "rounded", "px-1", "px-2", "mx-auto"]
        },
        prop_structureStyles: {
            prop: "prop_structureStyles",
            default: { "position": "relative" }
        },
        prop_imageSource: {
            prop: "prop_imageSource",
            default: ""
        },
        prop_imageTitle: {
            prop: "prop_imageTitle",
            default: ""
        },
        prop_imageAlt: {
            prop: "prop_imageAlt",
            default: ""
        },
        prop_imageClass: {
            prop: "prop_imageClass",
            default: ["d-block", "mx-auto"]
        },
        prop_imageStyles: {
            prop: "prop_imageStyles",
            default: {}
        }
    };

    /* ---------------------------------------------
           PROPERTYs Props
    --------------------------------------------- */
    _COMPONENT_PROPS = {
        part_structure: [
            this._COMPONENT_PATTERN.prop_structureClass,
            this._COMPONENT_PATTERN.prop_structureStyles
        ],
        part_image: [
            this._COMPONENT_PATTERN.prop_imageSource,
            this._COMPONENT_PATTERN.prop_imageTitle,
            this._COMPONENT_PATTERN.prop_imageAlt,
            this._COMPONENT_PATTERN.prop_imageClass,
            this._COMPONENT_PATTERN.prop_imageStyles
        ]
    };



    /* ---------------------------------------------
   PROPERTYs Schema
   --------------------------------------------- */
    _COMPONENT_SCHEMA = {
        part_structure: {
            part_image: {} ,
        } ,
    }

}
window.ComponentImage = class ComponentImage extends ComponentImageBase{


    /* ---------------------------------------------
       SETUP
    --------------------------------------------- */
    constructor(elId , config) {
        super(
            listComponent[ComponentImage.name] ,
            elId
        );
        super.renderComponent(config);
    }


    /* ---------------------------------------------
     TEMPLATEs
    --------------------------------------------- */
    componentFn(){

    }
    templateFn(partName = null){
        switch (partName){
            case "part_structure":
                return this.template_render_structure(partName);
            case "part_image":
                return this.template_render_image(partName);
            default:
                return this.templateBasic_render();
        }
    }

    template_render_structure(partName) {
        const content = `
 ${this.templateFn("part_image") ?? ""}
                `;
        return this.templateBasic_render_structure(content );
    }

    template_render_image(partName) {
        const data = this.getPartProps(partName)

        if (data != null){
            const prop_imageSource     =  data.hasOwnProperty("prop_imageSource")        ?  data.prop_imageSource     : "";
            const prop_imageTitle      =  data.hasOwnProperty("prop_imageTitle")         ?  data.prop_imageTitle      : "";
            const prop_imageAlt        =  data.hasOwnProperty("prop_imageAlt")           ?  data.prop_imageAlt        : "";
            const prop_imageClass      =  data.hasOwnProperty("prop_imageClass")         ?  data.prop_imageClass      : [];
            const prop_imageStyles     =  data.hasOwnProperty("prop_imageStyles")        ?  data.prop_imageStyles     : {};

            return `
<section data-part-name="${partName}" 
         id="component-image-image-${this._COMPONENT_RANDOM_ID}"
         
         onclick="${this.getFn("fn_callback" , "event")}">
         
     <style>
         #${this._COMPONENT_ID} #component-image-image-${this._COMPONENT_RANDOM_ID}{
             ${tools_public.renderListStyle(prop_imageStyles)}
         }
     </style>
     
      <img id="component-image-image-${this._COMPONENT_RANDOM_ID}"
           class="${tools_public.renderListClass(prop_imageClass)}"
           src="${prop_imageSource}" 
           title="${prop_imageTitle}" 
           alt="${prop_imageAlt}"/>
    
</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }




    /* ---------------------------------------------
       FUNCTIONs
    --------------------------------------------- */
    fn_callback(event){
        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("fn_callback") && typeof data.fn_callback != null){
            data.fn_callback(event);
        }
    }

}


/*-------------------------------------
 99-04) Component image
-------------------------------------*/
class ComponentLayoutBase extends ComponentBase{

    /* ---------------------------------------------
         PROPERTYs Pattern
    --------------------------------------------- */
    _COMPONENT_PATTERN = {
        prop_structureClass: {
            prop: "prop_structureClass",
            default: []
        },
        prop_structureStyles: {
            prop: "prop_structureStyles",
            default: {}
        },
        prop_layoutClass: {
            prop: "prop_layoutClass",
            default: []
        },
        prop_layoutStyles: {
            prop: "prop_layoutStyles",
            default: {}
        },
        prop_layoutContent: {
            prop: "prop_layoutContent",
            default: null
        }
    };

    /* ---------------------------------------------
           PROPERTYs Props
    --------------------------------------------- */
    _COMPONENT_PROPS = {
        part_structure: [
            this._COMPONENT_PATTERN.prop_structureClass,
            this._COMPONENT_PATTERN.prop_structureStyles
        ],
        part_layout: [
            this._COMPONENT_PATTERN.prop_layoutClass,
            this._COMPONENT_PATTERN.prop_layoutStyles,
            this._COMPONENT_PATTERN.prop_layoutContent
        ]
    };



    /* ---------------------------------------------
   PROPERTYs Schema
   --------------------------------------------- */
    _COMPONENT_SCHEMA = {
        part_structure: {
            part_layout: {} ,
        } ,
    }

}
window.ComponentLayout = class ComponentLayout extends ComponentLayoutBase{

    /* ---------------------------------------------
       SETUP
    --------------------------------------------- */
    constructor(elId , config) {
        super(
            listComponent[ComponentLayout.name] ,
            elId
        );
        super.renderComponent(config);
    }


    /* ---------------------------------------------
     TEMPLATEs
    --------------------------------------------- */
    componentFn(){

    }
    templateFn(partName = null){
        switch (partName){
            case "part_structure":
                return this.template_render_structure(partName);
            case "part_layout":
                return this.template_render_layout(partName);
            default:
                return this.templateBasic_render();
        }
    }

    template_render_structure() {
        const content = `
 ${this.templateFn("part_layout") ?? ""}
                `;
        return this.templateBasic_render_structure(content );
    }

    template_render_layout(partName) {
        const data = this.getPartProps(partName)

        if (data != null){
            const prop_layoutClass     =  data.hasOwnProperty("prop_layoutClass")                                        ?  data.prop_layoutClass     : [];
            const prop_layoutStyles    =  data.hasOwnProperty("prop_layoutStyles")                                       ?  data.prop_layoutStyles    : {};
            const prop_layoutContent   =  data.hasOwnProperty("prop_layoutContent")  && data.prop_layoutContent != null  ?  data.prop_layoutContent   : this._COMPONENT_SLOTS?.body?.[0]?.html ?? "";

            return `
<section data-part-name="${partName}" 
         id="component-layout-layout-${this._COMPONENT_RANDOM_ID}"
         class=" ${tools_public.renderListClass(prop_layoutClass)}"
         >
         
     <style>
         #${this._COMPONENT_ID} #component-layout-layout-${this._COMPONENT_RANDOM_ID}{
             ${tools_public.renderListStyle(prop_layoutStyles)}
         }
     </style>
     
      ${prop_layoutContent}
    
</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }




    /* ---------------------------------------------
       FUNCTIONs
    --------------------------------------------- */
    fn_callback(event){
        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("fn_callback") && typeof data.fn_callback != null){
            data.fn_callback(event);
        }
    }



    call_addElement(html , tagId= null , typeDirection=false){
        let elTarget = document.querySelector(`section#component-layout-layout-${this._COMPONENT_RANDOM_ID}`);
        if (tagId != null){
            elTarget = document.querySelector(`#${tagId}`)
            //elTarget = elTarget.querySelector(`#${tagId}`)
        }
        if (elTarget != null){
            if (typeDirection){
                elTarget.innerHTML += html;
            }
            else {
                elTarget.innerHTML = html;
            }
        }
    }

}


/*-------------------------------------
 99-04) Component Mouse Scroller
-------------------------------------*/
class ComponentMouseScrollerBase extends ComponentBase{

    /* ---------------------------------------------
        PROPERTYs Pattern
 --------------------------------------------- */
    _COMPONENT_PATTERN = {
        prop_structureClass: {
            prop: "prop_structureClass",
            default: []
        },
        prop_structureStyles: {
            prop: "prop_structureStyles",
            default: {}
        },
        prop_borderClass: {
            prop: "prop_borderClass",
            default: ["border", "border-secondry"]
        },
        prop_borderStyles: {
            prop: "prop_borderStyles",
            default: {}
        },
        prop_backgroundColor_type: {
            prop: "prop_backgroundColor_type",
            default: null
        },
        prop_backgroundColor_dark: {
            prop: "prop_backgroundColor_dark",
            default: tools_const?.styles?.mosuseScroller?.backgroundColor_dark ?? ""
        },
        prop_backgroundColor_light: {
            prop: "prop_backgroundColor_light",
            default: tools_const?.styles?.mosuseScroller?.backgroundColor_light ?? ""
        },
        prop_scollerClass: {
            prop: "prop_scollerClass",
            default: []
        },
        prop_scrollerStyles: {
            prop: "prop_scrollerStyles",
            default: {}
        },
        prop_scrollerWidth: {
            prop: "prop_scrollerWidth",
            default: "100%"
        },
        prop_scrollerHeight: {
            prop: "prop_scrollerHeight",
            default: "250px"
        },
        prop_backgroundColor_tools: {
            prop: "prop_backgroundColor_tools",
            default: tools_const?.styles?.mosuseScroller?.backgroundColor_tools ?? ""
        },
        prop_moreIcons: {
            prop: "prop_moreIcons",
            default: ""
        },
        prop_iconRefresh: {
            prop: "prop_iconRefresh",
            default: "&#x21bb;"
        },
        prop_iconZoomIn: {
            prop: "prop_iconZoomIn",
            default: "&#x2795;"
        },
        prop_iconZoomOut: {
            prop: "prop_iconZoomOut",
            default: "&#x2796;"
        },
        prop_iconZoomStandard: {
            prop: "prop_iconZoomStandard",
            default: "&#x1F50D;"
        },
        prop_iconBgDark: {
            prop: "prop_iconBgDark",
            default: "&#9790"
        },
        prop_iconBgLight: {
            prop: "prop_iconBgLight",
            default: "&#9728;"
        },
        prop_layoutContent: {
            prop: "prop_layoutContent",
            default: null
        },
        var_scrollerScaleText: {
            prop: "var_scrollerScaleText",
            default: this._SCALE * 100
        }
    };

    /* ---------------------------------------------
           PROPERTYs Props
    --------------------------------------------- */
    _COMPONENT_PROPS = {
        part_structure: [
            this._COMPONENT_PATTERN.prop_structureClass,
            this._COMPONENT_PATTERN.prop_structureStyles
        ],
        part_layout_border: [
            this._COMPONENT_PATTERN.prop_borderClass,
            this._COMPONENT_PATTERN.prop_borderStyles
        ],
        part_layout_scroll: [
            this._COMPONENT_PATTERN.prop_backgroundColor_type,
            this._COMPONENT_PATTERN.prop_backgroundColor_dark,
            this._COMPONENT_PATTERN.prop_backgroundColor_light,
            this._COMPONENT_PATTERN.prop_scollerClass,
            this._COMPONENT_PATTERN.prop_scrollerStyles,
            this._COMPONENT_PATTERN.prop_scrollerWidth,
            this._COMPONENT_PATTERN.prop_scrollerHeight
        ],
        part_layout_tools: [
            this._COMPONENT_PATTERN.prop_backgroundColor_tools,
            this._COMPONENT_PATTERN.prop_moreIcons
        ],
        part_layout_tools_btn_refresh: [
            this._COMPONENT_PATTERN.prop_iconRefresh
        ],
        part_layout_tools_btn_zoom_in: [
            this._COMPONENT_PATTERN.prop_iconZoomIn
        ],
        part_layout_tools_btn_zoom_out: [
            this._COMPONENT_PATTERN.prop_iconZoomOut
        ],
        part_layout_tools_btn_zoom_standard: [
            this._COMPONENT_PATTERN.prop_iconZoomStandard
        ],
        part_layout_tools_btn_bg_dark: [
            this._COMPONENT_PATTERN.prop_iconBgDark
        ],
        part_layout_tools_btn_bg_light: [
            this._COMPONENT_PATTERN.prop_iconBgLight
        ],
        part_layout_content: [
            this._COMPONENT_PATTERN.prop_layoutContent
        ],
        part_layout_zoom_text: [
            this._COMPONENT_PATTERN.prop_backgroundColor_tools,
            this._COMPONENT_PATTERN.var_scrollerScaleText
        ]
    };

    /* ---------------------------------------------
   PROPERTYs Schema
   --------------------------------------------- */
    _COMPONENT_SCHEMA = {
        part_structure: {
            part_layout_border: {
                part_layout_scroll: {
                    part_layout_tools: {
                        part_layout_tools_btn_refresh: {} ,
                        part_layout_tools_btn_zoom_in: {} ,
                        part_layout_tools_btn_zoom_standard: {} ,
                        part_layout_tools_btn_zoom_out: {} ,
                        part_layout_tools_btn_bg_dark: {} ,
                        part_layout_tools_btn_bg_light: {} ,
                    } ,
                    part_layout_content: {}
                } ,
            },
            part_layout_zoom_text: {}
        } ,
    }

}
window.ComponentMouseScroller = class ComponentMouseScroller extends ComponentMouseScrollerBase{

    _SCROLL_CENTER_X = 0 ;
    _SCROLL_CENTER_Y = 0;

    _BACKGROUND_TYPE_DARK = "dark";
    _BACKGROUND_TYPE_LIGHT = "light";

    _IS_DOWN=false;
    _START_X=null;
    _START_Y=null;
    _SCROLL_TOP=null;
    _SCROLL_LEFT=null;
    _SCALE=1;
    _STEP_SCALE = 0.5;
    _MIN_SCALE = 0.4;
    _MAX_SCALE = 3;




    /* ---------------------------------------------
       SETUP
    --------------------------------------------- */
    constructor(elId , config) {
        super(
            listComponent[ComponentMouseScroller.name] ,
            elId
        );
        super.renderComponent(config);
    }


    /* ---------------------------------------------
     TEMPLATEs
    --------------------------------------------- */
    componentFn(){
        this.templateFn("part_layout_border");
        this.templateFn("part_layout_tools_btn_refresh");
        this.templateFn("part_layout_tools_btn_zoom_in");
        this.templateFn("part_layout_tools_btn_zoom_standard");
        this.templateFn("part_layout_tools_btn_zoom_out");
        this.templateFn("part_layout_tools_btn_bg_dark");
        this.templateFn("part_layout_tools_btn_bg_light");

        this.fn_applyTheme()
    }
    templateFn(partName = null){
        switch (partName){
            case "part_structure":
                return this.template_render_structure(partName);
            case "part_layout_zoom_text":
                return this.template_render_structure_zoomText(partName);
            case "part_layout_scroll":
                return this.template_render_layoutScroll(partName);
            case "part_layout_tools":
                return this.template_render_layoutTools(partName);
            case "part_layout_content":
                return this.template_render_layoutContent(partName);
            case "part_layout_border":
                return this.componentFn_render_layoutBorder(partName);
            case "part_layout_tools_btn_refresh":
                return this.componentFn_render_layoutTools_btnRefresh(partName);
            case "part_layout_tools_btn_zoom_in":
                return this.componentFn_render_layoutTools_btnZoomIn(partName);
            case "part_layout_tools_btn_zoom_standard":
                return this.componentFn_render_layoutTools_btnZoomStandard(partName);
            case "part_layout_tools_btn_zoom_out":
                return this.componentFn_render_layoutTools_btnZoomOut(partName);
            case "part_layout_tools_btn_bg_dark":
                return this.componentFn_render_layoutTools_btnBgDark(partName);
            case "part_layout_tools_btn_bg_light":
                return this.componentFn_render_layoutTools_btnBgLight(partName);
            default:
                return this.templateBasic_render();
        }
    }

    template_render_structure() {
        const content = `
        
          <component-border id="component-layout-scroll-border-${this._COMPONENT_RANDOM_ID}">
              <component-body>
                 ${this.templateFn("part_layout_tools") ?? ""}
          
                 ${this.templateFn("part_layout_scroll") ?? ""} 

                 ${this.templateFn("part_layout_zoom_text") ?? ""}
              </component-body>
          </component-border>
          
                `;
        return this.templateBasic_render_structure(content , "position-relative p-0");
    }

    template_render_structure_zoomText(partName){
        const data = this.getPartProps(partName)

        if (data != null){
            const directionRtl = data.hasOwnProperty("directionRtl") ? data.directionRtl : (component_props != null && component_props.hasOwnProperty("directionRtl") ? component_props.directionRtl : false)

            const prop_backgroundColor_tools  =  data.hasOwnProperty("prop_backgroundColor_tools")    ?  data.prop_backgroundColor_tools     : "";
            const var_scrollerScaleText  =    data.hasOwnProperty("var_scrollerScaleText")           ?  data.var_scrollerScaleText       : [];

            return `
<section data-part-name="${partName}" 
         id="component-layout-zoom-text-${this._COMPONENT_RANDOM_ID}"
         class="position-absolute rounded shadow text-white text-center border-white border" 
         >
         
     <style>
         #${this._COMPONENT_ID} #component-layout-zoom-text-${this._COMPONENT_RANDOM_ID}{
            opacity: 0.25;
            top: 10px;
            ${directionRtl ? "left" : "right"}: 45px; 
            width: 60px;
            background-color: ${prop_backgroundColor_tools};
         }
         
         
         #${this._COMPONENT_ID}:hover  #component-layout-zoom-text-${this._COMPONENT_RANDOM_ID}{
               opacity: 0.75;
               transition: opacity 500ms ease;
         }
     </style>
     
     ${var_scrollerScaleText} %
     
</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    template_render_layoutScroll(partName) {
        const data = this.getPartProps(partName)

        if (data != null){
            const prop_scollerClass  =    data.hasOwnProperty("prop_scollerClass")           ?  data.prop_scollerClass       : [];
            const prop_scrollerStyles  =  data.hasOwnProperty("prop_scrollerStyles")         ?  data.prop_scrollerStyles     : {};
            const prop_scrollerWidth  =   data.hasOwnProperty("prop_scrollerWidth")          ?  data.prop_scrollerWidth      : "";
            const prop_scrollerHeight  =  data.hasOwnProperty("prop_scrollerHeight")         ?  data.prop_scrollerHeight     : "";

            return `
<section data-part-name="${partName}" 
         id="component-layout-scroll-${this._COMPONENT_RANDOM_ID}"
         class="${tools_public.renderListClass(prop_scollerClass)}"
         onmousedown="${this.getFn("fn_scrollerModusDown" , "event")}"
         onmousemove="${this.getFn("fn_scrollerModusMove" , "event")}"
         onwheel="${this.getFn("fn_scrollerWheel" , "event")}"
         onmouseleave="${this.getFn("fn_scrollerMouseLeave" , "event")}"
         onmouseup="${this.getFn("fn_scrollerMouseUp" , "event")}"
         >
         
     <style>
         #${this._COMPONENT_ID} #component-layout-scroll-${this._COMPONENT_RANDOM_ID}{
         float:left;
         direction: ltr;
              overflow: auto;
              cursor: all-scroll;
              user-select: none;    
              width: ${prop_scrollerWidth}; 
              height: ${prop_scrollerHeight}; 
              ${tools_public.renderListStyle(prop_scrollerStyles)}
              -webkit-user-select: none;
              -moz-user-select: none;  
              -ms-user-select: none; 
              -ms-overflow-style: none;
              scrollbar-width: none;
         }
         #${this._COMPONENT_ID} #component-layout-scroll-${this._COMPONENT_RANDOM_ID}::-webkit-scrollbar {
               display: none;
         }

     </style>
   
   ${this.templateFn("part_layout_content") ?? ""}
    
</section>
        `;
        }
        return `
<section data-part-name="${partName}"></section>
        `;
    }

    template_render_layoutTools(partName) {
        const data = this.getPartProps(partName)

        if (data != null){
            const prop_scrollerHeight         =  data.hasOwnProperty("prop_scrollerHeight")           ?  data.prop_scrollerHeight            : "";
            const prop_backgroundColor_tools  =  data.hasOwnProperty("prop_backgroundColor_tools")    ?  data.prop_backgroundColor_tools     : "";
            const prop_moreIcons              =  data.hasOwnProperty("prop_moreIcons")                ?  data.prop_moreIcons                 : "";
            const directionRtl = data.hasOwnProperty("directionRtl") ? data.directionRtl : (component_props != null && component_props.hasOwnProperty("directionRtl") ? component_props.directionRtl : false)

            return `
<section data-part-name="${partName}" 
         id="component-layout-scroll-tools-${this._COMPONENT_RANDOM_ID}"
         class=" position-absolute  border rounded"
         >
         
     <style>
         #${this._COMPONENT_ID}:hover  #component-layout-scroll-tools-${this._COMPONENT_RANDOM_ID}{
               opacity: 0.75;
                 transition: opacity 500ms ease;
         }
         
         #${this._COMPONENT_ID} #component-layout-scroll-tools-${this._COMPONENT_RANDOM_ID}{
            opacity: 0.25;
            width: 35px;
           
            top:5px;
            overflow:auto;
            user-select: none;       /* متن قابل انتخاب نباشد */
            -webkit-user-select: none; /* Chrome/Safari */
            -moz-user-select: none;    /* Firefox */
            -ms-user-select: none;     /* IE/Edge */
            ${directionRtl ? "left" : "right"} : 5px;
            background-color: ${prop_backgroundColor_tools};
            z-index: ${tools_css.getZIndex(tools_css.standardZIndex.tools.name, 1)} ;
         }
         
         #${this._COMPONENT_ID} #component-layout-scroll-tools-${this._COMPONENT_RANDOM_ID}::-webkit-scrollbar{
             display: none;        /* Chrome, Safari, Edge */
         }

         @media (max-width: 768px) {
            #${this._COMPONENT_ID} #component-layout-scroll-tools-${this._COMPONENT_RANDOM_ID}{
               opacity: 0.75;
            }
         }
         
     </style>
     
     <div id="component-layout-scroll-tools-icons-${this._COMPONENT_RANDOM_ID}">
        <component-icon id="component-layout-scroll-tools-icon-refresh-${this._COMPONENT_RANDOM_ID}"></component-icon>
        <component-icon id="component-layout-scroll-tools-icon-zoom-in-${this._COMPONENT_RANDOM_ID}"></component-icon>
        <component-icon id="component-layout-scroll-tools-icon-zoom-standard-${this._COMPONENT_RANDOM_ID}"></component-icon>
        <component-icon id="component-layout-scroll-tools-icon-zoom-out-${this._COMPONENT_RANDOM_ID}"></component-icon>
        <component-icon id="component-layout-scroll-tools-icon-bg-dark-${this._COMPONENT_RANDOM_ID}"></component-icon>
        <component-icon id="component-layout-scroll-tools-icon-bg-light-${this._COMPONENT_RANDOM_ID}"></component-icon>
     
        ${prop_moreIcons}
     </div>
    
</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    template_render_layoutContent(partName) {
        const data = this.getPartProps(partName)

        if (data != null){
            const prop_layoutContent   =  data.hasOwnProperty("prop_layoutContent")  && data.prop_layoutContent != null  ?  data.prop_layoutContent   : this._COMPONENT_SLOTS?.body?.[0]?.html ?? "";

            return `
<section data-part-name="${partName}" 
         id="component-layout-content-${this._COMPONENT_RANDOM_ID}"
         class="w-100 h-100 d-table" 
         >
         
     <style>
         #${this._COMPONENT_ID} #component-layout-content-${this._COMPONENT_RANDOM_ID}{
             
         }
     </style>
     
     ${prop_layoutContent}
     
</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    componentFn_render_layoutTools_btnRefresh(partName) {
        const data = this.getPartProps(partName)

        if (data != null){
            const prop_iconRefresh  =  data.hasOwnProperty("prop_iconRefresh")    ?  data.prop_iconRefresh  : null;
            if (prop_iconRefresh != null){
                new window.ComponentIcon(
                    `component-layout-scroll-tools-icon-refresh-${this._COMPONENT_RANDOM_ID}`  ,
                    {
                        classList: [ ] ,
                        prop_icon: prop_iconRefresh  ,
                        prop_title: "refresh"  ,

                        prop_iconClass : [  ] ,
                        prop_iconStyles : {
                            "text-align": "center",
                            "cursor": "pointer",
                            "width": "30px",
                            "height": "30px",
                            "color": "white",
                            "display": "block",
                            "font-size": "14pt",
                        } ,

                        fn_callback: () =>{
                            this.runFn('fn_onCLickRefresh' , "event");
                        }
                    }
                )
            }
        }
    }

    componentFn_render_layoutBorder(partName) {
        const data = this.getPartProps(partName)

        if (data != null){
            const prop_borderClass    =  data.hasOwnProperty("prop_borderClass")    ?  data.prop_borderClass     : [];
            const prop_borderStyles   =  data.hasOwnProperty("prop_borderStyles")   ?  data.prop_borderStyles    : {};

            new window.ComponentBorder(
                `component-layout-scroll-border-${this._COMPONENT_RANDOM_ID}` ,
                {
                    prop_structureClass:  prop_borderClass ,
                    prop_structureStyles: prop_borderStyles ,
                }
            )
        }
    }

    componentFn_render_layoutTools_btnZoomIn(partName) {
        const data = this.getPartProps(partName)

        if (data != null){
            const prop_iconZoomIn  =  data.hasOwnProperty("prop_iconZoomIn")    ?  data.prop_iconZoomIn     : null;
            if (prop_iconZoomIn != null){
                new window.ComponentIcon(
                    `component-layout-scroll-tools-icon-zoom-in-${this._COMPONENT_RANDOM_ID}`  ,
                    {
                        classList: [ ] ,
                        prop_icon: prop_iconZoomIn  ,
                        prop_title: "zoom-in"  ,

                        prop_iconClass : [  ] ,
                        prop_iconStyles : {
                            "text-align": "center",
                            "cursor": "pointer",
                            "width": "30px",
                            "height": "30px",
                            "color": "white",
                            "display": "block",
                            "font-size": "14pt",
                        } ,

                        fn_callback: () =>{
                            this.runFn('fn_onCLickZoomIn' , "event");
                        }
                    }
                )
            }
        }
    }

    componentFn_render_layoutTools_btnZoomStandard(partName) {
        const data = this.getPartProps(partName)

        if (data != null){
            const prop_iconZoomStandard  =  data.hasOwnProperty("prop_iconZoomStandard")    ?  data.prop_iconZoomStandard     : null;
            if (prop_iconZoomStandard != null){
                new window.ComponentIcon(
                    `component-layout-scroll-tools-icon-zoom-standard-${this._COMPONENT_RANDOM_ID}`  ,
                    {
                        classList: [ ] ,
                        prop_icon: prop_iconZoomStandard  ,
                        prop_title: "zoom-standard"  ,

                        prop_iconClass : [  ] ,
                        prop_iconStyles : {
                            "text-align": "center",
                            "cursor": "pointer",
                            "width": "30px",
                            "height": "30px",
                            "color": "white",
                            "display": "block",
                            "font-size": "14pt",
                        } ,

                        fn_callback: () =>{
                            this.runFn('fn_onCLickZoomStandard' , "event");
                        }
                    }
                )
            }
        }
    }

    componentFn_render_layoutTools_btnZoomOut(partName) {
        const data = this.getPartProps(partName)

        if (data != null){
            const prop_iconZoomOut  =  data.hasOwnProperty("prop_iconZoomOut")    ?  data.prop_iconZoomOut   : null;
            if (prop_iconZoomOut != null){
                new window.ComponentIcon(
                    `component-layout-scroll-tools-icon-zoom-out-${this._COMPONENT_RANDOM_ID}`  ,
                    {
                        classList: [ ] ,
                        prop_icon: prop_iconZoomOut  ,
                        prop_title: "zoom-out"  ,

                        prop_iconClass : [  ] ,
                        prop_iconStyles : {
                            "text-align": "center",
                            "cursor": "pointer",
                            "width": "30px",
                            "height": "30px",
                            "color": "white",
                            "display": "block",
                            "font-size": "14pt",
                        } ,

                        fn_callback: () =>{
                            this.runFn('fn_onCLickZoomOut' , "event");
                        }
                    }
                )
            }
        }
    }

    componentFn_render_layoutTools_btnBgDark(partName) {
        const data = this.getPartProps(partName)

        if (data != null){
            const prop_iconBgDark  =  data.hasOwnProperty("prop_iconBgDark")    ?  data.prop_iconBgDark   : null;
            if (prop_iconBgDark != null){
                new window.ComponentIcon(
                    `component-layout-scroll-tools-icon-bg-dark-${this._COMPONENT_RANDOM_ID}`  ,
                    {
                        classList: [ ] ,
                        prop_icon: prop_iconBgDark  ,
                        prop_title: "Dark"  ,

                        prop_iconClass : [  ] ,
                        prop_iconStyles : {
                            "text-align": "center",
                            "cursor": "pointer",
                            "width": "30px",
                            "height": "30px",
                            "color": "white",
                            "display": "block",
                            "font-size": "14pt",
                        } ,

                        fn_callback: () =>{
                            this.runFn('fn_onSetBgDark' , "event");
                        }
                    }
                )
            }
        }
    }

    componentFn_render_layoutTools_btnBgLight(partName) {
        const data = this.getPartProps(partName)

        if (data != null){
            const prop_iconBgLight  =  data.hasOwnProperty("prop_iconBgLight")    ?  data.prop_iconBgLight   : null;
            if (prop_iconBgLight != null){
                new window.ComponentIcon(
                    `component-layout-scroll-tools-icon-bg-light-${this._COMPONENT_RANDOM_ID}`  ,
                    {
                        classList: [ ] ,
                        prop_icon: prop_iconBgLight  ,
                        prop_title: "Light"  ,

                        prop_iconClass : [  ] ,
                        prop_iconStyles : {
                            "text-align": "center",
                            "cursor": "pointer",
                            "width": "30px",
                            "height": "30px",
                            "color": "white",
                            "display": "block",
                            "font-size": "14pt",
                        } ,

                        fn_callback: () =>{
                            this.runFn('fn_onSetBgLight' , "event");
                        }
                    }
                )
            }
        }
    }




    /* ---------------------------------------------
       FUNCTIONs
    --------------------------------------------- */
    fn_getElementScroller(){
        return document.querySelector(`#${this._COMPONENT_ID} #component-layout-scroll-${this._COMPONENT_RANDOM_ID}`);
    }

    fn_getElementContent(){
        return document.querySelector(`#${this._COMPONENT_ID} #component-layout-content-${this._COMPONENT_RANDOM_ID}`);
    }

    fn_scrollerModusDown(event){
        const scroller = this.fn_getElementScroller();
        this._IS_DOWN = true;

        // مختصات شروع client
        this._START_CLIENT_X = event.clientX;
        this._START_CLIENT_Y = event.clientY;

        this._SCROLL_LEFT = scroller.scrollLeft;
        this._SCROLL_TOP  = scroller.scrollTop;

        // pointer capture (برای درگ حتی خارج از المنت)
        if (typeof scroller.setPointerCapture === 'function' && event.pointerId != null) {
            try { scroller.setPointerCapture(event.pointerId); } catch(e){/* ignore */ }
        }

        // listener های document برای move و up
        this._bound_scrollerMove = this.fn_scrollerModusMove.bind(this);
        this._bound_scrollerUp   = this.fn_scrollerModusUp.bind(this);

        document.addEventListener('pointermove', this._bound_scrollerMove, {passive:false});
        document.addEventListener('pointerup', this._bound_scrollerUp);

        document.body.style.cursor = 'grabbing';

        event.preventDefault();
    }

    fn_scrollerModusMove(event){
        if (!this._IS_DOWN) return;
        event.preventDefault();

        const scroller = this.fn_getElementScroller();
        const content  = this.fn_getElementContent();

        // فاصله موس از شروع
        const dx = event.clientX - this._START_CLIENT_X;
        const dy = event.clientY - this._START_CLIENT_Y;

        let newLeft = this._SCROLL_LEFT - dx;
        let newTop  = this._SCROLL_TOP  - dy;

        // محاسبه max scroll با در نظر گرفتن scale
        const scale = this._SCALE;
        const contentWidth  = content.offsetWidth * scale;
        const contentHeight = content.offsetHeight * scale;

        const maxLeft = Math.max(0, contentWidth - scroller.clientWidth);
        const maxTop  = Math.max(0, contentHeight - scroller.clientHeight);

        // clamp
        newLeft = Math.max(0, Math.min(maxLeft, newLeft));
        newTop  = Math.max(0, Math.min(maxTop,  newTop));

        scroller.scrollLeft = newLeft ;
        scroller.scrollTop  = newTop  ;
    }

    fn_scrollerModusUp(event){
        if (!this._IS_DOWN) return;
        this._IS_DOWN = false;

        const scroller = this.fn_getElementScroller();

        if (typeof scroller.releasePointerCapture === 'function' && event.pointerId != null) {
            try { scroller.releasePointerCapture(event.pointerId); } catch(e){/* ignore */ }
        }

        if (this._bound_scrollerMove) {
            document.removeEventListener('pointermove', this._bound_scrollerMove, {passive:false});
            this._bound_scrollerMove = null;
        }
        if (this._bound_scrollerUp) {
            document.removeEventListener('pointerup', this._bound_scrollerUp);
            this._bound_scrollerUp = null;
        }

        document.body.style.cursor = '';
    }


    fn_scrollerWheel(event){
        event.preventDefault();
        event.stopPropagation();
        this.fn_scrollerScaleProgress(event.clientX , event.clientY , event.deltaY);
    }
    fn_scrollerScaleProgress(x , y , zoomStep=null){
        const scroller = this.fn_getElementScroller();

        const rect = scroller.getBoundingClientRect();
        const mouseX = x - rect.left;
        const mouseY = y - rect.top;

        const zoomSpeed = 0.001;
        let newScale = 1;
        if (zoomStep != null){
            newScale = Math.min(Math.max(this._SCALE - zoomStep * zoomSpeed, this._MIN_SCALE), this._MAX_SCALE);
            newScale = newScale > this._MIN_SCALE ? newScale : this._MIN_SCALE;
        }
        const scaleRatio = newScale / this._SCALE;

        this._SCALE = newScale;
        this.fn_applyZoom();

        this.call_applyScroll(
            (scroller.scrollLeft + mouseX) * scaleRatio - mouseX ,
            (scroller.scrollTop + mouseY)  * scaleRatio - mouseY
        );
    }


    fn_scrollerMouseLeave(event){
        this._IS_DOWN = false
    }

    fn_scrollerMouseUp(event){
        this._IS_DOWN = false
    }


    fn_onCLickRefresh(event){
        this._SCALE = 1;
        this.fn_applyZoom()
        this.call_applyScroll();
    }





    fn_onCLickZoomIn(event){
        const scroller = this.fn_getElementScroller();
        const rect = scroller.getBoundingClientRect();
        this.fn_scrollerScaleProgress(rect.left , rect.top , -this._STEP_SCALE*100)
    }
    fn_onCLickZoomStandard(event){
        const scroller = this.fn_getElementScroller();
        const rect = scroller.getBoundingClientRect();
        this.fn_scrollerScaleProgress(rect.left , rect.top)
    }
    fn_onCLickZoomOut(event){
        const scroller = this.fn_getElementScroller();
        const rect = scroller.getBoundingClientRect();
        this.fn_scrollerScaleProgress(rect.left , rect.top , this._STEP_SCALE*100)
    }

    fn_onSetBgDark(event){
        this.fn_applyTheme( this._BACKGROUND_TYPE_DARK);
    }
    fn_onSetBgLight(event){
        this.fn_applyTheme( this._BACKGROUND_TYPE_LIGHT);
    }



    fn_applyZoom(){
        const contentRect = this.fn_getElementContent();
        this._SCALE  = this._MIN_SCALE < this._SCALE ? this._SCALE : this._MIN_SCALE;
        contentRect.style.transformOrigin = "0 0";
        contentRect.style.transform = `scale(${ this._SCALE })`;
        this.set("var_scrollerScaleText" , Math.floor(this._SCALE*100))
    }


    fn_applyTheme(prop_backgroundColor_type = null){
        const data = this._COMPONENT_CONFIG;
        const prop_backgroundColor_light  = data.hasOwnProperty("prop_backgroundColor_light")   ?  data.prop_backgroundColor_light    : "";
        const prop_backgroundColor_dark  =  data.hasOwnProperty("prop_backgroundColor_dark")    ?  data.prop_backgroundColor_dark     : "";

        if (prop_backgroundColor_type == null){
            prop_backgroundColor_type  =  data.hasOwnProperty("prop_backgroundColor_type")    ?  data.prop_backgroundColor_type     : null;
        }

        let backgroundSelected=null;
        switch (prop_backgroundColor_type){
            case this._BACKGROUND_TYPE_LIGHT:
                backgroundSelected = prop_backgroundColor_light;
                break;
            case this._BACKGROUND_TYPE_DARK:
                backgroundSelected = prop_backgroundColor_dark;
                break;
            default:
                backgroundSelected = prop_backgroundColor_light;
                break;
        }

        if (backgroundSelected != null){
            const el = this.fn_getElementContent();
            if(el != null) el.style.backgroundColor = backgroundSelected;
        }
    }



    call_applyScroll(positionX=null , positionY=null){
        const scroller = this.fn_getElementScroller();
        scroller.scrollLeft = positionX != null ? positionX : this._SCROLL_CENTER_X;
        scroller.scrollTop  = positionY != null ? positionY : this._SCROLL_CENTER_Y;
    }

}





//===============================================================================================================
// [---] Porfisinal
//===============================================================================================================


/*-------------------------------------
 p-01) Component Report
-------------------------------------*/
class ComponentReportBase extends ComponentBase{

    _PER_PAGE_10 = 10;
    _PER_PAGE_25 = 25;
    _PER_PAGE_50 = 50;
    _PER_PAGE_100 = 100;
    _PER_PAGE_200 = 200;


    /* ---------------------------------------------
        PROPERTYs Pattern
    --------------------------------------------- */
    _COMPONENT_PATTERN = {

        prop_size: {
            prop: "prop_size",
            default: tools_css.standardSizes.l.name
        },
        prop_sizeHeader: {
            prop: "prop_sizeHeader",
            default: tools_css.standardSizes.xxl.name
        },

        prop_langSelected: {
            prop: "prop_langSelected",
            default: component_props.directionRtl ? "fa" : "en"
        } ,
        prop_langs: {
            prop: "prop_langs",
            default: {
                fa: {
                    excel: "اکسل" ,
                    print: "چاپ" ,
                    filter_btn: "جست و جو" ,
                } ,
                en: {
                    excel: "Excel" ,
                    print: "Print" ,
                    filter_btn: "Search" ,
                }
            }
        },


        prop_title: {
            prop: "prop_title",
            default: "Title sample"
        },
        prop_descriptionPage: {
            prop: "prop_descriptionPage",
            default: "This is a test for description"
        },
        prop_btnTitleNewPage: {
            prop: "prop_btnTitleNewPage",
            default: "New Order"
        },
        prop_btnHasPage: {
            prop: "prop_btnHasPage",
            default: true
        },


        prop_tabs: {
            prop: "prop_tabs",
            default: null
        },
        prop_tabSelected: {
            prop: "prop_tabSelected",
            default: null
        },
        prop_tabsTitle: {
            prop: "prop_tabsTitle",
            default: null
        },
        prop_tabsSendForm: {
            prop: "prop_tabsSendForm",
            default: true
        },

        prop_hasPageInfo: {
            prop: "prop_hasPageInfo",
            default: true
        },



        prop_hasFilter: {
            prop: "prop_hasFilter",
            default: true
        },
        prop_formFilter: {
            prop: "prop_formFilter",
            default: null
        },
        prop_pages: {
            prop: "prop_pages",
            default: null
        },


        prop_headerOptions: {
            prop: "prop_headerOptions",
            default: []
        },


        prop_backgroundColorPage: {
            prop: "prop_backgroundColorPage",
            default: tools_const?.styles?.report?.backgroundColor_page ?? ""
        },
        prop_iconPageColor: {
            prop: "prop_iconPageColor",
            default: tools_const?.styles?.report?.color_iconPage ?? ""
        },
        prop_btnColorIconNewPage: {
            prop: "prop_btnColorIconNewPage",
            default: tools_const?.styles?.report?.color_iconBtnNewPage ?? ""
        },


        prop_iconPageSize: {
            prop: "prop_iconPageSize",
            default: 120
        },
        prop_iconPage: {
            prop: "prop_iconPage",
            default: ""
        },


        prop_order: {
            prop: "prop_order",
            default: {}
        },
        prop_header: {
            prop: "prop_header",
            default: {}
        },
        prop_options: {
            prop: "prop_options",
            default: []
        },


        prop_pageGap: {
            prop: "prop_pageGap" ,
            default: 2
        } ,

        prop_url_table: {
            prop: "prop_url_table" ,
            default: ""
        } ,
        prop_url_page: {
            prop: "prop_url_page" ,
            default: ""
        } ,

    };

    /* ---------------------------------------------
           PROPERTYs Props
    --------------------------------------------- */
    _COMPONENT_PROPS = {

        part_structure: [
            this._COMPONENT_PATTERN.prop_pages,
        ],

        part_pages: [
            this._COMPONENT_PATTERN.prop_backgroundColorPage,
            this._COMPONENT_PATTERN.prop_size,
        ],

        part_pages_main: [
            this._COMPONENT_PATTERN.prop_hasFilter,
        ],
        part_pages_main_header: [
            this._COMPONENT_PATTERN.prop_sizeHeader,
            this._COMPONENT_PATTERN.prop_title,
            this._COMPONENT_PATTERN.prop_langSelected,
            this._COMPONENT_PATTERN.prop_langs,
            this._COMPONENT_PATTERN.prop_headerOptions,
        ],
        part_pages_main_formNew: [
            this._COMPONENT_PATTERN.prop_size,
            this._COMPONENT_PATTERN.prop_descriptionPage,
            this._COMPONENT_PATTERN.prop_iconPageSize,
            this._COMPONENT_PATTERN.prop_iconPage,
            this._COMPONENT_PATTERN.prop_iconPageColor,
            this._COMPONENT_PATTERN.prop_btnTitleNewPage,
            this._COMPONENT_PATTERN.prop_btnColorIconNewPage,
            this._COMPONENT_PATTERN.prop_btnHasPage,
        ],
        part_pages_main_formTabSection: [
            this._COMPONENT_PATTERN.prop_tabsTitle,
            this._COMPONENT_PATTERN.prop_tabs,
            this._COMPONENT_PATTERN.prop_size,
        ] ,
        part_pages_main_formTabSection_title: [
            this._COMPONENT_PATTERN.prop_tabsTitle,
            this._COMPONENT_PATTERN.prop_size,
        ] ,
        part_pages_main_formTabSection_tab: [
            this._COMPONENT_PATTERN.prop_tabs,
            this._COMPONENT_PATTERN.prop_tabSelected,
            this._COMPONENT_PATTERN.prop_tabsSendForm,
        ] ,
        part_pages_main_form: [
            this._COMPONENT_PATTERN.prop_size,
            this._COMPONENT_PATTERN.prop_langSelected,
            this._COMPONENT_PATTERN.prop_langs,
            this._COMPONENT_PATTERN.prop_url_table,
            this._COMPONENT_PATTERN.prop_url_page,
            this._COMPONENT_PATTERN.prop_tabSelected,
        ],


        part_pages_main_formTable: [
            this._COMPONENT_PATTERN.prop_hasPageInfo,
        ],
        part_pages_main_formTable_table: [
            this._COMPONENT_PATTERN.prop_size,
            this._COMPONENT_PATTERN.prop_order,
            this._COMPONENT_PATTERN.prop_header,
            this._COMPONENT_PATTERN.prop_options,
        ],
        part_pages_main_formTable_pageNumber: [
            this._COMPONENT_PATTERN.prop_size,
            this._COMPONENT_PATTERN.prop_pageGap,
        ],
        part_pages_main_formTable_pageData: [
            this._COMPONENT_PATTERN.prop_size,
        ],
        part_pages_main_formTable_pagePer: [
            this._COMPONENT_PATTERN.prop_size,
        ],
        part_pages_main_formTable_errorNotExistRecord: [

        ] ,


        part_pages_excel: [

        ],
        part_pages_excel_header: [
            this._COMPONENT_PATTERN.prop_sizeHeader,
            this._COMPONENT_PATTERN.prop_langSelected,
            this._COMPONENT_PATTERN.prop_langs,
            this._COMPONENT_PATTERN.prop_title,
        ],
        part_pages_excel_tool: [
            this._COMPONENT_PATTERN.prop_size,
            this._COMPONENT_PATTERN.prop_header,
        ],



        part_pages_print : [

        ],
        part_pages_print_header : [
            this._COMPONENT_PATTERN.prop_sizeHeader,
            this._COMPONENT_PATTERN.prop_langSelected,
            this._COMPONENT_PATTERN.prop_langs,
            this._COMPONENT_PATTERN.prop_title,
        ],
        part_pages_print_tool: [
            this._COMPONENT_PATTERN.prop_size,
            this._COMPONENT_PATTERN.prop_header,
        ],


        part_other_pages_Header : [
            this._COMPONENT_PATTERN.prop_pages,
            this._COMPONENT_PATTERN.prop_sizeHeader,
        ],

    };


    /* ---------------------------------------------
   PROPERTYs Schema
   --------------------------------------------- */
    _COMPONENT_SCHEMA = {
        part_structure: {
            part_pages:{
                part_pages_main:{
                    part_pages_main_header: {},
                    part_pages_main_formNew: {},
                    part_pages_main_formTabSection: {
                        part_pages_main_formTabSection_title: {},
                        part_pages_main_formTabSection_tab: {},
                    },
                    part_pages_main_form: {},
                    part_pages_main_formTable: {

                        part_pages_main_formTable_table:{} ,
                        part_pages_main_formTable_pageNumber:{} ,
                        part_pages_main_formTable_pageData:{} ,
                        part_pages_main_formTable_pagePer:{} ,
                        part_pages_main_formTable_errorNotExistRecord:{} ,

                    },
                } ,
                part_pages_excel:{
                    part_pages_excel_header: {} ,
                    part_pages_excel_tool: {} ,
                } ,
                part_pages_print:{
                    part_pages_print_header: {}
                },

                part_other_pages_Header: {}
            },
        } ,
    }
}
window.ComponentReport = class ComponentReport extends ComponentReportBase{

    _PAGE_MANAGER = null;
    _PAGE_FILTER = null;

    _PAGE_REPORT=null;

    _PAGE_SELECTED=    null;
    _PAGE_TOTAL=       null;
    _PAGE_FROM_DATA=   null;
    _PAGE_TO_DATA=     null;
    _PAGE_TOTAL_DATA=  null;
    _PAGE_PER_DATA=    this._PER_PAGE_25;

    _COLUMNS_ORDER_EXCEL = [];
    _COLUMNS_SELECTED_EXCEL = [];

    _COLUMNS_ORDER_PRINT = [];
    _COLUMNS_SELECTED_PRINT = [];



    /* ---------------------------------------------
       SETUP
    --------------------------------------------- */
    constructor(elId , config) {
        super(
            listComponent[ComponentReport.name] ,
            elId
        );
        super.renderComponent(config);
    }


    /* ---------------------------------------------
     TEMPLATEs
    --------------------------------------------- */
    componentFn(){
        this.templateFn("part_pages");

        this.templateFn("part_pages_main_header");
        this.templateFn("part_pages_main_formNew");
        this.templateFn("part_pages_main_form");
        this.templateFn("part_pages_main_formTabSection_tab");

        this.templateFn("part_pages_excel_header");
        this.templateFn("part_pages_excel_tool");

        this.templateFn("part_pages_print_header");
        this.templateFn("part_pages_print_tool");

        this.templateFn("part_other_pages_Header");

        this.onRegisterFinish().then(el => {
            this.call_refreshSearchReport();
        })
    }
    templateFn(partName = null){
        switch (partName){
            case "part_structure":
                return this.template_render_structure(partName);
            case "part_pages_main":
                return this.template_render_pageMain(partName);
            case "part_pages_main_formNew":
                return this.componentFn_render_pageMain_formNew(partName);
            case "part_pages_main_formTabSection":
                return this.template_render_pageMain_formTabSection(partName);
            case "part_pages_main_formTabSection_title":
                return this.template_render_pageMain_formTabSection_title(partName);
            case "part_pages_main_formTabSection_tab":
                return this.componentFn_render_pageMain_formTabSection_tabs(partName);
            case "part_pages_main_formTable":
                return this.template_render_pageMain_fromTable(partName);

            case "part_pages_excel":
                return this.template_render_pageExcel(partName);

            case "part_pages_print":
                return this.template_render_pagePrint(partName);

            case "part_pages":
                return this.componentFn_render_pages(partName);

            case "part_pages_main_header":
                return this.componentFn_render_pageMain_header(partName);
            case "part_pages_main_form":
                return this.componentFn_render_pageMain_form(partName);

            case "part_pages_main_formTable_table":
                return this.componentFn_render_pageMain_fromTable_table(partName);
            case "part_pages_main_formTable_pageNumber":
                return this.componentFn_render_pageMain_fromTable_pageNumber(partName);
            case "part_pages_main_formTable_pageData":
                return this.componentFn_render_pageMain_fromTable_pageData(partName);
            case "part_pages_main_formTable_pagePer":
                return this.componentFn_render_pageMain_fromTable_pagePear(partName);

            case "part_pages_excel_header":
                return this.componentFn_render_pageExcel_header(partName);
            case "part_pages_excel_tool":
                return this.componentFn_render_pageExcel_tool(partName);

            case "part_pages_print_header":
                return this.componentFn_render_pagePrint_header(partName);
            case "part_pages_print_tool":
                return this.componentFn_render_pagePrint_tool(partName);

            case "part_other_pages_Header":
                return this.componentFn_render_pagesOther_header(partName);


            default:
                return this.templateBasic_render(["h-100" , "d-block"]);
        }
    }

    template_render_structure(partName) {
        const data = this.getPartProps(partName)
        const prop_pages    =  data.hasOwnProperty("prop_pages")   && data.prop_pages != null    ?  data.prop_pages                 : this._COMPONENT_SLOTS?.pages ?? [];

        const content = `
        
         <component-change-page   
               id="component-report-change-page-${this._COMPONENT_RANDOM_ID}">

               <component-body>
                       ${this.templateFn("part_pages_main")}
               </component-body>

               <component-pages name="excel">
                      ${this.templateFn("part_pages_excel")}
               </component-pages>

               <component-pages name="print">
                      ${this.templateFn("part_pages_print")}
               </component-pages>
               
               ${this.fn_getHtmlPages(prop_pages )}

       </component-change-page>
          
                `;
        return this.templateBasic_render_structure(content , ["position-relative" , "p-0" , "h-100" , "d-block"]);
    }



    //// PAGE MAIN
    template_render_pageMain(partName){
        const data = this.getPartProps(partName)

        if (data != null){

            const prop_hasFilter             =  data.hasOwnProperty("prop_hasFilter")                ?  data.prop_hasFilter             : true;

            return `
<section data-part-name="${partName}" 
         id="component-report-page-main-${this._COMPONENT_RANDOM_ID}"
         class="pb-2 d-block h-100" 
         >
         
     <style>
         #${this._COMPONENT_ID} #component-report-page-main-${this._COMPONENT_RANDOM_ID}{
              
         }
         #${this._COMPONENT_ID} #component-report-page-main-inside-${this._COMPONENT_RANDOM_ID}{
              
         }
        
     </style>
     
     <component-page-header id="component-report-page-main-header-${this._COMPONENT_RANDOM_ID}"></component-page-header>

     <div id="component-report-page-main-inside-${this._COMPONENT_RANDOM_ID}" class="h-100 overflow-auto">
     
          <component-page-card-info id="component-report-page-main-form-new-${this._COMPONENT_RANDOM_ID}"></component-page-card-info>

          <div class="py-1 px-1 m-0 mt-2 bg-white  mx-2 ${prop_hasFilter ? "" : "d-none"}">
               <component-form id="component-report-page-main-collapse-filter-form-${this._COMPONENT_RANDOM_ID}"></component-form>
           </div>

          ${this.templateFn("part_pages_main_formTabSection")}

          ${this.templateFn("part_pages_main_formTable")}
          
     </div>
     
</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    componentFn_render_pageMain_formNew(partName){
        const data = this.getPartProps(partName)

        if (data != null){
            const prop_descriptionPage         =  data.hasOwnProperty("prop_descriptionPage")       ?  data.prop_descriptionPage         : "";
            const prop_size                    =  data.hasOwnProperty("prop_size")                  ?  data.prop_size                    : "";
            const prop_iconPageSize            =  data.hasOwnProperty("prop_iconPageSize")          ?  data.prop_iconPageSize            : "";
            const prop_iconPage                =  data.hasOwnProperty("prop_iconPage")              ?  data.prop_iconPage                : "";
            const prop_iconPageColor           =  data.hasOwnProperty("prop_iconPageColor")         ?  data.prop_iconPageColor           : "";
            const prop_btnTitleNewPage         =  data.hasOwnProperty("prop_btnTitleNewPage")       ?  data.prop_btnTitleNewPage         : "";
            const prop_btnColorIconNewPage     =  data.hasOwnProperty("prop_btnColorIconNewPage")   ?  data.prop_btnColorIconNewPage     : "";
            const prop_btnHasPage              =  data.hasOwnProperty("prop_btnHasPage")            ?  data.prop_btnHasPage              : true;

            new window.ComponentPageCardInfo(
                `component-report-page-main-form-new-${this._COMPONENT_RANDOM_ID}` ,
                {
                    prop_size ,
                    prop_description:      prop_descriptionPage,
                    prop_icon:             prop_iconPage ,
                    prop_iconColor:        prop_iconPageColor ,
                    prop_iconSize:         prop_iconPageSize ,
                    prop_titleBtn:         prop_btnTitleNewPage ,
                    prop_colorIconBtn:     prop_btnColorIconNewPage ,
                    prop_iconBtn:          tools_icons.icon_plus_badge ,
                    prop_hasBtn:           prop_btnHasPage ,
                    fn_callback: (event)=>{
                        this.fn_onClickNew(event);
                    }
                }
            );

        }

    }

    template_render_pageMain_formTabSection(partName){
        const data = this.getPartProps(partName)

        if (data != null){

            const prop_tabs         =  data.hasOwnProperty("prop_tabs")            ?  data.prop_tabs             : null;
            const prop_size         =  data.hasOwnProperty("prop_size")            ?  data.prop_size             : null;
            const prop_tabsTitle    =  data.hasOwnProperty("prop_tabsTitle")       ?  data.prop_tabsTitle        : null;
            const directionRtl      = data.hasOwnProperty("directionRtl")          ? data.directionRtl           : (component_props != null && component_props.hasOwnProperty("directionRtl") ? component_props.directionRtl : false)

            const elFontSize = tools_css.getFontSize(prop_size);
            const elHeight = tools_css.getHeightSize(prop_size);


            if (prop_tabs != null && Array.isArray(prop_tabs) && prop_tabs.length > 0){
                return `
<section data-part-name="${partName}" 
         id="component-report-page-formTabSection-${this._COMPONENT_RANDOM_ID}"
         class="bg-white m-2 px-2 py-1" 
         >
         
     <style>
         #${this._COMPONENT_ID} #component-report-page-formTabSection-${this._COMPONENT_RANDOM_ID}{
             height:        ${elHeight+22}px;
         }
         #${this._COMPONENT_ID} #component-report-page-formTabSection-formTabs-${this._COMPONENT_RANDOM_ID}{
              width:         ${prop_tabsTitle != null ? "cal(100% - 150px)" : "100%"};
              float:         ${directionRtl ? "right" : "left"};
         }
     </style>
     
     ${this.templateFn("part_pages_main_formTabSection_title")}
     
     <div id="component-report-page-formTabSection-formTabs-${this._COMPONENT_RANDOM_ID}">
         <component-tabs id="component-report-page-formTabSection-tabs-${this._COMPONENT_RANDOM_ID}"></component-tabs>
     </div>
     
</section>
        `;
            }

        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    template_render_pageMain_formTabSection_title(partName){
        const data = this.getPartProps(partName)

        if (data != null){

            const prop_tabsTitle    =  data.hasOwnProperty("prop_tabsTitle")       ?  data.prop_tabsTitle        : null;
            const prop_size         =  data.hasOwnProperty("prop_size")            ?  data.prop_size             : null;
            const directionRtl      = data.hasOwnProperty("directionRtl")          ? data.directionRtl           : (component_props != null && component_props.hasOwnProperty("directionRtl") ? component_props.directionRtl : false)

            const elFontSize = tools_css.getFontSize(prop_size);
            const elHeight = tools_css.getHeightSize(prop_size);

            if (prop_tabsTitle != null){
                return `
<section data-part-name="${partName}" 
         id="component-report-page-formTabSection-title-${this._COMPONENT_RANDOM_ID}"
         class="" 
         >
         
     <style>
         #${this._COMPONENT_ID} #component-report-page-formTabSection-title-${this._COMPONENT_RANDOM_ID}{
              width:         150px;
              padding-top:   5px;
              height:        ${elHeight}px;
              line-height:   ${elHeight}px;
              font-size:     ${elFontSize}px;
              float:         ${directionRtl ? "right" : "left"};
         }
     </style>
     
     <b class="border-bottom px-2 d-block">
         ${prop_tabsTitle}
         :
     </b>
     
</section>
        `;
            }

        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    componentFn_render_pageMain_formTabSection_tabs(partName){
        const data = this.getPartProps(partName)

        if (data != null){

            const prop_size             =  data.hasOwnProperty("prop_size")            ?  data.prop_size             : null;
            const prop_tabs             =  data.hasOwnProperty("prop_tabs")            ?  data.prop_tabs             : null;
            const prop_tabSelected      =  data.hasOwnProperty("prop_tabSelected")     ?  data.prop_tabSelected      : null;
            const prop_tabsSendForm     =  data.hasOwnProperty("prop_tabsSendForm")    ?  data.prop_tabsSendForm     : true;

            if (prop_tabs != null && Array.isArray(prop_tabs) && prop_tabs.length > 0){

                new window.ComponentTabs(
                    `component-report-page-formTabSection-tabs-${this._COMPONENT_RANDOM_ID}` ,
                    {
                        classList:          []  ,

                        prop_type:          1 ,
                        prop_tabSelected:   prop_tabSelected ,
                        prop_tabs:          prop_tabs ,
                        fn_callback: (event , tabId) =>{
                            if (prop_tabsSendForm){
                                const elTab = this.fn_getInputHiddenTab();
                                if (elTab != null){
                                    elTab.value = tabId;
                                    this.call_refreshSearchReport();
                                }
                            }
                            this.fn_onClickTab(event , tabId);
                        }
                    }
                )

            }

        }
    }

    template_render_pageMain_fromTable(partName){
        const data = this.getPartProps(partName)

        if (data != null){
            const prop_size                        =  data.hasOwnProperty("prop_size")                          ?  data.prop_size                           : "";

            return `
<section data-part-name="${partName}" 
         id="component-report-page-main-form-table-${this._COMPONENT_RANDOM_ID}"
         class="mt-2  bg-white p-2  mx-2 " 
         >
         
     <style>
         #${this._COMPONENT_ID} #component-report-page-main-form-table-${this._COMPONENT_RANDOM_ID}{
         
         }
     </style>
     
     <component-widget     id="table-component-report-page-main-form-table-widget-table-${this._COMPONENT_RANDOM_ID}"></component-widget>
     
     <component-widget     id="table-component-report-page-main-form-table-widget-page-${this._COMPONENT_RANDOM_ID}"></component-widget>

</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    componentFn_render_pages(partName){
        const data = this.getPartProps(partName)

        if (data != null){
            const prop_size         =  data.hasOwnProperty("prop_size")           ?  data.prop_size            : "";
            const directionRtl      = data.hasOwnProperty("directionRtl")         ? data.directionRtl          : (component_props != null && component_props.hasOwnProperty("directionRtl") ? component_props.directionRtl : false)
            const prop_backgroundColorPage   =  data.hasOwnProperty("prop_backgroundColorPage")      ?  data.prop_backgroundColorPage   : "";
            this._PAGE_MANAGER = new window.ComponentChangePage(
                `component-report-change-page-${this._COMPONENT_RANDOM_ID}`  ,
                {
                    classList: [ "h-100" , "d-block"]  ,

                    prop_backgroundColorPage ,
                    prop_size ,
                    prop_effect: directionRtl? 1 : 3
                }
            )

        }
    }

    componentFn_render_pageMain_header(partName){
        const data = this.getPartProps(partName)

        if (data != null){
            const prop_sizeHeader         =  data.hasOwnProperty("prop_sizeHeader")           ?  data.prop_sizeHeader            : "";
            const prop_title              =  data.hasOwnProperty("prop_title")                ?  data.prop_title                 : "";
            const prop_langSelected       =  data.hasOwnProperty("prop_langSelected")         ?  data.prop_langSelected          : "";
            const prop_langs              =  data.hasOwnProperty("prop_langs")                ?  data.prop_langs                 : "";
            const prop_headerOptions      =  data.hasOwnProperty("prop_headerOptions")        ?  data.prop_headerOptions         : [];

            let langExcel = "";
            let langPrint = "";
            if (prop_langs != null && prop_langSelected != null && prop_langs.hasOwnProperty(prop_langSelected)){
                const langs= prop_langs[prop_langSelected];
                langExcel = langs?.excel ?? "Excel";
                langPrint = langs?.print ?? "Print";
            }


            const optionsList = [
                {
                    html: tools_icons.icon_excel ,
                    attrs: {
                        title: langExcel ,
                        name: "excel" ,
                    }
                } ,
                {
                    html: tools_icons.icon_print ,
                    attrs: {
                        title: langPrint ,
                        name: "print" ,
                    }
                }
            ];
            if (prop_headerOptions != null){
                for (let i = 0; i < prop_headerOptions.length; i++) {
                    const itemOption = prop_headerOptions[i];
                    optionsList.push(itemOption);
                }
            }

            new window.ComponentPageHeader(
                `component-report-page-main-header-${this._COMPONENT_RANDOM_ID}` ,
                {
                    prop_size:         prop_sizeHeader ,
                    prop_pageTitle:    prop_title ,
                    prop_hasIconBack:  false ,
                    prop_optionsList:optionsList ,

                    fn_onOptionClick: (event , optionName)=>{
                        this.call_openOrClosePage(optionName , true);
                        this.fn_onclickItemOption(event , optionName);
                    }
                }
            );

        }
    }


    componentFn_render_pageMain_form(partName){
        const data = this.getPartProps(partName)

        if (data != null){
            const prop_size             =  data.hasOwnProperty("prop_size")                                             ?  data.prop_size              : "";
            let prop_formFilter         =  data.hasOwnProperty("prop_formFilter")   && data.prop_formFilter != null     ?  data.prop_formFilter        : this._COMPONENT_SLOTS?.filter?.[0]?.html ?? "";
            const prop_langSelected     =  data.hasOwnProperty("prop_langSelected")                                     ?  data.prop_langSelected      : "";
            const prop_langs            =  data.hasOwnProperty("prop_langs")                                            ?  data.prop_langs             : {};
            const directionRtl          = data.hasOwnProperty("directionRtl")                                           ? data.directionRtl            : (component_props != null && component_props.hasOwnProperty("directionRtl") ? component_props.directionRtl : false)
            const prop_tabSelected      =  data.hasOwnProperty("prop_tabSelected")     ?  data.prop_tabSelected      : null;

            let langFilterBtn = "";
            if (prop_langs != null && prop_langSelected != null && prop_langs.hasOwnProperty(prop_langSelected)){
                const langs= prop_langs[prop_langSelected];
                langFilterBtn = langs?.filter_btn ?? "Search";
            }

            if (prop_formFilter != null){
                prop_formFilter += `<input id="component-report-page-main-collapse-filter-form-${this._COMPONENT_RANDOM_ID}-input-page" type="hidden" name="page" value="1"/>`
                prop_formFilter += `<input id="component-report-page-main-collapse-filter-form-${this._COMPONENT_RANDOM_ID}-input-page-per" type="hidden" name="per_page" value="${this._PER_PAGE_25}"/>`
                prop_formFilter += `<input id="component-report-page-main-collapse-filter-form-${this._COMPONENT_RANDOM_ID}-input-tab" type="hidden" name="report_tab" value="${prop_tabSelected}"/>`
            }


            this._PAGE_FILTER = new window.ComponentForm(
                `component-report-page-main-collapse-filter-form-${this._COMPONENT_RANDOM_ID}` ,
                {
                    // prop_title: "test Form"  ,
                    prop_borderClass: ["px-2"] ,
                    prop_borderStyles: {
                        "display" : "flow-root"
                    },
                    prop_formClass: [
                        "m-2" , "px-2" , "p-lg-0" , "d-block" , "d-lg-inline-block"
                    ] ,
                    prop_formStyles: {
                        "float" : directionRtl ? "right" : "left" ,
                        "width" : "calc(100% - clamp(0px, (100vw - 1024px) * 9999, 225px))"  ,
                    } ,
                    prop_btnformClass : [
                        "mt-0" , "mt-lg-2"
                    ] ,
                    prop_btnformStyles : {
                        "float" : directionRtl ? "left" : "right" ,
                        "width" : "200px"
                    },
                    prop_size ,
                    prop_showErrorStepper: true ,
                    prop_forms: prop_formFilter ,
                    prop_btnSubmit: {
                        prop_title: `<b>${langFilterBtn}</b>`
                    } ,
                    prop_data: [] ,
                    prop_runFetch : false ,
                    fn_onClickSubmit: (event , url , formData , extraData) => {
                        this.fn_onFetchData(formData, extraData)
                    } ,
                }
            )
        }
    }

    componentFn_render_pageMain_fromTable_table(partName){
        const data = this.getPartProps(partName)

        if (data != null){
            const prop_size      =  data.hasOwnProperty("prop_size")            ?  data.prop_size               : null;
            const prop_order     =  data.hasOwnProperty("prop_order")           ?  data.prop_order              : [];
            const prop_header    =  data.hasOwnProperty("prop_header")          ?  data.prop_header             : [];
            const prop_options   =  data.hasOwnProperty("prop_options")         ?  data.prop_options            : [];
            const directionRtl   = data.hasOwnProperty("directionRtl")          ? data.directionRtl             : (component_props != null && component_props.hasOwnProperty("directionRtl") ? component_props.directionRtl : false)


            new window.ComponentTableResponsible(
                `table-component-report-page-main-form-table-table-responsible-${this._COMPONENT_RANDOM_ID}` ,
                {
                    classList: [" col-12" ," row" , "mt-2" , "p-0" , "m-0"   ,/*, directionRtl ? "me-0 ms-4" : "ms-0 me-4"*/]   ,
                    styles: {
                        "margin-top" : "45px !important"
                    },

                    prop_size ,
                    prop_order ,
                    prop_header ,
                    prop_data: this._PAGE_REPORT ,
                    prop_options ,
                    fn_callback: (event , optionName , optionId) =>{
                        this.fn_onClickTableOption(event , optionName , optionId);
                    }
                }
            )
        }
    }

    componentFn_render_pageMain_fromTable_pageNumber(partName){
        const data = this.getPartProps(partName)

        if (data != null){
            const prop_size           =  data.hasOwnProperty("prop_size")               ?  data.prop_size               : null;
            const prop_pageGap        =  data.hasOwnProperty("prop_pageGap")            ?  data.prop_pageGap            : null;

            new window.ComponentPageNumber(
                `table-component-report-page-main-form-table-page-number-${this._COMPONENT_RANDOM_ID}` ,
                {
                    classList:          "col-lg-6 col-12"  ,
                    prop_size,
                    prop_pageSelected:  this._PAGE_SELECTED ,
                    prop_pageTotal:     this._PAGE_TOTAL ,
                    prop_pageGap:       prop_pageGap ,

                    fn_onBackClick: (e , page)=>{
                        const elPage = this.fn_getInputHiddenPage();
                        if (elPage != null){
                            elPage.value = page;
                            this.call_refreshSearchReport();
                        }
                    }
                }
            )

        }
    }

    componentFn_render_pageMain_fromTable_pageData(partName){
        const data = this.getPartProps(partName)

        if (data != null){
            const prop_size             =  data.hasOwnProperty("prop_size")               ?  data.prop_size               : null;

            new window.ComponentPageData(
                `table-component-report-page-main-form-table-page-data-${this._COMPONENT_RANDOM_ID}` ,
                {
                    classList: "col-lg-5 col-12"  ,
                    prop_size ,
                    prop_fromData:   this._PAGE_FROM_DATA ,
                    prop_toData:     this._PAGE_TO_DATA ,
                    prop_totalData:  this._PAGE_TOTAL_DATA ,
                }
            )
        }
    }

    componentFn_render_pageMain_fromTable_pagePear(partName){
        const data = this.getPartProps(partName)

        if (data != null){
            const prop_size             =  data.hasOwnProperty("prop_size")               ?  data.prop_size               : null;
            const directionRtl = data.hasOwnProperty("directionRtl") ? data.directionRtl : (component_props != null && component_props.hasOwnProperty("directionRtl") ? component_props.directionRtl : false)

            const elHeight = tools_css.getHeightSize(prop_size);

            new window.ComponentSelectOption(
                `table-component-report-page-main-form-table-page-per-${this._COMPONENT_RANDOM_ID}` ,
                {
                    classList: "col-lg-1 col-12"  ,

                    prop_labelShow:          false ,
                    prop_size:               prop_size ,
                    prop_itemSelected:       this._PAGE_PER_DATA  ,

                    prop_positionLeft:       directionRtl ? 0 : "",
                    prop_positionRight:       !directionRtl ? 0 : "",
                    prop_positionBottom:     `calc( -100% + ${elHeight}px)`,

                    prop_options: [
                        {id: this._PER_PAGE_10 , name: this._PER_PAGE_10} ,
                        {id: this._PER_PAGE_25 , name: this._PER_PAGE_25} ,
                        {id: this._PER_PAGE_50 , name: this._PER_PAGE_50} ,
                        {id: this._PER_PAGE_100 , name: this._PER_PAGE_100} ,
                        {id: this._PER_PAGE_200 , name: this._PER_PAGE_200} ,
                    ] ,

                    fn_callback:  (event , index)=>{
                        const elPage = this.fn_getInputHiddenPage();
                        const elPagePer = this.fn_getInputHiddenPagePer();
                        if (elPagePer != null && elPage != null){
                            elPage.value = 1;
                            elPagePer.value = index;
                            this.call_refreshSearchReport();
                        }
                    } ,

                }
            )
        }
    }



    //// PAGE EXCEL
    template_render_pageExcel(partName){
        const data = this.getPartProps(partName)

        if (data != null){

            return `
<section data-part-name="${partName}" 
         id="component-report-page-excel-${this._COMPONENT_RANDOM_ID}"
         class="h-100" 
         >
         
     <style>
         #${this._COMPONENT_ID} #component-report-page-excel-${this._COMPONENT_RANDOM_ID}{
              
         }
         #${this._COMPONENT_ID} #component-report-page-excel-inside-${this._COMPONENT_RANDOM_ID}{
              
         }
        
     </style>
     
     <component-page-header id="component-report-page-excel-header-${this._COMPONENT_RANDOM_ID}"></component-page-header>
     
     <div id="component-report-page-excel-inside-${this._COMPONENT_RANDOM_ID}" class="h-100 overflow-auto mx-2 mt-2">
     
         <component-tools-table-to-excel id="component-report-page-excel-tool-${this._COMPONENT_RANDOM_ID}"> </component-tools-table-to-excel>
          
     </div>
     
</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    componentFn_render_pageExcel_header(partName){
        const data = this.getPartProps(partName)

        if (data != null){
            const prop_sizeHeader         =  data.hasOwnProperty("prop_sizeHeader")           ?  data.prop_sizeHeader            : "";
            const prop_langSelected       =  data.hasOwnProperty("prop_langSelected")         ?  data.prop_langSelected          : "";
            const prop_langs              =  data.hasOwnProperty("prop_langs")                ?  data.prop_langs                 : "";
            const prop_title              =  data.hasOwnProperty("prop_title")                ?  data.prop_title                 : "";

            let langExcel = "";
            if (prop_langs != null && prop_langSelected != null && prop_langs.hasOwnProperty(prop_langSelected)){
                const langs= prop_langs[prop_langSelected];
                langExcel = langs?.excel ?? "Excel";
            }

            new window.ComponentPageHeader(
                `component-report-page-excel-header-${this._COMPONENT_RANDOM_ID}` ,
                {
                    prop_size:         prop_sizeHeader ,
                    prop_pageTitle:    langExcel ,
                    prop_hasIconBack:  true ,
                    prop_optionsList:[

                    ] ,

                    prop_pageNav: [
                        {
                            title: prop_title ,
                        } ,
                    ] ,

                    fn_onclickItemNav: (event , navName)=>{
                        this.call_openOrClosePage("excel" , false);
                    },

                    fn_onBackClick: (event)=>{
                        this.call_openOrClosePage("excel" , false);
                    },
                }
            );

        }
    }

    componentFn_render_pageExcel_tool(partName){
        const data = this.getPartProps(partName)

        if (data != null){
            const prop_size                       =  data.hasOwnProperty("prop_size")                    ?  data.prop_size                       : "";
            const prop_header                     =  data.hasOwnProperty("prop_header")                  ?  data.prop_header                     : "";

            let columns=[];
            if(prop_header != null && Array.isArray(prop_header)){
                for (let i = 0; i < prop_header.length; i++) {
                    const itemHeader = prop_header[i];
                    if (itemHeader != null && itemHeader.hasOwnProperty("id") && itemHeader.hasOwnProperty("content")){
                        columns.push({
                            name: itemHeader.id,
                            title: itemHeader.content
                        })
                    }
                }
            }

            new window.ComponentToolsTableToExcel(
                `component-report-page-excel-tool-${this._COMPONENT_RANDOM_ID}` ,
                {
                    prop_size ,
                    prop_columns : columns ,
                    fn_callback: (order , data) => {
                        this._COLUMNS_ORDER_EXCEL = order;
                        this._COLUMNS_SELECTED_EXCEL = data;
                    } ,
                }
            );

        }
    }



    //// PAGE PRINT
    template_render_pagePrint(partName){
        const data = this.getPartProps(partName)

        if (data != null){

            return `
<section data-part-name="${partName}" 
         id="component-report-page-print-${this._COMPONENT_RANDOM_ID}"
         class="h-100" 
         >
         
     <style>
         #${this._COMPONENT_ID} #component-report-page-print-${this._COMPONENT_RANDOM_ID}{
            
         }
         #${this._COMPONENT_ID} #component-report-page-print-inside-${this._COMPONENT_RANDOM_ID}{
              
         }
        
     </style>
     
     <component-page-header id="component-report-page-print-header-${this._COMPONENT_RANDOM_ID}"></component-page-header>
     
     <div id="component-report-page-print-inside-${this._COMPONENT_RANDOM_ID}" class="h-100 overflow-auto mx-2 mt-2">
     
        <component-tools-table-to-print id="component-report-page-print-tool-${this._COMPONENT_RANDOM_ID}"> </component-tools-table-to-print>
          
     </div>
     
</section>
        `;
        }

        return `
<section data-part-name="${partName}"></section>
        `;
    }

    componentFn_render_pagePrint_header(partName){
        const data = this.getPartProps(partName)

        if (data != null){
            const prop_sizeHeader         =  data.hasOwnProperty("prop_sizeHeader")           ?  data.prop_sizeHeader            : "";
            const prop_langSelected       =  data.hasOwnProperty("prop_langSelected")         ?  data.prop_langSelected          : "";
            const prop_langs              =  data.hasOwnProperty("prop_langs")                ?  data.prop_langs                 : "";
            const prop_title              =  data.hasOwnProperty("prop_title")                ?  data.prop_title                 : "";

            let langPrint = "";
            if (prop_langs != null && prop_langSelected != null && prop_langs.hasOwnProperty(prop_langSelected)){
                const langs= prop_langs[prop_langSelected];
                langPrint = langs?.print ?? "Print";
            }
            new window.ComponentPageHeader(
                `component-report-page-print-header-${this._COMPONENT_RANDOM_ID}` ,
                {
                    prop_size:         prop_sizeHeader ,
                    prop_pageTitle:    langPrint ,
                    prop_hasIconBack:  true ,
                    prop_optionsList:[

                    ] ,
                    prop_pageNav: [
                        {
                            title: prop_title ,
                        } ,
                    ] ,

                    fn_onclickItemNav: (event , navName)=>{
                        this.call_openOrClosePage("print" , false);
                    },

                    fn_onBackClick: (event)=>{
                        this.call_openOrClosePage("print" , false);
                    },
                }
            );

        }
    }

    componentFn_render_pagePrint_tool(partName){
        const data = this.getPartProps(partName)

        if (data != null){
            const prop_size                       =  data.hasOwnProperty("prop_size")                    ?  data.prop_size                       : "";
            const prop_header                     =  data.hasOwnProperty("prop_header")                  ?  data.prop_header                     : "";

            let columns=[];
            if(prop_header != null && Array.isArray(prop_header)){
                for (let i = 0; i < prop_header.length; i++) {
                    const itemHeader = prop_header[i];
                    if (itemHeader != null && itemHeader.hasOwnProperty("id") && itemHeader.hasOwnProperty("content")){
                        columns.push({
                            name: itemHeader.id,
                            title: itemHeader.content
                        })
                    }
                }
            }

            new window.ComponentToolsTableToPrint(
                `component-report-page-print-tool-${this._COMPONENT_RANDOM_ID}` ,
                {
                    prop_size ,
                    prop_columns : columns ,
                    fn_callback: (order , data) => {
                        this._COLUMNS_ORDER_PRINT = order;
                        this._COLUMNS_SELECTED_PRINT = data;
                    } ,
                }
            );

        }
    }



    //// PAGES Other
    componentFn_render_pagesOther_header(partName){
        const data = this.getPartProps(partName)

        if (data != null){
            const prop_sizeHeader    =  data.hasOwnProperty("prop_sizeHeader")                                ?  data.prop_sizeHeader       : "";
            const prop_pages         =  data.hasOwnProperty("prop_pages") && data.prop_pages != null          ?  data.prop_pages            : this._COMPONENT_SLOTS?.pages ?? [];

            if (prop_pages != null && Array.isArray(prop_pages)){
                for (let i = 0; i < prop_pages.length; i++) {
                    const itemPage = prop_pages[i];
                    if (itemPage != null && itemPage.hasOwnProperty("html") && itemPage.hasOwnProperty("attrs") && itemPage.attrs.hasOwnProperty("name")){


                        const pageName = itemPage?.attrs?.name ?? null;
                        let pageNav =[];
                        if (pageName != null && this._COMPONENT_SLOTS != null){
                            Object.keys(this._COMPONENT_SLOTS).forEach(key => {
                                if (key == "nav."+pageName){
                                    pageNav = this._COMPONENT_SLOTS[key];
                                }
                            })
                        }

                        new window.ComponentPageHeader(
                            `component-report-page-other-header-${this._COMPONENT_RANDOM_ID}-page-${itemPage.attrs.name}` ,
                            {
                                prop_size:         prop_sizeHeader ,
                                prop_hasIconBack:  true ,
                                prop_optionsList:[

                                ] ,
                                prop_pageNav: pageNav ,

                                fn_onclickItemNav: (event , navName)=>{
                                    this.fn_onclickItemNav(event , navName )
                                },

                                fn_onBackClick: (event)=>{
                                    this.call_openOrClosePage(itemPage.attrs.name , false);
                                },
                            }
                        );

                    }

                }
            }

        }
    }

    /* ---------------------------------------------
       FUNCTIONs
    --------------------------------------------- */

    fn_getInputHiddenTab(){
        return document.querySelector(`#component-report-page-main-collapse-filter-form-${this._COMPONENT_RANDOM_ID}-input-tab`);
    }
    fn_getInputHiddenPage(){
        return document.querySelector(`#component-report-page-main-collapse-filter-form-${this._COMPONENT_RANDOM_ID}-input-page`);
    }
    fn_getInputHiddenPagePer(){
        return document.querySelector(`#component-report-page-main-collapse-filter-form-${this._COMPONENT_RANDOM_ID}-input-page-per`);
    }


    fn_onFetchData( formData, extraData){
        const fetchData = {
            "formData": formData,
            "data": extraData
        };

        this.fn_onFetchData_table(fetchData);
        this.fn_onFetchData_page(fetchData);
    }
    fn_onFetchData_table( fetchData){
        const data = this._COMPONENT_CONFIG;
        const prop_url_table   =  data.hasOwnProperty("prop_url_table")      ?  data.prop_url_table   : "";

        new window.ComponentWidget(
            `table-component-report-page-main-form-table-widget-table-${this._COMPONENT_RANDOM_ID}` ,
            {
                prop_layoutContent: `
 <component-table-responsible  id="table-component-report-page-main-form-table-table-responsible-${this._COMPONENT_RANDOM_ID}"></component-table-responsible>
                ` ,
                prop_fetch : {
                    url: prop_url_table ,
                    data: fetchData
                },
                fn_onGetResponse: (response , request)=>{
                    this._PAGE_REPORT = response;
                    this.templateFn("part_pages_main_formTable_table");

                    if (data.hasOwnProperty("fn_onGetResponseData") && typeof data.fn_onGetResponseData != null){
                        data.fn_onGetResponseData(response , request);
                    }
                }
            }
        );

    }
    fn_onFetchData_page( fetchData){
        const data = this._COMPONENT_CONFIG;
        const prop_url_page   =  data.hasOwnProperty("prop_url_page")         ?  data.prop_url_page   : "";
        const prop_hasPageInfo   =  data.hasOwnProperty("prop_hasPageInfo")   ?  data.prop_hasPageInfo   : true;

        if (prop_hasPageInfo) {
            new window.ComponentWidget(
                `table-component-report-page-main-form-table-widget-page-${this._COMPONENT_RANDOM_ID}` ,
                {
                    prop_layoutContent: `
<div class="row py-0 px-2 py-2 my-0 mx-2 border-top">
     
         <component-page-number  id="table-component-report-page-main-form-table-page-number-${this._COMPONENT_RANDOM_ID}"></component-page-number>
         
         <component-page-data  id="table-component-report-page-main-form-table-page-data-${this._COMPONENT_RANDOM_ID}"></component-page-data>
         
         <component-select-option id="table-component-report-page-main-form-table-page-per-${this._COMPONENT_RANDOM_ID}"></component-select-option>

</div>
                ` ,
                    prop_fetch : {
                        url: prop_url_page ,
                        data: fetchData
                    },
                    fn_onGetResponse: (response , request)=>{
                        this._PAGE_TOTAL_DATA = response?.totalData   ?? 0;
                        this._PAGE_SELECTED =   response?.page        ?? 1;
                        this._PAGE_PER_DATA =   response?.perPage     ?? 25;

                        this._PAGE_TOTAL = Math.ceil( this._PAGE_TOTAL_DATA / this._PAGE_PER_DATA)
                        this._PAGE_FROM_DATA = ((this._PAGE_SELECTED-1)*this._PAGE_PER_DATA) + 1
                        this._PAGE_TO_DATA = (this._PAGE_SELECTED)*this._PAGE_PER_DATA < this._PAGE_TOTAL ? this._PAGE_TOTAL : (this._PAGE_SELECTED)*this._PAGE_PER_DATA

                        this.templateFn("part_pages_main_formTable_pageNumber");
                        this.templateFn("part_pages_main_formTable_pageData");
                        this.templateFn("part_pages_main_formTable_pagePer");

                        if (data.hasOwnProperty("fn_onGetResponsePage") && typeof data.fn_onGetResponsePage != null){
                            data.fn_onGetResponsePage(response , request);
                        }
                    }
                }
            );


        }

    }

    fn_getHtmlPages(prop_pages ){
        let html = "";

        if (prop_pages != null && Array.isArray(prop_pages)){
            for (let i = 0; i < prop_pages.length ; i++) {
                const itemPage = prop_pages[i];
                if (itemPage != null && itemPage.hasOwnProperty("html") && itemPage.hasOwnProperty("attrs") && itemPage.attrs.hasOwnProperty("name")){
                    html += `
                        <component-pages name="${itemPage.attrs.name}">
                        
                            <div id="component-report-page-other-header-${this._COMPONENT_RANDOM_ID}-page-${itemPage.attrs.name}">
                               <style>
                                   #${this._COMPONENT_ID} #component-report-page-other-header-${this._COMPONENT_RANDOM_ID}-page-${itemPage.attrs.name}{
                                      height: 100%;
                                   }
                               </style>
                               
                               <component-page-header id="component-report-page-other-header-${this._COMPONENT_RANDOM_ID}-page-${itemPage.attrs.name}">
                                  <component-body>
                                     ${itemPage?.attrs?.title ?? itemPage.attrs.name }
                                  </component-body>
                               </component-page-header>
                               
                               ${itemPage.html}
                               
                            </div>
                            
                        </component-pages>
                    `
                }
            }
        }

        return html;
    }

    fn_onClickTableOption(event , optionName , optionId){
        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("fn_onClickTableOption") && typeof data.fn_onClickTableOption != null){
            data.fn_onClickTableOption(event , optionName , optionId);
        }
    }

    fn_onClickNew(event){
        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("fn_onClickNew") && typeof data.fn_onClickNew != null){
            data.fn_onClickNew(event);
        }
    }


    fn_onClickTab(event , tabId){
        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("fn_onClickTab") && typeof data.fn_onClickTab != null){
            data.fn_onClickTab(event , tabId);
        }
    }

    call_refreshSearchReport(){
        this._PAGE_FILTER.call_onCLickBtnSubmit();
    }

    call_openOrClosePage(pageName , status){
        this._PAGE_MANAGER.call_openOrClosePage(pageName, status);
    }

    fn_onclickItemNav(event , navName){
        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("fn_onclickItemNav") && typeof data.fn_onclickItemNav != null){
            data.fn_onclickItemNav(event , navName);
        }
    }
    fn_onclickItemOption(event , optionName){
        const data = this._COMPONENT_CONFIG;
        if (data.hasOwnProperty("fn_onclickItemOption") && typeof data.fn_onclickItemOption != null){
            data.fn_onclickItemOption(event , optionName);
        }
    }

}